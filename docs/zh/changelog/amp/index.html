<!doctype html><html ⚡ lang=zh> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>变更日志 | ClickHouse文档</title><link href=https://clickhouse.tech/docs/zh/changelog/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "变更日志 | ClickHouse文档",
"mainEntityOfPage": "https://clickhouse.tech/docs/zh/changelog/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "变更日志 | ClickHouse文档",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer,header,main{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}b{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}template{display:none}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.mark,mark{padding:.2em;background-color:#fcf8e3}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-success{background-color:#c3e6cb}.table-warning{background-color:#ffeeba}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.is-invalid~.invalid-feedback{display:block}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-success{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.btn-success:focus{color:#fff;background-color:#218838;border-color:#1e7e34;box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.btn-success:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-success{color:#28a745;border-color:#28a745}.btn-outline-success:hover{color:#fff;background-color:#28a745;border-color:#28a745}.btn-outline-success:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.btn-outline-success:disabled{color:#28a745;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-file,.input-group>.custom-select{position:relative;-ms-flex:1 1 0;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-file+.custom-file,.input-group>.custom-file+.custom-select,.input-group>.custom-select+.custom-file,.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-file .custom-file-input:focus{z-index:4}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.custom-file{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-file-input{position:relative;z-index:2;width:100%;height:calc(1.5em+.75rem+2px);margin:0;opacity:0}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-success{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.alert-success .alert-link{color:#0b2e13}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.alert-warning .alert-link{color:#533f03}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-success{background-color:#28a745}a.bg-success:focus,a.bg-success:hover{background-color:#1e7e34}.bg-warning{background-color:#ffc107}a.bg-warning:focus,a.bg-warning:hover{background-color:#d39e00}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}@media print{.d-print-none{display:none}.d-print-inline{display:inline}.d-print-inline-block{display:inline-block}.d-print-block{display:block}.d-print-table{display:table}.d-print-table-row{display:table-row}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.mt-0,.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.mt-1,.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.mt-2,.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.mt-3,.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.mt-4,.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.mt-5,.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pr-0{padding-right:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pr-1{padding-right:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pr-2{padding-right:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pr-3{padding-right:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pr-4{padding-right:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pr-5{padding-right:3rem}.pb-5,.py-5{padding-bottom:3rem}.mt-n1,.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.mt-n2,.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.mt-n3,.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.mt-n4,.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.mt-n5,.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.mt-md-0,.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.mt-md-1,.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.mt-md-2,.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.mt-md-3,.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.mt-md-4,.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.mt-md-5,.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pr-md-0{padding-right:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pr-md-1{padding-right:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pr-md-2{padding-right:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pr-md-3{padding-right:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pr-md-4{padding-right:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pr-md-5{padding-right:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.mt-md-n1,.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.mt-md-n2,.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.mt-md-n3,.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.mt-md-n4,.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.mt-md-n5,.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.mt-lg-0,.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.mt-lg-1,.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.mt-lg-2,.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.mt-lg-3,.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.mt-lg-4,.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.mt-lg-5,.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pr-lg-0{padding-right:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pr-lg-1{padding-right:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pr-lg-2{padding-right:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pr-lg-3{padding-right:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pr-lg-4{padding-right:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pr-lg-5{padding-right:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.mt-lg-n3,.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.mt-lg-n5,.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-success{color:#28a745}a.text-success:focus,a.text-success:hover{color:#19692c}.text-warning{color:#ffc107}a.text-warning:focus,a.text-warning:hover{color:#ba8b00}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}img,tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,tr{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee;padding:.125rem .25rem}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .n{color:#2f1e2e}.syntax .o{color:#800}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .gh{color:#2f1e2e;font-weight:700}.syntax .ld{color:#48b685}.syntax .s{color:#48b685}.syntax .no{color:#ef6155}.syntax .ne{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .s2{color:#48b685}.syntax .sh{color:#48b685}.syntax .s1{color:#080}.syntax .vi{color:#ef6155}@media(prefers-color-scheme:dark){.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .sh{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .gh{color:#f8f9fa;font-weight:700}.syntax .py{color:#f8f9fa}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Help wanted!</p> <p class=lead>The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href=/docs/en/changelog/ class=alert-link>You can also use the original English version as a reference.</a></p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/changelog/index.md target=_blank rel="external nofollow noreferrer"> Help ClickHouse documentation by editing this page </a> </p> </div> <h2 id=clickhouse-release-v20-3>碌莽禄release拢.0755-88888888<a class=headerlink href=../amp/#clickhouse-release-v20-3 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-v20-3-4-10-2020-03-20>ClickHouse版本v20.3.4.10,2020-03-20<a class=headerlink href=../amp/#clickhouse-release-v20-3-4-10-2020-03-20 title="Permanent link"> </a></h3> <h4 id=bug-fix>错误修复<a class=headerlink href=../amp/#bug-fix title="Permanent link"> </a></h4> <ul> <li>此版本还包含20.1.8.41的所有错误修复</li> <li>修复丢失 <code class=syntax>rows_before_limit_at_least</code> 用于通过http进行查询（使用处理器管道）。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9730 rel="external nofollow noreferrer" target=_blank>#9730</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9757 rel="external nofollow noreferrer" target=_blank>#9757</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> </ul> <h3 id=clickhouse-release-v20-3-3-6-2020-03-17>ClickHouse释放v20.3.3.6,2020-03-17<a class=headerlink href=../amp/#clickhouse-release-v20-3-3-6-2020-03-17 title="Permanent link"> </a></h3> <h4 id=bug-fix-1>错误修复<a class=headerlink href=../amp/#bug-fix-1 title="Permanent link"> </a></h4> <ul> <li>此版本还包含20.1.7.38的所有错误修复</li> <li>修复复制中的错误，如果用户在以前的版本上执行了突变，则不允许复制工作。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9645 rel="external nofollow noreferrer" target=_blank>#9645</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9652 rel="external nofollow noreferrer" target=_blank>#9652</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>). 它使版本20.3再次向后兼容。</li> <li>添加设置 <code class=syntax>use_compact_format_in_distributed_parts_names</code> 它允许写文件 <code class=syntax>INSERT</code> 查询到 <code class=syntax>Distributed</code> 表格格式更紧凑。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9647 rel="external nofollow noreferrer" target=_blank>#9647</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9653 rel="external nofollow noreferrer" target=_blank>#9653</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>). 它使版本20.3再次向后兼容。</li> </ul> <h3 id=clickhouse-release-v20-3-2-1-2020-03-12>ClickHouse版本v20.3.2.1,2020-03-12<a class=headerlink href=../amp/#clickhouse-release-v20-3-2-1-2020-03-12 title="Permanent link"> </a></h3> <h4 id=backward-incompatible-change>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change title="Permanent link"> </a></h4> <ul> <li>修正了这个问题 <code class=syntax>file name too long</code> 当发送数据 <code class=syntax>Distributed</code> 大量副本的表。 修复了服务器日志中显示副本凭据的问题。 磁盘上的目录名格式已更改为 <code class=syntax>[shard{shard_index}[_replica{replica_index}]]</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8911 rel="external nofollow noreferrer" target=_blank>#8911</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>）升级到新版本后，您将无法在没有人工干预的情况下降级，因为旧的服务器版本无法识别新的目录格式。 如果要降级，则必须手动将相应的目录重命名为旧格式。 仅当您使用了异步时，此更改才相关 <code class=syntax>INSERT</code>s到 <code class=syntax>Distributed</code> 桌子 在版本20.3.3中，我们将介绍一个设置，让您逐渐启用新格式。</li> <li>更改了mutation命令的复制日志条目的格式。 在安装新版本之前，您必须等待旧的突变处理。</li> <li>实现简单的内存分析器，将堆栈跟踪转储到 <code class=syntax>system.trace_log</code> 超过软分配限制的每N个字节 <a href=https://github.com/ClickHouse/ClickHouse/pull/8765 rel="external nofollow noreferrer" target=_blank>#8765</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/9472 rel="external nofollow noreferrer" target=_blank>#9472</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>）列 <code class=syntax>system.trace_log</code> 从改名 <code class=syntax>timer_type</code> 到 <code class=syntax>trace_type</code>. 这将需要改变第三方性能分析和flamegraph处理工具。</li> <li>在任何地方使用操作系统线程id，而不是内部线程编号。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7477 rel="external nofollow noreferrer" target=_blank>#7477</a> 老 <code class=syntax>clickhouse-client</code> 无法接收从服务器发送的日志，当设置 <code class=syntax>send_logs_level</code> 已启用，因为结构化日志消息的名称和类型已更改。 另一方面，不同的服务器版本可以相互发送不同类型的日志。 当你不使用 <code class=syntax>send_logs_level</code> 设置，你不应该关心。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8954 rel="external nofollow noreferrer" target=_blank>#8954</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>删除 <code class=syntax>indexHint</code> 功能 <a href=https://github.com/ClickHouse/ClickHouse/pull/9542 rel="external nofollow noreferrer" target=_blank>#9542</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>删除 <code class=syntax>findClusterIndex</code>, <code class=syntax>findClusterValue</code> 功能。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8641 rel="external nofollow noreferrer" target=_blank>#8641</a>. 如果您正在使用这些功能，请发送电子邮件至 <code class=syntax>clickhouse-feedback@yandex-team.com</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9543 rel="external nofollow noreferrer" target=_blank>#9543</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>现在不允许创建列或添加列 <code class=syntax>SELECT</code> 子查询作为默认表达式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9481 rel="external nofollow noreferrer" target=_blank>#9481</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>需要联接中的子查询的别名。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9274 rel="external nofollow noreferrer" target=_blank>#9274</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>改进 <code class=syntax>ALTER MODIFY/ADD</code> 查询逻辑。 现在你不能 <code class=syntax>ADD</code> 不带类型的列, <code class=syntax>MODIFY</code> 默认表达式不改变列的类型和 <code class=syntax>MODIFY</code> type不会丢失默认表达式值。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8669 rel="external nofollow noreferrer" target=_blank>#8669</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9227 rel="external nofollow noreferrer" target=_blank>#9227</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>要求重新启动服务器以应用日志记录配置中的更改。 这是一种临时解决方法，可以避免服务器将日志记录到已删除的日志文件中的错误（请参阅 <a href=https://github.com/ClickHouse/ClickHouse/issues/8696 rel="external nofollow noreferrer" target=_blank>#8696</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8707 rel="external nofollow noreferrer" target=_blank>#8707</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>设置 <code class=syntax>experimental_use_processors</code> 默认情况下启用。 此设置允许使用新的查询管道。 这是内部重构，我们期望没有明显的变化。 如果您将看到任何问题，请将其设置为返回零。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8768 rel="external nofollow noreferrer" target=_blank>#8768</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> </ul> <h4 id=new-feature>新功能<a class=headerlink href=../amp/#new-feature title="Permanent link"> </a></h4> <ul> <li>添加 <code class=syntax>Avro</code> 和 <code class=syntax>AvroConfluent</code> 输入/输出格式 <a href=https://github.com/ClickHouse/ClickHouse/pull/8571 rel="external nofollow noreferrer" target=_blank>#8571</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer" target=_blank>安德鲁Onyshchuk</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8957 rel="external nofollow noreferrer" target=_blank>#8957</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer" target=_blank>安德鲁Onyshchuk</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8717 rel="external nofollow noreferrer" target=_blank>#8717</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>过期密钥的多线程和非阻塞更新 <code class=syntax>cache</code> 字典（可选的权限读取旧的）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8303 rel="external nofollow noreferrer" target=_blank>#8303</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>添加查询 <code class=syntax>ALTER ... MATERIALIZE TTL</code>. 它运行突变，强制通过TTL删除过期的数据，并重新计算所有部分有关ttl的元信息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8775 rel="external nofollow noreferrer" target=_blank>#8775</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>如果需要，从HashJoin切换到MergeJoin（在磁盘上 <a href=https://github.com/ClickHouse/ClickHouse/pull/9082 rel="external nofollow noreferrer" target=_blank>#9082</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>已添加 <code class=syntax>MOVE PARTITION</code> 命令 <code class=syntax>ALTER TABLE</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/4729 rel="external nofollow noreferrer" target=_blank>#4729</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6168 rel="external nofollow noreferrer" target=_blank>#6168</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li> <li>动态地从配置文件重新加载存储配置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8594 rel="external nofollow noreferrer" target=_blank>#8594</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>允许更改 <code class=syntax>storage_policy</code> 为了不那么富有的人。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8107 rel="external nofollow noreferrer" target=_blank>#8107</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>增加了对s3存储和表功能的globs/通配符的支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8851 rel="external nofollow noreferrer" target=_blank>#8851</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>执行 <code class=syntax>bitAnd</code>, <code class=syntax>bitOr</code>, <code class=syntax>bitXor</code>, <code class=syntax>bitNot</code> 为 <code class=syntax>FixedString(N)</code> 数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9091 rel="external nofollow noreferrer" target=_blank>#9091</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li> <li>添加功能 <code class=syntax>bitCount</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8702 rel="external nofollow noreferrer" target=_blank>#8702</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8708 rel="external nofollow noreferrer" target=_blank>#8708</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8749 rel="external nofollow noreferrer" target=_blank>#8749</a> (<a href=https://github.com/ikopylov rel="external nofollow noreferrer" target=_blank>ikopylov</a>)</li> <li>添加 <code class=syntax>generateRandom</code> 表函数生成具有给定模式的随机行。 允许用数据填充任意测试表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8994 rel="external nofollow noreferrer" target=_blank>#8994</a> (<a href=https://github.com/qoega rel="external nofollow noreferrer" target=_blank>Ilya Yatsishin</a>)</li> <li><code class=syntax>JSONEachRowFormat</code>：当对象包含在顶层数组中时，支持特殊情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8860 rel="external nofollow noreferrer" target=_blank>#8860</a> (<a href=https://github.com/Avogar rel="external nofollow noreferrer" target=_blank>克鲁格洛夫*帕维尔</a>)</li> <li>现在可以创建一个列 <code class=syntax>DEFAULT</code> 取决于默认列的表达式 <code class=syntax>ALIAS</code> 表达。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9489 rel="external nofollow noreferrer" target=_blank>#9489</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>允许指定 <code class=syntax>--limit</code> 超过源数据大小 <code class=syntax>clickhouse-obfuscator</code>. 数据将以不同的随机种子重复。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9155 rel="external nofollow noreferrer" target=_blank>#9155</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>已添加 <code class=syntax>groupArraySample</code> 功能（类似于 <code class=syntax>groupArray</code>）与reservior采样算法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8286 rel="external nofollow noreferrer" target=_blank>#8286</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>现在，您可以监视更新队列的大小 <code class=syntax>cache</code>/<code class=syntax>complex_key_cache</code> 通过系统指标字典。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9413 rel="external nofollow noreferrer" target=_blank>#9413</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>允许使用CRLF作为CSV输出格式的行分隔符与设置 <code class=syntax>output_format_csv_crlf_end_of_line</code> 设置为1 <a href=https://github.com/ClickHouse/ClickHouse/pull/8934 rel="external nofollow noreferrer" target=_blank>#8934</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8935 rel="external nofollow noreferrer" target=_blank>#8935</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8963 rel="external nofollow noreferrer" target=_blank>#8963</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>实现的更多功能 <a href=https://github.com/uber/h3 rel="external nofollow noreferrer" target=_blank>H3</a> API: <code class=syntax>h3GetBaseCell</code>, <code class=syntax>h3HexAreaM2</code>, <code class=syntax>h3IndexesAreNeighbors</code>, <code class=syntax>h3ToChildren</code>, <code class=syntax>h3ToString</code> 和 <code class=syntax>stringToH3</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8938 rel="external nofollow noreferrer" target=_blank>#8938</a> (<a href=https://github.com/nmandery rel="external nofollow noreferrer" target=_blank>Nico Mandery</a>)</li> <li>引入新设置: <code class=syntax>max_parser_depth</code> 控制最大堆栈大小并允许大型复杂查询。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6681 rel="external nofollow noreferrer" target=_blank>#6681</a> 和 <a href=https://github.com/ClickHouse/ClickHouse/issues/7668 rel="external nofollow noreferrer" target=_blank>#7668</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8647 rel="external nofollow noreferrer" target=_blank>#8647</a> (<a href=https://github.com/qMBQx8GH rel="external nofollow noreferrer" target=_blank>马克西姆*斯米尔诺夫</a>)</li> <li>添加设置 <code class=syntax>force_optimize_skip_unused_shards</code> 如果无法跳过未使用的分片，则设置为抛出 <a href=https://github.com/ClickHouse/ClickHouse/pull/8805 rel="external nofollow noreferrer" target=_blank>#8805</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>允许配置多个磁盘/卷用于存储数据发送 <code class=syntax>Distributed</code> 发动机 <a href=https://github.com/ClickHouse/ClickHouse/pull/8756 rel="external nofollow noreferrer" target=_blank>#8756</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>支持存储策略 (<code class=syntax>&lt;tmp_policy&gt;</code>）用于存储临时数据。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8750 rel="external nofollow noreferrer" target=_blank>#8750</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>已添加 <code class=syntax>X-ClickHouse-Exception-Code</code> 如果在发送数据之前引发异常，则设置的HTTP头。 这实现了 <a href=https://github.com/ClickHouse/ClickHouse/issues/4971 rel="external nofollow noreferrer" target=_blank>#4971</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8786 rel="external nofollow noreferrer" target=_blank>#8786</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>添加功能 <code class=syntax>ifNotFinite</code>. 这只是一个句法糖: <code class=syntax>ifNotFinite(x, y) = isFinite(x) ? x : y</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8710 rel="external nofollow noreferrer" target=_blank>#8710</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>已添加 <code class=syntax>last_successful_update_time</code> 列中 <code class=syntax>system.dictionaries</code> 表 <a href=https://github.com/ClickHouse/ClickHouse/pull/9394 rel="external nofollow noreferrer" target=_blank>#9394</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>添加 <code class=syntax>blockSerializedSize</code> 功能（磁盘大小不压缩) <a href=https://github.com/ClickHouse/ClickHouse/pull/8952 rel="external nofollow noreferrer" target=_blank>#8952</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>添加功能 <code class=syntax>moduloOrZero</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9358 rel="external nofollow noreferrer" target=_blank>#9358</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>添加系统表 <code class=syntax>system.zeros</code> 和 <code class=syntax>system.zeros_mt</code> 以及故事功能 <code class=syntax>zeros()</code> 和 <code class=syntax>zeros_mt()</code>. 表（和表函数）包含具有名称的单列 <code class=syntax>zero</code> 和类型 <code class=syntax>UInt8</code>. 此列包含零。 为了测试目的，需要它作为生成许多行的最快方法。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6604 rel="external nofollow noreferrer" target=_blank>#6604</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9593 rel="external nofollow noreferrer" target=_blank>#9593</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> </ul> <h4 id=experimental-feature>实验特点<a class=headerlink href=../amp/#experimental-feature title="Permanent link"> </a></h4> <ul> <li>添加新的紧凑格式的部件 <code class=syntax>MergeTree</code>-家庭表中的所有列都存储在一个文件中。 它有助于提高小型和频繁插入的性能。 旧的格式（每列一个文件）现在被称为wide。 数据存储格式由设置控制 <code class=syntax>min_bytes_for_wide_part</code> 和 <code class=syntax>min_rows_for_wide_part</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8290 rel="external nofollow noreferrer" target=_blank>#8290</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>支持S3存储 <code class=syntax>Log</code>, <code class=syntax>TinyLog</code> 和 <code class=syntax>StripeLog</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8862 rel="external nofollow noreferrer" target=_blank>#8862</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer" target=_blank>帕维尔*科瓦连科</a>)</li> </ul> <h4 id=bug-fix-2>错误修复<a class=headerlink href=../amp/#bug-fix-2 title="Permanent link"> </a></h4> <ul> <li>修正了日志消息中不一致的空格。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9322 rel="external nofollow noreferrer" target=_blank>#9322</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复在创建表时将未命名元组数组展平为嵌套结构的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8866 rel="external nofollow noreferrer" target=_blank>#8866</a> (<a href=https://github.com/achulkov2 rel="external nofollow noreferrer" target=_blank>achulkov2</a>)</li> <li>修复了以下问题 “Too many open files” 如果有太多的文件匹配glob模式可能会发生错误 <code class=syntax>File</code> 表或 <code class=syntax>file</code> 表功能。 现在文件懒洋洋地打开。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8857 rel="external nofollow noreferrer" target=_blank>#8857</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8861 rel="external nofollow noreferrer" target=_blank>#8861</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>删除临时表现在只删除临时表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8907 rel="external nofollow noreferrer" target=_blank>#8907</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>当我们关闭服务器或分离/附加表时删除过时的分区。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8602 rel="external nofollow noreferrer" target=_blank>#8602</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li> <li>默认磁盘如何计算可用空间 <code class=syntax>data</code> 子目录。 修复了可用空间量计算不正确的问题，如果 <code class=syntax>data</code> 目录被安装到一个单独的设备（罕见的情况）。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7441 rel="external nofollow noreferrer" target=_blank>#7441</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9257 rel="external nofollow noreferrer" target=_blank>#9257</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>允许逗号（交叉）与IN（）内部连接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9251 rel="external nofollow noreferrer" target=_blank>#9251</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>如果在WHERE部分中有[NOT]LIKE运算符，则允许将CROSS重写为INNER JOIN。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9229 rel="external nofollow noreferrer" target=_blank>#9229</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>修复后可能不正确的结果 <code class=syntax>GROUP BY</code> 启用设置 <code class=syntax>distributed_aggregation_memory_efficient</code>. 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9134 rel="external nofollow noreferrer" target=_blank>#9134</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9289 rel="external nofollow noreferrer" target=_blank>#9289</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>找到的键在缓存字典的指标中被计为错过。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9411 rel="external nofollow noreferrer" target=_blank>#9411</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>修复引入的复制协议不兼容 <a href=https://github.com/ClickHouse/ClickHouse/issues/8598 rel="external nofollow noreferrer" target=_blank>#8598</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9412 rel="external nofollow noreferrer" target=_blank>#9412</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>在固定的竞争条件 <code class=syntax>queue_task_handle</code> 在启动 <code class=syntax>ReplicatedMergeTree</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/9552 rel="external nofollow noreferrer" target=_blank>#9552</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>令牌 <code class=syntax>NOT</code> 没有工作 <code class=syntax>SHOW TABLES NOT LIKE</code> 查询 <a href=https://github.com/ClickHouse/ClickHouse/issues/8727 rel="external nofollow noreferrer" target=_blank>#8727</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8940 rel="external nofollow noreferrer" target=_blank>#8940</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>添加范围检查功能 <code class=syntax>h3EdgeLengthM</code>. 如果没有这个检查，缓冲区溢出是可能的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8945 rel="external nofollow noreferrer" target=_blank>#8945</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复了多个参数（超过10）的三元逻辑运算批量计算中的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8718 rel="external nofollow noreferrer" target=_blank>#8718</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>修复PREWHERE优化的错误，这可能导致段错误或 <code class=syntax>Inconsistent number of columns got from MergeTreeRangeReader</code> 例外。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9024 rel="external nofollow noreferrer" target=_blank>#9024</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复意外 <code class=syntax>Timeout exceeded while reading from socket</code> 异常，在实际超时之前以及启用查询探查器时，在安全连接上随机发生。 还添加 <code class=syntax>connect_timeout_with_failover_secure_ms</code> 设置（默认100ms），这是类似于 <code class=syntax>connect_timeout_with_failover_ms</code>，但用于安全连接（因为SSL握手比普通TCP连接慢) <a href=https://github.com/ClickHouse/ClickHouse/pull/9026 rel="external nofollow noreferrer" target=_blank>#9026</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复突变最终确定的错误，当突变可能处于以下状态时 <code class=syntax>parts_to_do=0</code> 和 <code class=syntax>is_done=0</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9022 rel="external nofollow noreferrer" target=_blank>#9022</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>使用新的任何连接逻辑 <code class=syntax>partial_merge_join</code> 设置。 有可能使 <code class=syntax>ANY|ALL|SEMI LEFT</code> 和 <code class=syntax>ALL INNER</code> 加入与 <code class=syntax>partial_merge_join=1</code> 现在 <a href=https://github.com/ClickHouse/ClickHouse/pull/8932 rel="external nofollow noreferrer" target=_blank>#8932</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Shard现在将从发起者获得的设置夹到shard的constaints，而不是抛出异常。 此修补程序允许将查询发送到具有另一个约束的分片。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9447 rel="external nofollow noreferrer" target=_blank>#9447</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>修正了内存管理问题 <code class=syntax>MergeTreeReadPool</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8791 rel="external nofollow noreferrer" target=_blank>#8791</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复 <code class=syntax>toDecimal*OrNull()</code> 使用字符串调用时的函数系列 <code class=syntax>e</code>. 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8312 rel="external nofollow noreferrer" target=_blank>#8312</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8764 rel="external nofollow noreferrer" target=_blank>#8764</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>请确保 <code class=syntax>FORMAT Null</code> 不向客户端发送数据。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8767 rel="external nofollow noreferrer" target=_blank>#8767</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>修复时间戳中的错误 <code class=syntax>LiveViewBlockInputStream</code> 不会更新。 <code class=syntax>LIVE VIEW</code> 是一个实验特征。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8644 rel="external nofollow noreferrer" target=_blank>#8644</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer" target=_blank>vxider</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8625 rel="external nofollow noreferrer" target=_blank>#8625</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer" target=_blank>vxider</a>)</li> <li>固定 <code class=syntax>ALTER MODIFY TTL</code> 不允许删除旧ttl表达式的错误行为。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8422 rel="external nofollow noreferrer" target=_blank>#8422</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复了MergeTreeIndexSet中的UBSan报告。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9250 rel="external nofollow noreferrer" target=_blank>#9250</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9365 rel="external nofollow noreferrer" target=_blank>#9365</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>固定的行为 <code class=syntax>match</code> 和 <code class=syntax>extract</code> 当干草堆有零字节的函数。 当干草堆不变时，这种行为是错误的。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9160 rel="external nofollow noreferrer" target=_blank>#9160</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9163 rel="external nofollow noreferrer" target=_blank>#9163</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/9345 rel="external nofollow noreferrer" target=_blank>#9345</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>避免从apache Avro第三方库中的析构函数抛出。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9066 rel="external nofollow noreferrer" target=_blank>#9066</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer" target=_blank>安德鲁Onyshchuk</a>)</li> <li>不要提交从轮询的批次 <code class=syntax>Kafka</code> 部分，因为它可能会导致数据漏洞。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8876 rel="external nofollow noreferrer" target=_blank>#8876</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>修复 <code class=syntax>joinGet</code> 使用可为空的返回类型。 <a href=https://github.com/ClickHouse/ClickHouse/issues/8919 target=_blank>https://github.com/ClickHouse/ClickHouse/issues/8919</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9014 rel="external nofollow noreferrer" target=_blank>#9014</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>修复压缩时的数据不兼容 <code class=syntax>T64</code> 编解ec <a href=https://github.com/ClickHouse/ClickHouse/pull/9016 rel="external nofollow noreferrer" target=_blank>#9016</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>）修复数据类型id <code class=syntax>T64</code> 在受影响的版本中导致错误(de)压缩的压缩编解ec。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9033 rel="external nofollow noreferrer" target=_blank>#9033</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>添加设置 <code class=syntax>enable_early_constant_folding</code> 并禁用它在某些情况下，导致错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9010 rel="external nofollow noreferrer" target=_blank>#9010</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>使用VIEW修复下推谓词优化器并启用测试 <a href=https://github.com/ClickHouse/ClickHouse/pull/9011 rel="external nofollow noreferrer" target=_blank>#9011</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li> <li>修复段错误 <code class=syntax>Merge</code> 表，从读取时可能发生 <code class=syntax>File</code> 储存 <a href=https://github.com/ClickHouse/ClickHouse/pull/9387 rel="external nofollow noreferrer" target=_blank>#9387</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>添加了对存储策略的检查 <code class=syntax>ATTACH PARTITION FROM</code>, <code class=syntax>REPLACE PARTITION</code>, <code class=syntax>MOVE TO TABLE</code>. 否则，它可以使部分数据重新启动后无法访问，并阻止ClickHouse启动。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9383 rel="external nofollow noreferrer" target=_blank>#9383</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复改变，如果有TTL设置表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8800 rel="external nofollow noreferrer" target=_blank>#8800</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复在以下情况下可能发生的竞争条件 <code class=syntax>SYSTEM RELOAD ALL DICTIONARIES</code> 在某些字典被修改/添加/删除时执行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8801 rel="external nofollow noreferrer" target=_blank>#8801</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>在以前的版本 <code class=syntax>Memory</code> 数据库引擎使用空数据路径，因此在以下位置创建表 <code class=syntax>path</code> directory (e.g. <code class=syntax>/var/lib/clickhouse/</code>), not in data directory of database (e.g. <code class=syntax>/var/lib/clickhouse/db_name</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8753 rel="external nofollow noreferrer" target=_blank>#8753</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复了关于缺少默认磁盘或策略的错误日志消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9530 rel="external nofollow noreferrer" target=_blank>#9530</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复数组类型的bloom_filter索引的not(has())。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9407 rel="external nofollow noreferrer" target=_blank>#9407</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li> <li>允许表中的第一列 <code class=syntax>Log</code> 引擎是别名 <a href=https://github.com/ClickHouse/ClickHouse/pull/9231 rel="external nofollow noreferrer" target=_blank>#9231</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>从读取时修复范围的顺序 <code class=syntax>MergeTree</code> 表中的一个线程。 它可能会导致例外 <code class=syntax>MergeTreeRangeReader</code> 或错误的查询结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9050 rel="external nofollow noreferrer" target=_blank>#9050</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>赂眉露&gt;&gt; <code class=syntax>reinterpretAsFixedString</code> 返回 <code class=syntax>FixedString</code> 而不是 <code class=syntax>String</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9052 rel="external nofollow noreferrer" target=_blank>#9052</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer" target=_blank>安德鲁Onyshchuk</a>)</li> <li>避免极少数情况下，当用户可以得到错误的错误消息 (<code class=syntax>Success</code> 而不是详细的错误描述）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9457 rel="external nofollow noreferrer" target=_blank>#9457</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>使用时不要崩溃 <code class=syntax>Template</code> 使用空行模板格式化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8785 rel="external nofollow noreferrer" target=_blank>#8785</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>系统表的元数据文件可能在错误的位置创建 <a href=https://github.com/ClickHouse/ClickHouse/pull/8653 rel="external nofollow noreferrer" target=_blank>#8653</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>）修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8581 rel="external nofollow noreferrer" target=_blank>#8581</a>.</li> <li>修复缓存字典中exception_ptr上的数据竞赛 <a href=https://github.com/ClickHouse/ClickHouse/issues/8303 rel="external nofollow noreferrer" target=_blank>#8303</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9379 rel="external nofollow noreferrer" target=_blank>#9379</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>不要为查询引发异常 <code class=syntax>ATTACH TABLE IF NOT EXISTS</code>. 以前它是抛出，如果表已经存在，尽管 <code class=syntax>IF NOT EXISTS</code> 条款 <a href=https://github.com/ClickHouse/ClickHouse/pull/8967 rel="external nofollow noreferrer" target=_blank>#8967</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复了异常消息中丢失的关闭paren。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8811 rel="external nofollow noreferrer" target=_blank>#8811</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>避免消息 <code class=syntax>Possible deadlock avoided</code> 在clickhouse客户端在交互模式下启动。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9455 rel="external nofollow noreferrer" target=_blank>#9455</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复了base64编码值末尾填充格式错误的问题。 更新base64库。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9491 rel="external nofollow noreferrer" target=_blank>#9491</a>，关闭 <a href=https://github.com/ClickHouse/ClickHouse/issues/9492 rel="external nofollow noreferrer" target=_blank>#9492</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9500 rel="external nofollow noreferrer" target=_blank>#9500</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>防止丢失数据 <code class=syntax>Kafka</code> 在极少数情况下，在读取后缀之后但在提交之前发生异常。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9378 rel="external nofollow noreferrer" target=_blank>#9378</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9507 rel="external nofollow noreferrer" target=_blank>#9507</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>在固定的异常 <code class=syntax>DROP TABLE IF EXISTS</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8663 rel="external nofollow noreferrer" target=_blank>#8663</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li> <li>修复当用户尝试崩溃 <code class=syntax>ALTER MODIFY SETTING</code> 对于老格式化 <code class=syntax>MergeTree</code> 表引擎家族. <a href=https://github.com/ClickHouse/ClickHouse/pull/9435 rel="external nofollow noreferrer" target=_blank>#9435</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>支持在JSON相关函数中不适合Int64的UInt64号码。 更新SIMDJSON掌握。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9209 rel="external nofollow noreferrer" target=_blank>#9209</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9344 rel="external nofollow noreferrer" target=_blank>#9344</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>当使用非严格单调函数索引时，固定执行反转谓词。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9223 rel="external nofollow noreferrer" target=_blank>#9223</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>不要试图折叠 <code class=syntax>IN</code> 常量在 <code class=syntax>GROUP BY</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8868 rel="external nofollow noreferrer" target=_blank>#8868</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>修复bug <code class=syntax>ALTER DELETE</code> 突变导致索引损坏。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9019 rel="external nofollow noreferrer" target=_blank>#9019</a> 和 <a href=https://github.com/ClickHouse/ClickHouse/issues/8982 rel="external nofollow noreferrer" target=_blank>#8982</a>. 另外修复极其罕见的竞争条件 <code class=syntax>ReplicatedMergeTree</code> <code class=syntax>ALTER</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9048 rel="external nofollow noreferrer" target=_blank>#9048</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>当设置 <code class=syntax>compile_expressions</code> 被启用，你可以得到 <code class=syntax>unexpected column</code> 在 <code class=syntax>LLVMExecutableFunction</code> 当我们使用 <code class=syntax>Nullable</code> 类型 <a href=https://github.com/ClickHouse/ClickHouse/pull/8910 rel="external nofollow noreferrer" target=_blank>#8910</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li> <li>多个修复 <code class=syntax>Kafka</code> 引擎：1）修复在消费者组重新平衡期间出现的重复项。 2)修复罕见 ‘holes’ 当数据从一个轮询的几个分区轮询并部分提交时出现（现在我们总是处理/提交整个轮询的消息块）。 3）通过块大小修复刷新（在此之前，只有超时刷新才能正常工作）。 4）更好的订阅程序（与分配反馈）。 5）使测试工作得更快（默认时间间隔和超时）。 由于数据之前没有被块大小刷新（根据文档），pr可能会导致默认设置的性能下降（由于更频繁和更小的刷新不太理想）。 如果您在更改后遇到性能问题-请增加 <code class=syntax>kafka_max_block_size</code> 在表中的更大的值（例如 <code class=syntax>CREATE TABLE ...Engine=Kafka ... SETTINGS ... kafka_max_block_size=524288</code>). 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7259 rel="external nofollow noreferrer" target=_blank>#7259</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8917 rel="external nofollow noreferrer" target=_blank>#8917</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>修复 <code class=syntax>Parameter out of bound</code> 在PREWHERE优化之后的某些查询中出现异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8914 rel="external nofollow noreferrer" target=_blank>#8914</a> (<a href=https://github.com/bgiard rel="external nofollow noreferrer" target=_blank>Baudouin Giard</a>)</li> <li>修正了函数参数混合常量的情况 <code class=syntax>arrayZip</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8705 rel="external nofollow noreferrer" target=_blank>#8705</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>执行时 <code class=syntax>CREATE</code> 查询，在存储引擎参数中折叠常量表达式。 将空数据库名称替换为当前数据库。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6508 rel="external nofollow noreferrer" target=_blank>#6508</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3492 rel="external nofollow noreferrer" target=_blank>#3492</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9262 rel="external nofollow noreferrer" target=_blank>#9262</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>现在不可能创建或添加具有简单循环别名的列，如 <code class=syntax>a DEFAULT b, b DEFAULT a</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9603 rel="external nofollow noreferrer" target=_blank>#9603</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修正了双重移动可能会损坏原始部分的错误。 这是相关的，如果你使用 <code class=syntax>ALTER TABLE MOVE</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8680 rel="external nofollow noreferrer" target=_blank>#8680</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>允许 <code class=syntax>interval</code> 用于正确解析的标识符，而无需反引号。 当一个查询不能被执行，即使固定的问题 <code class=syntax>interval</code> 标识符用反引号或双引号括起来。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9124 rel="external nofollow noreferrer" target=_blank>#9124</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9142 rel="external nofollow noreferrer" target=_blank>#9142</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修正了模糊测试和不正确的行为 <code class=syntax>bitTestAll</code>/<code class=syntax>bitTestAny</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9143 rel="external nofollow noreferrer" target=_blank>#9143</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复可能的崩溃/错误的行数 <code class=syntax>LIMIT n WITH TIES</code> 当有很多行等于第n行时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9464 rel="external nofollow noreferrer" target=_blank>#9464</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>使用enabled编写的部件修复突变 <code class=syntax>insert_quorum</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9463 rel="external nofollow noreferrer" target=_blank>#9463</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复数据竞赛破坏 <code class=syntax>Poco::HTTPServer</code>. 当服务器启动并立即关闭时，可能会发生这种情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9468 rel="external nofollow noreferrer" target=_blank>#9468</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复运行时显示误导性错误消息的错误 <code class=syntax>SHOW CREATE TABLE a_table_that_does_not_exist</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8899 rel="external nofollow noreferrer" target=_blank>#8899</a> (<a href=https://github.com/achulkov2 rel="external nofollow noreferrer" target=_blank>achulkov2</a>)</li> <li>固定 <code class=syntax>Parameters are out of bound</code> 例外在一些罕见的情况下，当我们在一个常数 <code class=syntax>SELECT</code> 条款时，我们有一个 <code class=syntax>ORDER BY</code> 和一个 <code class=syntax>LIMIT</code> 条款 <a href=https://github.com/ClickHouse/ClickHouse/pull/8892 rel="external nofollow noreferrer" target=_blank>#8892</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li> <li>修复突变定稿，当已经完成突变可以有状态 <code class=syntax>is_done=0</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9217 rel="external nofollow noreferrer" target=_blank>#9217</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>防止执行 <code class=syntax>ALTER ADD INDEX</code> 对于旧语法的MergeTree表，因为它不起作用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8822 rel="external nofollow noreferrer" target=_blank>#8822</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>在服务器启动时不要访问表，这 <code class=syntax>LIVE VIEW</code> 取决于，所以服务器将能够启动。 也删除 <code class=syntax>LIVE VIEW</code> 分离时的依赖关系 <code class=syntax>LIVE VIEW</code>. <code class=syntax>LIVE VIEW</code> 是一个实验特征。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8824 rel="external nofollow noreferrer" target=_blank>#8824</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复可能的段错误 <code class=syntax>MergeTreeRangeReader</code>，同时执行 <code class=syntax>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9106 rel="external nofollow noreferrer" target=_blank>#9106</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复与列Ttl可能不匹配的校验和。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9451 rel="external nofollow noreferrer" target=_blank>#9451</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修正了一个错误，当部分没有被移动的情况下，只有一个卷的TTL规则在后台。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8672 rel="external nofollow noreferrer" target=_blank>#8672</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修正了这个问题 <code class=syntax>Method createColumn() is not implemented for data type Set</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7799 rel="external nofollow noreferrer" target=_blank>#7799</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8674 rel="external nofollow noreferrer" target=_blank>#8674</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>现在我们将尝试更频繁地完成突变。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9427 rel="external nofollow noreferrer" target=_blank>#9427</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复 <code class=syntax>intDiv</code> 减一个常数 <a href=https://github.com/ClickHouse/ClickHouse/pull/9351 rel="external nofollow noreferrer" target=_blank>#9351</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>修复可能的竞争条件 <code class=syntax>BlockIO</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9356 rel="external nofollow noreferrer" target=_blank>#9356</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>修复尝试使用/删除时导致服务器终止的错误 <code class=syntax>Kafka</code> 使用错误的参数创建的表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9513 rel="external nofollow noreferrer" target=_blank>#9513</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>增加了解决方法，如果操作系统返回错误的结果 <code class=syntax>timer_create</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8837 rel="external nofollow noreferrer" target=_blank>#8837</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>在使用固定错误 <code class=syntax>min_marks_for_seek</code> 参数。 修复了分布式表中没有分片键时的错误消息，并且我们尝试跳过未使用的分片。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8908 rel="external nofollow noreferrer" target=_blank>#8908</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> </ul> <h4 id=improvement>改进<a class=headerlink href=../amp/#improvement title="Permanent link"> </a></h4> <ul> <li>执行 <code class=syntax>ALTER MODIFY/DROP</code> 对突变的顶部查询 <code class=syntax>ReplicatedMergeTree*</code> 引擎家族. 现在 <code class=syntax>ALTERS</code> 仅在元数据更新阶段阻止，之后不阻止。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8701 rel="external nofollow noreferrer" target=_blank>#8701</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>添加重写交叉到内部连接的能力 <code class=syntax>WHERE</code> 包含未编译名称的部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9512 rel="external nofollow noreferrer" target=_blank>#9512</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>赂眉露&gt;&gt; <code class=syntax>SHOW TABLES</code> 和 <code class=syntax>SHOW DATABASES</code> 查询支持 <code class=syntax>WHERE</code> 表达式和 <code class=syntax>FROM</code>/<code class=syntax>IN</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9076 rel="external nofollow noreferrer" target=_blank>#9076</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>添加了一个设置 <code class=syntax>deduplicate_blocks_in_dependent_materialized_views</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9070 rel="external nofollow noreferrer" target=_blank>#9070</a> (<a href=https://github.com/urykhy rel="external nofollow noreferrer" target=_blank>urykhy</a>)</li> <li>在最近的变化之后，MySQL客户端开始以十六进制打印二进制字符串，从而使它们不可读 (<a href=https://github.com/ClickHouse/ClickHouse/issues/9032 rel="external nofollow noreferrer" target=_blank>#9032</a>). ClickHouse中的解决方法是将字符串列标记为UTF-8，这并不总是如此，但通常是这种情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9079 rel="external nofollow noreferrer" target=_blank>#9079</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li> <li>添加对字符串和FixedString键的支持 <code class=syntax>sumMap</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8903 rel="external nofollow noreferrer" target=_blank>#8903</a> (<a href=https://github.com/bgiard rel="external nofollow noreferrer" target=_blank>Baudouin Giard</a>)</li> <li>支持SummingMergeTree地图中的字符串键 <a href=https://github.com/ClickHouse/ClickHouse/pull/8933 rel="external nofollow noreferrer" target=_blank>#8933</a> (<a href=https://github.com/bgiard rel="external nofollow noreferrer" target=_blank>Baudouin Giard</a>)</li> <li>即使线程已抛出异常，也向线程池发送线程终止信号 <a href=https://github.com/ClickHouse/ClickHouse/pull/8736 rel="external nofollow noreferrer" target=_blank>#8736</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer" target=_blank>丁香飞</a>)</li> <li>允许设置 <code class=syntax>query_id</code> 在 <code class=syntax>clickhouse-benchmark</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9416 rel="external nofollow noreferrer" target=_blank>#9416</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>不要让奇怪的表达 <code class=syntax>ALTER TABLE ... PARTITION partition</code> 查询。 这个地址 <a href=https://github.com/ClickHouse/ClickHouse/issues/7192 rel="external nofollow noreferrer" target=_blank>#7192</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8835 rel="external nofollow noreferrer" target=_blank>#8835</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>表 <code class=syntax>system.table_engines</code> 现在提供有关功能支持的信息（如 <code class=syntax>supports_ttl</code> 或 <code class=syntax>supports_sort_order</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8830 rel="external nofollow noreferrer" target=_blank>#8830</a> (<a href=https://github.com/zlobober rel="external nofollow noreferrer" target=_blank>Max Akhmedov</a>)</li> <li>启用 <code class=syntax>system.metric_log</code> 默认情况下。 它将包含具有ProfileEvents值的行，CurrentMetrics收集与 “collect_interval_milliseconds” 间隔（默认情况下为一秒）。 该表非常小（通常以兆字节为单位），默认情况下收集此数据是合理的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9225 rel="external nofollow noreferrer" target=_blank>#9225</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>Initialize query profiler for all threads in a group, e.g. it allows to fully profile insert-queries. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6964 rel="external nofollow noreferrer" target=_blank>#6964</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8874 rel="external nofollow noreferrer" target=_blank>#8874</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>现在是暂时的 <code class=syntax>LIVE VIEW</code> 创建者 <code class=syntax>CREATE LIVE VIEW name WITH TIMEOUT [42] ...</code> 而不是 <code class=syntax>CREATE TEMPORARY LIVE VIEW ...</code>，因为以前的语法不符合 <code class=syntax>CREATE TEMPORARY TABLE ...</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/9131 rel="external nofollow noreferrer" target=_blank>#9131</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>添加text_log。级别配置参数，以限制进入 <code class=syntax>system.text_log</code> 表 <a href=https://github.com/ClickHouse/ClickHouse/pull/8809 rel="external nofollow noreferrer" target=_blank>#8809</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>允许根据TTL规则将下载的部分放入磁盘/卷 <a href=https://github.com/ClickHouse/ClickHouse/pull/8598 rel="external nofollow noreferrer" target=_blank>#8598</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>对于外部MySQL字典，允许将MySQL连接池共同化为 “share” 他们在字典中。 此选项显着减少到MySQL服务器的连接数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9409 rel="external nofollow noreferrer" target=_blank>#9409</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer" target=_blank>Clément Rodriguez</a>)</li> <li>显示分位数的最近查询执行时间 <code class=syntax>clickhouse-benchmark</code> 输出而不是插值值。 最好显示与某些查询的执行时间相对应的值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8712 rel="external nofollow noreferrer" target=_blank>#8712</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>可以在将数据插入到Kafka时为消息添加密钥和时间戳。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7198 rel="external nofollow noreferrer" target=_blank>#7198</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8969 rel="external nofollow noreferrer" target=_blank>#8969</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>如果服务器从终端运行，请按颜色突出显示线程号，查询id和日志优先级。 这是为了提高开发人员相关日志消息的可读性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8961 rel="external nofollow noreferrer" target=_blank>#8961</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更好的异常消息，同时加载表 <code class=syntax>Ordinary</code> 数据库。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9527 rel="external nofollow noreferrer" target=_blank>#9527</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>执行 <code class=syntax>arraySlice</code> 对于具有聚合函数状态的数组。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9388 rel="external nofollow noreferrer" target=_blank>#9388</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9391 rel="external nofollow noreferrer" target=_blank>#9391</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>允许在in运算符的右侧使用常量函数和常量数组。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8813 rel="external nofollow noreferrer" target=_blank>#8813</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>如果在获取系统数据时发生了zookeeper异常。副本，将其显示在单独的列中。 这实现了 <a href=https://github.com/ClickHouse/ClickHouse/issues/9137 rel="external nofollow noreferrer" target=_blank>#9137</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9138 rel="external nofollow noreferrer" target=_blank>#9138</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>原子删除destroy上的MergeTree数据部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8402 rel="external nofollow noreferrer" target=_blank>#8402</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>支持分布式表的行级安全性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8926 rel="external nofollow noreferrer" target=_blank>#8926</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>Now we recognize suffix (like KB, KiB…) in settings values. <a href=https://github.com/ClickHouse/ClickHouse/pull/8072 rel="external nofollow noreferrer" target=_blank>#8072</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>在构建大型连接的结果时防止内存不足。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8637 rel="external nofollow noreferrer" target=_blank>#8637</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>在交互模式下为建议添加群集名称 <code class=syntax>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8709 rel="external nofollow noreferrer" target=_blank>#8709</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>Initialize query profiler for all threads in a group, e.g. it allows to fully profile insert-queries <a href=https://github.com/ClickHouse/ClickHouse/pull/8820 rel="external nofollow noreferrer" target=_blank>#8820</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>添加列 <code class=syntax>exception_code</code> 在 <code class=syntax>system.query_log</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8770 rel="external nofollow noreferrer" target=_blank>#8770</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>在端口上启用MySQL兼容服务器 <code class=syntax>9004</code> 在默认服务器配置文件中。 在配置的例子固定密码生成命令。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8771 rel="external nofollow noreferrer" target=_blank>#8771</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li> <li>如果文件系统是只读的，请防止在关闭时中止。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9094 rel="external nofollow noreferrer" target=_blank>#9094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9100 rel="external nofollow noreferrer" target=_blank>#9100</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>当HTTP POST查询中需要长度时，更好的异常消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9453 rel="external nofollow noreferrer" target=_blank>#9453</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>添加 <code class=syntax>_path</code> 和 <code class=syntax>_file</code> 虚拟列 <code class=syntax>HDFS</code> 和 <code class=syntax>File</code> 发动机和 <code class=syntax>hdfs</code> 和 <code class=syntax>file</code> 表函数 <a href=https://github.com/ClickHouse/ClickHouse/pull/8489 rel="external nofollow noreferrer" target=_blank>#8489</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>修复错误 <code class=syntax>Cannot find column</code> 同时插入到 <code class=syntax>MATERIALIZED VIEW</code> 在情况下，如果新列被添加到视图的内部表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8766 rel="external nofollow noreferrer" target=_blank>#8766</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8788 rel="external nofollow noreferrer" target=_blank>#8788</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>) <a href=https://github.com/ClickHouse/ClickHouse/issues/8788 rel="external nofollow noreferrer" target=_blank>#8788</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8806 rel="external nofollow noreferrer" target=_blank>#8806</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8803 rel="external nofollow noreferrer" target=_blank>#8803</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>通过最终更新后发送进度（如日志）修复本机客户端-服务器协议的进度。 这可能仅与使用本机协议的某些第三方工具相关。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9495 rel="external nofollow noreferrer" target=_blank>#9495</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>添加系统指标跟踪使用MySQL协议的客户端连接数 (<a href=https://github.com/ClickHouse/ClickHouse/issues/9013 rel="external nofollow noreferrer" target=_blank>#9013</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/9015 rel="external nofollow noreferrer" target=_blank>#9015</a> (<a href=https://github.com/Slach rel="external nofollow noreferrer" target=_blank>尤金*克里莫夫</a>)</li> <li>从现在开始，HTTP响应将有 <code class=syntax>X-ClickHouse-Timezone</code> 标题设置为相同的时区值 <code class=syntax>SELECT timezone()</code> 会报告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9493 rel="external nofollow noreferrer" target=_blank>#9493</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer" target=_blank>Denis Glazachev</a>)</li> </ul> <h4 id=performance-improvement>性能改进<a class=headerlink href=../amp/#performance-improvement title="Permanent link"> </a></h4> <ul> <li>使用IN提高分析指标的性能 <a href=https://github.com/ClickHouse/ClickHouse/pull/9261 rel="external nofollow noreferrer" target=_blank>#9261</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>逻辑函数+代码清理更简单，更有效的代码。 跟进到 <a href=https://github.com/ClickHouse/ClickHouse/issues/8718 rel="external nofollow noreferrer" target=_blank>#8718</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8728 rel="external nofollow noreferrer" target=_blank>#8728</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>整体性能改善（范围为5％。.通过确保使用C++20功能进行更严格的别名处理，对于受影响的查询来说，这是200％）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9304 rel="external nofollow noreferrer" target=_blank>#9304</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>比较函数的内部循环更严格的别名。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9327 rel="external nofollow noreferrer" target=_blank>#9327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>对于算术函数的内部循环更严格的别名。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9325 rel="external nofollow noreferrer" target=_blank>#9325</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>ColumnVector::replicate()的实现速度快约3倍，通过该实现ColumnConst::convertToFullColumn()。 在实现常数时，也将在测试中有用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9293 rel="external nofollow noreferrer" target=_blank>#9293</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>另一个小的性能改进 <code class=syntax>ColumnVector::replicate()</code> （这加快了 <code class=syntax>materialize</code> 函数和高阶函数），甚至进一步改进 <a href=https://github.com/ClickHouse/ClickHouse/issues/9293 rel="external nofollow noreferrer" target=_blank>#9293</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9442 rel="external nofollow noreferrer" target=_blank>#9442</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>改进的性能 <code class=syntax>stochasticLinearRegression</code> 聚合函数。 此补丁由英特尔贡献。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8652 rel="external nofollow noreferrer" target=_blank>#8652</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>提高性能 <code class=syntax>reinterpretAsFixedString</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9342 rel="external nofollow noreferrer" target=_blank>#9342</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>不要向客户端发送块 <code class=syntax>Null</code> 处理器管道中的格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8797 rel="external nofollow noreferrer" target=_blank>#8797</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8767 rel="external nofollow noreferrer" target=_blank>#8767</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement title="Permanent link"> </a></h4> <ul> <li>异常处理现在可以在适用于Linux的Windows子系统上正常工作。 看https://github.com/ClickHouse-Extras/libunwind/pull/3 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6480 rel="external nofollow noreferrer" target=_blank>#6480</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9564 rel="external nofollow noreferrer" target=_blank>#9564</a> (<a href=https://github.com/sobolevsv rel="external nofollow noreferrer" target=_blank>sobolevsv</a>)</li> <li>替换 <code class=syntax>readline</code> 与 <code class=syntax>replxx</code> 对于在交互式线编辑 <code class=syntax>clickhouse-client</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/8416 rel="external nofollow noreferrer" target=_blank>#8416</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>在FunctionsComparison中更好的构建时间和更少的模板实例化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9324 rel="external nofollow noreferrer" target=_blank>#9324</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>增加了与集成 <code class=syntax>clang-tidy</code> 在线人 另请参阅 <a href=https://github.com/ClickHouse/ClickHouse/issues/6044 rel="external nofollow noreferrer" target=_blank>#6044</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9566 rel="external nofollow noreferrer" target=_blank>#9566</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>现在我们使用CI链接ClickHouse <code class=syntax>lld</code> 即使是 <code class=syntax>gcc</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9049 rel="external nofollow noreferrer" target=_blank>#9049</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>允许随机线程调度和插入毛刺时 <code class=syntax>THREAD_FUZZER_*</code> 设置环境变量。 这有助于测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9459 rel="external nofollow noreferrer" target=_blank>#9459</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>在无状态测试中启用安全套接字 <a href=https://github.com/ClickHouse/ClickHouse/pull/9288 rel="external nofollow noreferrer" target=_blank>#9288</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>使SPLIT_SHARED_LIBRARIES=OFF更强大 <a href=https://github.com/ClickHouse/ClickHouse/pull/9156 rel="external nofollow noreferrer" target=_blank>#9156</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>赂眉露&gt;&gt; “performance_introspection_and_logging” 测试可靠的随机服务器卡住。 这可能发生在CI环境中。 另请参阅 <a href=https://github.com/ClickHouse/ClickHouse/issues/9515 rel="external nofollow noreferrer" target=_blank>#9515</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9528 rel="external nofollow noreferrer" target=_blank>#9528</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>在样式检查中验证XML。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9550 rel="external nofollow noreferrer" target=_blank>#9550</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修正了测试中的竞争条件 <code class=syntax>00738_lock_for_inner_table</code>. 这个测试依赖于睡眠。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9555 rel="external nofollow noreferrer" target=_blank>#9555</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>删除类型的性能测试 <code class=syntax>once</code>. 这是在统计比较模式下运行所有性能测试（更可靠）所需的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9557 rel="external nofollow noreferrer" target=_blank>#9557</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>增加了算术函数的性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9326 rel="external nofollow noreferrer" target=_blank>#9326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>增加了性能测试 <code class=syntax>sumMap</code> 和 <code class=syntax>sumMapWithOverflow</code> 聚合函数。 后续行动 <a href=https://github.com/ClickHouse/ClickHouse/issues/8933 rel="external nofollow noreferrer" target=_blank>#8933</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8947 rel="external nofollow noreferrer" target=_blank>#8947</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>通过样式检查确保错误代码的样式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9370 rel="external nofollow noreferrer" target=_blank>#9370</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>为测试历史添加脚本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8796 rel="external nofollow noreferrer" target=_blank>#8796</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>添加GCC警告 <code class=syntax>-Wsuggest-override</code> 找到并修复所有地方 <code class=syntax>override</code> 必须使用关键字。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8760 rel="external nofollow noreferrer" target=_blank>#8760</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer" target=_blank>kreuzerkrieg</a>)</li> <li>在Mac OS X下忽略弱符号，因为它必须被定义 <a href=https://github.com/ClickHouse/ClickHouse/pull/9538 rel="external nofollow noreferrer" target=_blank>#9538</a> (<a href=https://github.com/ghost rel="external nofollow noreferrer" target=_blank>已删除用户</a>)</li> <li>规范性能测试中某些查询的运行时间。 这是在准备在比较模式下运行所有性能测试时完成的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9565 rel="external nofollow noreferrer" target=_blank>#9565</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复一些测试，以支持pytest与查询测试 <a href=https://github.com/ClickHouse/ClickHouse/pull/9062 rel="external nofollow noreferrer" target=_blank>#9062</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>使用MSan在生成中启用SSL，因此在运行无状态测试时，服务器不会在启动时失败 <a href=https://github.com/ClickHouse/ClickHouse/pull/9531 rel="external nofollow noreferrer" target=_blank>#9531</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复测试结果中的数据库替换 <a href=https://github.com/ClickHouse/ClickHouse/pull/9384 rel="external nofollow noreferrer" target=_blank>#9384</a> (<a href=https://github.com/qoega rel="external nofollow noreferrer" target=_blank>Ilya Yatsishin</a>)</li> <li>针对其他平台构建修复程序 <a href=https://github.com/ClickHouse/ClickHouse/pull/9381 rel="external nofollow noreferrer" target=_blank>#9381</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8755 rel="external nofollow noreferrer" target=_blank>#8755</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8631 rel="external nofollow noreferrer" target=_blank>#8631</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>将磁盘部分添加到无状态复盖率测试docker映像 <a href=https://github.com/ClickHouse/ClickHouse/pull/9213 rel="external nofollow noreferrer" target=_blank>#9213</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer" target=_blank>帕维尔*科瓦连科</a>)</li> <li>使用GRPC构建时，摆脱源代码树中的文件 <a href=https://github.com/ClickHouse/ClickHouse/pull/9588 rel="external nofollow noreferrer" target=_blank>#9588</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>通过从上下文中删除SessionCleaner来缩短构建时间。 让SessionCleaner的代码更简单。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9232 rel="external nofollow noreferrer" target=_blank>#9232</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更新了clickhouse-test脚本中挂起查询的检查 <a href=https://github.com/ClickHouse/ClickHouse/pull/8858 rel="external nofollow noreferrer" target=_blank>#8858</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>从存储库中删除了一些无用的文件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8843 rel="external nofollow noreferrer" target=_blank>#8843</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更改类型的数学perftests从 <code class=syntax>once</code> 到 <code class=syntax>loop</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8783 rel="external nofollow noreferrer" target=_blank>#8783</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>添加码头镜像，它允许为我们的代码库构建交互式代码浏览器HTML报告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8781 rel="external nofollow noreferrer" target=_blank>#8781</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>）见 <a href=https://clickhouse.tech/codebrowser/html_report///ClickHouse/dbms/index.html target=_blank>Woboq代码浏览器</a></li> <li>抑制MSan下的一些测试失败。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8780 rel="external nofollow noreferrer" target=_blank>#8780</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>加速 “exception while insert” 测试 此测试通常在具有复盖率的调试版本中超时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8711 rel="external nofollow noreferrer" target=_blank>#8711</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更新 <code class=syntax>libcxx</code> 和 <code class=syntax>libcxxabi</code> 为了主人 在准备 <a href=https://github.com/ClickHouse/ClickHouse/issues/9304 rel="external nofollow noreferrer" target=_blank>#9304</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9308 rel="external nofollow noreferrer" target=_blank>#9308</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复flacky测试 <code class=syntax>00910_zookeeper_test_alter_compression_codecs</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9525 rel="external nofollow noreferrer" target=_blank>#9525</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>清理重复的链接器标志。 确保链接器不会查找意想不到的符号。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9433 rel="external nofollow noreferrer" target=_blank>#9433</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>添加 <code class=syntax>clickhouse-odbc</code> 驱动程序进入测试图像。 这允许通过自己的ODBC驱动程序测试ClickHouse与ClickHouse的交互。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9348 rel="external nofollow noreferrer" target=_blank>#9348</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>修复单元测试中的几个错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9047 rel="external nofollow noreferrer" target=_blank>#9047</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>启用 <code class=syntax>-Wmissing-include-dirs</code> GCC警告消除所有不存在的包括-主要是由于CMake脚本错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/8704 rel="external nofollow noreferrer" target=_blank>#8704</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer" target=_blank>kreuzerkrieg</a>)</li> <li>描述查询探查器无法工作的原因。 这是用于 <a href=https://github.com/ClickHouse/ClickHouse/issues/9049 rel="external nofollow noreferrer" target=_blank>#9049</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9144 rel="external nofollow noreferrer" target=_blank>#9144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>将OpenSSL更新到上游主机。 修复了TLS连接可能会失败并显示消息的问题 <code class=syntax>OpenSSL SSL_read: error:14094438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error</code> 和 <code class=syntax>SSL Exception: error:2400006E:random number generator::error retrieving entropy</code>. 该问题出现在版本20.1中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8956 rel="external nofollow noreferrer" target=_blank>#8956</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更新服务器的Dockerfile <a href=https://github.com/ClickHouse/ClickHouse/pull/8893 rel="external nofollow noreferrer" target=_blank>#8893</a> (<a href=https://github.com/ne-ray rel="external nofollow noreferrer" target=_blank>Ilya Mazaev</a>)</li> <li>Build-gcc-from-sources脚本中的小修复 <a href=https://github.com/ClickHouse/ClickHouse/pull/8774 rel="external nofollow noreferrer" target=_blank>#8774</a> (<a href=https://github.com/mnach rel="external nofollow noreferrer" target=_blank>Michael Nacharov</a>)</li> <li>替换 <code class=syntax>numbers</code> 到 <code class=syntax>zeros</code> 在perftests其中 <code class=syntax>number</code> 不使用列。 这将导致更干净的测试结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9600 rel="external nofollow noreferrer" target=_blank>#9600</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>修复列构造函数中使用initializer_list时堆栈溢出问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9367 rel="external nofollow noreferrer" target=_blank>#9367</a> (<a href=https://github.com/ghost rel="external nofollow noreferrer" target=_blank>已删除用户</a>)</li> <li>将librdkafka升级到v1.3.0。 启用bund绑 <code class=syntax>rdkafka</code> 和 <code class=syntax>gsasl</code> mac OS X上的库 <a href=https://github.com/ClickHouse/ClickHouse/pull/9000 rel="external nofollow noreferrer" target=_blank>#9000</a> (<a href=https://github.com/oandrew rel="external nofollow noreferrer" target=_blank>安德鲁Onyshchuk</a>)</li> <li>在GCC9.2.0上构建修复程序 <a href=https://github.com/ClickHouse/ClickHouse/pull/9306 rel="external nofollow noreferrer" target=_blank>#9306</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer" target=_blank>vxider</a>)</li> </ul> <h2 id=clickhouse-release-v20-1>碌莽禄.拢.0755-88888888<a class=headerlink href=../amp/#clickhouse-release-v20-1 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-v20-1-8-41-2020-03-20>ClickHouse版本v20.1.8.41,2020-03-20<a class=headerlink href=../amp/#clickhouse-release-v20-1-8-41-2020-03-20 title="Permanent link"> </a></h3> <h4 id=bug-fix-3>错误修复<a class=headerlink href=../amp/#bug-fix-3 title="Permanent link"> </a></h4> <ul> <li>修复可能的永久性 <code class=syntax>Cannot schedule a task</code> 错误（由于未处理的异常 <code class=syntax>ParallelAggregatingBlockInputStream::Handler::onFinish/onFinishThread</code>). 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6833 rel="external nofollow noreferrer" target=_blank>#6833</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9154 rel="external nofollow noreferrer" target=_blank>#9154</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>修复过多的内存消耗 <code class=syntax>ALTER</code> 查询（突变）。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9533 rel="external nofollow noreferrer" target=_blank>#9533</a> 和 <a href=https://github.com/ClickHouse/ClickHouse/issues/9670 rel="external nofollow noreferrer" target=_blank>#9670</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9754 rel="external nofollow noreferrer" target=_blank>#9754</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复外部字典DDL中反引用的错误。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9619 rel="external nofollow noreferrer" target=_blank>#9619</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9734 rel="external nofollow noreferrer" target=_blank>#9734</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> </ul> <h3 id=clickhouse-release-v20-1-7-38-2020-03-18>ClickHouse释放v20.1.7.38,2020-03-18<a class=headerlink href=../amp/#clickhouse-release-v20-1-7-38-2020-03-18 title="Permanent link"> </a></h3> <h4 id=bug-fix-4>错误修复<a class=headerlink href=../amp/#bug-fix-4 title="Permanent link"> </a></h4> <ul> <li>修正了不正确的内部函数名称 <code class=syntax>sumKahan</code> 和 <code class=syntax>sumWithOverflow</code>. 在远程查询中使用此函数时，我会导致异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9636 rel="external nofollow noreferrer" target=_blank>#9636</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>). 这个问题是在所有ClickHouse版本。</li> <li>允许 <code class=syntax>ALTER ON CLUSTER</code> 的 <code class=syntax>Distributed</code> 具有内部复制的表。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/3268 rel="external nofollow noreferrer" target=_blank>#3268</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9617 rel="external nofollow noreferrer" target=_blank>#9617</a> (<a href=https://github.com/shinoi2 rel="external nofollow noreferrer" target=_blank>shinoi2</a>). 这个问题是在所有ClickHouse版本。</li> <li>修复可能的异常 <code class=syntax>Size of filter doesn't match size of column</code> 和 <code class=syntax>Invalid number of rows in Chunk</code> 在 <code class=syntax>MergeTreeRangeReader</code>. 它们可能在执行时出现 <code class=syntax>PREWHERE</code> 在某些情况下。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9132 rel="external nofollow noreferrer" target=_blank>#9132</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9612 rel="external nofollow noreferrer" target=_blank>#9612</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复了这个问题：如果你编写一个简单的算术表达式，则不会保留时区 <code class=syntax>time + 1</code> （与像这样的表达形成对比 <code class=syntax>time + INTERVAL 1 SECOND</code>). 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5743 rel="external nofollow noreferrer" target=_blank>#5743</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9323 rel="external nofollow noreferrer" target=_blank>#9323</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>). 这个问题是在所有ClickHouse版本。</li> <li>现在不可能创建或添加具有简单循环别名的列，如 <code class=syntax>a DEFAULT b, b DEFAULT a</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9603 rel="external nofollow noreferrer" target=_blank>#9603</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复了base64编码值末尾填充格式错误的问题。 更新base64库。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9491 rel="external nofollow noreferrer" target=_blank>#9491</a>，关闭 <a href=https://github.com/ClickHouse/ClickHouse/issues/9492 rel="external nofollow noreferrer" target=_blank>#9492</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9500 rel="external nofollow noreferrer" target=_blank>#9500</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复数据竞赛破坏 <code class=syntax>Poco::HTTPServer</code>. 当服务器启动并立即关闭时，可能会发生这种情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9468 rel="external nofollow noreferrer" target=_blank>#9468</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复可能的崩溃/错误的行数 <code class=syntax>LIMIT n WITH TIES</code> 当有很多行等于第n行时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9464 rel="external nofollow noreferrer" target=_blank>#9464</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复与列Ttl可能不匹配的校验和。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9451 rel="external nofollow noreferrer" target=_blank>#9451</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>修复当用户尝试崩溃 <code class=syntax>ALTER MODIFY SETTING</code> 对于老格式化 <code class=syntax>MergeTree</code> 表引擎家族. <a href=https://github.com/ClickHouse/ClickHouse/pull/9435 rel="external nofollow noreferrer" target=_blank>#9435</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>现在我们将尝试更频繁地完成突变。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9427 rel="external nofollow noreferrer" target=_blank>#9427</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复引入的复制协议不兼容 <a href=https://github.com/ClickHouse/ClickHouse/issues/8598 rel="external nofollow noreferrer" target=_blank>#8598</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/9412 rel="external nofollow noreferrer" target=_blank>#9412</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复数组类型的bloom_filter索引的not(has())。 <a href=https://github.com/ClickHouse/ClickHouse/pull/9407 rel="external nofollow noreferrer" target=_blank>#9407</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li> <li>固定的行为 <code class=syntax>match</code> 和 <code class=syntax>extract</code> 当干草堆有零字节的函数。 当干草堆不变时，这种行为是错误的。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9160 rel="external nofollow noreferrer" target=_blank>#9160</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9163 rel="external nofollow noreferrer" target=_blank>#9163</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/9345 rel="external nofollow noreferrer" target=_blank>#9345</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-1>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-1 title="Permanent link"> </a></h4> <ul> <li>异常处理现在可以在适用于Linux的Windows子系统上正常工作。 看https://github.com/ClickHouse-Extras/libunwind/pull/3 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6480 rel="external nofollow noreferrer" target=_blank>#6480</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/9564 rel="external nofollow noreferrer" target=_blank>#9564</a> (<a href=https://github.com/sobolevsv rel="external nofollow noreferrer" target=_blank>sobolevsv</a>)</li> </ul> <h3 id=clickhouse-release-v20-1-6-30-2020-03-05>ClickHouse释放v20.1.6.30,2020-03-05<a class=headerlink href=../amp/#clickhouse-release-v20-1-6-30-2020-03-05 title="Permanent link"> </a></h3> <h4 id=bug-fix-5>错误修复<a class=headerlink href=../amp/#bug-fix-5 title="Permanent link"> </a></h4> <ul> <li>修复压缩时的数据不兼容 <code class=syntax>T64</code> 编解ec<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9039 rel="external nofollow noreferrer" target=_blank>#9039</a> <a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>（abyss7)</a></li> <li>在一个线程中从MergeTree表中读取时修复范围顺序。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8964 rel="external nofollow noreferrer" target=_blank>#8964</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9050 rel="external nofollow noreferrer" target=_blank>#9050</a> <a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>(CurtizJ))</a></li> <li>修复可能的段错误 <code class=syntax>MergeTreeRangeReader</code>，同时执行 <code class=syntax>PREWHERE</code>. 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9064 rel="external nofollow noreferrer" target=_blank>#9064</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9106 rel="external nofollow noreferrer" target=_blank>#9106</a> <a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>(CurtizJ))</a></li> <li>修复 <code class=syntax>reinterpretAsFixedString</code> 返回 <code class=syntax>FixedString</code> 而不是 <code class=syntax>String</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9052 rel="external nofollow noreferrer" target=_blank>#9052</a> <a href=https://github.com/oandrew rel="external nofollow noreferrer" target=_blank>(oandrew)</a></li> <li>修复 <code class=syntax>joinGet</code> 使用可为空的返回类型。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8919 rel="external nofollow noreferrer" target=_blank>#8919</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9014 rel="external nofollow noreferrer" target=_blank>#9014</a> <a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>（amosbird)</a></li> <li>修复bittestall/bitTestAny函数的模糊测试和不正确的行为。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9143 rel="external nofollow noreferrer" target=_blank>#9143</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>（阿列克谢-米洛维多夫)</a></li> <li>修复当干草堆有零字节时匹配和提取函数的行为。 当干草堆不变时，这种行为是错误的。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9160 rel="external nofollow noreferrer" target=_blank>#9160</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9163 rel="external nofollow noreferrer" target=_blank>#9163</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>（阿列克谢-米洛维多夫)</a></li> <li>当使用非严格单调函数索引时，固定执行反转谓词。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9034 rel="external nofollow noreferrer" target=_blank>#9034</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9223 rel="external nofollow noreferrer" target=_blank>#9223</a> <a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>（Akazz)</a></li> <li>允许重写 <code class=syntax>CROSS</code> 到 <code class=syntax>INNER JOIN</code> 如果有 <code class=syntax>[NOT] LIKE</code> 操作员在 <code class=syntax>WHERE</code> 科。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9191 rel="external nofollow noreferrer" target=_blank>#9191</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9229 rel="external nofollow noreferrer" target=_blank>#9229</a> <a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>(4ertus2)</a></li> <li>允许使用日志引擎的表中的第一列成为别名。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9231 rel="external nofollow noreferrer" target=_blank>#9231</a> <a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>（abyss7)</a></li> <li>允许逗号加入 <code class=syntax>IN()</code> 进去 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7314 rel="external nofollow noreferrer" target=_blank>#7314</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9251 rel="external nofollow noreferrer" target=_blank>#9251</a> <a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>(4ertus2)</a></li> <li>改进 <code class=syntax>ALTER MODIFY/ADD</code> 查询逻辑。 现在你不能 <code class=syntax>ADD</code> 不带类型的列, <code class=syntax>MODIFY</code> 默认表达式不改变列的类型和 <code class=syntax>MODIFY</code> type不会丢失默认表达式值。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8669 rel="external nofollow noreferrer" target=_blank>#8669</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9227 rel="external nofollow noreferrer" target=_blank>#9227</a> <a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>(alesapin)</a></li> <li>修复突变最终确定，当已经完成突变时可以具有状态is_done=0。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9217 rel="external nofollow noreferrer" target=_blank>#9217</a> <a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>(alesapin)</a></li> <li>碌莽禄Support: “Processors” 管道系统.数字和系统.numbers_mt 这也修复了错误时 <code class=syntax>max_execution_time</code> 不被尊重。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7796 rel="external nofollow noreferrer" target=_blank>#7796</a> <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>(KochetovNicolai)</a></li> <li>修复错误的计数 <code class=syntax>DictCacheKeysRequestedFound</code> 公制。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9411 rel="external nofollow noreferrer" target=_blank>#9411</a> <a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>(nikitamikhaylov)</a></li> <li>添加了对存储策略的检查 <code class=syntax>ATTACH PARTITION FROM</code>, <code class=syntax>REPLACE PARTITION</code>, <code class=syntax>MOVE TO TABLE</code> 否则可能使部分数据在重新启动后无法访问，并阻止ClickHouse启动。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9383 rel="external nofollow noreferrer" target=_blank>#9383</a> <a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>（excitoon)</a></li> <li>在固定的瑞银报告 <code class=syntax>MergeTreeIndexSet</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9250 rel="external nofollow noreferrer" target=_blank>#9250</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9365 rel="external nofollow noreferrer" target=_blank>#9365</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>（阿列克谢-米洛维多夫)</a></li> <li>在BlockIO中修复可能的数据集。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9356 rel="external nofollow noreferrer" target=_blank>#9356</a> <a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>(KochetovNicolai)</a></li> <li>支持 <code class=syntax>UInt64</code> 在JSON相关函数中不适合Int64的数字。 更新 <code class=syntax>SIMDJSON</code> 为了主人 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9209 rel="external nofollow noreferrer" target=_blank>#9209</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9344 rel="external nofollow noreferrer" target=_blank>#9344</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>（阿列克谢-米洛维多夫)</a></li> <li>如果将数据目录挂载到单独的设备，则修复可用空间量计算不正确时的问题。 对于默认磁盘，计算数据子目录的可用空间。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7441 rel="external nofollow noreferrer" target=_blank>#7441</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9257 rel="external nofollow noreferrer" target=_blank>#9257</a> <a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>（米尔布)</a></li> <li>修复TLS连接可能会失败并显示消息时的问题 <code class=syntax>OpenSSL SSL_read: error:14094438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error and SSL Exception: error:2400006E:random number generator::error retrieving entropy.</code> 将OpenSSL更新到上游主机。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/8956 rel="external nofollow noreferrer" target=_blank>#8956</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>（阿列克谢-米洛维多夫)</a></li> <li>执行时 <code class=syntax>CREATE</code> 查询，在存储引擎参数中折叠常量表达式。 将空数据库名称替换为当前数据库。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6508 rel="external nofollow noreferrer" target=_blank>#6508</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3492 rel="external nofollow noreferrer" target=_blank>#3492</a>. 还修复了ClickHouseDictionarySource中检查本地地址。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9262 rel="external nofollow noreferrer" target=_blank>#9262</a> <a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>（tabplubix)</a></li> <li>修复段错误 <code class=syntax>StorageMerge</code>，从StorageFile读取时可能发生。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9387 rel="external nofollow noreferrer" target=_blank>#9387</a> <a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>（tabplubix)</a></li> <li>防止丢失数据 <code class=syntax>Kafka</code> 在极少数情况下，在读取后缀之后但在提交之前发生异常。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9378 rel="external nofollow noreferrer" target=_blank>#9378</a>. 相关: <a href=https://github.com/ClickHouse/ClickHouse/issues/7175 rel="external nofollow noreferrer" target=_blank>#7175</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9507 rel="external nofollow noreferrer" target=_blank>#9507</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>(菲利蒙诺夫)</a></li> <li>修复尝试使用/删除时导致服务器终止的错误 <code class=syntax>Kafka</code> 使用错误的参数创建的表。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9494 rel="external nofollow noreferrer" target=_blank>#9494</a>. 结合 <a href=https://github.com/ClickHouse/ClickHouse/issues/9507 rel="external nofollow noreferrer" target=_blank>#9507</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9513 rel="external nofollow noreferrer" target=_blank>#9513</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>(菲利蒙诺夫)</a></li> </ul> <h4 id=new-feature-1>新功能<a class=headerlink href=../amp/#new-feature-1 title="Permanent link"> </a></h4> <ul> <li>添加 <code class=syntax>deduplicate_blocks_in_dependent_materialized_views</code> 用于控制具有实例化视图的表中幂等插入的行为的选项。 这个新功能是由Altinity的特殊要求添加到错误修正版本中的。<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9070 rel="external nofollow noreferrer" target=_blank>#9070</a> <a href=https://github.com/urykhy rel="external nofollow noreferrer" target=_blank>(urykhy)</a></li> </ul> <h3 id=clickhouse-release-v20-1-2-4-2020-01-22>ClickHouse版本v20.1.2.4,2020-01-22<a class=headerlink href=../amp/#clickhouse-release-v20-1-2-4-2020-01-22 title="Permanent link"> </a></h3> <h4 id=backward-incompatible-change-1>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-1 title="Permanent link"> </a></h4> <ul> <li>使设置 <code class=syntax>merge_tree_uniform_read_distribution</code> 过时了 服务器仍可识别此设置，但无效。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8308 rel="external nofollow noreferrer" target=_blank>#8308</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更改函数的返回类型 <code class=syntax>greatCircleDistance</code> 到 <code class=syntax>Float32</code> 因为现在计算的结果是 <code class=syntax>Float32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7993 rel="external nofollow noreferrer" target=_blank>#7993</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>现在预计查询参数表示为 “escaped” 格式。 例如，要传递字符串 <code class=syntax>a&lt;tab&gt;b</code> 你必须写 <code class=syntax>a\tb</code> 或 <code class=syntax>a\&lt;tab&gt;b</code> 并分别, <code class=syntax>a%5Ctb</code> 或 <code class=syntax>a%5C%09b</code> 在URL中。 这是需要添加传递NULL作为的可能性 <code class=syntax>\N</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7488 rel="external nofollow noreferrer" target=_blank>#7488</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8517 rel="external nofollow noreferrer" target=_blank>#8517</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>启用 <code class=syntax>use_minimalistic_part_header_in_zookeeper</code> 设置 <code class=syntax>ReplicatedMergeTree</code> 默认情况下。 这将显着减少存储在ZooKeeper中的数据量。 自19.1版本以来支持此设置，我们已经在多个服务的生产中使用它，半年以上没有任何问题。 如果您有机会降级到19.1以前的版本，请禁用此设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6850 rel="external nofollow noreferrer" target=_blank>#6850</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>数据跳过索引已准备就绪并默认启用。 设置 <code class=syntax>allow_experimental_data_skipping_indices</code>, <code class=syntax>allow_experimental_cross_to_join_conversion</code> 和 <code class=syntax>allow_experimental_multiple_joins_emulation</code> 现在已经过时，什么也不做。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7974 rel="external nofollow noreferrer" target=_blank>#7974</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>添加新建 <code class=syntax>ANY JOIN</code> 逻辑 <code class=syntax>StorageJoin</code> 符合 <code class=syntax>JOIN</code> 操作。 要在不改变行为的情况下进行升级，您需要添加 <code class=syntax>SETTINGS any_join_distinct_right_table_keys = 1</code> 引擎联接表元数据或在升级后重新创建这些表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8400 rel="external nofollow noreferrer" target=_blank>#8400</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>要求重新启动服务器以应用日志记录配置中的更改。 这是一种临时解决方法，可以避免服务器将日志记录到已删除的日志文件中的错误（请参阅 <a href=https://github.com/ClickHouse/ClickHouse/issues/8696 rel="external nofollow noreferrer" target=_blank>#8696</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8707 rel="external nofollow noreferrer" target=_blank>#8707</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> </ul> <h4 id=new-feature-2>新功能<a class=headerlink href=../amp/#new-feature-2 title="Permanent link"> </a></h4> <ul> <li>添加了有关部件路径的信息 <code class=syntax>system.merges</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8043 rel="external nofollow noreferrer" target=_blank>#8043</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>添加执行能力 <code class=syntax>SYSTEM RELOAD DICTIONARY</code> 查询中 <code class=syntax>ON CLUSTER</code> 模式 <a href=https://github.com/ClickHouse/ClickHouse/pull/8288 rel="external nofollow noreferrer" target=_blank>#8288</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li> <li>添加执行能力 <code class=syntax>CREATE DICTIONARY</code> 查询中 <code class=syntax>ON CLUSTER</code> 模式 <a href=https://github.com/ClickHouse/ClickHouse/pull/8163 rel="external nofollow noreferrer" target=_blank>#8163</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>现在用户的个人资料 <code class=syntax>users.xml</code> 可以继承多个配置文件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8343 rel="external nofollow noreferrer" target=_blank>#8343</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li> <li>已添加 <code class=syntax>system.stack_trace</code> 允许查看所有服务器线程的堆栈跟踪的表。 这对于开发人员反省服务器状态非常有用。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7576 rel="external nofollow noreferrer" target=_blank>#7576</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8344 rel="external nofollow noreferrer" target=_blank>#8344</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>添加 <code class=syntax>DateTime64</code> 具有可配置子秒精度的数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7170 rel="external nofollow noreferrer" target=_blank>#7170</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>添加表函数 <code class=syntax>clusterAllReplicas</code> 这允许查询集群中的所有节点。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8493 rel="external nofollow noreferrer" target=_blank>#8493</a> (<a href=https://github.com/kiransunkari rel="external nofollow noreferrer" target=_blank>kiran sunkari</a>)</li> <li>添加聚合函数 <code class=syntax>categoricalInformationValue</code> 其计算出离散特征的信息值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8117 rel="external nofollow noreferrer" target=_blank>#8117</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>加快数据文件的解析 <code class=syntax>CSV</code>, <code class=syntax>TSV</code> 和 <code class=syntax>JSONEachRow</code> 通过并行进行格式化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7780 rel="external nofollow noreferrer" target=_blank>#7780</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>添加功能 <code class=syntax>bankerRound</code> 它执行银行家的四舍五入。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8112 rel="external nofollow noreferrer" target=_blank>#8112</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>支持区域名称的嵌入式字典中的更多语言: ‘ru’, ‘en’, ‘ua’, ‘uk’, ‘by’, ‘kz’, ‘tr’, ‘de’, ‘uz’, ‘lv’, ‘lt’, ‘et’, ‘pt’, ‘he’, ‘vi’. <a href=https://github.com/ClickHouse/ClickHouse/pull/8189 rel="external nofollow noreferrer" target=_blank>#8189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>改进的一致性 <code class=syntax>ANY JOIN</code> 逻辑 现在 <code class=syntax>t1 ANY LEFT JOIN t2</code> 等于 <code class=syntax>t2 ANY RIGHT JOIN t1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7665 rel="external nofollow noreferrer" target=_blank>#7665</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>添加设置 <code class=syntax>any_join_distinct_right_table_keys</code> 这使旧的行为 <code class=syntax>ANY INNER JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7665 rel="external nofollow noreferrer" target=_blank>#7665</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>添加新建 <code class=syntax>SEMI</code> 和 <code class=syntax>ANTI JOIN</code>. 老 <code class=syntax>ANY INNER JOIN</code> 行为现在可作为 <code class=syntax>SEMI LEFT JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7665 rel="external nofollow noreferrer" target=_blank>#7665</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>已添加 <code class=syntax>Distributed</code> 格式 <code class=syntax>File</code> 发动机和 <code class=syntax>file</code> 表函数，它允许从读 <code class=syntax>.bin</code> 通过异步插入生成的文件 <code class=syntax>Distributed</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8535 rel="external nofollow noreferrer" target=_blank>#8535</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>添加可选的重置列参数 <code class=syntax>runningAccumulate</code> 这允许为每个新的键值重置聚合结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8326 rel="external nofollow noreferrer" target=_blank>#8326</a> (<a href=https://github.com/kononencheg rel="external nofollow noreferrer" target=_blank>谢尔盖*科诺年科</a>)</li> <li>添加使用ClickHouse作为普罗米修斯端点的能力。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7900 rel="external nofollow noreferrer" target=_blank>#7900</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer" target=_blank>vdimir</a>)</li> <li>添加部分 <code class=syntax>&lt;remote_url_allow_hosts&gt;</code> 在 <code class=syntax>config.xml</code> 这将限制允许的主机用于远程表引擎和表函数 <code class=syntax>URL</code>, <code class=syntax>S3</code>, <code class=syntax>HDFS</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7154 rel="external nofollow noreferrer" target=_blank>#7154</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>添加功能 <code class=syntax>greatCircleAngle</code> 它计算球体上的距离（以度为单位）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8105 rel="external nofollow noreferrer" target=_blank>#8105</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>改变地球半径与h3库一致。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8105 rel="external nofollow noreferrer" target=_blank>#8105</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>已添加 <code class=syntax>JSONCompactEachRow</code> 和 <code class=syntax>JSONCompactEachRowWithNamesAndTypes</code> 输入和输出格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7841 rel="external nofollow noreferrer" target=_blank>#7841</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>增加了与文件相关的表引擎和表函数的功能 (<code class=syntax>File</code>, <code class=syntax>S3</code>, <code class=syntax>URL</code>, <code class=syntax>HDFS</code>）它允许读取和写入 <code class=syntax>gzip</code> 基于附加引擎参数或文件扩展名的文件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7840 rel="external nofollow noreferrer" target=_blank>#7840</a> (<a href=https://github.com/apbodrov rel="external nofollow noreferrer" target=_blank>安德烈*博德罗夫</a>)</li> <li>添加了 <code class=syntax>randomASCII(length)</code> 函数，生成一个字符串与一个随机集 <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer" target=_blank>ASCII</a> 可打印字符。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8401 rel="external nofollow noreferrer" target=_blank>#8401</a> (<a href=https://github.com/BayoNet rel="external nofollow noreferrer" target=_blank>刺刀</a>)</li> <li>添加功能 <code class=syntax>JSONExtractArrayRaw</code> 它返回从未解析的json数组元素上的数组 <code class=syntax>JSON</code> 字符串。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8081 rel="external nofollow noreferrer" target=_blank>#8081</a> (<a href=https://github.com/errx rel="external nofollow noreferrer" target=_blank>Oleg Matrokhin</a>)</li> <li>添加 <code class=syntax>arrayZip</code> 函数允许将多个长度相等的数组合成一个元组数组。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8149 rel="external nofollow noreferrer" target=_blank>#8149</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li> <li>添加根据配置的磁盘之间移动数据的能力 <code class=syntax>TTL</code>-表达式为 <code class=syntax>*MergeTree</code> 表引擎家族. <a href=https://github.com/ClickHouse/ClickHouse/pull/8140 rel="external nofollow noreferrer" target=_blank>#8140</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>增加了新的聚合功能 <code class=syntax>avgWeighted</code> 其允许计算加权平均值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7898 rel="external nofollow noreferrer" target=_blank>#7898</a> (<a href=https://github.com/apbodrov rel="external nofollow noreferrer" target=_blank>安德烈*博德罗夫</a>)</li> <li>现在并行解析默认启用 <code class=syntax>TSV</code>, <code class=syntax>TSKV</code>, <code class=syntax>CSV</code> 和 <code class=syntax>JSONEachRow</code> 格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7894 rel="external nofollow noreferrer" target=_blank>#7894</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>从添加几个地理功能 <code class=syntax>H3</code> 图书馆: <code class=syntax>h3GetResolution</code>, <code class=syntax>h3EdgeAngle</code>, <code class=syntax>h3EdgeLength</code>, <code class=syntax>h3IsValid</code> 和 <code class=syntax>h3kRing</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8034 rel="external nofollow noreferrer" target=_blank>#8034</a> (<a href=https://github.com/hombit rel="external nofollow noreferrer" target=_blank>Konstantin Malanchev</a>)</li> <li>增加了对brotli的支持 (<code class=syntax>br</code>）压缩文件相关的存储和表函数。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8156 rel="external nofollow noreferrer" target=_blank>#8156</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8526 rel="external nofollow noreferrer" target=_blank>#8526</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>添加 <code class=syntax>groupBit*</code> 功能的 <code class=syntax>SimpleAggregationFunction</code> 类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8485 rel="external nofollow noreferrer" target=_blank>#8485</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li> </ul> <h4 id=bug-fix-6>错误修复<a class=headerlink href=../amp/#bug-fix-6 title="Permanent link"> </a></h4> <ul> <li>修复重命名表 <code class=syntax>Distributed</code> 引擎 修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/7868 rel="external nofollow noreferrer" target=_blank>#7868</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8306 rel="external nofollow noreferrer" target=_blank>#8306</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>现在字典支持 <code class=syntax>EXPRESSION</code> 对于非ClickHouse SQL方言中任意字符串中的属性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8098 rel="external nofollow noreferrer" target=_blank>#8098</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复损坏 <code class=syntax>INSERT SELECT FROM mysql(...)</code> 查询。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8070 rel="external nofollow noreferrer" target=_blank>#8070</a> 和 <a href=https://github.com/ClickHouse/ClickHouse/issues/7960 rel="external nofollow noreferrer" target=_blank>#7960</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8234 rel="external nofollow noreferrer" target=_blank>#8234</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复错误 “Mismatch column sizes” 插入默认值时 <code class=syntax>Tuple</code> 从 <code class=syntax>JSONEachRow</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5653 rel="external nofollow noreferrer" target=_blank>#5653</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8606 rel="external nofollow noreferrer" target=_blank>#8606</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>现在将在使用的情况下抛出一个异常 <code class=syntax>WITH TIES</code> 旁边的 <code class=syntax>LIMIT BY</code>. 还增加了使用能力 <code class=syntax>TOP</code> 与 <code class=syntax>LIMIT BY</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7472 rel="external nofollow noreferrer" target=_blank>#7472</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7637 rel="external nofollow noreferrer" target=_blank>#7637</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>从新鲜的glibc版本中修复unintendent依赖关系 <code class=syntax>clickhouse-odbc-bridge</code> 二进制 <a href=https://github.com/ClickHouse/ClickHouse/pull/8046 rel="external nofollow noreferrer" target=_blank>#8046</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>修正错误的检查功能 <code class=syntax>*MergeTree</code> 引擎家族. 现在，当我们在最后一个颗粒和最后一个标记（非最终）中有相同数量的行时，它不会失败。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8047 rel="external nofollow noreferrer" target=_blank>#8047</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复插入 <code class=syntax>Enum*</code> 列后 <code class=syntax>ALTER</code> 查询，当基础数值类型等于表指定类型时。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7836 rel="external nofollow noreferrer" target=_blank>#7836</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7908 rel="external nofollow noreferrer" target=_blank>#7908</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>允许非常数负 “size” 函数的参数 <code class=syntax>substring</code>. 这是不允许的错误。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/4832 rel="external nofollow noreferrer" target=_blank>#4832</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7703 rel="external nofollow noreferrer" target=_blank>#7703</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复当错误数量的参数传递到解析错误 <code class=syntax>(O|J)DBC</code> 表引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7709 rel="external nofollow noreferrer" target=_blank>#7709</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>将日志发送到syslog时使用正在运行的clickhouse进程的命令名。 在以前的版本中，使用空字符串而不是命令名称。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8460 rel="external nofollow noreferrer" target=_blank>#8460</a> (<a href=https://github.com/mnach rel="external nofollow noreferrer" target=_blank>Michael Nacharov</a>)</li> <li>修复检查允许的主机 <code class=syntax>localhost</code>. 这个公关修复了在提供的解决方案 <a href=https://github.com/ClickHouse/ClickHouse/pull/8241 rel="external nofollow noreferrer" target=_blank>#8241</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8342 rel="external nofollow noreferrer" target=_blank>#8342</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>修复罕见的崩溃 <code class=syntax>argMin</code> 和 <code class=syntax>argMax</code> 长字符串参数的函数，当结果被用于 <code class=syntax>runningAccumulate</code> 功能。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8325 rel="external nofollow noreferrer" target=_blank>#8325</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8341 rel="external nofollow noreferrer" target=_blank>#8341</a> (<a href=https://github.com/769344359 rel="external nofollow noreferrer" target=_blank>恐龙</a>)</li> <li>修复表的内存过度使用 <code class=syntax>Buffer</code> 引擎 <a href=https://github.com/ClickHouse/ClickHouse/pull/8345 rel="external nofollow noreferrer" target=_blank>#8345</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>修正了可以采取的功能中的潜在错误 <code class=syntax>NULL</code> 作为参数之一，并返回非NULL。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8196 rel="external nofollow noreferrer" target=_blank>#8196</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>在线程池中更好地计算后台进程的指标 <code class=syntax>MergeTree</code> 表引擎. <a href=https://github.com/ClickHouse/ClickHouse/pull/8194 rel="external nofollow noreferrer" target=_blank>#8194</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复功能 <code class=syntax>IN</code> 里面 <code class=syntax>WHERE</code> 存在行级表筛选器时的语句。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6687 rel="external nofollow noreferrer" target=_blank>#6687</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8357 rel="external nofollow noreferrer" target=_blank>#8357</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>现在，如果整数值没有完全解析设置值，则会引发异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7678 rel="external nofollow noreferrer" target=_blank>#7678</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>修复当聚合函数用于查询具有两个以上本地分片的分布式表时出现的异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8164 rel="external nofollow noreferrer" target=_blank>#8164</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li> <li>现在，bloom filter可以处理零长度数组，并且不执行冗余计算。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8242 rel="external nofollow noreferrer" target=_blank>#8242</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li> <li>修正了通过匹配客户端主机来检查客户端主机是否允许 <code class=syntax>host_regexp</code> 在指定 <code class=syntax>users.xml</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8241 rel="external nofollow noreferrer" target=_blank>#8241</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>放松不明确的列检查，导致多个误报 <code class=syntax>JOIN ON</code> 科。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8385 rel="external nofollow noreferrer" target=_blank>#8385</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>修正了可能的服务器崩溃 (<code class=syntax>std::terminate</code>)当服务器不能发送或写入数据 <code class=syntax>JSON</code> 或 <code class=syntax>XML</code> 格式与值 <code class=syntax>String</code> 数据类型（需要 <code class=syntax>UTF-8</code> 验证）或使用Brotli算法或其他一些罕见情况下压缩结果数据时。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7603 rel="external nofollow noreferrer" target=_blank>#7603</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8384 rel="external nofollow noreferrer" target=_blank>#8384</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复竞争条件 <code class=syntax>StorageDistributedDirectoryMonitor</code> 被线人发现 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8364 rel="external nofollow noreferrer" target=_blank>#8364</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8383 rel="external nofollow noreferrer" target=_blank>#8383</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>现在背景合并 <code class=syntax>*MergeTree</code> 表引擎家族更准确地保留存储策略卷顺序。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8549 rel="external nofollow noreferrer" target=_blank>#8549</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>现在表引擎 <code class=syntax>Kafka</code> 与正常工作 <code class=syntax>Native</code> 格式。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6731 rel="external nofollow noreferrer" target=_blank>#6731</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/7337 rel="external nofollow noreferrer" target=_blank>#7337</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/8003 rel="external nofollow noreferrer" target=_blank>#8003</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8016 rel="external nofollow noreferrer" target=_blank>#8016</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>固定格式与标题（如 <code class=syntax>CSVWithNames</code>）这是抛出关于EOF表引擎的异常 <code class=syntax>Kafka</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8016 rel="external nofollow noreferrer" target=_blank>#8016</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>修复了从子查询右侧部分制作set的错误 <code class=syntax>IN</code> 科。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5767 rel="external nofollow noreferrer" target=_blank>#5767</a> 和 <a href=https://github.com/ClickHouse/ClickHouse/issues/2542 rel="external nofollow noreferrer" target=_blank>#2542</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7755 rel="external nofollow noreferrer" target=_blank>#7755</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>从存储读取时修复可能的崩溃 <code class=syntax>File</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7756 rel="external nofollow noreferrer" target=_blank>#7756</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>在固定的文件读取 <code class=syntax>Parquet</code> 包含类型列的格式 <code class=syntax>list</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8334 rel="external nofollow noreferrer" target=_blank>#8334</a> (<a href=https://github.com/maxulan rel="external nofollow noreferrer" target=_blank>马苏兰</a>)</li> <li>修复错误 <code class=syntax>Not found column</code> 对于分布式查询 <code class=syntax>PREWHERE</code> 条件取决于采样键if <code class=syntax>max_parallel_replicas &gt; 1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7913 rel="external nofollow noreferrer" target=_blank>#7913</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>修复错误 <code class=syntax>Not found column</code> 如果使用查询 <code class=syntax>PREWHERE</code> 依赖于表的别名，结果集由于主键条件而为空。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7911 rel="external nofollow noreferrer" target=_blank>#7911</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>函数的固定返回类型 <code class=syntax>rand</code> 和 <code class=syntax>randConstant</code> 在情况下 <code class=syntax>Nullable</code> 争论。 现在函数总是返回 <code class=syntax>UInt32</code> 而且从来没有 <code class=syntax>Nullable(UInt32)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8204 rel="external nofollow noreferrer" target=_blank>#8204</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>禁用谓词下推 <code class=syntax>WITH FILL</code> 表达。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7784 rel="external nofollow noreferrer" target=_blank>#7784</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7789 rel="external nofollow noreferrer" target=_blank>#7789</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li> <li>修正错误 <code class=syntax>count()</code> 结果 <code class=syntax>SummingMergeTree</code> 当 <code class=syntax>FINAL</code> 部分被使用。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3280 rel="external nofollow noreferrer" target=_blank>#3280</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7786 rel="external nofollow noreferrer" target=_blank>#7786</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>修复来自远程服务器的常量函数可能不正确的结果。 它发生在具有以下功能的查询中 <code class=syntax>version()</code>, <code class=syntax>uptime()</code> 等。 它为不同的服务器返回不同的常量值。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7666 rel="external nofollow noreferrer" target=_blank>#7666</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7689 rel="external nofollow noreferrer" target=_blank>#7689</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>修复下推谓词优化中导致错误结果的复杂错误。 这解决了下推谓词优化的很多问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8503 rel="external nofollow noreferrer" target=_blank>#8503</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li> <li>修复崩溃 <code class=syntax>CREATE TABLE .. AS dictionary</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8508 rel="external nofollow noreferrer" target=_blank>#8508</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>一些改进ClickHouse语法 <code class=syntax>.g4</code> 文件 <a href=https://github.com/ClickHouse/ClickHouse/pull/8294 rel="external nofollow noreferrer" target=_blank>#8294</a> (<a href=https://github.com/taiyang-li rel="external nofollow noreferrer" target=_blank>太阳里</a>)</li> <li>修复导致崩溃的错误 <code class=syntax>JOIN</code>s与表与发动机 <code class=syntax>Join</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7556 rel="external nofollow noreferrer" target=_blank>#7556</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/8254 rel="external nofollow noreferrer" target=_blank>#8254</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/7915 rel="external nofollow noreferrer" target=_blank>#7915</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/8100 rel="external nofollow noreferrer" target=_blank>#8100</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8298 rel="external nofollow noreferrer" target=_blank>#8298</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>修复冗余字典重新加载 <code class=syntax>CREATE DATABASE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7916 rel="external nofollow noreferrer" target=_blank>#7916</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>限制从读取流的最大数量 <code class=syntax>StorageFile</code> 和 <code class=syntax>StorageHDFS</code>. 修复https://github.com/ClickHouse/ClickHouse/issues/7650. <a href=https://github.com/ClickHouse/ClickHouse/pull/7981 rel="external nofollow noreferrer" target=_blank>#7981</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复bug <code class=syntax>ALTER ... MODIFY ... CODEC</code> 查询，当用户同时指定默认表达式和编解ec。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8593 rel="external nofollow noreferrer" target=_blank>8593</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8614 rel="external nofollow noreferrer" target=_blank>#8614</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复列的后台合并错误 <code class=syntax>SimpleAggregateFunction(LowCardinality)</code> 类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8613 rel="external nofollow noreferrer" target=_blank>#8613</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>固定类型签入功能 <code class=syntax>toDateTime64</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8375 rel="external nofollow noreferrer" target=_blank>#8375</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>现在服务器不崩溃 <code class=syntax>LEFT</code> 或 <code class=syntax>FULL JOIN</code> 与和加入引擎和不支持 <code class=syntax>join_use_nulls</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8479 rel="external nofollow noreferrer" target=_blank>#8479</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>现在 <code class=syntax>DROP DICTIONARY IF EXISTS db.dict</code> 查询不会抛出异常，如果 <code class=syntax>db</code> 根本不存在 <a href=https://github.com/ClickHouse/ClickHouse/pull/8185 rel="external nofollow noreferrer" target=_blank>#8185</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>修复表函数中可能出现的崩溃 (<code class=syntax>file</code>, <code class=syntax>mysql</code>, <code class=syntax>remote</code>）引用删除引起的 <code class=syntax>IStorage</code> 对象。 修复插入表函数时指定的列的不正确解析。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7762 rel="external nofollow noreferrer" target=_blank>#7762</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>确保网络启动前 <code class=syntax>clickhouse-server</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7507 rel="external nofollow noreferrer" target=_blank>#7507</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8570 rel="external nofollow noreferrer" target=_blank>#8570</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li> <li>修复安全连接的超时处理，因此查询不会无限挂起。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8126 rel="external nofollow noreferrer" target=_blank>#8126</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8128 rel="external nofollow noreferrer" target=_blank>#8128</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复 <code class=syntax>clickhouse-copier</code>并发工人之间的冗余争用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7816 rel="external nofollow noreferrer" target=_blank>#7816</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer" target=_blank>丁香飞</a>)</li> <li>现在突变不会跳过附加的部分，即使它们的突变版本比当前的突变版本大。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7812 rel="external nofollow noreferrer" target=_blank>#7812</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/8250 rel="external nofollow noreferrer" target=_blank>#8250</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>忽略冗余副本 <code class=syntax>*MergeTree</code> 数据部分移动到另一个磁盘和服务器重新启动后。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7810 rel="external nofollow noreferrer" target=_blank>#7810</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复崩溃 <code class=syntax>FULL JOIN</code> 与 <code class=syntax>LowCardinality</code> 在 <code class=syntax>JOIN</code> 钥匙 <a href=https://github.com/ClickHouse/ClickHouse/pull/8252 rel="external nofollow noreferrer" target=_blank>#8252</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>禁止在插入查询中多次使用列名，如 <code class=syntax>INSERT INTO tbl (x, y, x)</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5465 rel="external nofollow noreferrer" target=_blank>#5465</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/7681 rel="external nofollow noreferrer" target=_blank>#7681</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7685 rel="external nofollow noreferrer" target=_blank>#7685</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>增加了回退，用于检测未知Cpu的物理CPU内核数量（使用逻辑CPU内核数量）。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5239 rel="external nofollow noreferrer" target=_blank>#5239</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7726 rel="external nofollow noreferrer" target=_blank>#7726</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复 <code class=syntax>There's no column</code> 实例化列和别名列出错。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8210 rel="external nofollow noreferrer" target=_blank>#8210</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>固定切断崩溃时 <code class=syntax>EXISTS</code> 查询没有使用 <code class=syntax>TABLE</code> 或 <code class=syntax>DICTIONARY</code> 预选赛 就像 <code class=syntax>EXISTS t</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8172 rel="external nofollow noreferrer" target=_blank>#8172</a>. 此错误在版本19.17中引入。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8213 rel="external nofollow noreferrer" target=_blank>#8213</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复罕见错误 <code class=syntax>"Sizes of columns doesn't match"</code> 使用时可能会出现 <code class=syntax>SimpleAggregateFunction</code> 列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7790 rel="external nofollow noreferrer" target=_blank>#7790</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li> <li>修正错误，其中用户空 <code class=syntax>allow_databases</code> 可以访问所有数据库（和相同的 <code class=syntax>allow_dictionaries</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7793 rel="external nofollow noreferrer" target=_blank>#7793</a> (<a href=https://github.com/DeifyTheGod rel="external nofollow noreferrer" target=_blank>DeifyTheGod</a>)</li> <li>修复客户端崩溃时，服务器已经从客户端断开连接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8071 rel="external nofollow noreferrer" target=_blank>#8071</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>修复 <code class=syntax>ORDER BY</code> 在按主键前缀和非主键后缀排序的情况下的行为。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7759 rel="external nofollow noreferrer" target=_blank>#7759</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>检查表中是否存在合格列。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6836 rel="external nofollow noreferrer" target=_blank>#6836</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7758 rel="external nofollow noreferrer" target=_blank>#7758</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>固定行为 <code class=syntax>ALTER MOVE</code> 合并完成后立即运行移动指定的超部分。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8103 rel="external nofollow noreferrer" target=_blank>#8103</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8104 rel="external nofollow noreferrer" target=_blank>#8104</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>使用时修复可能的服务器崩溃 <code class=syntax>UNION</code> 具有不同数量的列。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7279 rel="external nofollow noreferrer" target=_blank>#7279</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7929 rel="external nofollow noreferrer" target=_blank>#7929</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>修复函数结果子字符串的大小 <code class=syntax>substr</code> 负大小。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8589 rel="external nofollow noreferrer" target=_blank>#8589</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>现在服务器不执行部分突变 <code class=syntax>MergeTree</code> 如果后台池中没有足够的可用线程。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8588 rel="external nofollow noreferrer" target=_blank>#8588</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复格式化时的小错字 <code class=syntax>UNION ALL</code> AST. <a href=https://github.com/ClickHouse/ClickHouse/pull/7999 rel="external nofollow noreferrer" target=_blank>#7999</a> (<a href=https://github.com/litao91 rel="external nofollow noreferrer" target=_blank>litao91</a>)</li> <li>修正了负数不正确的布隆过滤结果。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8317 rel="external nofollow noreferrer" target=_blank>#8317</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8566 rel="external nofollow noreferrer" target=_blank>#8566</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li> <li>在解压缩固定潜在的缓冲区溢出。 恶意用户可以传递捏造的压缩数据，这将导致缓冲区后读取。 这个问题是由Yandex信息安全团队的Eldar Zaitov发现的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8404 rel="external nofollow noreferrer" target=_blank>#8404</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复因整数溢出而导致的错误结果 <code class=syntax>arrayIntersect</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7777 rel="external nofollow noreferrer" target=_blank>#7777</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>现在 <code class=syntax>OPTIMIZE TABLE</code> query不会等待脱机副本执行该操作。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8314 rel="external nofollow noreferrer" target=_blank>#8314</a> (<a href=https://github.com/javisantana rel="external nofollow noreferrer" target=_blank>javi santana</a>)</li> <li>固定 <code class=syntax>ALTER TTL</code> 解析器 <code class=syntax>Replicated*MergeTree</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8318 rel="external nofollow noreferrer" target=_blank>#8318</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复服务器和客户端之间的通信，以便服务器在查询失败后读取临时表信息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8084 rel="external nofollow noreferrer" target=_blank>#8084</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>修复 <code class=syntax>bitmapAnd</code> 在聚合位图和标量位图相交时出现函数错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8082 rel="external nofollow noreferrer" target=_blank>#8082</a> (<a href=https://github.com/moon03432 rel="external nofollow noreferrer" target=_blank>黄月</a>)</li> <li>完善的定义 <code class=syntax>ZXid</code> 根据动物园管理员的程序员指南，它修复了错误 <code class=syntax>clickhouse-cluster-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8088 rel="external nofollow noreferrer" target=_blank>#8088</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer" target=_blank>丁香飞</a>)</li> <li><code class=syntax>odbc</code> 表函数现在尊重 <code class=syntax>external_table_functions_use_nulls</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7506 rel="external nofollow noreferrer" target=_blank>#7506</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>修正了导致罕见的数据竞赛的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8143 rel="external nofollow noreferrer" target=_blank>#8143</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>现在 <code class=syntax>SYSTEM RELOAD DICTIONARY</code> 完全重新加载字典，忽略 <code class=syntax>update_field</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7440 rel="external nofollow noreferrer" target=_blank>#7440</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8037 rel="external nofollow noreferrer" target=_blank>#8037</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>添加检查字典是否存在于创建查询的能力。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8032 rel="external nofollow noreferrer" target=_blank>#8032</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复 <code class=syntax>Float*</code> 解析中 <code class=syntax>Values</code> 格式。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7817 rel="external nofollow noreferrer" target=_blank>#7817</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7870 rel="external nofollow noreferrer" target=_blank>#7870</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复崩溃时，我们不能在一些后台操作保留空间 <code class=syntax>*MergeTree</code> 表引擎家族. <a href=https://github.com/ClickHouse/ClickHouse/pull/7873 rel="external nofollow noreferrer" target=_blank>#7873</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复表包含合并操作时的崩溃 <code class=syntax>SimpleAggregateFunction(LowCardinality)</code> 列。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8515 rel="external nofollow noreferrer" target=_blank>#8515</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8522 rel="external nofollow noreferrer" target=_blank>#8522</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>恢复对所有ICU区域设置的支持，并添加对常量表达式应用排序规则的功能。 还添加语言名称 <code class=syntax>system.collations</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8051 rel="external nofollow noreferrer" target=_blank>#8051</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修正错误时，外部字典与零最小寿命 (<code class=syntax>LIFETIME(MIN 0 MAX N)</code>, <code class=syntax>LIFETIME(N)</code>）不要在后台更新。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7983 rel="external nofollow noreferrer" target=_blank>#7983</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复当clickhouse源外部字典在查询中有子查询时崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8351 rel="external nofollow noreferrer" target=_blank>#8351</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>修复文件扩展名不正确的解析表与引擎 <code class=syntax>URL</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8157 rel="external nofollow noreferrer" target=_blank>#8157</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8419 rel="external nofollow noreferrer" target=_blank>#8419</a> (<a href=https://github.com/apbodrov rel="external nofollow noreferrer" target=_blank>安德烈*博德罗夫</a>)</li> <li>修复 <code class=syntax>CHECK TABLE</code> 查询为 <code class=syntax>*MergeTree</code> 表没有关键. 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7543 rel="external nofollow noreferrer" target=_blank>#7543</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7979 rel="external nofollow noreferrer" target=_blank>#7979</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>固定转换 <code class=syntax>Float64</code> 到MySQL类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8079 rel="external nofollow noreferrer" target=_blank>#8079</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li> <li>现在，如果表没有完全删除，因为服务器崩溃，服务器将尝试恢复并加载它。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8176 rel="external nofollow noreferrer" target=_blank>#8176</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>修复了表函数中的崩溃 <code class=syntax>file</code> 同时插入到不存在的文件。 现在在这种情况下，文件将被创建，然后插入将被处理。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8177 rel="external nofollow noreferrer" target=_blank>#8177</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>修复罕见的死锁时，可能发生 <code class=syntax>trace_log</code> 处于启用状态。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7838 rel="external nofollow noreferrer" target=_blank>#7838</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>添加能力与不同类型的工作，除了 <code class=syntax>Date</code> 在 <code class=syntax>RangeHashed</code> 从DDL查询创建的外部字典。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7899 rel="external nofollow noreferrer" target=_blank>7899</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8275 rel="external nofollow noreferrer" target=_blank>#8275</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复崩溃时 <code class=syntax>now64()</code> 用另一个函数的结果调用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8270 rel="external nofollow noreferrer" target=_blank>#8270</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>修正了通过mysql有线协议检测客户端IP连接的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7743 rel="external nofollow noreferrer" target=_blank>#7743</a> (<a href=https://github.com/dmitriy-myz rel="external nofollow noreferrer" target=_blank>Dmitry Muzyka</a>)</li> <li>修复空阵列处理 <code class=syntax>arraySplit</code> 功能。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7708 rel="external nofollow noreferrer" target=_blank>#7708</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7747 rel="external nofollow noreferrer" target=_blank>#7747</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>修复了以下问题 <code class=syntax>pid-file</code> 另一个运行 <code class=syntax>clickhouse-server</code> 可能会被删除。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8487 rel="external nofollow noreferrer" target=_blank>#8487</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer" target=_blank>徐伟清</a>)</li> <li>修复字典重新加载，如果它有 <code class=syntax>invalidate_query</code>，停止更新，并在以前的更新尝试一些异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8029 rel="external nofollow noreferrer" target=_blank>#8029</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修正了功能错误 <code class=syntax>arrayReduce</code> 这可能会导致 “double free” 和聚合函数组合器中的错误 <code class=syntax>Resample</code> 这可能会导致内存泄漏。 添加聚合功能 <code class=syntax>aggThrow</code>. 此功能可用于测试目的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8446 rel="external nofollow noreferrer" target=_blank>#8446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> </ul> <h4 id=improvement-1>改进<a class=headerlink href=../amp/#improvement-1 title="Permanent link"> </a></h4> <ul> <li>改进了使用时的日志记录 <code class=syntax>S3</code> 表引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8251 rel="external nofollow noreferrer" target=_blank>#8251</a> (<a href=https://github.com/GrigoryPervakov rel="external nofollow noreferrer" target=_blank>Grigory Pervakov</a>)</li> <li>在调用时未传递任何参数时打印帮助消息 <code class=syntax>clickhouse-local</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5335 rel="external nofollow noreferrer" target=_blank>#5335</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8230 rel="external nofollow noreferrer" target=_blank>#8230</a> (<a href=https://github.com/Melancholic rel="external nofollow noreferrer" target=_blank>安德烈*纳戈尔尼</a>)</li> <li>添加设置 <code class=syntax>mutations_sync</code> 这允许等待 <code class=syntax>ALTER UPDATE/DELETE</code> 同步查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8237 rel="external nofollow noreferrer" target=_blank>#8237</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>允许设置相对 <code class=syntax>user_files_path</code> 在 <code class=syntax>config.xml</code> （在类似的方式 <code class=syntax>format_schema_path</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7632 rel="external nofollow noreferrer" target=_blank>#7632</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>为转换函数添加非法类型的异常 <code class=syntax>-OrZero</code> 后缀 <a href=https://github.com/ClickHouse/ClickHouse/pull/7880 rel="external nofollow noreferrer" target=_blank>#7880</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer" target=_blank>安德烈*科尼亚耶夫</a>)</li> <li>简化在分布式查询中发送到分片的数据头的格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8044 rel="external nofollow noreferrer" target=_blank>#8044</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li><code class=syntax>Live View</code> 表引擎重构。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8519 rel="external nofollow noreferrer" target=_blank>#8519</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li> <li>为从DDL查询创建的外部字典添加额外的检查。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8127 rel="external nofollow noreferrer" target=_blank>#8127</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>修复错误 <code class=syntax>Column ... already exists</code> 使用时 <code class=syntax>FINAL</code> 和 <code class=syntax>SAMPLE</code> together, e.g. <code class=syntax>select count() from table final sample 1/2</code>. 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5186 rel="external nofollow noreferrer" target=_blank>#5186</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7907 rel="external nofollow noreferrer" target=_blank>#7907</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>现在表的第一个参数 <code class=syntax>joinGet</code> 函数可以是表标识符。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7707 rel="external nofollow noreferrer" target=_blank>#7707</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>允许使用 <code class=syntax>MaterializedView</code> 与上面的子查询 <code class=syntax>Kafka</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8197 rel="external nofollow noreferrer" target=_blank>#8197</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>现在后台在磁盘之间移动，运行它的seprate线程池。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7670 rel="external nofollow noreferrer" target=_blank>#7670</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li><code class=syntax>SYSTEM RELOAD DICTIONARY</code> 现在同步执行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8240 rel="external nofollow noreferrer" target=_blank>#8240</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>堆栈跟踪现在显示物理地址（对象文件中的偏移量），而不是虚拟内存地址（加载对象文件的位置）。 这允许使用 <code class=syntax>addr2line</code> 当二进制独立于位置并且ASLR处于活动状态时。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8360 rel="external nofollow noreferrer" target=_blank>#8360</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8387 rel="external nofollow noreferrer" target=_blank>#8387</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>支持行级安全筛选器的新语法: <code class=syntax>&lt;table name='table_name'&gt;…&lt;/table&gt;</code>. 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5779 rel="external nofollow noreferrer" target=_blank>#5779</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8381 rel="external nofollow noreferrer" target=_blank>#8381</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>现在 <code class=syntax>cityHash</code> 功能可以与工作 <code class=syntax>Decimal</code> 和 <code class=syntax>UUID</code> 类型。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5184 rel="external nofollow noreferrer" target=_blank>#5184</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7693 rel="external nofollow noreferrer" target=_blank>#7693</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li> <li>从系统日志中删除了固定的索引粒度（它是1024），因为它在实现自适应粒度之后已经过时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7698 rel="external nofollow noreferrer" target=_blank>#7698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>当ClickHouse在没有SSL的情况下编译时，启用MySQL兼容服务器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7852 rel="external nofollow noreferrer" target=_blank>#7852</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li> <li>现在服务器校验和分布式批处理，这在批处理中损坏数据的情况下提供了更多详细的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7914 rel="external nofollow noreferrer" target=_blank>#7914</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>碌莽禄Support: <code class=syntax>DROP DATABASE</code>, <code class=syntax>DETACH TABLE</code>, <code class=syntax>DROP TABLE</code> 和 <code class=syntax>ATTACH TABLE</code> 为 <code class=syntax>MySQL</code> 数据库引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8202 rel="external nofollow noreferrer" target=_blank>#8202</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li> <li>在S3表功能和表引擎中添加身份验证。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7623 rel="external nofollow noreferrer" target=_blank>#7623</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>增加了检查额外的部分 <code class=syntax>MergeTree</code> 在不同的磁盘上，为了不允许错过未定义磁盘上的数据部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8118 rel="external nofollow noreferrer" target=_blank>#8118</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>启用Mac客户端和服务器的SSL支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8297 rel="external nofollow noreferrer" target=_blank>#8297</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>现在ClickHouse可以作为MySQL联合服务器（参见https://dev.mysql.com/doc/refman/5.7/en/federated-create-server.html）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7717 rel="external nofollow noreferrer" target=_blank>#7717</a> (<a href=https://github.com/MaxFedotov rel="external nofollow noreferrer" target=_blank>Maxim Fedotov</a>)</li> <li><code class=syntax>clickhouse-client</code> 现在只能启用 <code class=syntax>bracketed-paste</code> 当多查询处于打开状态且多行处于关闭状态时。 这修复（＃7757）[<a href=https://github.com/ClickHouse/ClickHouse/issues/7757 target=_blank>https://github.com/ClickHouse/ClickHouse/issues/7757</a>。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7761 rel="external nofollow noreferrer" target=_blank>#7761</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>碌莽禄Support: <code class=syntax>Array(Decimal)</code> 在 <code class=syntax>if</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7721 rel="external nofollow noreferrer" target=_blank>#7721</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>支持小数 <code class=syntax>arrayDifference</code>, <code class=syntax>arrayCumSum</code> 和 <code class=syntax>arrayCumSumNegative</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7724 rel="external nofollow noreferrer" target=_blank>#7724</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>已添加 <code class=syntax>lifetime</code> 列到 <code class=syntax>system.dictionaries</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/issues/6820 rel="external nofollow noreferrer" target=_blank>#6820</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7727 rel="external nofollow noreferrer" target=_blank>#7727</a> (<a href=https://github.com/kekekekule rel="external nofollow noreferrer" target=_blank>kekekekule</a>)</li> <li>改进了检查不同磁盘上的现有部件 <code class=syntax>*MergeTree</code> 表引擎. 地址 <a href=https://github.com/ClickHouse/ClickHouse/issues/7660 rel="external nofollow noreferrer" target=_blank>#7660</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8440 rel="external nofollow noreferrer" target=_blank>#8440</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>集成与 <code class=syntax>AWS SDK</code> 为 <code class=syntax>S3</code> 交互允许使用开箱即用的所有S3功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8011 rel="external nofollow noreferrer" target=_blank>#8011</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer" target=_blank>帕维尔*科瓦连科</a>)</li> <li>增加了对子查询的支持 <code class=syntax>Live View</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/7792 rel="external nofollow noreferrer" target=_blank>#7792</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li> <li>检查使用 <code class=syntax>Date</code> 或 <code class=syntax>DateTime</code> 从列 <code class=syntax>TTL</code> 表达式已删除。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7920 rel="external nofollow noreferrer" target=_blank>#7920</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>有关磁盘的信息已添加到 <code class=syntax>system.detached_parts</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/7833 rel="external nofollow noreferrer" target=_blank>#7833</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>现在设置 <code class=syntax>max_(table|partition)_size_to_drop</code> 无需重新启动即可更改。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7779 rel="external nofollow noreferrer" target=_blank>#7779</a> (<a href=https://github.com/GrigoryPervakov rel="external nofollow noreferrer" target=_blank>Grigory Pervakov</a>)</li> <li>错误消息的可用性略好。 要求用户不要删除下面的行 <code class=syntax>Stack trace:</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7897 rel="external nofollow noreferrer" target=_blank>#7897</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更好地阅读消息 <code class=syntax>Kafka</code> 引擎在各种格式后 <a href=https://github.com/ClickHouse/ClickHouse/issues/7935 rel="external nofollow noreferrer" target=_blank>#7935</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8035 rel="external nofollow noreferrer" target=_blank>#8035</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>与不支持MySQL客户端更好的兼容性 <code class=syntax>sha2_password</code> 验证插件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8036 rel="external nofollow noreferrer" target=_blank>#8036</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li> <li>支持MySQL兼容性服务器中的更多列类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7975 rel="external nofollow noreferrer" target=_blank>#7975</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li> <li>执行 <code class=syntax>ORDER BY</code> 优化 <code class=syntax>Merge</code>, <code class=syntax>Buffer</code> 和 <code class=syntax>Materilized View</code> 存储与底层 <code class=syntax>MergeTree</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8130 rel="external nofollow noreferrer" target=_blank>#8130</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li> <li>现在我们总是使用POSIX实现 <code class=syntax>getrandom</code> 与旧内核更好的兼容性（\&lt;3.17）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7940 rel="external nofollow noreferrer" target=_blank>#7940</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>更好地检查移动ttl规则中的有效目标。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8410 rel="external nofollow noreferrer" target=_blank>#8410</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>更好地检查损坏的刀片批次 <code class=syntax>Distributed</code> 表引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7933 rel="external nofollow noreferrer" target=_blank>#7933</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>添加带有部件名称数组的列，这些部件将来必须处理突变 <code class=syntax>system.mutations</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/8179 rel="external nofollow noreferrer" target=_blank>#8179</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>处理器的并行合并排序优化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8552 rel="external nofollow noreferrer" target=_blank>#8552</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>设置 <code class=syntax>mark_cache_min_lifetime</code> 现在已经过时了，什么也不做。 在以前的版本中，标记缓存可以在内存中增长大于 <code class=syntax>mark_cache_size</code> 以容纳内的数据 <code class=syntax>mark_cache_min_lifetime</code> 秒。 这导致了混乱和比预期更高的内存使用率，这在内存受限的系统上尤其糟糕。 如果您在安装此版本后会看到性能下降，则应增加 <code class=syntax>mark_cache_size</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8484 rel="external nofollow noreferrer" target=_blank>#8484</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>准备使用 <code class=syntax>tid</code> 到处都是 这是必要的 <a href=https://github.com/ClickHouse/ClickHouse/issues/7477 rel="external nofollow noreferrer" target=_blank>#7477</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8276 rel="external nofollow noreferrer" target=_blank>#8276</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> </ul> <h4 id=performance-improvement-1>性能改进<a class=headerlink href=../amp/#performance-improvement-1 title="Permanent link"> </a></h4> <ul> <li>处理器管道中的性能优化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7988 rel="external nofollow noreferrer" target=_blank>#7988</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>缓存字典中过期密钥的非阻塞更新（具有读取旧密钥的权限）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8303 rel="external nofollow noreferrer" target=_blank>#8303</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>没有编译ClickHouse <code class=syntax>-fno-omit-frame-pointer</code> 在全球范围内多余一个寄存器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8097 rel="external nofollow noreferrer" target=_blank>#8097</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>加速 <code class=syntax>greatCircleDistance</code> 功能，并为它添加性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7307 rel="external nofollow noreferrer" target=_blank>#7307</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>改进的功能性能 <code class=syntax>roundDown</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8465 rel="external nofollow noreferrer" target=_blank>#8465</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>改进的性能 <code class=syntax>max</code>, <code class=syntax>min</code>, <code class=syntax>argMin</code>, <code class=syntax>argMax</code> 为 <code class=syntax>DateTime64</code> 数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8199 rel="external nofollow noreferrer" target=_blank>#8199</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>改进了无限制或大限制和外部排序的排序性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8545 rel="external nofollow noreferrer" target=_blank>#8545</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>改进的性能格式化浮点数高达6倍。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8542 rel="external nofollow noreferrer" target=_blank>#8542</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>改进的性能 <code class=syntax>modulo</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7750 rel="external nofollow noreferrer" target=_blank>#7750</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>优化 <code class=syntax>ORDER BY</code> 并与单列键合并。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8335 rel="external nofollow noreferrer" target=_blank>#8335</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更好地实施 <code class=syntax>arrayReduce</code>, <code class=syntax>-Array</code> 和 <code class=syntax>-State</code> 组合子 <a href=https://github.com/ClickHouse/ClickHouse/pull/7710 rel="external nofollow noreferrer" target=_blank>#7710</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>现在 <code class=syntax>PREWHERE</code> 应优化为至少一样高效 <code class=syntax>WHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7769 rel="external nofollow noreferrer" target=_blank>#7769</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>改进方式 <code class=syntax>round</code> 和 <code class=syntax>roundBankers</code> 处理负数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8229 rel="external nofollow noreferrer" target=_blank>#8229</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>改进的解码性能 <code class=syntax>DoubleDelta</code> 和 <code class=syntax>Gorilla</code> 编解码器大约30-40％。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7082 rel="external nofollow noreferrer" target=_blank>#7082</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8019 rel="external nofollow noreferrer" target=_blank>#8019</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>改进的性能 <code class=syntax>base64</code> 相关功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8444 rel="external nofollow noreferrer" target=_blank>#8444</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>增加了一个功能 <code class=syntax>geoDistance</code>. 它类似于 <code class=syntax>greatCircleDistance</code> 但使用近似于WGS-84椭球模型。 两个功能的性能几乎相同。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8086 rel="external nofollow noreferrer" target=_blank>#8086</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更快 <code class=syntax>min</code> 和 <code class=syntax>max</code> 聚合函数 <code class=syntax>Decimal</code> 数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8144 rel="external nofollow noreferrer" target=_blank>#8144</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>矢量化处理 <code class=syntax>arrayReduce</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7608 rel="external nofollow noreferrer" target=_blank>#7608</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li><code class=syntax>if</code> 链现在优化为 <code class=syntax>multiIf</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8355 rel="external nofollow noreferrer" target=_blank>#8355</a> (<a href=https://github.com/kamalov-ruslan rel="external nofollow noreferrer" target=_blank>kamalov-ruslan</a>)</li> <li>修复性能回归 <code class=syntax>Kafka</code> 表引擎在19.15中引入。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7261 rel="external nofollow noreferrer" target=_blank>#7261</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7935 rel="external nofollow noreferrer" target=_blank>#7935</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>已删除 “pie” 代码生成 <code class=syntax>gcc</code> 从Debian软件包偶尔带来默认情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8483 rel="external nofollow noreferrer" target=_blank>#8483</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>并行解析数据格式 <a href=https://github.com/ClickHouse/ClickHouse/pull/6553 rel="external nofollow noreferrer" target=_blank>#6553</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li> <li>启用优化的解析器 <code class=syntax>Values</code> 默认使用表达式 (<code class=syntax>input_format_values_deduce_templates_of_expressions=1</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/8231 rel="external nofollow noreferrer" target=_blank>#8231</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-2>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-2 title="Permanent link"> </a></h4> <ul> <li>构建修复 <code class=syntax>ARM</code> 而在最小模式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8304 rel="external nofollow noreferrer" target=_blank>#8304</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>添加复盖文件刷新 <code class=syntax>clickhouse-server</code> 当不调用std::atexit时。 还略微改进了无状态测试的复盖率日志记录。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8267 rel="external nofollow noreferrer" target=_blank>#8267</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>更新contrib中的LLVM库。 避免从操作系统包中使用LLVM。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8258 rel="external nofollow noreferrer" target=_blank>#8258</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>使bund绑 <code class=syntax>curl</code> 建立完全安静。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8232 rel="external nofollow noreferrer" target=_blank>#8232</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8203 rel="external nofollow noreferrer" target=_blank>#8203</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer" target=_blank>帕维尔*科瓦连科</a>)</li> <li>修复一些 <code class=syntax>MemorySanitizer</code> 警告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8235 rel="external nofollow noreferrer" target=_blank>#8235</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>使用 <code class=syntax>add_warning</code> 和 <code class=syntax>no_warning</code> 宏 <code class=syntax>CMakeLists.txt</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8604 rel="external nofollow noreferrer" target=_blank>#8604</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li> <li>添加对Minio S3兼容对象的支持（<a href=https://min.io/)为了更好的集成测试 target=_blank>https://min.io/)为了更好的集成测试</a>。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7863 rel="external nofollow noreferrer" target=_blank>#7863</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7875 rel="external nofollow noreferrer" target=_blank>#7875</a> (<a href=https://github.com/Jokser rel="external nofollow noreferrer" target=_blank>帕维尔*科瓦连科</a>)</li> <li>导入 <code class=syntax>libc</code> 标题到contrib。 它允许在各种系统中使构建更加一致（仅适用于 <code class=syntax>x86_64-linux-gnu</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/5773 rel="external nofollow noreferrer" target=_blank>#5773</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>删除 <code class=syntax>-fPIC</code> 从一些图书馆。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8464 rel="external nofollow noreferrer" target=_blank>#8464</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>清洁 <code class=syntax>CMakeLists.txt</code> 对于卷曲。 看https://github.com/ClickHouse/ClickHouse/pull/8011#issuecomment-569478910 <a href=https://github.com/ClickHouse/ClickHouse/pull/8459 rel="external nofollow noreferrer" target=_blank>#8459</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>无声警告 <code class=syntax>CapNProto</code> 图书馆. <a href=https://github.com/ClickHouse/ClickHouse/pull/8220 rel="external nofollow noreferrer" target=_blank>#8220</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>为短字符串优化哈希表添加性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7679 rel="external nofollow noreferrer" target=_blank>#7679</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>现在ClickHouse将建立在 <code class=syntax>AArch64</code> 即使 <code class=syntax>MADV_FREE</code> 不可用。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8027 rel="external nofollow noreferrer" target=_blank>#8027</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8243 rel="external nofollow noreferrer" target=_blank>#8243</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>更新 <code class=syntax>zlib-ng</code> 来解决记忆消毒的问题 <a href=https://github.com/ClickHouse/ClickHouse/pull/7182 rel="external nofollow noreferrer" target=_blank>#7182</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8206 rel="external nofollow noreferrer" target=_blank>#8206</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>在非Linux系统上启用内部MySQL库，因为操作系统包的使用非常脆弱，通常根本不起作用。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5765 rel="external nofollow noreferrer" target=_blank>#5765</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8426 rel="external nofollow noreferrer" target=_blank>#8426</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复了启用后在某些系统上构建的问题 <code class=syntax>libc++</code>. 这取代了 <a href=https://github.com/ClickHouse/ClickHouse/issues/8374 rel="external nofollow noreferrer" target=_blank>#8374</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8380 rel="external nofollow noreferrer" target=_blank>#8380</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>赂眉露&gt;&gt; <code class=syntax>Field</code> 方法更类型安全，以找到更多的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7386 rel="external nofollow noreferrer" target=_blank>#7386</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8209 rel="external nofollow noreferrer" target=_blank>#8209</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>添加丢失的文件到 <code class=syntax>libc-headers</code> 子模块。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8507 rel="external nofollow noreferrer" target=_blank>#8507</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复错误 <code class=syntax>JSON</code> 引用性能测试输出。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8497 rel="external nofollow noreferrer" target=_blank>#8497</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>现在堆栈跟踪显示 <code class=syntax>std::exception</code> 和 <code class=syntax>Poco::Exception</code>. 在以前的版本中，它仅适用于 <code class=syntax>DB::Exception</code>. 这改进了诊断。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8501 rel="external nofollow noreferrer" target=_blank>#8501</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>移植 <code class=syntax>clock_gettime</code> 和 <code class=syntax>clock_nanosleep</code> 对于新鲜的glibc版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8054 rel="external nofollow noreferrer" target=_blank>#8054</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>启用 <code class=syntax>part_log</code> 在示例配置开发人员。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8609 rel="external nofollow noreferrer" target=_blank>#8609</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复重新加载的异步性质 <code class=syntax>01036_no_superfluous_dict_reload_on_create_database*</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8111 rel="external nofollow noreferrer" target=_blank>#8111</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>固定编解码器性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8615 rel="external nofollow noreferrer" target=_blank>#8615</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>添加安装脚本 <code class=syntax>.tgz</code> 为他们构建和文档。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8612 rel="external nofollow noreferrer" target=_blank>#8612</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/8591 rel="external nofollow noreferrer" target=_blank>#8591</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>删除旧 <code class=syntax>ZSTD</code> 测试（它是在2016年创建的，以重现zstd1.0版本之前的错误）。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8618 rel="external nofollow noreferrer" target=_blank>#8618</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8619 rel="external nofollow noreferrer" target=_blank>#8619</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>固定构建在Mac OS卡特琳娜。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8600 rel="external nofollow noreferrer" target=_blank>#8600</a> (<a href=https://github.com/meob rel="external nofollow noreferrer" target=_blank>meo</a>)</li> <li>增加编解码器性能测试中的行数，以使结果显着。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8574 rel="external nofollow noreferrer" target=_blank>#8574</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li>在调试版本中，处理 <code class=syntax>LOGICAL_ERROR</code> 异常作为断言失败，使得它们更容易被注意到。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8475 rel="external nofollow noreferrer" target=_blank>#8475</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>使与格式相关的性能测试更具确定性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8477 rel="external nofollow noreferrer" target=_blank>#8477</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更新 <code class=syntax>lz4</code> 来修复记忆消毒器的故障 <a href=https://github.com/ClickHouse/ClickHouse/pull/8181 rel="external nofollow noreferrer" target=_blank>#8181</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>在异常处理中抑制已知MemorySanitizer误报。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8182 rel="external nofollow noreferrer" target=_blank>#8182</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>更新 <code class=syntax>gcc</code> 和 <code class=syntax>g++</code> 到版本9在 <code class=syntax>build/docker/build.sh</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7766 rel="external nofollow noreferrer" target=_blank>#7766</a> (<a href=https://github.com/tlightsky rel="external nofollow noreferrer" target=_blank>TLightSky</a>)</li> <li>添加性能测试用例来测试 <code class=syntax>PREWHERE</code> 比 <code class=syntax>WHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7768 rel="external nofollow noreferrer" target=_blank>#7768</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>在修复一个笨拙的测试方面取得了进展。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8621 rel="external nofollow noreferrer" target=_blank>#8621</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>避免从MemorySanitizer报告数据 <code class=syntax>libunwind</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8539 rel="external nofollow noreferrer" target=_blank>#8539</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>更新 <code class=syntax>libc++</code> 到最新版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8324 rel="external nofollow noreferrer" target=_blank>#8324</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>从源头构建ICU库。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6460 rel="external nofollow noreferrer" target=_blank>#6460</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8219 rel="external nofollow noreferrer" target=_blank>#8219</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>从切换 <code class=syntax>libressl</code> 到 <code class=syntax>openssl</code>. ClickHouse应在此更改后支持TLS1.3和SNI。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8171 rel="external nofollow noreferrer" target=_blank>#8171</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8218 rel="external nofollow noreferrer" target=_blank>#8218</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>使用时固定的UBSan报告 <code class=syntax>chacha20_poly1305</code> 从SSL（发生在连接到https://yandex.ru/)。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8214 rel="external nofollow noreferrer" target=_blank>#8214</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复默认密码文件的模式 <code class=syntax>.deb</code> linux发行版。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8075 rel="external nofollow noreferrer" target=_blank>#8075</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>改进的表达式获取 <code class=syntax>clickhouse-server</code> PID输入 <code class=syntax>clickhouse-test</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8063 rel="external nofollow noreferrer" target=_blank>#8063</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li> <li>更新contrib/googletest到v1.10.0。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8587 rel="external nofollow noreferrer" target=_blank>#8587</a> (<a href=https://github.com/Alex-Burmak rel="external nofollow noreferrer" target=_blank>Alexander Burmak</a>)</li> <li>修复了ThreadSaninitizer报告 <code class=syntax>base64</code> 图书馆. 还将此库更新到最新版本，但无关紧要。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8397 rel="external nofollow noreferrer" target=_blank>#8397</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8403 rel="external nofollow noreferrer" target=_blank>#8403</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>修复 <code class=syntax>00600_replace_running_query</code> 对于处理器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8272 rel="external nofollow noreferrer" target=_blank>#8272</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>删除支持 <code class=syntax>tcmalloc</code> 为了使 <code class=syntax>CMakeLists.txt</code> 更简单 <a href=https://github.com/ClickHouse/ClickHouse/pull/8310 rel="external nofollow noreferrer" target=_blank>#8310</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>发布海湾合作委员会构建现在使用 <code class=syntax>libc++</code> 而不是 <code class=syntax>libstdc++</code>. 最近 <code class=syntax>libc++</code> 只与叮当一起使用。 这将提高构建配置的一致性和可移植性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8311 rel="external nofollow noreferrer" target=_blank>#8311</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>使用MemorySanitizer启用ICU库进行构建。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8222 rel="external nofollow noreferrer" target=_blank>#8222</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>禁止从警告 <code class=syntax>CapNProto</code> 图书馆. <a href=https://github.com/ClickHouse/ClickHouse/pull/8224 rel="external nofollow noreferrer" target=_blank>#8224</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>删除代码的特殊情况 <code class=syntax>tcmalloc</code>，因为它不再受支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8225 rel="external nofollow noreferrer" target=_blank>#8225</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>在CI coverage任务中，优雅地终止服务器以允许它保存coverage报告。 这修复了我们最近看到的不完整的复盖率报告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8142 rel="external nofollow noreferrer" target=_blank>#8142</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>针对所有编解码器的性能测试 <code class=syntax>Float64</code> 和 <code class=syntax>UInt64</code> 值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8349 rel="external nofollow noreferrer" target=_blank>#8349</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li> <li><code class=syntax>termcap</code> 非常不推荐使用，并导致各种问题（f.g.missing “up” 帽和呼应 <code class=syntax>^J</code> 而不是多行）。 帮个忙 <code class=syntax>terminfo</code> 或bund绑 <code class=syntax>ncurses</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7737 rel="external nofollow noreferrer" target=_blank>#7737</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>修复 <code class=syntax>test_storage_s3</code> 集成测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7734 rel="external nofollow noreferrer" target=_blank>#7734</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>碌莽禄Support: <code class=syntax>StorageFile(&lt;format&gt;, null)</code> 将块插入给定格式的文件而不实际写入磁盘。 这是性能测试所必需的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8455 rel="external nofollow noreferrer" target=_blank>#8455</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> <li>添加参数 <code class=syntax>--print-time</code> 功能测试打印每个测试的执行时间。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8001 rel="external nofollow noreferrer" target=_blank>#8001</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>添加断言 <code class=syntax>KeyCondition</code> 同时评估RPN。 这将修复来自gcc-9的警告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8279 rel="external nofollow noreferrer" target=_blank>#8279</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>在CI构建中转储cmake选项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8273 rel="external nofollow noreferrer" target=_blank>#8273</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>不要为某些fat库生成调试信息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8271 rel="external nofollow noreferrer" target=_blank>#8271</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>赂眉露&gt;&gt; <code class=syntax>log_to_console.xml</code> 始终登录到stderr，无论它是否交互。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8395 rel="external nofollow noreferrer" target=_blank>#8395</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>删除了一些未使用的功能 <code class=syntax>clickhouse-performance-test</code> 工具 <a href=https://github.com/ClickHouse/ClickHouse/pull/8555 rel="external nofollow noreferrer" target=_blank>#8555</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>现在我们也将搜索 <code class=syntax>lld-X</code> 与相应的 <code class=syntax>clang-X</code> 版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8092 rel="external nofollow noreferrer" target=_blank>#8092</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li> <li>实木复合地板建设改善。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8421 rel="external nofollow noreferrer" target=_blank>#8421</a> (<a href=https://github.com/maxulan rel="external nofollow noreferrer" target=_blank>马苏兰</a>)</li> <li>更多海湾合作委员会警告 <a href=https://github.com/ClickHouse/ClickHouse/pull/8221 rel="external nofollow noreferrer" target=_blank>#8221</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer" target=_blank>kreuzerkrieg</a>)</li> <li>Arch Linux的软件包现在允许运行ClickHouse服务器，而不仅仅是客户端。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8534 rel="external nofollow noreferrer" target=_blank>#8534</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>修复与处理器的测试。 微小的性能修复。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7672 rel="external nofollow noreferrer" target=_blank>#7672</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li> <li>更新contrib/protobuf。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8256 rel="external nofollow noreferrer" target=_blank>#8256</a> (<a href=https://github.com/matwey rel="external nofollow noreferrer" target=_blank>Matwey V.Kornilov</a>)</li> <li>在准备切换到c++20作为新年庆祝活动。 “May the C++ force be with ClickHouse.” <a href=https://github.com/ClickHouse/ClickHouse/pull/8447 rel="external nofollow noreferrer" target=_blank>#8447</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li> </ul> <h4 id=experimental-feature-1>实验特点<a class=headerlink href=../amp/#experimental-feature-1 title="Permanent link"> </a></h4> <ul> <li>增加了实验设置 <code class=syntax>min_bytes_to_use_mmap_io</code>. 它允许读取大文件，而无需将数据从内核复制到用户空间。 默认情况下禁用该设置。 建议的阈值大约是64MB，因为mmap/munmap很慢。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8520 rel="external nofollow noreferrer" target=_blank>#8520</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> <li>返工配额作为访问控制系统的一部分。 增加了新表 <code class=syntax>system.quotas</code>，新功能 <code class=syntax>currentQuota</code>, <code class=syntax>currentQuotaKey</code>，新的SQL语法 <code class=syntax>CREATE QUOTA</code>, <code class=syntax>ALTER QUOTA</code>, <code class=syntax>DROP QUOTA</code>, <code class=syntax>SHOW QUOTA</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7257 rel="external nofollow noreferrer" target=_blank>#7257</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>允许跳过带有警告的未知设置，而不是引发异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7653 rel="external nofollow noreferrer" target=_blank>#7653</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> <li>重新设计的行策略作为访问控制系统的一部分。 增加了新表 <code class=syntax>system.row_policies</code>，新功能 <code class=syntax>currentRowPolicies()</code>，新的SQL语法 <code class=syntax>CREATE POLICY</code>, <code class=syntax>ALTER POLICY</code>, <code class=syntax>DROP POLICY</code>, <code class=syntax>SHOW CREATE POLICY</code>, <code class=syntax>SHOW POLICIES</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7808 rel="external nofollow noreferrer" target=_blank>#7808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li> </ul> <h4 id=security-fix>安全修复<a class=headerlink href=../amp/#security-fix title="Permanent link"> </a></h4> <ul> <li>修正了读取目录结构中的表的可能性 <code class=syntax>File</code> 表引擎。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/8536 rel="external nofollow noreferrer" target=_blank>#8536</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8537 rel="external nofollow noreferrer" target=_blank>#8537</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li> </ul> <h2 id=changelog-for-2019><a href=https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/changelog/2019.md rel="external nofollow noreferrer" target=_blank>更新日志2019</a><a class=headerlink href=../amp/#changelog-for-2019 title="Permanent link"> </a></h2> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/zh/changelog/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 