<!doctype html><html ⚡ lang=en> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>Arrays | ClickHouse Documentation</title><link href=https://clickhouse.tech/docs/en/sql-reference/functions/array-functions/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Arrays | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.tech/docs/en/sql-reference/functions/array-functions/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Arrays | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}.offset-1{margin-left:8.333333%}.offset-2{margin-left:16.666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.333333%}.offset-5{margin-left:41.666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.333333%}.offset-8{margin-left:66.666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.333333%}.offset-11{margin-left:91.666667%}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.333333%}.offset-md-2{margin-left:16.666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.333333%}.offset-md-5{margin-left:41.666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.333333%}.offset-md-8{margin-left:66.666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.333333%}.offset-md-11{margin-left:91.666667%}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.333333%}.offset-lg-2{margin-left:16.666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.333333%}.offset-lg-5{margin-left:41.666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.333333%}.offset-lg-8{margin-left:66.666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.333333%}.offset-lg-11{margin-left:91.666667%}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-select{position:relative;-ms-flex:1 1 0;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0}.list-group-item{position:relative;display:block;padding:.75rem 1.25rem;background-color:#fff;border:1px solid rgba(0,0,0,.125)}.list-group-item:first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.list-group-item:last-child{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.list-group-item:disabled{color:#6c757d;pointer-events:none;background-color:#fff}.list-group-item+.list-group-item{border-top-width:0}.list-group-item-primary{color:#004085;background-color:#b8daff}.list-group-item-light{color:#818182;background-color:#fdfdfe}.list-group-item-dark{color:#1b1e21;background-color:#c6c8ca}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.overflow-hidden{overflow:hidden}.position-fixed{position:fixed}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}details{background:#444451;color:#eee;padding:1rem;margin-bottom:1rem;margin-top:1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .c{color:#747369}.syntax .k{color:#c9c}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .c1{color:#747369}.syntax .ld{color:#9c9}.syntax .s{color:#9c9}.syntax .nb{color:#f2f0ec}.syntax .no{color:#f2777a}.syntax .py{color:#f2f0ec}.syntax .mi{color:#f99157}.syntax .s2{color:#9c9}.syntax .s1{color:#9c9}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <h1 id=functions-for-working-with-arrays>Array Functions<a class=headerlink href=../amp/#functions-for-working-with-arrays title="Permanent link"> </a></h1> <h2 id=function-empty>empty<a class=headerlink href=../amp/#function-empty title="Permanent link"> </a></h2> <p>Returns 1 for an empty array, or 0 for a non-empty array.<br> The result type is UInt8.<br> The function also works for strings.</p> <h2 id=function-notempty>notEmpty<a class=headerlink href=../amp/#function-notempty title="Permanent link"> </a></h2> <p>Returns 0 for an empty array, or 1 for a non-empty array.<br> The result type is UInt8.<br> The function also works for strings.</p> <h2 id=array_functions-length>length<a class=headerlink href=../amp/#array_functions-length title="Permanent link"> </a></h2> <p>Returns the number of items in the array.<br> The result type is UInt64.<br> The function also works for strings.</p> <h2 id=emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64>emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64<a class=headerlink href=../amp/#emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64 title="Permanent link"> </a></h2> <h2 id=emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64>emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64<a class=headerlink href=../amp/#emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64 title="Permanent link"> </a></h2> <h2 id=emptyarrayfloat32-emptyarrayfloat64>emptyArrayFloat32, emptyArrayFloat64<a class=headerlink href=../amp/#emptyarrayfloat32-emptyarrayfloat64 title="Permanent link"> </a></h2> <h2 id=emptyarraydate-emptyarraydatetime>emptyArrayDate, emptyArrayDateTime<a class=headerlink href=../amp/#emptyarraydate-emptyarraydatetime title="Permanent link"> </a></h2> <h2 id=emptyarraystring>emptyArrayString<a class=headerlink href=../amp/#emptyarraystring title="Permanent link"> </a></h2> <p>Accepts zero arguments and returns an empty array of the appropriate type.</p> <h2 id=emptyarraytosingle>emptyArrayToSingle<a class=headerlink href=../amp/#emptyarraytosingle title="Permanent link"> </a></h2> <p>Accepts an empty array and returns a one-element array that is equal to the default value.</p> <h2 id=range>range(end), range([start, ] end [, step])<a class=headerlink href=../amp/#range title="Permanent link"> </a></h2> <p>Returns an array of <code class=syntax>UInt</code> numbers from <code class=syntax>start</code> to <code class=syntax>end - 1</code> by <code class=syntax>step</code>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>range</span><span class=p>([</span><span class=k>start</span><span class=p>,</span> <span class=p>]</span> <span class=k>end</span> <span class=p>[,</span> <span class=n>step</span><span class=p>])</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>start</code> — The first element of the array. Optional, required if <code class=syntax>step</code> is used. Default value: 0. <a href=../../../data-types/int-uint/amp/ >UInt</a></li> <li><code class=syntax>end</code> — The number before which the array is constructed. Required. <a href=../../../data-types/int-uint/amp/ >UInt</a></li> <li><code class=syntax>step</code> — Determines the incremental step between each element in the array. Optional. Default value: 1. <a href=../../../data-types/int-uint/amp/ >UInt</a></li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Array of <code class=syntax>UInt</code> numbers from <code class=syntax>start</code> to <code class=syntax>end - 1</code> by <code class=syntax>step</code>.</li> </ul> <p><strong>Implementation details</strong></p> <ul> <li>All arguments must be positive values: <code class=syntax>start</code>, <code class=syntax>end</code>, <code class=syntax>step</code> are <code class=syntax>UInt</code> data types, as well as elements of the returned array.</li> <li>An exception is thrown if query results in arrays with a total length of more than 100,000,000 elements.</li> </ul> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>range</span><span class=p>(</span><span class=mi>5</span><span class=p>),</span> <span class=n>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>),</span> <span class=n>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─range(5)────┬─range(1, 5)─┬─range(1, 5, 2)─┐
│ [0,1,2,3,4] │ [1,2,3,4]   │ [1,3]          │
└─────────────┴─────────────┴────────────────┘
</code></pre></div> <h2 id=arrayx1-operator-x1>array(x1, …), operator [x1, …]<a class=headerlink href=../amp/#arrayx1-operator-x1 title="Permanent link"> </a></h2> <p>Creates an array from the function arguments.<br> The arguments must be constants and have types that have the smallest common type. At least one argument must be passed, because otherwise it isn’t clear which type of array to create. That is, you can’t use this function to create an empty array (to do that, use the ‘emptyArray*’ function described above).<br> Returns an ‘Array(T)’ type result, where ‘T’ is the smallest common type out of the passed arguments.</p> <h2 id=arrayconcat>arrayConcat<a class=headerlink href=../amp/#arrayconcat title="Permanent link"> </a></h2> <p>Combines arrays passed as arguments.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayConcat</span><span class=p>(</span><span class=n>arrays</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>arrays</code> – Arbitrary number of arguments of <a href=../../../data-types/array/amp/ >Array</a> type.<br> <strong>Example</strong></li> </ul> <!-- --> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayConcat</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────┐
│ [1,2,3,4,5,6] │
└───────────────┘
</code></pre></div> <h2 id=arrayelementarr-n-operator-arrn>arrayElement(arr, n), operator arr[n]<a class=headerlink href=../amp/#arrayelementarr-n-operator-arrn title="Permanent link"> </a></h2> <p>Get the element with the index <code class=syntax>n</code> from the array <code class=syntax>arr</code>. <code class=syntax>n</code> must be any integer type.<br> Indexes in an array begin from one.<br> Negative indexes are supported. In this case, it selects the corresponding element numbered from the end. For example, <code class=syntax>arr[-1]</code> is the last item in the array.</p> <p>If the index falls outside of the bounds of an array, it returns some default value (0 for numbers, an empty string for strings, etc.), except for the case with a non-constant array and a constant index 0 (in this case there will be an error <code class=syntax>Array indices are 1-based</code>).</p> <h2 id=hasarr-elem>has(arr, elem)<a class=headerlink href=../amp/#hasarr-elem title="Permanent link"> </a></h2> <p>Checks whether the ‘arr’ array has the ‘elem’ element.<br> Returns 0 if the element is not in the array, or 1 if it is.</p> <p><code class=syntax>NULL</code> is processed as a value.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>has</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>],</span> <span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─has([1, 2, NULL], NULL)─┐
│                       1 │
└─────────────────────────┘
</code></pre></div> <h2 id=hasall>hasAll<a class=headerlink href=../amp/#hasall title="Permanent link"> </a></h2> <p>Checks whether one array is a subset of another.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>hasAll</span><span class=p>(</span><span class=k>set</span><span class=p>,</span> <span class=n>subset</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>set</code> – Array of any type with a set of elements.</li> <li><code class=syntax>subset</code> – Array of any type with elements that should be tested to be a subset of <code class=syntax>set</code>.</li> </ul> <p><strong>Return values</strong></p> <ul> <li><code class=syntax>1</code>, if <code class=syntax>set</code> contains all of the elements from <code class=syntax>subset</code>.</li> <li><code class=syntax>0</code>, otherwise.</li> </ul> <p><strong>Peculiar properties</strong></p> <ul> <li>An empty array is a subset of any array.</li> <li><code class=syntax>Null</code> processed as a value.</li> <li>Order of values in both of arrays does not matter.</li> </ul> <p><strong>Examples</strong></p> <p><code class=syntax>SELECT hasAll([], [])</code> returns 1.</p> <p><code class=syntax>SELECT hasAll([1, Null], [Null])</code> returns 1.</p> <p><code class=syntax>SELECT hasAll([1.0, 2, 3, 4], [1, 3])</code> returns 1.</p> <p><code class=syntax>SELECT hasAll(['a', 'b'], ['a'])</code> returns 1.</p> <p><code class=syntax>SELECT hasAll([1], ['a'])</code> returns 0.</p> <p><code class=syntax>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [3, 5]])</code> returns 0.</p> <h2 id=hasany>hasAny<a class=headerlink href=../amp/#hasany title="Permanent link"> </a></h2> <p>Checks whether two arrays have intersection by some elements.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>hasAny</span><span class=p>(</span><span class=n>array1</span><span class=p>,</span> <span class=n>array2</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array1</code> – Array of any type with a set of elements.</li> <li><code class=syntax>array2</code> – Array of any type with a set of elements.</li> </ul> <p><strong>Return values</strong></p> <ul> <li><code class=syntax>1</code>, if <code class=syntax>array1</code> and <code class=syntax>array2</code> have one similar element at least.</li> <li><code class=syntax>0</code>, otherwise.</li> </ul> <p><strong>Peculiar properties</strong></p> <ul> <li><code class=syntax>Null</code> processed as a value.</li> <li>Order of values in both of arrays does not matter.</li> </ul> <p><strong>Examples</strong></p> <p><code class=syntax>SELECT hasAny([1], [])</code> returns <code class=syntax>0</code>.</p> <p><code class=syntax>SELECT hasAny([Null], [Null, 1])</code> returns <code class=syntax>1</code>.</p> <p><code class=syntax>SELECT hasAny([-128, 1., 512], [1])</code> returns <code class=syntax>1</code>.</p> <p><code class=syntax>SELECT hasAny([[1, 2], [3, 4]], ['a', 'c'])</code> returns <code class=syntax>0</code>.</p> <p><code class=syntax>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [1, 2]])</code> returns <code class=syntax>1</code>.</p> <h2 id=hassubstr>hasSubstr<a class=headerlink href=../amp/#hassubstr title="Permanent link"> </a></h2> <p>Checks whether all the elements of array2 appear in array1 in the same exact order. Therefore, the function will return 1, if and only if <code class=syntax>array1 = prefix + array2 + suffix</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>hasSubstr</span><span class=p>(</span><span class=n>array1</span><span class=p>,</span> <span class=n>array2</span><span class=p>)</span>
</code></pre></div> <p>In other words, the functions will check whether all the elements of <code class=syntax>array2</code> are contained in <code class=syntax>array1</code> like<br> the <code class=syntax>hasAll</code> function. In addition, it will check that the elements are observed in the same order in both <code class=syntax>array1</code> and <code class=syntax>array2</code>.</p> <p>For Example:<br> - <code class=syntax>hasSubstr([1,2,3,4], [2,3])</code> returns 1. However, <code class=syntax>hasSubstr([1,2,3,4], [3,2])</code> will return <code class=syntax>0</code>.<br> - <code class=syntax>hasSubstr([1,2,3,4], [1,2,3])</code> returns 1. However, <code class=syntax>hasSubstr([1,2,3,4], [1,2,4])</code> will return <code class=syntax>0</code>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array1</code> – Array of any type with a set of elements.</li> <li><code class=syntax>array2</code> – Array of any type with a set of elements.</li> </ul> <p><strong>Return values</strong></p> <ul> <li><code class=syntax>1</code>, if <code class=syntax>array1</code> contains <code class=syntax>array2</code>.</li> <li><code class=syntax>0</code>, otherwise.</li> </ul> <p><strong>Peculiar properties</strong></p> <ul> <li>The function will return <code class=syntax>1</code> if <code class=syntax>array2</code> is empty.</li> <li><code class=syntax>Null</code> processed as a value. In other words <code class=syntax>hasSubstr([1, 2, NULL, 3, 4], [2,3])</code> will return <code class=syntax>0</code>. However, <code class=syntax>hasSubstr([1, 2, NULL, 3, 4], [2,NULL,3])</code> will return <code class=syntax>1</code></li> <li>Order of values in both of arrays does matter.</li> </ul> <p><strong>Examples</strong></p> <p><code class=syntax>SELECT hasSubstr([], [])</code> returns 1.</p> <p><code class=syntax>SELECT hasSubstr([1, Null], [Null])</code> returns 1.</p> <p><code class=syntax>SELECT hasSubstr([1.0, 2, 3, 4], [1, 3])</code> returns 0.</p> <p><code class=syntax>SELECT hasSubstr(['a', 'b'], ['a'])</code> returns 1.</p> <p><code class=syntax>SELECT hasSubstr(['a', 'b' , 'c'], ['a', 'b'])</code> returns 1.</p> <p><code class=syntax>SELECT hasSubstr(['a', 'b' , 'c'], ['a', 'c'])</code> returns 0.</p> <p><code class=syntax>SELECT hasSubstr([[1, 2], [3, 4], [5, 6]], [[1, 2], [3, 4]])</code> returns 1.</p> <h2 id=indexofarr-x>indexOf(arr, x)<a class=headerlink href=../amp/#indexofarr-x title="Permanent link"> </a></h2> <p>Returns the index of the first ‘x’ element (starting from 1) if it is in the array, or 0 if it is not.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>indexOf</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=k>NULL</span><span class=p>],</span> <span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─indexOf([1, 3, NULL, NULL], NULL)─┐
│                                 3 │
└───────────────────────────────────┘
</code></pre></div> <p>Elements set to <code class=syntax>NULL</code> are handled as normal values.</p> <h2 id=array-count>arrayCount([func,] arr1, …)<a class=headerlink href=../amp/#array-count title="Permanent link"> </a></h2> <p>Returns the number of elements in the arr array for which func returns something other than 0. If ‘func’ is not specified, it returns the number of non-zero elements in the array.</p> <p>Note that the <code class=syntax>arrayCount</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <h2 id=countequalarr-x>countEqual(arr, x)<a class=headerlink href=../amp/#countequalarr-x title="Permanent link"> </a></h2> <p>Returns the number of elements in the array equal to x. Equivalent to arrayCount (elem -&gt; elem = x, arr).</p> <p><code class=syntax>NULL</code> elements are handled as separate values.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>countEqual</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=k>NULL</span><span class=p>],</span> <span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─countEqual([1, 2, NULL, NULL], NULL)─┐
│                                    2 │
└──────────────────────────────────────┘
</code></pre></div> <h2 id=array_functions-arrayenumerate>arrayEnumerate(arr)<a class=headerlink href=../amp/#array_functions-arrayenumerate title="Permanent link"> </a></h2> <p>Returns the array [1, 2, 3, …, length (arr) ]</p> <p>This function is normally used with ARRAY JOIN. It allows counting something just once for each array after applying ARRAY JOIN. Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=n>Reaches</span><span class=p>,</span>
    <span class=n>countIf</span><span class=p>(</span><span class=n>num</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Hits</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span>
    <span class=n>GoalsReached</span><span class=p>,</span>
    <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>GoalsReached</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span>
<span class=k>WHERE</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>160656</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─Reaches─┬──Hits─┐
│   95606 │ 31406 │
└─────────┴───────┘
</code></pre></div> <p>In this example, Reaches is the number of conversions (the strings received after applying ARRAY JOIN), and Hits is the number of pageviews (strings before ARRAY JOIN). In this particular case, you can get the same result in an easier way:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>sum</span><span class=p>(</span><span class=k>length</span><span class=p>(</span><span class=n>GoalsReached</span><span class=p>))</span> <span class=k>AS</span> <span class=n>Reaches</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=n>Hits</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>WHERE</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>160656</span><span class=p>)</span> <span class=k>AND</span> <span class=n>notEmpty</span><span class=p>(</span><span class=n>GoalsReached</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─Reaches─┬──Hits─┐
│   95606 │ 31406 │
└─────────┴───────┘
</code></pre></div> <p>This function can also be used in higher-order functions. For example, you can use it to get array indexes for elements that match a condition.</p> <h2 id=arrayenumerateuniqarr>arrayEnumerateUniq(arr, …)<a class=headerlink href=../amp/#arrayenumerateuniqarr title="Permanent link"> </a></h2> <p>Returns an array the same size as the source array, indicating for each element what its position is among elements with the same value.<br> For example: arrayEnumerateUniq([10, 20, 10, 30]) = [1, 1, 2, 1].</p> <p>This function is useful when using ARRAY JOIN and aggregation of array elements.<br> Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>Goals</span><span class=p>.</span><span class=n>ID</span> <span class=k>AS</span> <span class=n>GoalID</span><span class=p>,</span>
    <span class=k>sum</span><span class=p>(</span><span class=n>Sign</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Reaches</span><span class=p>,</span>
    <span class=n>sumIf</span><span class=p>(</span><span class=n>Sign</span><span class=p>,</span> <span class=n>num</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Visits</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>visits</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span>
    <span class=n>Goals</span><span class=p>,</span>
    <span class=n>arrayEnumerateUniq</span><span class=p>(</span><span class=n>Goals</span><span class=p>.</span><span class=n>ID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span>
<span class=k>WHERE</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>160656</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>GoalID</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>Reaches</span> <span class=k>DESC</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──GoalID─┬─Reaches─┬─Visits─┐
│   53225 │    3214 │   1097 │
│ 2825062 │    3188 │   1097 │
│   56600 │    2803 │    488 │
│ 1989037 │    2401 │    365 │
│ 2830064 │    2396 │    910 │
│ 1113562 │    2372 │    373 │
│ 3270895 │    2262 │    812 │
│ 1084657 │    2262 │    345 │
│   56599 │    2260 │    799 │
│ 3271094 │    2256 │    812 │
└─────────┴─────────┴────────┘
</code></pre></div> <p>In this example, each goal ID has a calculation of the number of conversions (each element in the Goals nested data structure is a goal that was reached, which we refer to as a conversion) and the number of sessions. Without ARRAY JOIN, we would have counted the number of sessions as sum(Sign). But in this particular case, the rows were multiplied by the nested Goals structure, so in order to count each session one time after this, we apply a condition to the value of the arrayEnumerateUniq(Goals.ID) function.</p> <p>The arrayEnumerateUniq function can take multiple arrays of the same size as arguments. In this case, uniqueness is considered for tuples of elements in the same positions in all the arrays.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayEnumerateUniq</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────┐
│ [1,2,1,1,2,1] │
└───────────────┘
</code></pre></div> <p>This is necessary when using ARRAY JOIN with a nested data structure and further aggregation across multiple elements in this structure.</p> <h2 id=arraypopback>arrayPopBack<a class=headerlink href=../amp/#arraypopback title="Permanent link"> </a></h2> <p>Removes the last item from the array.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPopBack</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPopBack</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───┐
│ [1,2] │
└───────┘
</code></pre></div> <h2 id=arraypopfront>arrayPopFront<a class=headerlink href=../amp/#arraypopfront title="Permanent link"> </a></h2> <p>Removes the first item from the array.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPopFront</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPopFront</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───┐
│ [2,3] │
└───────┘
</code></pre></div> <h2 id=arraypushback>arrayPushBack<a class=headerlink href=../amp/#arraypushback title="Permanent link"> </a></h2> <p>Adds one item to the end of the array.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPushBack</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=n>single_value</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> <li><code class=syntax>single_value</code> – A single value. Only numbers can be added to an array with numbers, and only strings can be added to an array of strings. When adding numbers, ClickHouse automatically sets the <code class=syntax>single_value</code> type for the data type of the array. For more information about the types of data in ClickHouse, see “<a href=../../../data-types/amp/#data_types>Data types</a>”. Can be <code class=syntax>NULL</code>. The function adds a <code class=syntax>NULL</code> element to an array, and the type of array elements converts to <code class=syntax>Nullable</code>.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPushBack</span><span class=p>([</span><span class=s1>'a'</span><span class=p>],</span> <span class=s1>'b'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────┐
│ ['a','b'] │
└───────────┘
</code></pre></div> <h2 id=arraypushfront>arrayPushFront<a class=headerlink href=../amp/#arraypushfront title="Permanent link"> </a></h2> <p>Adds one element to the beginning of the array.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPushFront</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=n>single_value</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> <li><code class=syntax>single_value</code> – A single value. Only numbers can be added to an array with numbers, and only strings can be added to an array of strings. When adding numbers, ClickHouse automatically sets the <code class=syntax>single_value</code> type for the data type of the array. For more information about the types of data in ClickHouse, see “<a href=../../../data-types/amp/#data_types>Data types</a>”. Can be <code class=syntax>NULL</code>. The function adds a <code class=syntax>NULL</code> element to an array, and the type of array elements converts to <code class=syntax>Nullable</code>.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPushFront</span><span class=p>([</span><span class=s1>'b'</span><span class=p>],</span> <span class=s1>'a'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────┐
│ ['a','b'] │
└───────────┘
</code></pre></div> <h2 id=arrayresize>arrayResize<a class=headerlink href=../amp/#arrayresize title="Permanent link"> </a></h2> <p>Changes the length of the array.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayResize</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=k>size</span><span class=p>[,</span> <span class=n>extender</span><span class=p>])</span>
</code></pre></div> <p><strong>Arguments:</strong></p> <ul> <li><code class=syntax>array</code> — Array.</li> <li><code class=syntax>size</code> — Required length of the array.<ul> <li>If <code class=syntax>size</code> is less than the original size of the array, the array is truncated from the right.</li> </ul> </li> <li>If <code class=syntax>size</code> is larger than the initial size of the array, the array is extended to the right with <code class=syntax>extender</code> values or default values for the data type of the array items.</li> <li><code class=syntax>extender</code> — Value for extending an array. Can be <code class=syntax>NULL</code>.</li> </ul> <p><strong>Returned value:</strong></p> <p>An array of length <code class=syntax>size</code>.</p> <p><strong>Examples of calls</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayResize</span><span class=p>([</span><span class=mi>1</span><span class=p>],</span> <span class=mi>3</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayResize([1], 3)─┐
│ [1,0,0]             │
└─────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayResize</span><span class=p>([</span><span class=mi>1</span><span class=p>],</span> <span class=mi>3</span><span class=p>,</span> <span class=k>NULL</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayResize([1], 3, NULL)─┐
│ [1,NULL,NULL]             │
└───────────────────────────┘
</code></pre></div> <h2 id=arrayslice>arraySlice<a class=headerlink href=../amp/#arrayslice title="Permanent link"> </a></h2> <p>Returns a slice of the array.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arraySlice</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=k>offset</span><span class=p>[,</span> <span class=k>length</span><span class=p>])</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array</code> – Array of data.</li> <li><code class=syntax>offset</code> – Indent from the edge of the array. A positive value indicates an offset on the left, and a negative value is an indent on the right. Numbering of the array items begins with 1.</li> <li><code class=syntax>length</code> – The length of the required slice. If you specify a negative value, the function returns an open slice <code class=syntax>[offset, array_length - length)</code>. If you omit the value, the function returns the slice <code class=syntax>[offset, the_end_of_array]</code>.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySlice</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res────────┐
│ [2,NULL,4] │
└────────────┘
</code></pre></div> <p>Array elements set to <code class=syntax>NULL</code> are handled as normal values.</p> <h2 id=array_functions-sort>arraySort([func,] arr, …)<a class=headerlink href=../amp/#array_functions-sort title="Permanent link"> </a></h2> <p>Sorts the elements of the <code class=syntax>arr</code> array in ascending order. If the <code class=syntax>func</code> function is specified, sorting order is determined by the result of the <code class=syntax>func</code> function applied to the elements of the array. If <code class=syntax>func</code> accepts multiple arguments, the <code class=syntax>arraySort</code> function is passed several arrays that the arguments of <code class=syntax>func</code> will correspond to. Detailed examples are shown at the end of <code class=syntax>arraySort</code> description.</p> <p>Example of integer values sorting:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>0</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arraySort([1, 3, 3, 0])─┐
│ [0,1,3,3]               │
└─────────────────────────┘
</code></pre></div> <p>Example of string values sorting:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>([</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>,</span> <span class=s1>'!'</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arraySort(['hello', 'world', '!'])─┐
│ ['!','hello','world']              │
└────────────────────────────────────┘
</code></pre></div> <p>Consider the following sorting order for the <code class=syntax>NULL</code>, <code class=syntax>NaN</code> and <code class=syntax>Inf</code> values:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=n>inf</span><span class=p>,</span> <span class=o>-</span><span class=n>inf</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arraySort([1, nan, 2, NULL, 3, nan, -4, NULL, inf, -inf])─┐
│ [-inf,-4,1,2,3,inf,nan,nan,NULL,NULL]                     │
└───────────────────────────────────────────────────────────┘
</code></pre></div> <ul> <li><code class=syntax>-Inf</code> values are first in the array.</li> <li><code class=syntax>NULL</code> values are last in the array.</li> <li><code class=syntax>NaN</code> values are right before <code class=syntax>NULL</code>.</li> <li><code class=syntax>Inf</code> values are right before <code class=syntax>NaN</code>.</li> </ul> <p>Note that <code class=syntax>arraySort</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument. In this case, sorting order is determined by the result of the lambda function applied to the elements of the array.</p> <p>Let’s consider the following example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>x</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [3,2,1] │
└─────────┘
</code></pre></div> <p>For each element of the source array, the lambda function returns the sorting key, that is, [1 –&gt; -1, 2 –&gt; -2, 3 –&gt; -3]. Since the <code class=syntax>arraySort</code> function sorts the keys in ascending order, the result is [3, 2, 1]. Thus, the <code class=syntax>(x) –&gt; -x</code> lambda function sets the <a href=../amp/#array_functions-reverse-sort>descending order</a> in a sorting.</p> <p>The lambda function can accept multiple arguments. In this case, you need to pass the <code class=syntax>arraySort</code> function several arrays of identical length that the arguments of lambda function will correspond to. The resulting array will consist of elements from the first input array; elements from the next input array(s) specify the sorting keys. For example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res────────────────┐
│ ['world', 'hello'] │
└────────────────────┘
</code></pre></div> <p>Here, the elements that are passed in the second array ([2, 1]) define a sorting key for the corresponding element from the source array ([‘hello’, ‘world’]), that is, [‘hello’ –&gt; 2, ‘world’ –&gt; 1]. Since the lambda function does not use <code class=syntax>x</code>, actual values of the source array do not affect the order in the result. So, ‘hello’ will be the second element in the result, and ‘world’ will be the first.</p> <p>Other examples are shown below.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=s1>'c'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'a'</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [2,1,0] │
└─────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [2,1,0] │
└─────────┘
</code></pre></div> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Note</p> <p>To improve sorting efficiency, the <a class=alert-link href=https://en.wikipedia.org/wiki/Schwartzian_transform rel="external nofollow noreferrer" target=_blank>Schwartzian transform</a> is used.</p> </div> <h2 id=array_functions-reverse-sort>arrayReverseSort([func,] arr, …)<a class=headerlink href=../amp/#array_functions-reverse-sort title="Permanent link"> </a></h2> <p>Sorts the elements of the <code class=syntax>arr</code> array in descending order. If the <code class=syntax>func</code> function is specified, <code class=syntax>arr</code> is sorted according to the result of the <code class=syntax>func</code> function applied to the elements of the array, and then the sorted array is reversed. If <code class=syntax>func</code> accepts multiple arguments, the <code class=syntax>arrayReverseSort</code> function is passed several arrays that the arguments of <code class=syntax>func</code> will correspond to. Detailed examples are shown at the end of <code class=syntax>arrayReverseSort</code> description.</p> <p>Example of integer values sorting:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>0</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReverseSort([1, 3, 3, 0])─┐
│ [3,3,1,0]                      │
└────────────────────────────────┘
</code></pre></div> <p>Example of string values sorting:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>([</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>,</span> <span class=s1>'!'</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReverseSort(['hello', 'world', '!'])─┐
│ ['world','hello','!']                     │
└───────────────────────────────────────────┘
</code></pre></div> <p>Consider the following sorting order for the <code class=syntax>NULL</code>, <code class=syntax>NaN</code> and <code class=syntax>Inf</code> values:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=n>inf</span><span class=p>,</span> <span class=o>-</span><span class=n>inf</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────────────────────────────┐
│ [inf,3,2,1,-4,-inf,nan,nan,NULL,NULL] │
└───────────────────────────────────────┘
</code></pre></div> <ul> <li><code class=syntax>Inf</code> values are first in the array.</li> <li><code class=syntax>NULL</code> values are last in the array.</li> <li><code class=syntax>NaN</code> values are right before <code class=syntax>NULL</code>.</li> <li><code class=syntax>-Inf</code> values are right before <code class=syntax>NaN</code>.</li> </ul> <p>Note that the <code class=syntax>arrayReverseSort</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument. Example is shown below.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>x</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [1,2,3] │
└─────────┘
</code></pre></div> <p>The array is sorted in the following way:</p> <ol> <li>At first, the source array ([1, 2, 3]) is sorted according to the result of the lambda function applied to the elements of the array. The result is an array [3, 2, 1].</li> <li>Array that is obtained on the previous step, is reversed. So, the final result is [1, 2, 3].</li> </ol> <p>The lambda function can accept multiple arguments. In this case, you need to pass the <code class=syntax>arrayReverseSort</code> function several arrays of identical length that the arguments of lambda function will correspond to. The resulting array will consist of elements from the first input array; elements from the next input array(s) specify the sorting keys. For example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────────┐
│ ['hello','world'] │
└───────────────────┘
</code></pre></div> <p>In this example, the array is sorted in the following way:</p> <ol> <li>At first, the source array ([‘hello’, ‘world’]) is sorted according to the result of the lambda function applied to the elements of the arrays. The elements that are passed in the second array ([2, 1]), define the sorting keys for corresponding elements from the source array. The result is an array [‘world’, ‘hello’].</li> <li>Array that was sorted on the previous step, is reversed. So, the final result is [‘hello’, ‘world’].</li> </ol> <p>Other examples are shown below.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=s1>'a'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'c'</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [5,3,4] │
└─────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [4,3,5] │
└─────────┘
</code></pre></div> <h2 id=arrayuniqarr>arrayUniq(arr, …)<a class=headerlink href=../amp/#arrayuniqarr title="Permanent link"> </a></h2> <p>If one argument is passed, it counts the number of different elements in the array.<br> If multiple arguments are passed, it counts the number of different tuples of elements at corresponding positions in multiple arrays.</p> <p>If you want to get a list of unique items in an array, you can use arrayReduce(‘groupUniqArray’, arr).</p> <h2 id=array-functions-join>arrayJoin(arr)<a class=headerlink href=../amp/#array-functions-join title="Permanent link"> </a></h2> <p>A special function. See the section <a href=../../array-join/amp/#functions_arrayjoin>“ArrayJoin function”</a>.</p> <h2 id=arraydifference>arrayDifference<a class=headerlink href=../amp/#arraydifference title="Permanent link"> </a></h2> <p>Calculates the difference between adjacent array elements. Returns an array where the first element will be 0, the second is the difference between <code class=syntax>a[1] - a[0]</code>, etc. The type of elements in the resulting array is determined by the type inference rules for subtraction (e.g. <code class=syntax>UInt8</code> - <code class=syntax>UInt8</code> = <code class=syntax>Int16</code>).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayDifference</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array</code> – <a href=https://clickhouse.tech/docs/en/data_types/array/ target=_blank>Array</a>.</li> </ul> <p><strong>Returned values</strong></p> <p>Returns an array of differences between adjacent elements.</p> <p>Type: <a href=https://clickhouse.tech/docs/en/data_types/int_uint/#uint-ranges target=_blank>UInt*</a>, <a href=https://clickhouse.tech/docs/en/data_types/int_uint/#int-ranges target=_blank>Int*</a>, <a href=https://clickhouse.tech/docs/en/data_types/float/ target=_blank>Float*</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayDifference</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayDifference([1, 2, 3, 4])─┐
│ [0,1,1,1]                     │
└───────────────────────────────┘
</code></pre></div> <p>Example of the overflow due to result type Int64:</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayDifference</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10000000000000000000</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayDifference([0, 10000000000000000000])─┐
│ [0,-8446744073709551616]                   │
└────────────────────────────────────────────┘
</code></pre></div> <h2 id=arraydistinct>arrayDistinct<a class=headerlink href=../amp/#arraydistinct title="Permanent link"> </a></h2> <p>Takes an array, returns an array containing the distinct elements only.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayDistinct</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array</code> – <a href=https://clickhouse.tech/docs/en/data_types/array/ target=_blank>Array</a>.</li> </ul> <p><strong>Returned values</strong></p> <p>Returns an array containing the distinct elements.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayDistinct</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayDistinct([1, 2, 2, 3, 1])─┐
│ [1,2,3]                        │
└────────────────────────────────┘
</code></pre></div> <h2 id=array_functions-arrayenumeratedense>arrayEnumerateDense(arr)<a class=headerlink href=../amp/#array_functions-arrayenumeratedense title="Permanent link"> </a></h2> <p>Returns an array of the same size as the source array, indicating where each element first appears in the source array.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayEnumerateDense</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>30</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayEnumerateDense([10, 20, 10, 30])─┐
│ [1,2,1,3]                             │
└───────────────────────────────────────┘
</code></pre></div> <h2 id=array-functions-arrayintersect>arrayIntersect(arr)<a class=headerlink href=../amp/#array-functions-arrayintersect title="Permanent link"> </a></h2> <p>Takes multiple arrays, returns an array with elements that are present in all source arrays. Elements order in the resulting array is the same as in the first array.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>arrayIntersect</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>no_intersect</span><span class=p>,</span>
    <span class=n>arrayIntersect</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=k>intersect</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─no_intersect─┬─intersect─┐
│ []           │ [1]       │
└──────────────┴───────────┘
</code></pre></div> <h2 id=arrayreduce>arrayReduce<a class=headerlink href=../amp/#arrayreduce title="Permanent link"> </a></h2> <p>Applies an aggregate function to array elements and returns its result. The name of the aggregation function is passed as a string in single quotes <code class=syntax>'max'</code>, <code class=syntax>'sum'</code>. When using parametric aggregate functions, the parameter is indicated after the function name in parentheses <code class=syntax>'uniqUpTo(6)'</code>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayReduce</span><span class=p>(</span><span class=n>agg_func</span><span class=p>,</span> <span class=n>arr1</span><span class=p>,</span> <span class=n>arr2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>arrN</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>agg_func</code> — The name of an aggregate function which should be a constant <a href=../../../data-types/string/amp/ >string</a>.</li> <li><code class=syntax>arr</code> — Any number of <a href=../../../data-types/array/amp/ >array</a> type columns as the parameters of the aggregation function.</li> </ul> <p><strong>Returned value</strong></p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'max'</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('max', [1, 2, 3])─┐
│                             3 │
└───────────────────────────────┘
</code></pre></div> <p>If an aggregate function takes multiple arguments, then this function must be applied to multiple arrays of the same size.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'maxIf'</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('maxIf', [3, 5], [1, 0])─┐
│                                    3 │
└──────────────────────────────────────┘
</code></pre></div> <p>Example with a parametric aggregate function:</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'uniqUpTo(3)'</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('uniqUpTo(3)', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10])─┐
│                                                           4 │
└─────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=arrayreduceinranges>arrayReduceInRanges<a class=headerlink href=../amp/#arrayreduceinranges title="Permanent link"> </a></h2> <p>Applies an aggregate function to array elements in given ranges and returns an array containing the result corresponding to each range. The function will return the same result as multiple <code class=syntax>arrayReduce(agg_func, arraySlice(arr1, index, length), ...)</code>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayReduceInRanges</span><span class=p>(</span><span class=n>agg_func</span><span class=p>,</span> <span class=n>ranges</span><span class=p>,</span> <span class=n>arr1</span><span class=p>,</span> <span class=n>arr2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>arrN</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>agg_func</code> — The name of an aggregate function which should be a constant <a href=../../../data-types/string/amp/ >string</a>.</li> <li><code class=syntax>ranges</code> — The ranges to aggretate which should be an <a href=../../../data-types/array/amp/ >array</a> of <a href=../../../data-types/tuple/amp/ >tuples</a> which containing the index and the length of each range.</li> <li><code class=syntax>arr</code> — Any number of <a href=../../../data-types/array/amp/ >Array</a> type columns as the parameters of the aggregation function.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>Array containing results of the aggregate function over specified ranges.</li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduceInRanges</span><span class=p>(</span>
    <span class=s1>'sum'</span><span class=p>,</span>
    <span class=p>[(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>),</span> <span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span> <span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>),</span> <span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>)],</span>
    <span class=p>[</span><span class=mi>1000000</span><span class=p>,</span> <span class=mi>200000</span><span class=p>,</span> <span class=mi>30000</span><span class=p>,</span> <span class=mi>4000</span><span class=p>,</span> <span class=mi>500</span><span class=p>,</span> <span class=mi>60</span><span class=p>,</span> <span class=mi>7</span><span class=p>]</span>
<span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────────────────────────┐
│ [1234500,234000,34560,4567] │
└─────────────────────────────┘
</code></pre></div> <h2 id=arrayreverse>arrayReverse(arr)<a class=headerlink href=../amp/#arrayreverse title="Permanent link"> </a></h2> <p>Returns an array of the same size as the original array containing the elements in reverse order.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverse</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReverse([1, 2, 3])─┐
│ [3,2,1]                 │
└─────────────────────────┘
</code></pre></div> <h2 id=array-functions-reverse>reverse(arr)<a class=headerlink href=../amp/#array-functions-reverse title="Permanent link"> </a></h2> <p>Synonym for <a href=../amp/#arrayreverse>“arrayReverse”</a></p> <h2 id=arrayflatten>arrayFlatten<a class=headerlink href=../amp/#arrayflatten title="Permanent link"> </a></h2> <p>Converts an array of arrays to a flat array.</p> <p>Function:</p> <ul> <li>Applies to any depth of nested arrays.</li> <li>Does not change arrays that are already flat.</li> </ul> <p>The flattened array contains all the elements from all source arrays.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>flatten</span><span class=p>(</span><span class=n>array_of_arrays</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code class=syntax>flatten</code>.</p> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>array_of_arrays</code> — <a href=../../../data-types/array/amp/ >Array</a> of arrays. For example, <code class=syntax>[[1,2,3], [4,5]]</code>.</li> </ul> <p><strong>Examples</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>flatten</span><span class=p>([[[</span><span class=mi>1</span><span class=p>]],</span> <span class=p>[[</span><span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>]]]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─flatten(array(array([1]), array([2], [3])))─┐
│ [1,2,3]                                     │
└─────────────────────────────────────────────┘
</code></pre></div> <h2 id=arraycompact>arrayCompact<a class=headerlink href=../amp/#arraycompact title="Permanent link"> </a></h2> <p>Removes consecutive duplicate elements from an array. The order of result values is determined by the order in the source array.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayCompact</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <p><code class=syntax>arr</code> — The <a href=../../../data-types/array/amp/ >array</a> to inspect.</p> <p><strong>Returned value</strong></p> <p>The array without duplicate.</p> <p>Type: <code class=syntax>Array</code>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayCompact</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayCompact([1, 1, nan, nan, 2, 3, 3, 3])─┐
│ [1,nan,nan,2,3]                            │
└────────────────────────────────────────────┘
</code></pre></div> <h2 id=arrayzip>arrayZip<a class=headerlink href=../amp/#arrayzip title="Permanent link"> </a></h2> <p>Combines multiple arrays into a single array. The resulting array contains the corresponding elements of the source arrays grouped into tuples in the listed order of arguments.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayZip</span><span class=p>(</span><span class=n>arr1</span><span class=p>,</span> <span class=n>arr2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>arrN</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>arrN</code> — <a href=../../../data-types/array/amp/ >Array</a>.</li> </ul> <p>The function can take any number of arrays of different types. All the input arrays must be of equal size.</p> <p><strong>Returned value</strong></p> <ul> <li>Array with elements from the source arrays grouped into <a href=../../../data-types/tuple/amp/ >tuples</a>. Data types in the tuple are the same as types of the input arrays and in the same order as arrays are passed.</li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayZip</span><span class=p>([</span><span class=s1>'a'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'c'</span><span class=p>],</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayZip(['a', 'b', 'c'], [5, 2, 1])─┐
│ [('a',5),('b',2),('c',1)]            │
└──────────────────────────────────────┘
</code></pre></div> <h2 id=arrayauc>arrayAUC<a class=headerlink href=../amp/#arrayauc title="Permanent link"> </a></h2> <p>Calculate AUC (Area Under the Curve, which is a concept in machine learning, see more details: <a href=https://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_under_the_curve target=_blank>https://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_under_the_curve</a>).</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayAUC</span><span class=p>(</span><span class=n>arr_scores</span><span class=p>,</span> <span class=n>arr_labels</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>arr_scores</code> — scores prediction model gives.</li> <li><code class=syntax>arr_labels</code> — labels of samples, usually 1 for positive sample and 0 for negtive sample.</li> </ul> <p><strong>Returned value</strong></p> <p>Returns AUC value with type Float64.</p> <p><strong>Example</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>select</span> <span class=n>arrayAUC</span><span class=p>([</span><span class=mi>0</span><span class=p>.</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>35</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>]);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayAUC([0.1, 0.4, 0.35, 0.8], [0, 0, 1, 1])─┐
│                                          0.75 │
└───────────────────────────────────────────────┘
</code></pre></div> <h2 id=array-map>arrayMap(func, arr1, …)<a class=headerlink href=../amp/#array-map title="Permanent link"> </a></h2> <p>Returns an array obtained from the original application of the <code class=syntax>func</code> function to each element in the <code class=syntax>arr</code> array.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayMap</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>2</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [3,4,5] │
└─────────┘
</code></pre></div> <p>The following example shows how to create a tuple of elements from different arrays:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayMap</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────────────────┐
│ [(1,4),(2,5),(3,6)] │
└─────────────────────┘
</code></pre></div> <p>Note that the <code class=syntax>arrayMap</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=array-filter>arrayFilter(func, arr1, …)<a class=headerlink href=../amp/#array-filter title="Permanent link"> </a></h2> <p>Returns an array containing only the elements in <code class=syntax>arr1</code> for which <code class=syntax>func</code> returns something other than 0.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayFilter</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=k>LIKE</span> <span class=s1>'%World%'</span><span class=p>,</span> <span class=p>[</span><span class=s1>'Hello'</span><span class=p>,</span> <span class=s1>'abc World'</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────┐
│ ['abc World'] │
└───────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>arrayFilter</span><span class=p>(</span>
        <span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>x</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=k>LIKE</span> <span class=s1>'%World%'</span><span class=p>,</span>
        <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>arr</span><span class=p>),</span>
        <span class=p>[</span><span class=s1>'Hello'</span><span class=p>,</span> <span class=s1>'abc World'</span><span class=p>]</span> <span class=k>AS</span> <span class=n>arr</span><span class=p>)</span>
    <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│ [2] │
└─────┘
</code></pre></div> <p>Note that the <code class=syntax>arrayFilter</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=array-fill>arrayFill(func, arr1, …)<a class=headerlink href=../amp/#array-fill title="Permanent link"> </a></h2> <p>Scan through <code class=syntax>arr1</code> from the first element to the last element and replace <code class=syntax>arr1[i]</code> by <code class=syntax>arr1[i - 1]</code> if <code class=syntax>func</code> returns 0. The first element of <code class=syntax>arr1</code> will not be replaced.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayFill</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=k>not</span> <span class=k>isNull</span><span class=p>(</span><span class=n>x</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=k>null</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res──────────────────────────────┐
│ [1,1,3,11,12,12,12,5,6,14,14,14] │
└──────────────────────────────────┘
</code></pre></div> <p>Note that the <code class=syntax>arrayFill</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=array-reverse-fill>arrayReverseFill(func, arr1, …)<a class=headerlink href=../amp/#array-reverse-fill title="Permanent link"> </a></h2> <p>Scan through <code class=syntax>arr1</code> from the last element to the first element and replace <code class=syntax>arr1[i]</code> by <code class=syntax>arr1[i + 1]</code> if <code class=syntax>func</code> returns 0. The last element of <code class=syntax>arr1</code> will not be replaced.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseFill</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=k>not</span> <span class=k>isNull</span><span class=p>(</span><span class=n>x</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=k>null</span><span class=p>,</span> <span class=k>null</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res────────────────────────────────┐
│ [1,3,3,11,12,5,5,5,6,14,NULL,NULL] │
└────────────────────────────────────┘
</code></pre></div> <p>Note that the <code class=syntax>arrayReverseFill</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=array-split>arraySplit(func, arr1, …)<a class=headerlink href=../amp/#array-split title="Permanent link"> </a></h2> <p>Split <code class=syntax>arr1</code> into multiple arrays. When <code class=syntax>func</code> returns something other than 0, the array will be split on the left hand side of the element. The array will not be split before the first element.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySplit</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────────────┐
│ [[1,2,3],[4,5]] │
└─────────────────┘
</code></pre></div> <p>Note that the <code class=syntax>arraySplit</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=array-reverse-split>arrayReverseSplit(func, arr1, …)<a class=headerlink href=../amp/#array-reverse-split title="Permanent link"> </a></h2> <p>Split <code class=syntax>arr1</code> into multiple arrays. When <code class=syntax>func</code> returns something other than 0, the array will be split on the right hand side of the element. The array will not be split after the last element.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSplit</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────────┐
│ [[1],[2,3,4],[5]] │
└───────────────────┘
</code></pre></div> <p>Note that the <code class=syntax>arrayReverseSplit</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=arrayexistsfunc-arr1>arrayExists([func,] arr1, …)<a class=headerlink href=../amp/#arrayexistsfunc-arr1 title="Permanent link"> </a></h2> <p>Returns 1 if there is at least one element in <code class=syntax>arr</code> for which <code class=syntax>func</code> returns something other than 0. Otherwise, it returns 0.</p> <p>Note that the <code class=syntax>arrayExists</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <h2 id=arrayallfunc-arr1>arrayAll([func,] arr1, …)<a class=headerlink href=../amp/#arrayallfunc-arr1 title="Permanent link"> </a></h2> <p>Returns 1 if <code class=syntax>func</code> returns something other than 0 for all the elements in <code class=syntax>arr</code>. Otherwise, it returns 0.</p> <p>Note that the <code class=syntax>arrayAll</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <h2 id=array-first>arrayFirst(func, arr1, …)<a class=headerlink href=../amp/#array-first title="Permanent link"> </a></h2> <p>Returns the first element in the <code class=syntax>arr1</code> array for which <code class=syntax>func</code> returns something other than 0.</p> <p>Note that the <code class=syntax>arrayFirst</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=array-first-index>arrayFirstIndex(func, arr1, …)<a class=headerlink href=../amp/#array-first-index title="Permanent link"> </a></h2> <p>Returns the index of the first element in the <code class=syntax>arr1</code> array for which <code class=syntax>func</code> returns something other than 0.</p> <p>Note that the <code class=syntax>arrayFirstIndex</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You must pass a lambda function to it as the first argument, and it can’t be omitted.</p> <h2 id=array-min>arrayMin<a class=headerlink href=../amp/#array-min title="Permanent link"> </a></h2> <p>Returns the minimum of elements in the source array.</p> <p>If the <code class=syntax>func</code> function is specified, returns the mininum of elements converted by this function.</p> <p>Note that the <code class=syntax>arrayMin</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayMin</span><span class=p>([</span><span class=n>func</span><span class=p>,]</span> <span class=n>arr</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>func</code> — Function. <a href=../../../data-types/special-data-types/expression/amp/ >Expression</a>.</li> <li><code class=syntax>arr</code> — Array. <a href=../../../data-types/array/amp/ >Array</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The minimum of function values (or the array minimum).</li> </ul> <p>Type: if <code class=syntax>func</code> is specified, matches <code class=syntax>func</code> return value type, else matches the array elements type.</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayMin</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│   1 │
└─────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayMin</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=p>(</span><span class=o>-</span><span class=n>x</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│  -4 │
└─────┘
</code></pre></div> <h2 id=array-max>arrayMax<a class=headerlink href=../amp/#array-max title="Permanent link"> </a></h2> <p>Returns the maximum of elements in the source array.</p> <p>If the <code class=syntax>func</code> function is specified, returns the maximum of elements converted by this function.</p> <p>Note that the <code class=syntax>arrayMax</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayMax</span><span class=p>([</span><span class=n>func</span><span class=p>,]</span> <span class=n>arr</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>func</code> — Function. <a href=../../../data-types/special-data-types/expression/amp/ >Expression</a>.</li> <li><code class=syntax>arr</code> — Array. <a href=../../../data-types/array/amp/ >Array</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The maximum of function values (or the array maximum).</li> </ul> <p>Type: if <code class=syntax>func</code> is specified, matches <code class=syntax>func</code> return value type, else matches the array elements type.</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayMax</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│   4 │
└─────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayMax</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=p>(</span><span class=o>-</span><span class=n>x</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│  -1 │
└─────┘
</code></pre></div> <h2 id=array-sum>arraySum<a class=headerlink href=../amp/#array-sum title="Permanent link"> </a></h2> <p>Returns the sum of elements in the source array.</p> <p>If the <code class=syntax>func</code> function is specified, returns the sum of elements converted by this function.</p> <p>Note that the <code class=syntax>arraySum</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arraySum</span><span class=p>([</span><span class=n>func</span><span class=p>,]</span> <span class=n>arr</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>func</code> — Function. <a href=../../../data-types/special-data-types/expression/amp/ >Expression</a>.</li> <li><code class=syntax>arr</code> — Array. <a href=../../../data-types/array/amp/ >Array</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The sum of the function values (or the array sum).</li> </ul> <p>Type: for decimal numbers in source array (or for converted values, if <code class=syntax>func</code> is specified) — <a href=../../../data-types/decimal/amp/ >Decimal128</a>, for floating point numbers — <a href=../../../data-types/float/amp/ >Float64</a>, for numeric unsigned — <a href=../../../data-types/int-uint/amp/ >UInt64</a>, and for numeric signed — <a href=../../../data-types/int-uint/amp/ >Int64</a>.</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySum</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│   5 │
└─────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySum</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>x</span><span class=o>*</span><span class=n>x</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│  13 │
└─────┘
</code></pre></div> <h2 id=array-avg>arrayAvg<a class=headerlink href=../amp/#array-avg title="Permanent link"> </a></h2> <p>Returns the average of elements in the source array.</p> <p>If the <code class=syntax>func</code> function is specified, returns the average of elements converted by this function.</p> <p>Note that the <code class=syntax>arrayAvg</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayAvg</span><span class=p>([</span><span class=n>func</span><span class=p>,]</span> <span class=n>arr</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>func</code> — Function. <a href=../../../data-types/special-data-types/expression/amp/ >Expression</a>.</li> <li><code class=syntax>arr</code> — Array. <a href=../../../data-types/array/amp/ >Array</a>.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>The average of function values (or the array average).</li> </ul> <p>Type: <a href=../../../data-types/float/amp/ >Float64</a>.</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayAvg</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌────────────────res─┐
│ 2.3333333333333335 │
└────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayAvg</span><span class=p>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>x</span><span class=p>),</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│  10 │
└─────┘
</code></pre></div> <h2 id=arraycumsumfunc-arr1>arrayCumSum([func,] arr1, …)<a class=headerlink href=../amp/#arraycumsumfunc-arr1 title="Permanent link"> </a></h2> <p>Returns an array of partial sums of elements in the source array (a running sum). If the <code class=syntax>func</code> function is specified, then the values of the array elements are converted by this function before summing.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayCumSum</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res──────────┐
│ [1, 2, 3, 4] │
└──────────────┘
</code></pre></div> <p>Note that the <code class=syntax>arrayCumSum</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <h2 id=arraycumsumnonnegativearr>arrayCumSumNonNegative(arr)<a class=headerlink href=../amp/#arraycumsumnonnegativearr title="Permanent link"> </a></h2> <p>Same as <code class=syntax>arrayCumSum</code>, returns an array of partial sums of elements in the source array (a running sum). Different <code class=syntax>arrayCumSum</code>, when then returned value contains a value less than zero, the value is replace with zero and the subsequent calculation is performed with zero parameters. For example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayCumSumNonNegative</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────┐
│ [1,2,0,1] │
└───────────┘
</code></pre></div> <p>Note that the <code class=syntax>arraySumNonNegative</code> is a <a href=../../amp/#higher-order-functions>higher-order function</a>. You can pass a lambda function to it as the first argument.</p> <h2 id=arrayproduct>arrayProduct<a class=headerlink href=../amp/#arrayproduct title="Permanent link"> </a></h2> <p>Multiplies elements of an <a href=../../../data-types/array/amp/ >array</a>.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayProduct</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>arr</code> — <a href=../../../data-types/array/amp/ >Array</a> of numeric values.</li> </ul> <p><strong>Returned value</strong></p> <ul> <li>A product of array's elements.</li> </ul> <p>Type: <a href=../../../data-types/float/amp/ >Float64</a>.</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayProduct</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res───┐
│ 720   │
└───────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayProduct</span><span class=p>([</span><span class=n>toDecimal64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>8</span><span class=p>),</span> <span class=n>toDecimal64</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>8</span><span class=p>),</span> <span class=n>toDecimal64</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=mi>8</span><span class=p>)])</span> <span class=k>as</span> <span class=n>res</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>res</span><span class=p>);</span>
</code></pre></div> <p>Return value type is always <a href=../../../data-types/float/amp/ >Float64</a>. Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┬─toTypeName(arrayProduct(array(toDecimal64(1, 8), toDecimal64(2, 8), toDecimal64(3, 8))))─┐
│ 6   │ Float64                                                                                  │
└─────┴──────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2021 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/878a159538935028f2d2dce3eb3074d44eb191df rel="external nofollow noreferrer" target=_blank class=text-reset>878a159538</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/en/sql-reference/functions/array-functions/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 