<!doctype html><html ⚡ lang=en> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>JSON | ClickHouse Documentation</title><link href=https://clickhouse.tech/docs/en/sql-reference/functions/json-functions/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "JSON | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.tech/docs/en/sql-reference/functions/json-functions/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "JSON | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}th{text-align:inherit}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}}.custom-select.is-valid{border-color:#28a745;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content th{padding:.75rem;vertical-align:top}#content th{border:1px solid #444451}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre,th{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .c{color:#747369}.syntax .err{color:#f2777a}.syntax .k{color:#c9c}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .c1{color:#747369}.syntax .ld{color:#9c9}.syntax .s{color:#9c9}.syntax .no{color:#f2777a}.syntax .py{color:#f2f0ec}.syntax .mi{color:#f99157}.syntax .s2{color:#9c9}.syntax .s1{color:#9c9}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <h1 id=functions-for-working-with-json>Functions for Working with JSON<a class=headerlink href=../amp/#functions-for-working-with-json title="Permanent link"> </a></h1> <p>In Yandex.Metrica, JSON is transmitted by users as session parameters. There are some special functions for working with this JSON. (Although in most of the cases, the JSONs are additionally pre-processed, and the resulting values are put in separate columns in their processed format.) All these functions are based on strong assumptions about what the JSON can be, but they try to do as little as possible to get the job done.</p> <p>The following assumptions are made:</p> <ol> <li>The field name (function argument) must be a constant.</li> <li>The field name is somehow canonically encoded in JSON. For example: <code class=syntax>visitParamHas('{"abc":"def"}', 'abc') = 1</code>, but <code class=syntax>visitParamHas('{"\\u0061\\u0062\\u0063":"def"}', 'abc') = 0</code></li> <li>Fields are searched for on any nesting level, indiscriminately. If there are multiple matching fields, the first occurrence is used.</li> <li>The JSON does not have space characters outside of string literals.</li> </ol> <h2 id=visitparamhasparams-name>visitParamHas(params, name)<a class=headerlink href=../amp/#visitparamhasparams-name title="Permanent link"> </a></h2> <p>Checks whether there is a field with the <code class=syntax>name</code> name.</p> <p>Alias: <code class=syntax>simpleJSONHas</code>.</p> <h2 id=visitparamextractuintparams-name>visitParamExtractUInt(params, name)<a class=headerlink href=../amp/#visitparamextractuintparams-name title="Permanent link"> </a></h2> <p>Parses UInt64 from the value of the field named <code class=syntax>name</code>. If this is a string field, it tries to parse a number from the beginning of the string. If the field does not exist, or it exists but does not contain a number, it returns 0.</p> <p>Alias: <code class=syntax>simpleJSONExtractUInt</code>.</p> <h2 id=visitparamextractintparams-name>visitParamExtractInt(params, name)<a class=headerlink href=../amp/#visitparamextractintparams-name title="Permanent link"> </a></h2> <p>The same as for Int64.</p> <p>Alias: <code class=syntax>simpleJSONExtractInt</code>.</p> <h2 id=visitparamextractfloatparams-name>visitParamExtractFloat(params, name)<a class=headerlink href=../amp/#visitparamextractfloatparams-name title="Permanent link"> </a></h2> <p>The same as for Float64.</p> <p>Alias: <code class=syntax>simpleJSONExtractFloat</code>.</p> <h2 id=visitparamextractboolparams-name>visitParamExtractBool(params, name)<a class=headerlink href=../amp/#visitparamextractboolparams-name title="Permanent link"> </a></h2> <p>Parses a true/false value. The result is UInt8.</p> <p>Alias: <code class=syntax>simpleJSONExtractBool</code>.</p> <h2 id=visitparamextractrawparams-name>visitParamExtractRaw(params, name)<a class=headerlink href=../amp/#visitparamextractrawparams-name title="Permanent link"> </a></h2> <p>Returns the value of a field, including separators.</p> <p>Alias: <code class=syntax>simpleJSONExtractRaw</code>.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>visitParamExtractRaw</span><span class=p>(</span><span class=s1>'{"abc":"\\n\\u0000"}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'"\\n\\u0000"'</span><span class=p>;</span>
<span class=n>visitParamExtractRaw</span><span class=p>(</span><span class=s1>'{"abc":{"def":[1,2,3]}}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'{"def":[1,2,3]}'</span><span class=p>;</span>
</code></pre></div> <h2 id=visitparamextractstringparams-name>visitParamExtractString(params, name)<a class=headerlink href=../amp/#visitparamextractstringparams-name title="Permanent link"> </a></h2> <p>Parses the string in double quotes. The value is unescaped. If unescaping failed, it returns an empty string.</p> <p>Alias: <code class=syntax>simpleJSONExtractString</code>.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>visitParamExtractString</span><span class=p>(</span><span class=s1>'{"abc":"\\n\\u0000"}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'\n\0'</span><span class=p>;</span>
<span class=n>visitParamExtractString</span><span class=p>(</span><span class=s1>'{"abc":"\\u263a"}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'☺'</span><span class=p>;</span>
<span class=n>visitParamExtractString</span><span class=p>(</span><span class=s1>'{"abc":"\\u263"}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>''</span><span class=p>;</span>
<span class=n>visitParamExtractString</span><span class=p>(</span><span class=s1>'{"abc":"hello}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>''</span><span class=p>;</span>
</code></pre></div> <p>There is currently no support for code points in the format <code class=syntax>\uXXXX\uYYYY</code> that are not from the basic multilingual plane (they are converted to CESU-8 instead of UTF-8).</p> <p>The following functions are based on <a href=https://github.com/lemire/simdjson rel="external nofollow noreferrer" target=_blank>simdjson</a> designed for more complex JSON parsing requirements. The assumption 2 mentioned above still applies.</p> <h2 id=isvalidjsonjson>isValidJSON(json)<a class=headerlink href=../amp/#isvalidjsonjson title="Permanent link"> </a></h2> <p>Checks that passed string is a valid json.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>isValidJSON</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>)</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>SELECT</span> <span class=n>isValidJSON</span><span class=p>(</span><span class=s1>'not a json'</span><span class=p>)</span> <span class=o>=</span> <span class=mi>0</span>
</code></pre></div> <h2 id=jsonhasjson-indices-or-keys>JSONHas(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonhasjson-indices-or-keys title="Permanent link"> </a></h2> <p>If the value exists in the JSON document, <code class=syntax>1</code> will be returned.</p> <p>If the value does not exist, <code class=syntax>0</code> will be returned.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONHas</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>)</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>SELECT</span> <span class=n>JSONHas</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span> <span class=o>=</span> <span class=mi>0</span>
</code></pre></div> <p><code class=syntax>indices_or_keys</code> is a list of zero or more arguments each of them can be either string or integer.</p> <ul> <li>String = access object member by key.</li> <li>Positive integer = access the n-th member/key from the beginning.</li> <li>Negative integer = access the n-th member/key from the end.</li> </ul> <p>Minimum index of the element is 1. Thus the element 0 does not exist.</p> <p>You may use integers to access both JSON arrays and JSON objects.</p> <p>So, for example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractKey</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'a'</span>
<span class=k>SELECT</span> <span class=n>JSONExtractKey</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'b'</span>
<span class=k>SELECT</span> <span class=n>JSONExtractKey</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'b'</span>
<span class=k>SELECT</span> <span class=n>JSONExtractKey</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=o>-</span><span class=mi>2</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'a'</span>
<span class=k>SELECT</span> <span class=n>JSONExtractString</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'hello'</span>
</code></pre></div> <h2 id=jsonlengthjson-indices-or-keys>JSONLength(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonlengthjson-indices-or-keys title="Permanent link"> </a></h2> <p>Return the length of a JSON array or a JSON object.</p> <p>If the value does not exist or has a wrong type, <code class=syntax>0</code> will be returned.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONLength</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>)</span> <span class=o>=</span> <span class=mi>3</span>
<span class=k>SELECT</span> <span class=n>JSONLength</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>)</span> <span class=o>=</span> <span class=mi>2</span>
</code></pre></div> <h2 id=jsontypejson-indices-or-keys>JSONType(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsontypejson-indices-or-keys title="Permanent link"> </a></h2> <p>Return the type of a JSON value.</p> <p>If the value does not exist, <code class=syntax>Null</code> will be returned.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONType</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'Object'</span>
<span class=k>SELECT</span> <span class=n>JSONType</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'a'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'String'</span>
<span class=k>SELECT</span> <span class=n>JSONType</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'Array'</span>
</code></pre></div> <h2 id=jsonextractuintjson-indices-or-keys>JSONExtractUInt(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonextractuintjson-indices-or-keys title="Permanent link"> </a></h2> <h2 id=jsonextractintjson-indices-or-keys>JSONExtractInt(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonextractintjson-indices-or-keys title="Permanent link"> </a></h2> <h2 id=jsonextractfloatjson-indices-or-keys>JSONExtractFloat(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonextractfloatjson-indices-or-keys title="Permanent link"> </a></h2> <h2 id=jsonextractbooljson-indices-or-keys>JSONExtractBool(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonextractbooljson-indices-or-keys title="Permanent link"> </a></h2> <p>Parses a JSON and extract a value. These functions are similar to <code class=syntax>visitParam</code> functions.</p> <p>If the value does not exist or has a wrong type, <code class=syntax>0</code> will be returned.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractInt</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=o>=</span> <span class=o>-</span><span class=mi>100</span>
<span class=k>SELECT</span> <span class=n>JSONExtractFloat</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=o>=</span> <span class=mi>200</span><span class=p>.</span><span class=mi>0</span>
<span class=k>SELECT</span> <span class=n>JSONExtractUInt</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=o>=</span> <span class=mi>300</span>
</code></pre></div> <h2 id=jsonextractstringjson-indices-or-keys>JSONExtractString(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonextractstringjson-indices-or-keys title="Permanent link"> </a></h2> <p>Parses a JSON and extract a string. This function is similar to <code class=syntax>visitParamExtractString</code> functions.</p> <p>If the value does not exist or has a wrong type, an empty string will be returned.</p> <p>The value is unescaped. If unescaping failed, it returns an empty string.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractString</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'a'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'hello'</span>
<span class=k>SELECT</span> <span class=n>JSONExtractString</span><span class=p>(</span><span class=s1>'{"abc":"\\n\\u0000"}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'\n\0'</span>
<span class=k>SELECT</span> <span class=n>JSONExtractString</span><span class=p>(</span><span class=s1>'{"abc":"\\u263a"}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'☺'</span>
<span class=k>SELECT</span> <span class=n>JSONExtractString</span><span class=p>(</span><span class=s1>'{"abc":"\\u263"}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>''</span>
<span class=k>SELECT</span> <span class=n>JSONExtractString</span><span class=p>(</span><span class=s1>'{"abc":"hello}'</span><span class=p>,</span> <span class=s1>'abc'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>''</span>
</code></pre></div> <h2 id=jsonextractjson-indices-or-keys-return-type>JSONExtract(json[, indices_or_keys…], Return_type)<a class=headerlink href=../amp/#jsonextractjson-indices-or-keys-return-type title="Permanent link"> </a></h2> <p>Parses a JSON and extract a value of the given ClickHouse data type.</p> <p>This is a generalization of the previous <code class=syntax>JSONExtract&lt;type&gt;</code> functions.<br> This means<br> <code class=syntax>JSONExtract(..., 'String')</code> returns exactly the same as <code class=syntax>JSONExtractString()</code>,<br> <code class=syntax>JSONExtract(..., 'Float64')</code> returns exactly the same as <code class=syntax>JSONExtractFloat()</code>.</p> <p>Examples:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtract</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'Tuple(String, Array(Float64))'</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=s1>'hello'</span><span class=p>,[</span><span class=o>-</span><span class=mi>100</span><span class=p>,</span><span class=mi>200</span><span class=p>,</span><span class=mi>300</span><span class=p>])</span>
<span class=k>SELECT</span> <span class=n>JSONExtract</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'Tuple(b Array(Float64), a String)'</span><span class=p>)</span> <span class=o>=</span> <span class=p>([</span><span class=o>-</span><span class=mi>100</span><span class=p>,</span><span class=mi>200</span><span class=p>,</span><span class=mi>300</span><span class=p>],</span><span class=s1>'hello'</span><span class=p>)</span>
<span class=k>SELECT</span> <span class=n>JSONExtract</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'Array(Nullable(Int8))'</span><span class=p>)</span> <span class=o>=</span> <span class=p>[</span><span class=o>-</span><span class=mi>100</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=k>NULL</span><span class=p>]</span>
<span class=k>SELECT</span> <span class=n>JSONExtract</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Nullable(Int64)'</span><span class=p>)</span> <span class=o>=</span> <span class=k>NULL</span>
<span class=k>SELECT</span> <span class=n>JSONExtract</span><span class=p>(</span><span class=s1>'{"passed": true}'</span><span class=p>,</span> <span class=s1>'passed'</span><span class=p>,</span> <span class=s1>'UInt8'</span><span class=p>)</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>SELECT</span> <span class=n>JSONExtract</span><span class=p>(</span><span class=s1>'{"day": "Thursday"}'</span><span class=p>,</span> <span class=s1>'day'</span><span class=p>,</span> <span class=s1>'Enum8(\'</span><span class=n>Sunday</span><span class=err>\</span><span class=s1>' = 0, \'</span><span class=n>Monday</span><span class=err>\</span><span class=s1>' = 1, \'</span><span class=n>Tuesday</span><span class=err>\</span><span class=s1>' = 2, \'</span><span class=n>Wednesday</span><span class=err>\</span><span class=s1>' = 3, \'</span><span class=n>Thursday</span><span class=err>\</span><span class=s1>' = 4, \'</span><span class=n>Friday</span><span class=err>\</span><span class=s1>' = 5, \'</span><span class=n>Saturday</span><span class=err>\</span><span class=s1>' = 6)'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'Thursday'</span>
<span class=k>SELECT</span> <span class=n>JSONExtract</span><span class=p>(</span><span class=s1>'{"day": 5}'</span><span class=p>,</span> <span class=s1>'day'</span><span class=p>,</span> <span class=s1>'Enum8(\'</span><span class=n>Sunday</span><span class=err>\</span><span class=s1>' = 0, \'</span><span class=n>Monday</span><span class=err>\</span><span class=s1>' = 1, \'</span><span class=n>Tuesday</span><span class=err>\</span><span class=s1>' = 2, \'</span><span class=n>Wednesday</span><span class=err>\</span><span class=s1>' = 3, \'</span><span class=n>Thursday</span><span class=err>\</span><span class=s1>' = 4, \'</span><span class=n>Friday</span><span class=err>\</span><span class=s1>' = 5, \'</span><span class=n>Saturday</span><span class=err>\</span><span class=s1>' = 6)'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'Friday'</span>
</code></pre></div> <h2 id=jsonextractkeysandvaluesjson-indices-or-keys-value-type>JSONExtractKeysAndValues(json[, indices_or_keys…], Value_type)<a class=headerlink href=../amp/#jsonextractkeysandvaluesjson-indices-or-keys-value-type title="Permanent link"> </a></h2> <p>Parses key-value pairs from a JSON where the values are of the given ClickHouse data type.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractKeysAndValues</span><span class=p>(</span><span class=s1>'{"x": {"a": 5, "b": 7, "c": 11}}'</span><span class=p>,</span> <span class=s1>'x'</span><span class=p>,</span> <span class=s1>'Int8'</span><span class=p>)</span> <span class=o>=</span> <span class=p>[(</span><span class=s1>'a'</span><span class=p>,</span><span class=mi>5</span><span class=p>),(</span><span class=s1>'b'</span><span class=p>,</span><span class=mi>7</span><span class=p>),(</span><span class=s1>'c'</span><span class=p>,</span><span class=mi>11</span><span class=p>)];</span>
</code></pre></div> <h2 id=jsonextractrawjson-indices-or-keys>JSONExtractRaw(json[, indices_or_keys]…)<a class=headerlink href=../amp/#jsonextractrawjson-indices-or-keys title="Permanent link"> </a></h2> <p>Returns a part of JSON as unparsed string.</p> <p>If the part does not exist or has a wrong type, an empty string will be returned.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractRaw</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, 300]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>)</span> <span class=o>=</span> <span class=s1>'[-100, 200.0, 300]'</span><span class=p>;</span>
</code></pre></div> <h2 id=jsonextractarrayrawjson-indices-or-keys>JSONExtractArrayRaw(json[, indices_or_keys…])<a class=headerlink href=../amp/#jsonextractarrayrawjson-indices-or-keys title="Permanent link"> </a></h2> <p>Returns an array with elements of JSON array, each represented as unparsed string.</p> <p>If the part does not exist or isn’t array, an empty array will be returned.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractArrayRaw</span><span class=p>(</span><span class=s1>'{"a": "hello", "b": [-100, 200.0, "hello"]}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>)</span> <span class=o>=</span> <span class=p>[</span><span class=s1>'-100'</span><span class=p>,</span> <span class=s1>'200.0'</span><span class=p>,</span> <span class=s1>'"hello"'</span><span class=p>]</span><span class=err>'</span><span class=p>;</span>
</code></pre></div> <h2 id=json-extract-keys-and-values-raw>JSONExtractKeysAndValuesRaw<a class=headerlink href=../amp/#json-extract-keys-and-values-raw title="Permanent link"> </a></h2> <p>Extracts raw data from a JSON object.</p> <p><strong>Syntax</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>JSONExtractKeysAndValuesRaw</span><span class=p>(</span><span class=n>json</span><span class=p>[,</span> <span class=n>p</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>t</span><span class=p>,</span> <span class=n>h</span><span class=p>])</span>
</code></pre></div> <p><strong>Arguments</strong></p> <ul> <li><code class=syntax>json</code> — <a href=../../../data-types/string/amp/ >String</a> with valid JSON.</li> <li><code class=syntax>p, a, t, h</code> — Comma-separated indices or keys that specify the path to the inner field in a nested JSON object. Each argument can be either a <a href=../../../data-types/string/amp/ >string</a> to get the field by the key or an <a href=../../../data-types/int-uint/amp/ >integer</a> to get the N-th field (indexed from 1, negative integers count from the end). If not set, the whole JSON is parsed as the top-level object. Optional parameter.</li> </ul> <p><strong>Returned values</strong></p> <ul> <li>Array with <code class=syntax>('key', 'value')</code> tuples. Both tuple members are strings.</li> <li>Empty array if the requested object does not exist, or input JSON is invalid.</li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/tuple/amp/ >Tuple</a>(<a href=../../../data-types/string/amp/ >String</a>, <a href=../../../data-types/string/amp/ >String</a>).</p> <p><strong>Examples</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractKeysAndValuesRaw</span><span class=p>(</span><span class=s1>'{"a": [-100, 200.0], "b":{"c": {"d": "hello", "f": "world"}}}'</span><span class=p>);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─JSONExtractKeysAndValuesRaw('{"a": [-100, 200.0], "b":{"c": {"d": "hello", "f": "world"}}}')─┐
│ [('a','[-100,200]'),('b','{"c":{"d":"hello","f":"world"}}')]                                 │
└──────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractKeysAndValuesRaw</span><span class=p>(</span><span class=s1>'{"a": [-100, 200.0], "b":{"c": {"d": "hello", "f": "world"}}}'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─JSONExtractKeysAndValuesRaw('{"a": [-100, 200.0], "b":{"c": {"d": "hello", "f": "world"}}}', 'b')─┐
│ [('c','{"d":"hello","f":"world"}')]                                                               │
└───────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>JSONExtractKeysAndValuesRaw</span><span class=p>(</span><span class=s1>'{"a": [-100, 200.0], "b":{"c": {"d": "hello", "f": "world"}}}'</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=s1>'c'</span><span class=p>);</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─JSONExtractKeysAndValuesRaw('{"a": [-100, 200.0], "b":{"c": {"d": "hello", "f": "world"}}}', -1, 'c')─┐
│ [('d','"hello"'),('f','"world"')]                                                                     │
└───────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2021 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/878a159538935028f2d2dce3eb3074d44eb191df rel="external nofollow noreferrer" target=_blank class=text-reset>878a159538</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/en/sql-reference/functions/json-functions/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 