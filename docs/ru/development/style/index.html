<!DOCTYPE html><html lang=ru data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Как писать код на C++ | Документация ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/logo-180x180.png><meta property=og:title content="Как писать код на C++ | Документация ClickHouse"><meta property=og:description content="Как писать код на C++ Общее 1. Этот текст носит рекомендательный характер. 2. Если вы редактируете код, то имеет смысл п"><meta property=og:type content=article><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta content=https://clickhouse.tech/docs/ru/development/style/ property=og:url><link href=https://clickhouse.tech/docs/ru/development/style/ rel=canonical><link href=https://clickhouse.tech/docs/ru/development/style/amp/ rel=amphtml><link rel=search href=/opensearch.xml title=ClickHouse type=application/opensearchdescription+xml><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Как писать код на C++ | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/ru/development/style/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Как писать код на C++ | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><meta name=description content="Как писать код на C++ Общее 1. Этот текст носит рекомендательный характер. 2. Если вы редактируете код, то имеет смысл п"><meta name=keywords content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics"><link rel=alternate href=https://clickhouse.tech/docs/en/development/style/ hreflang=en><link rel=alternate href=https://clickhouse.tech/docs/zh/development/style/ hreflang=zh><link rel=alternate href=https://clickhouse.tech/docs/ru/development/style/ hreflang=ru><link rel=alternate href=https://clickhouse.tech/docs/ja/development/style/ hreflang=ja><link rel=alternate href=https://clickhouse.tech/docs/en/development/style/ hreflang=x-default><link href=/css/base.css?48d3d791 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Как писать код на C++ </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li id=edit-wrapper class=nav-item> <a id=edit-link href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/development/style.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/development/style/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/development/style/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/ru/development/style/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/development/style/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Введение class="nav-link text-light dropdown-toggle px-0">Введение</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../introduction/distinctive-features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../../introduction/history/ title="История ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">История ClickHouse</a> <a href=../../introduction/adopters/ title=Adopters class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a> <a href=../../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Начало работы" class="nav-link text-light dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting-started/install/ title=Установка class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a> <a href=../../getting-started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../getting-started/playground/ title=Playground class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a> <a href=#sidebar-sidebar-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-5 title="Тестовые массивы данных" class="nav-link text-light dropdown-toggle px-0">Тестовые массивы данных</a> <div id=sidebar-sidebar-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting-started/example-datasets/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../getting-started/example-datasets/metrica/ title="Анонимизированные данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Анонимизированные данные Яндекс.Метрики</a> <a href=../../getting-started/example-datasets/star-schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../getting-started/example-datasets/recipes/ title="Набор данных кулинарных рецептов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Набор данных кулинарных рецептов</a> <a href=../../getting-started/example-datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting-started/example-datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../../getting-started/example-datasets/amplab-benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../getting-started/example-datasets/brown-benchmark/ title="Brown University Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Brown University Benchmark</a> <a href=../../getting-started/example-datasets/nyc-taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../../getting-started/example-datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../getting-started/example-datasets/cell-towers/ title="Вышки сотовой связи" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Вышки сотовой связи</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Интерфейсы class="nav-link text-light dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../../interfaces/tcp/ title="Родной интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Родной интерфейс (TCP)</a> <a href=../../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../../interfaces/mysql/ title=MySQL-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL-интерфейс</a> <a href=../../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> <a href=../../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=../../interfaces/cpp/ title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a> <a href=#sidebar-sidebar-3-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-10 title="Сторонние интерфейсы" class="nav-link text-light dropdown-toggle px-0">Сторонние интерфейсы</a> <div id=sidebar-sidebar-3-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/ title="Сторонние интерфейсы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Сторонние интерфейсы</a> <a href=../../interfaces/third-party/client-libraries/ title="Клиентские библиотеки от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки от сторонних разработчиков</a> <a href=../../interfaces/third-party/integrations/ title="Библиотеки для интеграции от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Библиотеки для интеграции от сторонних разработчиков</a> <a href=../../interfaces/third-party/gui/ title="Визуальные интерфейсы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы от сторонних разработчиков</a> <a href=../../interfaces/third-party/proxy/ title="Прокси-серверы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси-серверы от сторонних разработчиков</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Engines class="nav-link text-light dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title="Движки таблиц" class="nav-link text-light dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-4-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-2 title="MergeTree Family" class="nav-link text-light dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-4-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/mergetree-family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../engines/table-engines/mergetree-family/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> <a href=../../engines/table-engines/mergetree-family/custom-partitioning-key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../../engines/table-engines/mergetree-family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-4-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-3 title="Семейство Log" class="nav-link text-light dropdown-toggle px-0">Семейство Log</a> <div id=sidebar-sidebar-4-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/log-family/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../engines/table-engines/log-family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../engines/table-engines/log-family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../engines/table-engines/log-family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-4-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-4 title="Движки таблиц для интеграции" class="nav-link text-light dropdown-toggle px-0">Движки таблиц для интеграции</a> <div id=sidebar-sidebar-4-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../engines/table-engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../engines/table-engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/table-engines/integrations/s3/ title=S3 class="nav-link text-light text-wrap d-inline-block w-100 px-0">S3</a> <a href=../../engines/table-engines/integrations/mongodb/ title=MongoDB class="nav-link text-light text-wrap d-inline-block w-100 px-0">MongoDB</a> <a href=../../engines/table-engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../engines/table-engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../engines/table-engines/integrations/embedded-rocksdb/ title=EmbeddedRocksDB class="nav-link text-light text-wrap d-inline-block w-100 px-0">EmbeddedRocksDB</a> <a href=../../engines/table-engines/integrations/postgresql/ title=PostgreSQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">PostgreSQL</a> <a href=../../engines/table-engines/integrations/ExternalDistributed/ title=ExternalDistributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">ExternalDistributed</a> <a href=../../engines/table-engines/integrations/ title="Движки таблиц для интеграции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки таблиц для интеграции</a> <a href=../../engines/table-engines/integrations/rabbitmq/ title=RabbitMQ class="nav-link text-light text-wrap d-inline-block w-100 px-0">RabbitMQ</a> </nav> </div> <a href=#sidebar-sidebar-4-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-5 title="Специальные движки таблиц" class="nav-link text-light dropdown-toggle px-0">Специальные движки таблиц</a> <div id=sidebar-sidebar-4-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/special/ title="Специальные движки таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Специальные движки таблиц</a> <a href=../../engines/table-engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../engines/table-engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../engines/table-engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../engines/table-engines/special/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../engines/table-engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../engines/table-engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../engines/table-engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../engines/table-engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../engines/table-engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../engines/table-engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../engines/table-engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../engines/table-engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../engines/table-engines/special/external-data/ title="Внешние данные для обработки запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные для обработки запроса</a> <a href=../../engines/table-engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3 title="Движки баз данных" class="nav-link text-light dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-4-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database-engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../engines/database-engines/materialize-mysql/ title=MaterializeMySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializeMySQL</a> <a href=../../engines/database-engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database-engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> <a href=../../engines/database-engines/atomic/ title=Atomic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a> <a href=../../engines/database-engines/postgresql/ title=PostgreSQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">PostgreSQL</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Справка по SQL" class="nav-link text-light dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title=Выражения class="nav-link text-light dropdown-toggle px-0">Выражения</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/statements/ title="SQL выражения в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SQL выражения в ClickHouse</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title=SELECT class="nav-link text-light dropdown-toggle px-0">SELECT</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/statements/select/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../sql-reference/statements/select/all/ title=ALL class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALL</a> <a href=../../sql-reference/statements/select/array-join/ title="ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN</a> <a href=../../sql-reference/statements/select/distinct/ title=DISTINCT class="nav-link text-light text-wrap d-inline-block w-100 px-0">DISTINCT</a> <a href=../../sql-reference/statements/select/format/ title=FORMAT class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT</a> <a href=../../sql-reference/statements/select/from/ title=FROM class="nav-link text-light text-wrap d-inline-block w-100 px-0">FROM</a> <a href=../../sql-reference/statements/select/group-by/ title="GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GROUP BY</a> <a href=../../sql-reference/statements/select/having/ title=HAVING class="nav-link text-light text-wrap d-inline-block w-100 px-0">HAVING</a> <a href=../../sql-reference/statements/select/into-outfile/ title="INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE</a> <a href=../../sql-reference/statements/select/join/ title=JOIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">JOIN</a> <a href=../../sql-reference/statements/select/limit/ title=LIMIT class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a> <a href=../../sql-reference/statements/select/limit-by/ title="LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT BY</a> <a href=../../sql-reference/statements/select/offset/ title=OFFSET class="nav-link text-light text-wrap d-inline-block w-100 px-0">OFFSET</a> <a href=../../sql-reference/statements/select/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../sql-reference/statements/select/prewhere/ title=PREWHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE</a> <a href=../../sql-reference/statements/select/sample/ title=SAMPLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE</a> <a href=../../sql-reference/statements/select/union/ title=UNION class="nav-link text-light text-wrap d-inline-block w-100 px-0">UNION</a> <a href=../../sql-reference/statements/select/where/ title=WHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">WHERE</a> <a href=../../sql-reference/statements/select/with/ title=WITH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WITH</a> </nav> </div> <a href=../../sql-reference/statements/insert-into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=CREATE class="nav-link text-light dropdown-toggle px-0">CREATE</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/statements/create/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../sql-reference/statements/create/database/ title="База данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">База данных</a> <a href=../../sql-reference/statements/create/table/ title=Таблица class="nav-link text-light text-wrap d-inline-block w-100 px-0">Таблица</a> <a href=../../sql-reference/statements/create/view/ title=Представление class="nav-link text-light text-wrap d-inline-block w-100 px-0">Представление</a> <a href=../../sql-reference/statements/create/dictionary/ title=Словарь class="nav-link text-light text-wrap d-inline-block w-100 px-0">Словарь</a> <a href=../../sql-reference/statements/create/user/ title=Пользователь class="nav-link text-light text-wrap d-inline-block w-100 px-0">Пользователь</a> <a href=../../sql-reference/statements/create/role/ title=Роль class="nav-link text-light text-wrap d-inline-block w-100 px-0">Роль</a> <a href=../../sql-reference/statements/create/row-policy/ title="Политика доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Политика доступа</a> <a href=../../sql-reference/statements/create/quota/ title=Квота class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квота</a> <a href=../../sql-reference/statements/create/settings-profile/ title="Профиль настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профиль настроек</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=ALTER class="nav-link text-light dropdown-toggle px-0">ALTER</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql-reference/statements/alter/column/ title="Манипуляции со столбцами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Манипуляции со столбцами</a> <a href=../../sql-reference/statements/alter/partition/ title=PARTITION class="nav-link text-light text-wrap d-inline-block w-100 px-0">PARTITION</a> <a href=../../sql-reference/statements/alter/delete/ title=DELETE class="nav-link text-light text-wrap d-inline-block w-100 px-0">DELETE</a> <a href=../../sql-reference/statements/alter/update/ title=UPDATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">UPDATE</a> <a href=../../sql-reference/statements/alter/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../sql-reference/statements/alter/sample-by/ title="SAMPLE BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE BY</a> <a href=../../sql-reference/statements/alter/index/ title="Манипуляции с индексами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Манипуляции с индексами</a> <a href=../../sql-reference/statements/alter/constraint/ title="Манипуляции с ограничениями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Манипуляции с ограничениями</a> <a href=../../sql-reference/statements/alter/ttl/ title=TTL class="nav-link text-light text-wrap d-inline-block w-100 px-0">TTL</a> <a href=../../sql-reference/statements/alter/user/ title=USER class="nav-link text-light text-wrap d-inline-block w-100 px-0">USER</a> <a href=../../sql-reference/statements/alter/quota/ title=QUOTA class="nav-link text-light text-wrap d-inline-block w-100 px-0">QUOTA</a> <a href=../../sql-reference/statements/alter/role/ title=ROLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROLE</a> <a href=../../sql-reference/statements/alter/row-policy/ title="ROW POLICY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROW POLICY</a> <a href=../../sql-reference/statements/alter/settings-profile/ title="SETTINGS PROFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SETTINGS PROFILE</a> </nav> </div> <a href=../../sql-reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../sql-reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../sql-reference/statements/grant/ title=GRANT class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRANT</a> <a href=../../sql-reference/statements/explain/ title=EXPLAIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXPLAIN</a> <a href=../../sql-reference/statements/revoke/ title=REVOKE class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a> <a href=../../sql-reference/statements/attach/ title=ATTACH class="nav-link text-light text-wrap d-inline-block w-100 px-0">ATTACH</a> <a href=../../sql-reference/statements/check-table/ title=CHECK class="nav-link text-light text-wrap d-inline-block w-100 px-0">CHECK</a> <a href=../../sql-reference/statements/describe-table/ title=DESCRIBE class="nav-link text-light text-wrap d-inline-block w-100 px-0">DESCRIBE</a> <a href=../../sql-reference/statements/detach/ title=DETACH class="nav-link text-light text-wrap d-inline-block w-100 px-0">DETACH</a> <a href=../../sql-reference/statements/drop/ title=DROP class="nav-link text-light text-wrap d-inline-block w-100 px-0">DROP</a> <a href=../../sql-reference/statements/exists/ title=EXISTS class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXISTS</a> <a href=../../sql-reference/statements/kill/ title=KILL class="nav-link text-light text-wrap d-inline-block w-100 px-0">KILL</a> <a href=../../sql-reference/statements/optimize/ title=OPTIMIZE class="nav-link text-light text-wrap d-inline-block w-100 px-0">OPTIMIZE</a> <a href=../../sql-reference/statements/rename/ title=RENAME class="nav-link text-light text-wrap d-inline-block w-100 px-0">RENAME</a> <a href=../../sql-reference/statements/set/ title=SET class="nav-link text-light text-wrap d-inline-block w-100 px-0">SET</a> <a href=../../sql-reference/statements/set-role/ title="SET ROLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SET ROLE</a> <a href=../../sql-reference/statements/truncate/ title=TRUNCATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">TRUNCATE</a> <a href=../../sql-reference/statements/use/ title=USE class="nav-link text-light text-wrap d-inline-block w-100 px-0">USE</a> <a href=../../sql-reference/statements/watch/ title=WATCH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WATCH</a> </nav> </div> <a href=../../sql-reference/syntax/ title=Синтаксис class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис</a> <a href=../../sql-reference/distributed-ddl/ title="Распределенные DDL запросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Распределенные DDL запросы</a> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title=Функции class="nav-link text-light dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../sql-reference/functions/arithmetic-functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../../sql-reference/functions/array-functions/ title=Массивы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Массивы</a> <a href=../../sql-reference/functions/comparison-functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../../sql-reference/functions/logical-functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../../sql-reference/functions/type-conversion-functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../../sql-reference/functions/date-time-functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../../sql-reference/functions/string-functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../../sql-reference/functions/string-search-functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../../sql-reference/functions/string-replace-functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../../sql-reference/functions/conditional-functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../../sql-reference/functions/files/ title="Функции для работы с файлами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с файлами</a> <a href=../../sql-reference/functions/math-functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../../sql-reference/functions/rounding-functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../../sql-reference/functions/tuple-map-functions/ title="Работа с контейнерами map" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Работа с контейнерами map</a> <a href=../../sql-reference/functions/splitting-merging-functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../../sql-reference/functions/bit-functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../../sql-reference/functions/bitmap-functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../../sql-reference/functions/hash-functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../../sql-reference/functions/random-functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../../sql-reference/functions/encoding-functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../../sql-reference/functions/uuid-functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../../sql-reference/functions/url-functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../../sql-reference/functions/ip-address-functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../../sql-reference/functions/json-functions/ title=JSON class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON</a> <a href=../../sql-reference/functions/ext-dict-functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../../sql-reference/functions/ym-dict-functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../../sql-reference/functions/in-functions/ title="Функции для реализации оператора IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN</a> <a href=../../sql-reference/functions/array-join/ title="Функция ArrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция ArrayJoin</a> <a href=#sidebar-sidebar-5-5-30 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5-30 title=Гео-данные class="nav-link text-light dropdown-toggle px-0">Гео-данные</a> <div id=sidebar-sidebar-5-5-30 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/functions/geo/coordinates/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../../sql-reference/functions/geo/h3/ title="Функции для работы с индексами H3" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с индексами H3</a> <a href=../../sql-reference/functions/geo/geohash/ title="Функции для работы с системой Geohash" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с системой Geohash</a> </nav> </div> <a href=../../sql-reference/functions/functions-for-nulls/ title="Функции для работы с Nullable-аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с Nullable-аргументами</a> <a href=../../sql-reference/functions/machine-learning-functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../../sql-reference/functions/introspection/ title="Функции интроспекции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции интроспекции</a> <a href=../../sql-reference/functions/other-functions/ title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a> <a href=../../sql-reference/functions/encryption-functions/ title="Функции для шифрования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для шифрования</a> <a href=../../sql-reference/functions/tuple-functions/ title="Функции для работы с кортежами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с кортежами</a> </nav> </div> <a href=#sidebar-sidebar-5-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-6 title="Агрегатные функции" class="nav-link text-light dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-5-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/aggregate-functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-5-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-6-2 title=Справочник class="nav-link text-light dropdown-toggle px-0">Справочник</a> <div id=sidebar-sidebar-5-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/aggregate-functions/reference/count/ title=count class="nav-link text-light text-wrap d-inline-block w-100 px-0">count</a> <a href=../../sql-reference/aggregate-functions/reference/min/ title=min class="nav-link text-light text-wrap d-inline-block w-100 px-0">min</a> <a href=../../sql-reference/aggregate-functions/reference/max/ title=max class="nav-link text-light text-wrap d-inline-block w-100 px-0">max</a> <a href=../../sql-reference/aggregate-functions/reference/sum/ title=sum class="nav-link text-light text-wrap d-inline-block w-100 px-0">sum</a> <a href=../../sql-reference/aggregate-functions/reference/avg/ title=avg class="nav-link text-light text-wrap d-inline-block w-100 px-0">avg</a> <a href=../../sql-reference/aggregate-functions/reference/any/ title=any class="nav-link text-light text-wrap d-inline-block w-100 px-0">any</a> <a href=../../sql-reference/aggregate-functions/reference/stddevpop/ title=stddevPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">stddevPop</a> <a href=../../sql-reference/aggregate-functions/reference/stddevsamp/ title=stddevSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">stddevSamp</a> <a href=../../sql-reference/aggregate-functions/reference/varpop/ title=varPop(x) class="nav-link text-light text-wrap d-inline-block w-100 px-0">varPop(x)</a> <a href=../../sql-reference/aggregate-functions/reference/varsamp/ title=varSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">varSamp</a> <a href=../../sql-reference/aggregate-functions/reference/covarpop/ title=covarPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">covarPop</a> <a href=../../sql-reference/aggregate-functions/reference/covarsamp/ title=covarSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">covarSamp</a> <a href=../../sql-reference/aggregate-functions/reference/anyheavy/ title=anyHeavy class="nav-link text-light text-wrap d-inline-block w-100 px-0">anyHeavy</a> <a href=../../sql-reference/aggregate-functions/reference/anylast/ title=anyLast class="nav-link text-light text-wrap d-inline-block w-100 px-0">anyLast</a> <a href=../../sql-reference/aggregate-functions/reference/argmin/ title=argMin class="nav-link text-light text-wrap d-inline-block w-100 px-0">argMin</a> <a href=../../sql-reference/aggregate-functions/reference/argmax/ title=argMax class="nav-link text-light text-wrap d-inline-block w-100 px-0">argMax</a> <a href=../../sql-reference/aggregate-functions/reference/avgweighted/ title=avgWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">avgWeighted</a> <a href=../../sql-reference/aggregate-functions/reference/corr/ title=corr class="nav-link text-light text-wrap d-inline-block w-100 px-0">corr</a> <a href=../../sql-reference/aggregate-functions/reference/topk/ title=topK class="nav-link text-light text-wrap d-inline-block w-100 px-0">topK</a> <a href=../../sql-reference/aggregate-functions/reference/topkweighted/ title=topKWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">topKWeighted</a> <a href=../../sql-reference/aggregate-functions/reference/grouparray/ title=groupArray class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArray</a> <a href=../../sql-reference/aggregate-functions/reference/groupuniqarray/ title=groupUniqArray class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupUniqArray</a> <a href=../../sql-reference/aggregate-functions/reference/grouparrayinsertat/ title=groupArrayInsertAt class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayInsertAt</a> <a href=../../sql-reference/aggregate-functions/reference/grouparraymovingsum/ title=groupArrayMovingSum class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayMovingSum</a> <a href=../../sql-reference/aggregate-functions/reference/grouparraymovingavg/ title=groupArrayMovingAvg class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayMovingAvg</a> <a href=../../sql-reference/aggregate-functions/reference/grouparraysample/ title=groupArraySample class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArraySample</a> <a href=../../sql-reference/aggregate-functions/reference/groupbitand/ title=groupBitAnd class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitAnd</a> <a href=../../sql-reference/aggregate-functions/reference/groupbitor/ title=groupBitOr class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitOr</a> <a href=../../sql-reference/aggregate-functions/reference/groupbitxor/ title=groupBitXor class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitXor</a> <a href=../../sql-reference/aggregate-functions/reference/groupbitmap/ title=groupBitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitmap</a> <a href=../../sql-reference/aggregate-functions/reference/sumwithoverflow/ title=sumWithOverflow class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumWithOverflow</a> <a href=../../sql-reference/aggregate-functions/reference/deltasum/ title=deltaSum class="nav-link text-light text-wrap d-inline-block w-100 px-0">deltaSum</a> <a href=../../sql-reference/aggregate-functions/reference/deltasumtimestamp/ title=deltaSumTimestamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">deltaSumTimestamp</a> <a href=../../sql-reference/aggregate-functions/reference/summap/ title="sumMap(key, value), sumMap(Tuple(key, value))" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumMap(key, value), sumMap(Tuple(key, value))</a> <a href=../../sql-reference/aggregate-functions/reference/minmap/ title=minMap class="nav-link text-light text-wrap d-inline-block w-100 px-0">minMap</a> <a href=../../sql-reference/aggregate-functions/reference/maxmap/ title=maxMap class="nav-link text-light text-wrap d-inline-block w-100 px-0">maxMap</a> <a href=../../sql-reference/aggregate-functions/reference/sumcount/ title=sumCount class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumCount</a> <a href=../../sql-reference/aggregate-functions/reference/rankCorr/ title=rankCorr class="nav-link text-light text-wrap d-inline-block w-100 px-0">rankCorr</a> <a href=../../sql-reference/aggregate-functions/reference/sumkahan/ title=sumKahan class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumKahan</a> <a href=../../sql-reference/aggregate-functions/reference/intervalLengthSum/ title=intervalLengthSum class="nav-link text-light text-wrap d-inline-block w-100 px-0">intervalLengthSum</a> <a href=../../sql-reference/aggregate-functions/reference/skewpop/ title=skewPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">skewPop</a> <a href=../../sql-reference/aggregate-functions/reference/skewsamp/ title=skewSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">skewSamp</a> <a href=../../sql-reference/aggregate-functions/reference/kurtpop/ title=kurtPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">kurtPop</a> <a href=../../sql-reference/aggregate-functions/reference/kurtsamp/ title=kurtSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">kurtSamp</a> <a href=../../sql-reference/aggregate-functions/reference/uniq/ title=uniq class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniq</a> <a href=../../sql-reference/aggregate-functions/reference/uniqexact/ title=uniqExact class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqExact</a> <a href=../../sql-reference/aggregate-functions/reference/uniqcombined/ title=uniqCombined class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqCombined</a> <a href=../../sql-reference/aggregate-functions/reference/uniqcombined64/ title=uniqCombined64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqCombined64</a> <a href=../../sql-reference/aggregate-functions/reference/uniqhll12/ title=uniqHLL12 class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqHLL12</a> <a href=../../sql-reference/aggregate-functions/reference/quantile/ title=quantile class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantile</a> <a href=../../sql-reference/aggregate-functions/reference/quantiles/ title=quantiles class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantiles</a> <a href=../../sql-reference/aggregate-functions/reference/quantileexact/ title=quantileExact class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileExact</a> <a href=../../sql-reference/aggregate-functions/reference/quantileexactweighted/ title=quantileExactWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileExactWeighted</a> <a href=../../sql-reference/aggregate-functions/reference/quantiletiming/ title=quantileTiming class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTiming</a> <a href=../../sql-reference/aggregate-functions/reference/quantiletimingweighted/ title=quantileTimingWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTimingWeighted</a> <a href=../../sql-reference/aggregate-functions/reference/quantiledeterministic/ title=quantileDeterministic class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileDeterministic</a> <a href=../../sql-reference/aggregate-functions/reference/quantiletdigest/ title=quantileTDigest class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTDigest</a> <a href=../../sql-reference/aggregate-functions/reference/quantiletdigestweighted/ title=quantileTDigestWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTDigestWeighted</a> <a href=../../sql-reference/aggregate-functions/reference/simplelinearregression/ title=simpleLinearRegression class="nav-link text-light text-wrap d-inline-block w-100 px-0">simpleLinearRegression</a> <a href=../../sql-reference/aggregate-functions/reference/stochasticlinearregression/ title=stochasticLinearRegression class="nav-link text-light text-wrap d-inline-block w-100 px-0">stochasticLinearRegression</a> <a href=../../sql-reference/aggregate-functions/reference/stochasticlogisticregression/ title=stochasticLogisticRegression class="nav-link text-light text-wrap d-inline-block w-100 px-0">stochasticLogisticRegression</a> <a href=../../sql-reference/aggregate-functions/reference/studentttest/ title=studentTTest class="nav-link text-light text-wrap d-inline-block w-100 px-0">studentTTest</a> <a href=../../sql-reference/aggregate-functions/reference/welchttest/ title=welchTTest class="nav-link text-light text-wrap d-inline-block w-100 px-0">welchTTest</a> <a href=../../sql-reference/aggregate-functions/reference/mannwhitneyutest/ title=mannWhitneyUTest class="nav-link text-light text-wrap d-inline-block w-100 px-0">mannWhitneyUTest</a> <a href=../../sql-reference/aggregate-functions/reference/median/ title=median class="nav-link text-light text-wrap d-inline-block w-100 px-0">median</a> </nav> </div> <a href=../../sql-reference/aggregate-functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../../sql-reference/aggregate-functions/parametric-functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> </nav> </div> <a href=#sidebar-sidebar-5-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7 title="Табличные функции" class="nav-link text-light dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-5-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/table-functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../sql-reference/table-functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../sql-reference/table-functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../sql-reference/table-functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../sql-reference/table-functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../sql-reference/table-functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql-reference/table-functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql-reference/table-functions/postgresql/ title=postgresql class="nav-link text-light text-wrap d-inline-block w-100 px-0">postgresql</a> <a href=../../sql-reference/table-functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql-reference/table-functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql-reference/table-functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql-reference/table-functions/s3/ title=s3 class="nav-link text-light text-wrap d-inline-block w-100 px-0">s3</a> <a href=../../sql-reference/table-functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../sql-reference/table-functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> <a href=../../sql-reference/table-functions/cluster/ title=cluster class="nav-link text-light text-wrap d-inline-block w-100 px-0">cluster</a> <a href=../../sql-reference/table-functions/null/ title="null функция" class="nav-link text-light text-wrap d-inline-block w-100 px-0">null функция</a> <a href=../../sql-reference/table-functions/dictionary/ title=dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">dictionary</a> <a href=../../sql-reference/table-functions/view/ title=view class="nav-link text-light text-wrap d-inline-block w-100 px-0">view</a> </nav> </div> <a href=#sidebar-sidebar-5-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8 title=Словари class="nav-link text-light dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-5-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/dictionaries/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-5-8-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8-2 title="Внешние словари" class="nav-link text-light dropdown-toggle px-0">Внешние словари</a> <div id=sidebar-sidebar-5-8-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts/ title="Внешние словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние словари</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/ title="Иерархические словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Иерархические словари</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-polygon/ title="Cловари полигонов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cловари полигонов</a> </nav> </div> <a href=../../sql-reference/dictionaries/internal-dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> </nav> </div> <a href=#sidebar-sidebar-5-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9 title="Типы данных" class="nav-link text-light dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-5-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../sql-reference/data-types/int-uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../sql-reference/data-types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../sql-reference/data-types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../sql-reference/data-types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../../sql-reference/data-types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../sql-reference/data-types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../sql-reference/data-types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql-reference/data-types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../sql-reference/data-types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../sql-reference/data-types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../sql-reference/data-types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../sql-reference/data-types/lowcardinality/ title=LowCardinality class="nav-link text-light text-wrap d-inline-block w-100 px-0">LowCardinality</a> <a href=../../sql-reference/data-types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../sql-reference/data-types/aggregatefunction/ title=AggregateFunction class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction</a> <a href=../../sql-reference/data-types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=#sidebar-sidebar-5-9-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-17 title="Вложенные структуры данных" class="nav-link text-light dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-5-9-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/nested-data-structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> </nav> </div> <a href=../../sql-reference/data-types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-5-9-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-19 title="Служебные типы данных" class="nav-link text-light dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-5-9-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/special-data-types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../sql-reference/data-types/special-data-types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../sql-reference/data-types/special-data-types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../sql-reference/data-types/special-data-types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> </nav> </div> <a href=#sidebar-sidebar-5-9-20 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-20 title=Домены class="nav-link text-light dropdown-toggle px-0">Домены</a> <div id=sidebar-sidebar-5-9-20 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/domains/ title=Домены class="nav-link text-light text-wrap d-inline-block w-100 px-0">Домены</a> <a href=../../sql-reference/data-types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql-reference/data-types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../sql-reference/data-types/multiword-types/ title="Составные типы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Составные типы</a> <a href=../../sql-reference/data-types/geo/ title="Географические структуры" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Географические структуры</a> <a href=../../sql-reference/data-types/map/ title="Map(key, value)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Map(key, value)</a> <a href=../../sql-reference/data-types/simpleaggregatefunction/ title="SimpleAggregateFunction(func, type)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction(func, type)</a> </nav> </div> <a href=#sidebar-sidebar-5-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-10 title=Операторы class="nav-link text-light dropdown-toggle px-0">Операторы</a> <div id=sidebar-sidebar-5-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=../../sql-reference/operators/in/ title="Операторы IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы IN</a> </nav> </div> <a href=../../sql-reference/ansi/ title="ANSI Compatibility" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSI Compatibility</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=Руководства class="nav-link text-light dropdown-toggle px-0">Руководства</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../guides/apply-catboost-model/ title="Применение модели CatBoost в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение модели CatBoost в ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Эксплуатация class="nav-link text-light dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=Эксплуатация class="nav-link text-light text-wrap d-inline-block w-100 px-0">Эксплуатация</a> <a href=../../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=#sidebar-sidebar-7-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-6 title="Внешние аутентификаторы пользователей и каталоги" class="nav-link text-light dropdown-toggle px-0">Внешние аутентификаторы пользователей и каталоги</a> <div id=sidebar-sidebar-7-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/external-authenticators/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../operations/external-authenticators/kerberos/ title=Kerberos class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kerberos</a> <a href=../../operations/external-authenticators/ldap/ title=LDAP class="nav-link text-light text-wrap d-inline-block w-100 px-0">LDAP</a> </nav> </div> <a href=../../operations/access-rights/ title="Управление доступом" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Управление доступом</a> <a href=../../operations/backup/ title="Резервное копирование данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование данных</a> <a href=../../operations/configuration-files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=#sidebar-sidebar-7-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-11 title="Optimizing Performance" class="nav-link text-light dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-7-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing-performance/sampling-query-profiler/ title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a> </nav> </div> <a href=#sidebar-sidebar-7-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-12 title="Системные таблицы" class="nav-link text-light dropdown-toggle px-0">Системные таблицы</a> <div id=sidebar-sidebar-7-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/system-tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=../../operations/system-tables/asynchronous_metric_log/ title=system.asynchronous_metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.asynchronous_metric_log</a> <a href=../../operations/system-tables/asynchronous_metrics/ title=system.asynchronous_metrics class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.asynchronous_metrics</a> <a href=../../operations/system-tables/clusters/ title=system.clusters class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.clusters</a> <a href=../../operations/system-tables/columns/ title=system.columns class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.columns</a> <a href=../../operations/system-tables/contributors/ title=system.contributors class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.contributors</a> <a href=../../operations/system-tables/crash-log/ title=system.crash_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.crash_log</a> <a href=../../operations/system-tables/current-roles/ title=system.current_roles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.current_roles</a> <a href=../../operations/system-tables/data_type_families/ title=system.data_type_families class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.data_type_families</a> <a href=../../operations/system-tables/databases/ title=system.databases class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.databases</a> <a href=../../operations/system-tables/detached_parts/ title=system.detached_parts class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.detached_parts</a> <a href=../../operations/system-tables/dictionaries/ title=system.dictionaries class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.dictionaries</a> <a href=../../operations/system-tables/disks/ title=system.disks class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.disks</a> <a href=../../operations/system-tables/distributed_ddl_queue/ title=system.distributed_ddl_queue class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.distributed_ddl_queue</a> <a href=../../operations/system-tables/distribution_queue/ title=system.distribution_queue class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.distribution_queue</a> <a href=../../operations/system-tables/enabled-roles/ title=system.enabled_roles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.enabled_roles</a> <a href=../../operations/system-tables/errors/ title=system.errors class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.errors</a> <a href=../../operations/system-tables/events/ title=system.events class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.events</a> <a href=../../operations/system-tables/functions/ title=system.functions class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.functions</a> <a href=../../operations/system-tables/grants/ title=system.grants class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.grants</a> <a href=../../operations/system-tables/graphite_retentions/ title=system.graphite_retentions class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.graphite_retentions</a> <a href=../../operations/system-tables/licenses/ title=system.licenses class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.licenses</a> <a href=../../operations/system-tables/merges/ title=system.merges class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.merges</a> <a href=../../operations/system-tables/metric_log/ title=system.metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.metric_log</a> <a href=../../operations/system-tables/metrics/ title=system.metrics class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.metrics</a> <a href=../../operations/system-tables/mutations/ title=system.mutations class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.mutations</a> <a href=../../operations/system-tables/numbers/ title=system.numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.numbers</a> <a href=../../operations/system-tables/numbers_mt/ title=system.numbers_mt class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.numbers_mt</a> <a href=../../operations/system-tables/one/ title=system.one class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.one</a> <a href=../../operations/system-tables/opentelemetry_span_log/ title=system.opentelemetry_span_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.opentelemetry_span_log</a> <a href=../../operations/system-tables/part_log/ title=system.part_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.part_log</a> <a href=../../operations/system-tables/parts/ title=system.parts class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.parts</a> <a href=../../operations/system-tables/parts_columns/ title=system.parts_columns class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.parts_columns</a> <a href=../../operations/system-tables/processes/ title=system.processes class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.processes</a> <a href=../../operations/system-tables/query_log/ title=system.query_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_log</a> <a href=../../operations/system-tables/query_thread_log/ title=system.query_thread_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_thread_log</a> <a href=../../operations/system-tables/quota_limits/ title=system.quota_limits class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quota_limits</a> <a href=../../operations/system-tables/quota_usage/ title=system.quota_usage class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quota_usage</a> <a href=../../operations/system-tables/quotas/ title=system.quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quotas</a> <a href=../../operations/system-tables/quotas_usage/ title=system.quotas_usage class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quotas_usage</a> <a href=../../operations/system-tables/replicas/ title=system.replicas class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replicas</a> <a href=../../operations/system-tables/replicated_fetches/ title=system.replicated_fetches class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replicated_fetches</a> <a href=../../operations/system-tables/replication_queue/ title=system.replication_queue class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replication_queue</a> <a href=../../operations/system-tables/role-grants/ title=system.role_grants class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.role_grants</a> <a href=../../operations/system-tables/roles/ title=system.roles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.roles</a> <a href=../../operations/system-tables/row_policies/ title=system.row_policies class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.row_policies</a> <a href=../../operations/system-tables/settings/ title=system.settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings</a> <a href=../../operations/system-tables/settings_profile_elements/ title=system.settings_profile_elements class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings_profile_elements</a> <a href=../../operations/system-tables/settings_profiles/ title=system.settings_profiles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings_profiles</a> <a href=../../operations/system-tables/stack_trace/ title=system.stack_trace class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.stack_trace</a> <a href=../../operations/system-tables/storage_policies/ title=system.storage_policies class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.storage_policies</a> <a href=../../operations/system-tables/table_engines/ title=system.table_engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.table_engines</a> <a href=../../operations/system-tables/tables/ title=system.tables class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.tables</a> <a href=../../operations/system-tables/text_log/ title=system.text_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.text_log</a> <a href=../../operations/system-tables/trace_log/ title=system.trace_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.trace_log</a> <a href=../../operations/system-tables/users/ title=system.users class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.users</a> <a href=../../operations/system-tables/zookeeper/ title=system.zookeeper class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.zookeeper</a> </nav> </div> <a href=../../operations/performance-test/ title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title="Конфигурационные параметры сервера" class="nav-link text-light dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server-configuration-parameters/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../operations/server-configuration-parameters/settings/ title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные параметры сервера</a> </nav> </div> <a href=#sidebar-sidebar-7-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-15 title=Settings class="nav-link text-light dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-7-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../operations/settings/permissions-for-queries/ title="Разрешения для запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения для запросов</a> <a href=../../operations/settings/query-complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../../operations/settings/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../../operations/settings/settings-profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../../operations/settings/constraints-on-settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../../operations/settings/settings-users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> <a href=../../operations/settings/merge-tree-settings/ title="Настройки MergeTree таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки MergeTree таблиц</a> </nav> </div> <a href=#sidebar-sidebar-7-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-16 title=Утилиты class="nav-link text-light dropdown-toggle px-0">Утилиты</a> <div id=sidebar-sidebar-7-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../operations/utilities/clickhouse-benchmark/ title=clickhouse-benchmark class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a> <a href=../../operations/utilities/clickhouse-format/ title=clickhouse-format class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-format</a> <a href=../../operations/utilities/clickhouse-compressor/ title="ClickHouse compressor" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse compressor</a> <a href=../../operations/utilities/odbc-bridge/ title=clickhouse-odbc-bridge class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-odbc-bridge</a> <a href=../../operations/utilities/clickhouse-obfuscator/ title="Обфускатор ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обфускатор ClickHouse</a> </nav> </div> <a href=../../operations/tips/ title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a> <a href=../../operations/opentelemetry/ title="Поддержка OpenTelemetry" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поддержка OpenTelemetry</a> <a href=../../operations/caches/ title=Кеши class="nav-link text-light text-wrap d-inline-block w-100 px-0">Кеши</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Development class="nav-link text-light dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/developer-instruction/ title="Инструкция для разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Инструкция для разработчиков</a> <a href=../../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../../development/build/ title="Build on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux</a> <a href=../../development/build-osx/ title="Build on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Mac OS X</a> <a href=../../development/build-cross-osx/ title="Build on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux for Mac OS X</a> <a href=../../development/build-cross-arm/ title="Build on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux for AARCH64 (ARM64)</a> <a href=../../development/style/ title="Как писать код на C++" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../../development/tests/ title=Testing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing</a> <a href=../../development/contrib/ title="Используемые сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Используемые сторонние библиотеки</a> <a href=../../development/browse-code/ title="Навигация по коду ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Навигация по коду ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="Коммерческие услуги" class="nav-link text-light dropdown-toggle px-0">Коммерческие услуги</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/cloud/ title="Поставщики облачных услуг ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поставщики облачных услуг ClickHouse</a> <a href=../../commercial/support/ title=Support class="nav-link text-light text-wrap d-inline-block w-100 px-0">Support</a> <a href=../../commercial/ title="Коммерческие услуги" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Коммерческие услуги</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=F.A.Q. class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> <a href=../../faq/use-cases/ title=Применение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение</a> <a href=../../faq/operations/ title=Операции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операции</a> <a href=../../faq/integration/ title=Интеграция class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интеграция</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="Что нового?" class="nav-link text-light dropdown-toggle px-0">Что нового?</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-11-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-1 title=Changelog class="nav-link text-light dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats-new/changelog/ title=2021 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a> <a href=../../whats-new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../whats-new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../whats-new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../whats-new/extended-roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../whats-new/security-changelog/ title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a> <a href=../../whats-new/ title="Что нового в ClickHouse?" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Что нового в ClickHouse?</a> </nav> </div> <a href=../../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-4"> <div id=content class=mt-md-n3> <nav class=text-muted aria-label=breadcrumb> <ol class="breadcrumb bg-transparent p-0"> <li class=breadcrumb-item><a href=../ class=text-reset>Development</a> </li> </ol> </nav> <h1 id=kak-pisat-kod-na-c>Как писать код на C++<a class=headerlink href=#kak-pisat-kod-na-c title="Permanent link"> </a></h1> <h2 id=obshchee>Общее<a class=headerlink href=#obshchee title="Permanent link"> </a></h2> <p><strong>1.</strong> Этот текст носит рекомендательный характер.</p> <p><strong>2.</strong> Если вы редактируете код, то имеет смысл писать так, как уже написано.</p> <p><strong>3.</strong> Стиль нужен для единообразия. Единообразие нужно, чтобы было проще (удобнее) читать код. А также, чтобы было легче осуществлять поиск по коду.</p> <p><strong>4.</strong> Многие правила продиктованы не какими либо разумными соображениями, а сложившейся практикой.</p> <h2 id=formatirovanie>Форматирование<a class=headerlink href=#formatirovanie title="Permanent link"> </a></h2> <p><strong>1.</strong> Большую часть форматирования сделает автоматически <code class=syntax>clang-format</code>.</p> <p><strong>2.</strong> Отступы — 4 пробела. Настройте среду разработки так, чтобы таб добавлял четыре пробела.</p> <p><strong>3.</strong> Открывающая и закрывающие фигурные скобки на отдельной строке.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kr>inline</span> <span class=kt>void</span> <span class=nf>readBoolText</span><span class=p>(</span><span class=kt>bool</span> <span class=o>&amp;</span> <span class=n>x</span><span class=p>,</span> <span class=n>ReadBuffer</span> <span class=o>&amp;</span> <span class=n>buf</span><span class=p>)</span>
<span class=p>{</span>
    <span class=kt>char</span> <span class=n>tmp</span> <span class=o>=</span> <span class=sc>'0'</span><span class=p>;</span>
    <span class=n>readChar</span><span class=p>(</span><span class=n>tmp</span><span class=p>,</span> <span class=n>buf</span><span class=p>);</span>
    <span class=n>x</span> <span class=o>=</span> <span class=n>tmp</span> <span class=o>!=</span> <span class=sc>'0'</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p><strong>4.</strong> Если всё тело функции — один <code class=syntax>statement</code>, то его можно разместить на одной строке. При этом, вокруг фигурных скобок ставятся пробелы (кроме пробела на конце строки).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kr>inline</span> <span class=kt>size_t</span> <span class=nf>mask</span><span class=p>()</span> <span class=k>const</span>                <span class=p>{</span> <span class=k>return</span> <span class=n>buf_size</span><span class=p>()</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=p>}</span>
<span class=kr>inline</span> <span class=kt>size_t</span> <span class=nf>place</span><span class=p>(</span><span class=n>HashValue</span> <span class=n>x</span><span class=p>)</span> <span class=k>const</span>    <span class=p>{</span> <span class=k>return</span> <span class=n>x</span> <span class=o>&amp;</span> <span class=n>mask</span><span class=p>();</span> <span class=p>}</span>
</code></pre></div> <p><strong>5.</strong> Для функций. Пробелы вокруг скобок не ставятся.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kt>void</span> <span class=n>reinsert</span><span class=p>(</span><span class=k>const</span> <span class=n>Value</span> <span class=o>&amp;</span> <span class=n>x</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>memcpy</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buf</span><span class=p>[</span><span class=n>place_value</span><span class=p>],</span> <span class=o>&amp;</span><span class=n>x</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>x</span><span class=p>));</span>
</code></pre></div> <p><strong>6.</strong> В выражениях <code class=syntax>if</code>, <code class=syntax>for</code>, <code class=syntax>while</code> и т.д. перед открывающей скобкой ставится пробел (в отличие от вызовов функций).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>for</span> <span class=p>(</span><span class=kt>size_t</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>rows</span><span class=p>;</span> <span class=n>i</span> <span class=o>+=</span> <span class=n>storage</span><span class=p>.</span><span class=n>index_granularity</span><span class=p>)</span>
</code></pre></div> <p><strong>7.</strong> Вокруг бинарных операторов (<code class=syntax>+</code>, <code class=syntax>-</code>, <code class=syntax>*</code>, <code class=syntax>/</code>, <code class=syntax>%</code>, …), а также тернарного оператора <code class=syntax>?:</code> ставятся пробелы.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>UInt16</span> <span class=n>year</span> <span class=o>=</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>)</span> <span class=o>*</span> <span class=mi>1000</span> <span class=o>+</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span> <span class=o>+</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>)</span> <span class=o>*</span> <span class=mi>10</span> <span class=o>+</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>);</span>
<span class=n>UInt8</span> <span class=n>month</span> <span class=o>=</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>)</span> <span class=o>*</span> <span class=mi>10</span> <span class=o>+</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>);</span>
<span class=n>UInt8</span> <span class=n>day</span> <span class=o>=</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>)</span> <span class=o>*</span> <span class=mi>10</span> <span class=o>+</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>-</span> <span class=sc>'0'</span><span class=p>);</span>
</code></pre></div> <p><strong>8.</strong> Если ставится перенос строки, то оператор пишется на новой строке, и перед ним увеличивается отступ.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>if</span> <span class=p>(</span><span class=n>elapsed_ns</span><span class=p>)</span>
    <span class=n>message</span> <span class=o>&lt;&lt;</span> <span class=s>" ("</span>
        <span class=o>&lt;&lt;</span> <span class=n>rows_read_on_server</span> <span class=o>*</span> <span class=mi>1000000000</span> <span class=o>/</span> <span class=n>elapsed_ns</span> <span class=o>&lt;&lt;</span> <span class=s>" rows/s., "</span>
        <span class=o>&lt;&lt;</span> <span class=n>bytes_read_on_server</span> <span class=o>*</span> <span class=mf>1000.0</span> <span class=o>/</span> <span class=n>elapsed_ns</span> <span class=o>&lt;&lt;</span> <span class=s>" MB/s.) "</span><span class=p>;</span>
</code></pre></div> <p><strong>9.</strong> Внутри строки можно, выполнять выравнивание с помощью пробелов.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dst</span><span class=p>.</span><span class=n>ClickLogID</span>         <span class=o>=</span> <span class=n>click</span><span class=p>.</span><span class=n>LogID</span><span class=p>;</span>
<span class=n>dst</span><span class=p>.</span><span class=n>ClickEventID</span>       <span class=o>=</span> <span class=n>click</span><span class=p>.</span><span class=n>EventID</span><span class=p>;</span>
<span class=n>dst</span><span class=p>.</span><span class=n>ClickGoodEvent</span>     <span class=o>=</span> <span class=n>click</span><span class=p>.</span><span class=n>GoodEvent</span><span class=p>;</span>
</code></pre></div> <p><strong>10.</strong> Вокруг операторов <code class=syntax>.</code>, <code class=syntax>-&gt;</code> не ставятся пробелы.</p> <p>При необходимости, оператор может быть перенесён на новую строку. В этом случае, перед ним увеличивается отступ.</p> <p><strong>11.</strong> Унарные операторы <code class=syntax>--</code>, <code class=syntax>++</code>, <code class=syntax>*</code>, <code class=syntax>&amp;</code>, … не отделяются от аргумента пробелом.</p> <p><strong>12.</strong> После запятой ставится пробел, а перед — нет. Аналогично для точки с запятой внутри выражения <code class=syntax>for</code>.</p> <p><strong>13.</strong> Оператор <code class=syntax>[]</code> не отделяется пробелами.</p> <p><strong>14.</strong> В выражении <code class=syntax>template &lt;...&gt;</code>, между <code class=syntax>template</code> и <code class=syntax>&lt;</code> ставится пробел, а после <code class=syntax>&lt;</code> и до <code class=syntax>&gt;</code> не ставится.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=nc>TKey</span><span class=p>,</span> <span class=k>typename</span> <span class=nc>TValue</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=nc>AggregatedStatElement</span>
<span class=p>{}</span>
</code></pre></div> <p><strong>15.</strong> В классах и структурах, <code class=syntax>public</code>, <code class=syntax>private</code>, <code class=syntax>protected</code> пишется на том же уровне, что и <code class=syntax>class/struct</code>, а остальной код с отступом.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=nc>T</span><span class=o>&gt;</span>
<span class=k>class</span> <span class=nc>MultiVersion</span>
<span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=c1>/// Version of object for usage. shared_ptr manage lifetime of version.</span>
    <span class=k>using</span> <span class=n>Version</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=k>const</span> <span class=n>T</span><span class=o>&gt;</span><span class=p>;</span>
    <span class=p>...</span>
<span class=p>}</span>
</code></pre></div> <p><strong>16.</strong> Если на весь файл один <code class=syntax>namespace</code> и кроме него ничего существенного нет, то отступ внутри <code class=syntax>namespace</code> не нужен.</p> <p><strong>17.</strong> Если блок для выражения <code class=syntax>if</code>, <code class=syntax>for</code>, <code class=syntax>while</code>, … состоит из одного <code class=syntax>statement</code>, то фигурные скобки не обязательны. Вместо этого поместите <code class=syntax>statement</code> на отдельную строку. Это правило справедливо и для вложенных <code class=syntax>if</code>, <code class=syntax>for</code>, <code class=syntax>while</code>, …</p> <p>Если внутренний <code class=syntax>statement</code> содержит фигурные скобки или <code class=syntax>else</code>, то внешний блок следует писать в фигурных скобках.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// Finish write.</span>
<span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=o>&amp;</span> <span class=nl>stream</span> <span class=p>:</span> <span class=n>streams</span><span class=p>)</span>
    <span class=n>stream</span><span class=p>.</span><span class=n>second</span><span class=o>-&gt;</span><span class=n>finalize</span><span class=p>();</span>
</code></pre></div> <p><strong>18.</strong> Не должно быть пробелов на концах строк.</p> <p><strong>19.</strong> Исходники в кодировке UTF-8.</p> <p><strong>20.</strong> В строковых литералах можно использовать не-ASCII.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=o>&lt;&lt;</span> <span class=s>", "</span> <span class=o>&lt;&lt;</span> <span class=p>(</span><span class=n>timer</span><span class=p>.</span><span class=n>elapsed</span><span class=p>()</span> <span class=o>/</span> <span class=n>chunks_stats</span><span class=p>.</span><span class=n>hits</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=s>" μsec/hit."</span><span class=p>;</span>
</code></pre></div> <p><strong>21.</strong> Не пишите несколько выражений в одной строке.</p> <p><strong>22.</strong> Внутри функций группируйте блоки кода, отделяя их не более, чем одной пустой строкой.</p> <p><strong>23.</strong> Функции, классы, и т. п. отделяются друг от друга одной или двумя пустыми строками.</p> <p><strong>24.</strong> <code class=syntax>const</code> (относящийся к значению) пишется до имени типа.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//correct</span>
<span class=k>const</span> <span class=kt>char</span> <span class=o>*</span> <span class=n>pos</span>
<span class=k>const</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=o>&amp;</span> <span class=n>s</span>
<span class=c1>//incorrect</span>
<span class=kt>char</span> <span class=k>const</span> <span class=o>*</span> <span class=n>pos</span>
</code></pre></div> <p><strong>25.</strong> При объявлении указателя или ссылки, символы <code class=syntax>*</code> и <code class=syntax>&amp;</code> отделяются пробелами с обеих сторон.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//correct</span>
<span class=k>const</span> <span class=kt>char</span> <span class=o>*</span> <span class=n>pos</span>
<span class=c1>//incorrect</span>
<span class=k>const</span> <span class=kt>char</span><span class=o>*</span> <span class=n>pos</span>
<span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>pos</span>
</code></pre></div> <p><strong>26.</strong> При использовании шаблонных типов, пишите <code class=syntax>using</code> (кроме, возможно, простейших случаев).</p> <p>То есть, параметры шаблона указываются только в <code class=syntax>using</code> и затем не повторяются в коде.</p> <p><code class=syntax>using</code> может быть объявлен локально, например, внутри функции.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//correct</span>
<span class=k>using</span> <span class=n>FileStreams</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>map</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>Stream</span><span class=o>&gt;&gt;</span><span class=p>;</span>
<span class=n>FileStreams</span> <span class=n>streams</span><span class=p>;</span>
<span class=c1>//incorrect</span>
<span class=n>std</span><span class=o>::</span><span class=n>map</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>Stream</span><span class=o>&gt;&gt;</span> <span class=n>streams</span><span class=p>;</span>
</code></pre></div> <p><strong>27.</strong> Нельзя объявлять несколько переменных разных типов в одном выражении.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//incorrect</span>
<span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=o>*</span><span class=n>y</span><span class=p>;</span>
</code></pre></div> <p><strong>28.</strong> C-style cast не используется.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//incorrect</span>
<span class=n>std</span><span class=o>::</span><span class=n>cerr</span> <span class=o>&lt;&lt;</span> <span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=n>c</span> <span class=o>&lt;&lt;</span><span class=p>;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
<span class=c1>//correct</span>
<span class=n>std</span><span class=o>::</span><span class=n>cerr</span> <span class=o>&lt;&lt;</span> <span class=k>static_cast</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>c</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</code></pre></div> <p><strong>29.</strong> В классах и структурах, группируйте отдельно методы и отдельно члены, внутри каждой области видимости.</p> <p><strong>30.</strong> Для не очень большого класса/структуры, можно не отделять объявления методов от реализации.</p> <p>Аналогично для маленьких методов в любых классах/структурах.</p> <p>Для шаблонных классов/структур, лучше не отделять объявления методов от реализации (так как иначе они всё равно должны быть определены в той же единице трансляции).</p> <p><strong>31.</strong> Не обязательно умещать код по ширине в 80 символов. Можно в 140.</p> <p><strong>32.</strong> Всегда используйте префиксный инкремент/декремент, если постфиксный не нужен.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>for</span> <span class=p>(</span><span class=n>Names</span><span class=o>::</span><span class=n>const_iterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>column_names</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span> <span class=n>it</span> <span class=o>!=</span> <span class=n>column_names</span><span class=p>.</span><span class=n>end</span><span class=p>();</span> <span class=o>++</span><span class=n>it</span><span class=p>)</span>
</code></pre></div> <h2 id=kommentarii>Комментарии<a class=headerlink href=#kommentarii title="Permanent link"> </a></h2> <p><strong>1.</strong> Необходимо обязательно писать комментарии во всех нетривиальных местах.</p> <p>Это очень важно. При написании комментария, можно успеть понять, что код не нужен вообще, или что всё сделано неверно.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cm>/** Part of piece of memory, that can be used.</span>
<span class=cm>  * For example, if internal_buffer is 1MB, and there was only 10 bytes loaded to buffer from file for reading,</span>
<span class=cm>  * then working_buffer will have size of only 10 bytes</span>
<span class=cm>  * (working_buffer.end() will point to position right after those 10 bytes available for read).</span>
<span class=cm>  */</span>
</code></pre></div> <p><strong>2.</strong> Комментарии могут быть сколь угодно подробными.</p> <p><strong>3.</strong> Комментарии пишутся до соответствующего кода. В редких случаях после, на той же строке.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cm>/** Parses and executes the query.</span>
<span class=cm>*/</span>
<span class=kt>void</span> <span class=n>executeQuery</span><span class=p>(</span>
    <span class=n>ReadBuffer</span> <span class=o>&amp;</span> <span class=n>istr</span><span class=p>,</span> <span class=c1>/// Where to read the query from (and data for INSERT, if applicable)</span>
    <span class=n>WriteBuffer</span> <span class=o>&amp;</span> <span class=n>ostr</span><span class=p>,</span> <span class=c1>/// Where to write the result</span>
    <span class=n>Context</span> <span class=o>&amp;</span> <span class=n>context</span><span class=p>,</span> <span class=c1>/// DB, tables, data types, engines, functions, aggregate functions...</span>
    <span class=n>BlockInputStreamPtr</span> <span class=o>&amp;</span> <span class=n>query_plan</span><span class=p>,</span> <span class=c1>/// Here could be written the description on how query was executed</span>
    <span class=n>QueryProcessingStage</span><span class=o>::</span><span class=n>Enum</span> <span class=n>stage</span> <span class=o>=</span> <span class=n>QueryProcessingStage</span><span class=o>::</span><span class=n>Complete</span> <span class=c1>/// Up to which stage process the SELECT query</span>
    <span class=p>)</span>
</code></pre></div> <p><strong>4.</strong> Комментарии следует писать только на английском языке.</p> <p><strong>5.</strong> При написании библиотеки, разместите подробный комментарий о том, что это такое, в самом главном заголовочном файле.</p> <p><strong>6.</strong> Нельзя писать комментарии, которые не дают дополнительной информации. В частности, нельзя писать пустые комментарии вроде этого:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cm>/*</span>
<span class=cm>* Procedure Name:</span>
<span class=cm>* Original procedure name:</span>
<span class=cm>* Author:</span>
<span class=cm>* Date of creation:</span>
<span class=cm>* Dates of modification:</span>
<span class=cm>* Modification authors:</span>
<span class=cm>* Original file name:</span>
<span class=cm>* Purpose:</span>
<span class=cm>* Intent:</span>
<span class=cm>* Designation:</span>
<span class=cm>* Classes used:</span>
<span class=cm>* Constants:</span>
<span class=cm>* Local variables:</span>
<span class=cm>* Parameters:</span>
<span class=cm>* Date of creation:</span>
<span class=cm>* Purpose:</span>
<span class=cm>*/</span>
</code></pre></div> <p>Пример взят с ресурса <a href=http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/ target=_blank>http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/</a>.</p> <p><strong>7.</strong> Нельзя писать мусорные комментарии (автор, дата создания…) в начале каждого файла.</p> <p><strong>8.</strong> Однострочные комментарии начинаются с трёх слешей: <code class=syntax>///</code> , многострочные с <code class=syntax>/**</code>. Такие комментарии считаются «документирующими».</p> <p>Замечание: такие комментарии могут использоваться для генерации документации с помощью Doxygen. Но, фактически, Doxygen не используется, так как для навигации по коду гораздо удобнее использовать возможности IDE.</p> <p><strong>9.</strong> В начале и конце многострочного комментария, не должно быть пустых строк (кроме строки, на которой закрывается многострочный комментарий).</p> <p><strong>10.</strong> Для закомментированных кусков кода, используются обычные, не «документирующие» комментарии.</p> <p><strong>11.</strong> Удаляйте закомментированные куски кода перед коммитом.</p> <p><strong>12.</strong> Не нужно писать нецензурную брань в комментариях или коде.</p> <p><strong>13.</strong> Не пишите прописными буквами. Не используйте излишнее количество знаков препинания.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// WHAT THE FAIL???</span>
</code></pre></div> <p><strong>14.</strong> Не составляйте из комментариев строки-разделители.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>///******************************************************</span>
</code></pre></div> <p><strong>15.</strong> Не нужно писать в комментарии диалог (лучше сказать устно).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// Why did you do this stuff?</span>
</code></pre></div> <p><strong>16.</strong> Не нужно писать комментарий в конце блока о том, что представлял собой этот блок.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// for</span>
</code></pre></div> <h2 id=imena>Имена<a class=headerlink href=#imena title="Permanent link"> </a></h2> <p><strong>1.</strong> В именах переменных и членов класса используйте маленькие буквами с подчёркиванием.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kt>size_t</span> <span class=n>max_block_size</span><span class=p>;</span>
</code></pre></div> <p><strong>2.</strong> Имена функций (методов) camelCase с маленькой буквы.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=nf>getName</span><span class=p>()</span> <span class=k>const</span> <span class=k>override</span> <span class=p>{</span> <span class=k>return</span> <span class=s>"Memory"</span><span class=p>;</span> <span class=p>}</span>
</code></pre></div> <p><strong>3.</strong> Имена классов (структур) - CamelCase с большой буквы. Префиксы кроме I для интерфейсов - не используются.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>class</span> <span class=nc>StorageMemory</span> <span class=o>:</span> <span class=k>public</span> <span class=n>IStorage</span>
</code></pre></div> <p><strong>4.</strong> <code class=syntax>using</code> называются также, как классы, либо с <code class=syntax>_t</code> на конце.</p> <p><strong>5.</strong> Имена типов — параметров шаблонов: в простых случаях - <code class=syntax>T</code>; <code class=syntax>T</code>, <code class=syntax>U</code>; <code class=syntax>T1</code>, <code class=syntax>T2</code>.</p> <p>В более сложных случаях - либо также, как имена классов, либо можно добавить в начало букву <code class=syntax>T</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=nc>TKey</span><span class=p>,</span> <span class=k>typename</span> <span class=nc>TValue</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=nc>AggregatedStatElement</span>
</code></pre></div> <p><strong>6.</strong> Имена констант — параметров шаблонов: либо также, как имена переменных, либо <code class=syntax>N</code> в простом случае.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span> <span class=o>&lt;</span><span class=kt>bool</span> <span class=n>without_www</span><span class=o>&gt;</span>
<span class=k>struct</span> <span class=nc>ExtractDomain</span>
</code></pre></div> <p><strong>7.</strong> Для абстрактных классов (интерфейсов) можно добавить в начало имени букву <code class=syntax>I</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>class</span> <span class=nc>IBlockInputStream</span>
</code></pre></div> <p><strong>8.</strong> Если переменная используется достаточно локально, то можно использовать короткое имя.</p> <p>В остальных случаях используйте имя, описывающее смысл.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kt>bool</span> <span class=n>info_successfully_loaded</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</code></pre></div> <p><strong>9.</strong> В именах <code class=syntax>define</code> и глобальных констант используется ALL_CAPS с подчёркиванием.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cp>#define MAX_SRC_TABLE_NAMES_TO_STORE 1000</span>
</code></pre></div> <p><strong>10.</strong> Имена файлов с кодом называйте по стилю соответственно тому, что в них находится.</p> <p>Если в файле находится один класс, назовите файл, как класс (CamelCase).</p> <p>Если в файле находится одна функция, назовите файл, как функцию (camelCase).</p> <p><strong>11.</strong> Если имя содержит сокращение, то:</p> <ul> <li>для имён переменных, всё сокращение пишется маленькими буквами <code class=syntax>mysql_connection</code> (не <code class=syntax>mySQL_connection</code>).</li> <li>для имён классов и функций, сохраняются большие буквы в сокращении <code class=syntax>MySQLConnection</code> (не <code class=syntax>MySqlConnection</code>).</li> </ul> <p><strong>12.</strong> Параметры конструктора, использующиеся сразу же для инициализации соответствующих членов класса, следует назвать также, как и члены класса, добавив подчёркивание в конец.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>FileQueueProcessor</span><span class=p>(</span>
    <span class=k>const</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=o>&amp;</span> <span class=n>path_</span><span class=p>,</span>
    <span class=k>const</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=o>&amp;</span> <span class=n>prefix_</span><span class=p>,</span>
    <span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>FileHandler</span><span class=o>&gt;</span> <span class=n>handler_</span><span class=p>)</span>
    <span class=o>:</span> <span class=n>path</span><span class=p>(</span><span class=n>path_</span><span class=p>),</span>
    <span class=n>prefix</span><span class=p>(</span><span class=n>prefix_</span><span class=p>),</span>
    <span class=n>handler</span><span class=p>(</span><span class=n>handler_</span><span class=p>),</span>
    <span class=n>log</span><span class=p>(</span><span class=o>&amp;</span><span class=n>Logger</span><span class=o>::</span><span class=n>get</span><span class=p>(</span><span class=s>"FileQueueProcessor"</span><span class=p>))</span>
<span class=p>{</span>
<span class=p>}</span>
</code></pre></div> <p>Также можно называть параметры конструктора так же, как и члены класса (не добавлять подчёркивание), но только если этот параметр не используется в теле конструктора.</p> <p><strong>13.</strong> Именование локальных переменных и членов класса никак не отличается (никакие префиксы не нужны).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>timer</span> <span class=p>(</span><span class=n>not</span> <span class=n>m_timer</span><span class=p>)</span>
</code></pre></div> <p><strong>14.</strong> Константы в <code class=syntax>enum</code> — CamelCase с большой буквы. Также допустим ALL_CAPS. Если <code class=syntax>enum</code> не локален, то используйте <code class=syntax>enum class</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>enum</span> <span class=k>class</span> <span class=nc>CompressionMethod</span>
<span class=p>{</span>
    <span class=n>QuickLZ</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span>
    <span class=n>LZ4</span>     <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
<span class=p>};</span>
</code></pre></div> <p><strong>15.</strong> Все имена - по-английски. Транслит с русского использовать нельзя.</p> <div class=codehilite><pre><span></span><code class=syntax>не Stroka
</code></pre></div> <p><strong>16.</strong> Сокращения (из нескольких букв разных слов) в именах можно использовать только если они являются общепринятыми (если для сокращения можно найти расшифровку в английской википедии или сделав поисковый запрос).</p> <div class=codehilite><pre><span></span><code class=syntax>`AST`, `SQL`.

Не `NVDH` (что-то неведомое)
</code></pre></div> <p>Сокращения в виде обрезанного слова можно использовать, только если такое сокращение является широко используемым.</p> <p>Впрочем, сокращения также можно использовать, если расшифровка находится рядом в комментарии.</p> <p><strong>17.</strong> Имена файлов с исходниками на C++ должны иметь расширение только <code class=syntax>.cpp</code>. Заголовочные файлы - только <code class=syntax>.h</code>.</p> <h2 id=kak-pisat-kod>Как писать код<a class=headerlink href=#kak-pisat-kod title="Permanent link"> </a></h2> <p><strong>1.</strong> Управление памятью.</p> <p>Ручное освобождение памяти (<code class=syntax>delete</code>) можно использовать только в библиотечном коде.</p> <p>В свою очередь, в библиотечном коде, оператор <code class=syntax>delete</code> можно использовать только в деструкторах.</p> <p>В прикладном коде следует делать так, что память освобождается каким-либо объектом, который владеет ей.</p> <p>Примеры:</p> <ul> <li>проще всего разместить объект на стеке, или сделать его членом другого класса.</li> <li>для большого количества маленьких объектов используйте контейнеры.</li> <li>для автоматического освобождения маленького количества объектов, выделенных на куче, используйте <code class=syntax>shared_ptr/unique_ptr</code>.</li> </ul> <p><strong>2.</strong> Управление ресурсами.</p> <p>Используйте <code class=syntax>RAII</code> и см. пункт выше.</p> <p><strong>3.</strong> Обработка ошибок.</p> <p>Используйте исключения. В большинстве случаев, нужно только кидать исключения, а ловить - не нужно (потому что <code class=syntax>RAII</code>).</p> <p>В программах офлайн обработки данных, зачастую, можно не ловить исключения.</p> <p>В серверах, обрабатывающих пользовательские запросы, как правило, достаточно ловить исключения на самом верху обработчика соединения.</p> <p>В функциях потока, следует ловить и запоминать все исключения, чтобы выкинуть их в основном потоке после <code class=syntax>join</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// Если вычислений ещё не было - вычислим первый блок синхронно</span>
<span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>started</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>calculate</span><span class=p>();</span>
    <span class=n>started</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
<span class=p>}</span>
<span class=k>else</span>    <span class=c1>/// Если вычисления уже идут - подождём результата</span>
    <span class=n>pool</span><span class=p>.</span><span class=n>wait</span><span class=p>();</span>

<span class=k>if</span> <span class=p>(</span><span class=n>exception</span><span class=p>)</span>
    <span class=n>exception</span><span class=o>-&gt;</span><span class=n>rethrow</span><span class=p>();</span>
</code></pre></div> <p>Ни в коем случае не «проглатывайте» исключения без разбора. Ни в коем случае, не превращайте все исключения без разбора в сообщения в логе.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//Not correct</span>
<span class=k>catch</span> <span class=p>(...)</span> <span class=p>{}</span>
</code></pre></div> <p>Если вам нужно проигнорировать какие-то исключения, то игнорируйте только конкретные, а остальные кидайте обратно.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>catch</span> <span class=p>(</span><span class=k>const</span> <span class=n>DB</span><span class=o>::</span><span class=n>Exception</span> <span class=o>&amp;</span> <span class=n>e</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>e</span><span class=p>.</span><span class=n>code</span><span class=p>()</span> <span class=o>==</span> <span class=n>ErrorCodes</span><span class=o>::</span><span class=n>UNKNOWN_AGGREGATE_FUNCTION</span><span class=p>)</span>
        <span class=k>return</span> <span class=k>nullptr</span><span class=p>;</span>
    <span class=k>else</span>
        <span class=k>throw</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>При использовании функций, использующих коды возврата или <code class=syntax>errno</code>, проверяйте результат и кидайте исключение.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>if</span> <span class=p>(</span><span class=mi>0</span> <span class=o>!=</span> <span class=n>close</span><span class=p>(</span><span class=n>fd</span><span class=p>))</span>
    <span class=n>throwFromErrno</span><span class=p>(</span><span class=s>"Cannot close file "</span> <span class=o>+</span> <span class=n>file_name</span><span class=p>,</span> <span class=n>ErrorCodes</span><span class=o>::</span><span class=n>CANNOT_CLOSE_FILE</span><span class=p>);</span>
</code></pre></div> <p><code class=syntax>assert</code> не используются.</p> <p><strong>4.</strong> Типы исключений.</p> <p>В прикладном коде не требуется использовать сложную иерархию исключений. Желательно, чтобы текст исключения был понятен системному администратору.</p> <p><strong>5.</strong> Исключения, вылетающие из деструкторов.</p> <p>Использовать не рекомендуется, но допустимо.</p> <p>Используйте следующие варианты:</p> <ul> <li>Сделайте функцию (<code class=syntax>done()</code> или <code class=syntax>finalize()</code>), которая позволяет заранее выполнить всю работу, в процессе которой может возникнуть исключение. Если эта функция была вызвана, то затем в деструкторе не должно возникать исключений.</li> <li>Слишком сложную работу (например, отправку данных по сети) можно вообще не делать в деструкторе, рассчитывая, что пользователь заранее позовёт метод для завершения работы.</li> <li>Если в деструкторе возникло исключение, желательно не «проглатывать» его, а вывести информацию в лог (если в этом месте доступен логгер).</li> <li>В простых программах, если соответствующие исключения не ловятся, и приводят к завершению работы с записью информации в лог, можно не беспокоиться об исключениях, вылетающих из деструкторов, так как вызов <code class=syntax>std::terminate</code> (в случае <code class=syntax>noexcept</code> по умолчанию в C++11), является приемлемым способом обработки исключения.</li> </ul> <p><strong>6.</strong> Отдельные блоки кода.</p> <p>Внутри одной функции, можно создать отдельный блок кода, для того, чтобы сделать некоторые переменные локальными в нём, и для того, чтобы соответствующие деструкторы были вызваны при выходе из блока.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>Block</span> <span class=n>block</span> <span class=o>=</span> <span class=n>data</span><span class=p>.</span><span class=n>in</span><span class=o>-&gt;</span><span class=n>read</span><span class=p>();</span>

<span class=p>{</span>
    <span class=n>std</span><span class=o>::</span><span class=n>lock_guard</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>mutex</span><span class=o>&gt;</span> <span class=n>lock</span><span class=p>(</span><span class=n>mutex</span><span class=p>);</span>
    <span class=n>data</span><span class=p>.</span><span class=n>ready</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
    <span class=n>data</span><span class=p>.</span><span class=n>block</span> <span class=o>=</span> <span class=n>block</span><span class=p>;</span>
<span class=p>}</span>

<span class=n>ready_any</span><span class=p>.</span><span class=n>set</span><span class=p>();</span>
</code></pre></div> <p><strong>7.</strong> Многопоточность.</p> <p>В программах офлайн обработки данных:</p> <ul> <li>cначала добейтесь более-менее максимальной производительности на одном процессорном ядре, потом можно распараллеливать код, но только если есть необходимость.</li> </ul> <p>В программах - серверах:</p> <ul> <li>используйте пул потоков для обработки запросов. На данный момент, у нас не было задач, в которых была бы необходимость использовать userspace context switching.</li> </ul> <p>Fork для распараллеливания не используется.</p> <p><strong>8.</strong> Синхронизация потоков.</p> <p>Часто можно сделать так, чтобы отдельные потоки писали данные в разные ячейки памяти (лучше в разные кэш-линии), и не использовать синхронизацию потоков (кроме <code class=syntax>joinAll</code>).</p> <p>Если синхронизация нужна, то в большинстве случаев, достаточно использовать mutex под <code class=syntax>lock_guard</code>.</p> <p>В остальных случаях, используйте системные примитивы синхронизации. Не используйте busy wait.</p> <p>Атомарные операции можно использовать только в простейших случаях.</p> <p>Не нужно писать самостоятельно lock-free структуры данных, если вы не являетесь экспертом.</p> <p><strong>9.</strong> Ссылки и указатели.</p> <p>В большинстве случаев, предпочитайте ссылки.</p> <p><strong>10.</strong> const.</p> <p>Используйте константные ссылки, указатели на константу, <code class=syntax>const_iterator</code>, константные методы.</p> <p>Считайте, что <code class=syntax>const</code> — вариант написания «по умолчанию», а отсутствие <code class=syntax>const</code> только при необходимости.</p> <p>Для переменных, передающихся по значению, использовать <code class=syntax>const</code> обычно не имеет смысла.</p> <p><strong>11.</strong> unsigned.</p> <p>Используйте <code class=syntax>unsigned</code>, если нужно.</p> <p><strong>12.</strong> Числовые типы.</p> <p>Используйте типы <code class=syntax>UInt8</code>, <code class=syntax>UInt16</code>, <code class=syntax>UInt32</code>, <code class=syntax>UInt64</code>, <code class=syntax>Int8</code>, <code class=syntax>Int16</code>, <code class=syntax>Int32</code>, <code class=syntax>Int64</code>, а также <code class=syntax>size_t</code>, <code class=syntax>ssize_t</code>, <code class=syntax>ptrdiff_t</code>.</p> <p>Не используйте для чисел типы <code class=syntax>signed/unsigned long</code>, <code class=syntax>long long</code>, <code class=syntax>short</code>, <code class=syntax>signed/unsigned char</code>, <code class=syntax>char</code>.</p> <p><strong>13.</strong> Передача аргументов.</p> <p>Сложные значения передавайте по ссылке (включая <code class=syntax>std::string</code>).</p> <p>Если функция захватывает владение объектом, созданным на куче, то сделайте типом аргумента <code class=syntax>shared_ptr</code> или <code class=syntax>unique_ptr</code>.</p> <p><strong>14.</strong> Возврат значений.</p> <p>В большинстве случаев, просто возвращайте значение с помощью <code class=syntax>return</code>. Не пишите <code class=syntax>return std::move(res)</code>.</p> <p>Если внутри функции создаётся объект на куче и отдаётся наружу, то возвращайте <code class=syntax>shared_ptr</code> или <code class=syntax>unique_ptr</code>.</p> <p>В некоторых редких случаях, может потребоваться возвращать значение через аргумент функции. В этом случае, аргументом будет ссылка.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>using</span> <span class=n>AggregateFunctionPtr</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>IAggregateFunction</span><span class=o>&gt;</span><span class=p>;</span>

<span class=cm>/** Позволяет создать агрегатную функцию по её имени.</span>
<span class=cm>  */</span>
<span class=k>class</span> <span class=nc>AggregateFunctionFactory</span>
<span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>AggregateFunctionFactory</span><span class=p>();</span>
    <span class=n>AggregateFunctionPtr</span> <span class=nf>get</span><span class=p>(</span><span class=k>const</span> <span class=n>String</span> <span class=o>&amp;</span> <span class=n>name</span><span class=p>,</span> <span class=k>const</span> <span class=n>DataTypes</span> <span class=o>&amp;</span> <span class=n>argument_types</span><span class=p>)</span> <span class=k>const</span><span class=p>;</span>
</code></pre></div> <p><strong>15.</strong> namespace.</p> <p>Для прикладного кода отдельный <code class=syntax>namespace</code> использовать не нужно.</p> <p>Для маленьких библиотек - не требуется.</p> <p>Для не совсем маленьких библиотек - поместите всё в <code class=syntax>namespace</code>.</p> <p>Внутри библиотеки в <code class=syntax>.h</code> файле можно использовать <code class=syntax>namespace detail</code> для деталей реализации, не нужных прикладному коду.</p> <p>В <code class=syntax>.cpp</code> файле можно использовать <code class=syntax>static</code> или анонимный namespace для скрытия символов.</p> <p>Также, <code class=syntax>namespace</code> можно использовать для <code class=syntax>enum</code>, чтобы соответствующие имена не попали во внешний <code class=syntax>namespace</code> (но лучше использовать <code class=syntax>enum class</code>).</p> <p><strong>16.</strong> Отложенная инициализация.</p> <p>Обычно, если для инициализации требуются аргументы, то не пишите конструктор по умолчанию.</p> <p>Если потом вам потребовалась отложенная инициализация, то вы можете дописать конструктор по умолчанию (который создаст объект с некорректным состоянием). Или, для небольшого количества объектов, можно использовать <code class=syntax>shared_ptr/unique_ptr</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>Loader</span><span class=p>(</span><span class=n>DB</span><span class=o>::</span><span class=n>Connection</span> <span class=o>*</span> <span class=n>connection_</span><span class=p>,</span> <span class=k>const</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=o>&amp;</span> <span class=n>query</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>max_block_size_</span><span class=p>);</span>

<span class=c1>/// Для отложенной инициализации</span>
<span class=n>Loader</span><span class=p>()</span> <span class=p>{}</span>
</code></pre></div> <p><strong>17.</strong> Виртуальные функции.</p> <p>Если класс не предназначен для полиморфного использования, то не нужно делать функции виртуальными зря. Это относится и к деструктору.</p> <p><strong>18.</strong> Кодировки.</p> <p>Везде используется UTF-8. Используется <code class=syntax>std::string</code>, <code class=syntax>char *</code>. Не используется <code class=syntax>std::wstring</code>, <code class=syntax>wchar_t</code>.</p> <p><strong>19.</strong> Логирование.</p> <p>См. примеры везде в коде.</p> <p>Перед коммитом, удалите всё бессмысленное и отладочное логирование, и другие виды отладочного вывода.</p> <p>Не должно быть логирования на каждую итерацию внутреннего цикла, даже уровня Trace.</p> <p>При любом уровне логирования, логи должно быть возможно читать.</p> <p>Логирование следует использовать, в основном, только в прикладном коде.</p> <p>Сообщения в логе должны быть написаны на английском языке.</p> <p>Желательно, чтобы лог был понятен системному администратору.</p> <p>Не нужно писать ругательства в лог.</p> <p>В логе используется кодировка UTF-8. Изредка можно использовать в логе не-ASCII символы.</p> <p><strong>20.</strong> Ввод-вывод.</p> <p>Во внутренних циклах (в критичных по производительности участках программы) нельзя использовать <code class=syntax>iostreams</code> (в том числе, ни в коем случае не используйте <code class=syntax>stringstream</code>).</p> <p>Вместо этого используйте библиотеку <code class=syntax>DB/IO</code>.</p> <p><strong>21.</strong> Дата и время.</p> <p>См. библиотеку <code class=syntax>DateLUT</code>.</p> <p><strong>22.</strong> include.</p> <p>В заголовочном файле используется только <code class=syntax>#pragma once</code>, а include guards писать не нужно.</p> <p><strong>23.</strong> using.</p> <p><code class=syntax>using namespace</code> не используется. Можно использовать <code class=syntax>using</code> что-то конкретное. Лучше локально, внутри класса или функции.</p> <p><strong>24.</strong> Не нужно использовать <code class=syntax>trailing return type</code> для функций, если в этом нет необходимости.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>auto</span> <span class=n>f</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kt>void</span>
</code></pre></div> <p><strong>25.</strong> Объявление и инициализация переменных.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//right way</span>
<span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>s</span> <span class=o>=</span> <span class=s>"Hello"</span><span class=p>;</span>
<span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>s</span><span class=p>{</span><span class=s>"Hello"</span><span class=p>};</span>

<span class=c1>//wrong way</span>
<span class=k>auto</span> <span class=n>s</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>{</span><span class=s>"Hello"</span><span class=p>};</span>
</code></pre></div> <p><strong>26.</strong> Для виртуальных функций, пишите <code class=syntax>virtual</code> в базовом классе, а в классах-наследниках, пишите <code class=syntax>override</code> и не пишите <code class=syntax>virtual</code>.</p> <h2 id=neispolzuemye-vozmozhnosti-iazyka-c>Неиспользуемые возможности языка C++<a class=headerlink href=#neispolzuemye-vozmozhnosti-iazyka-c title="Permanent link"> </a></h2> <p><strong>2.</strong> Спецификаторы исключений из C++03 не используются.</p> <h2 id=error-messages>Сообщения об ошибках<a class=headerlink href=#error-messages title="Permanent link"> </a></h2> <p>Сообщения об ошибках -- это часть пользовательского интерфейса программы, предназначенная для того, чтобы позволить пользователю:</p> <ul> <li>замечать ошибочные ситуации,</li> <li>понимать их смысл и причины,</li> <li>устранять эти ситуации.</li> </ul> <p>Форма и содержание сообщений об ошибках должны способствовать достижению этих целей.</p> <p>Есть два основных вида ошибок:</p> <ul> <li>пользовательская или системная ошибка,</li> <li>внутренняя программная ошибка.</li> </ul> <h3 id=error-messages-user-error>Пользовательская ошибка<a class=headerlink href=#error-messages-user-error title="Permanent link"> </a></h3> <p>Такая ошибка вызвана действиями пользователя (неверный синтаксис запроса) или конфигурацией внешних систем (кончилось место на диске). Предполагается, что пользователь может устранить её самостоятельно. Для этого в сообщении об ошибке должна содержаться следующая информация:</p> <ul> <li>что произошло. Это должно объясняться в пользовательских терминах (<code class=syntax>Function pow() is not supported for data type UInt128</code>), а не загадочными конструкциями из кода (<code class=syntax>runtime overload resolution failed in DB::BinaryOperationBuilder&lt;FunctionAdaptor&lt;pow&gt;::Impl, UInt128, Int8&gt;::kaboongleFastPath()</code>).</li> <li>почему/где/когда -- любой контекст, который помогает отладить проблему. Представьте, как бы её отлаживали вы (программировать и пользоваться отладчиком нельзя).</li> <li>что можно предпринять для устранения ошибки. Здесь можно перечислить типичные причины проблемы, настройки, влияющие на это поведение, и так далее.</li> </ul> <p>Пример нормального сообщения:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nv>No</span> <span class=nv>alias</span> <span class=k>for</span> <span class=nv>subquery</span> <span class=nv>or</span> <span class=nv>table</span> <span class=nv>function</span> <span class=nv>in</span> <span class=nv>JOIN</span> <span class=ss>(</span><span class=nv>set</span> <span class=nv>joined_subquery_requires_alias</span><span class=o>=</span><span class=mi>0</span> <span class=nv>to</span> <span class=nv>disable</span> <span class=nv>restriction</span><span class=ss>)</span>.
<span class=k>While</span> <span class=nv>processing</span> <span class=s1>'</span><span class=s>(SELECT 2 AS a)</span><span class=s1>'</span>.
</code></pre></div> <p>Сказано что не хватает алиаса, показано, для какой части запроса, и предложена настройка, позволяющая ослабить это требование.</p> <p>Пример катастрофически плохого сообщения:</p> <div class=codehilite><pre><span></span><code class=syntax>The dictionary is configured incorrectly.
</code></pre></div> <p>Из него не понятно:</p> <ul> <li>какой словарь?</li> <li>в чём ошибка конфигурации?</li> </ul> <p>Что может сделать пользователь в такой ситуации: применять внешние отладочные инструменты, спрашивать совета на форумах, гадать на кофейной гуще, и, конечно же, ненавидеть софт, который над ним так издевается. Не нужно издеваться над пользователями, это плохой UX.</p> <h3 id=error-messages-internal-error>Внутренняя программная ошибка<a class=headerlink href=#error-messages-internal-error title="Permanent link"> </a></h3> <p>Такая ошибка вызвана нарушением внутренних инвариантов программы: например, внутренняя функция вызвана с неверными параметрами, не совпадают размеры колонок в блоке, произошло разыменование нулевого указателя, и так далее. Сигналы типа <code class=syntax>SIGSEGV</code> относятся к этой же категории.</p> <p>Появление такой ошибки всегда свидетельствует о наличии бага в программе. Пользователь не может исправить такую ошибку самостоятельно, и должен сообщить о ней разработчикам.</p> <p>Есть два основных варианта проверки на такие ошибки:</p> <ul> <li>Исключение с кодом <code class=syntax>LOGICAL_ERROR</code>. Его можно использовать для важных проверок, которые делаются в том числе в релизной сборке.</li> <li><code class=syntax>assert</code>. Такие условия не проверяются в релизной сборке, можно использовать для тяжёлых и опциональных проверок.</li> </ul> <p>Пример сообщения, у которого должен быть код <code class=syntax>LOGICAL_ERROR</code>:<br> <code class=syntax>Block header is inconsistent with Chunk in ICompicatedProcessor::munge(). It is a bug!</code><br> По каким признакам можно заметить, что здесь говорится о внутренней программной ошибке?</p> <ul> <li>в сообщении упоминаются внутренние сущности из кода,</li> <li>в сообщении написано it's a bug,</li> <li>непосредственные действия пользователя не могут исправить эту ошибку. Мы ожидаем, что пользователь зарепортит её как баг, и будем исправлять в коде.</li> </ul> <h3 id=error-messages-choose>Как выбрать код ошибки?<a class=headerlink href=#error-messages-choose title="Permanent link"> </a></h3> <p>Код ошибки предназначен для автоматической обработки некоторых видов ошибок, подобно кодам HTTP. SQL стандартизирует некоторые коды, но на деле ClickHouse не всегда соответствует этим стандартам. Лучше всего выбрать существующий код из <code class=syntax>ErrorCodes.cpp</code>, который больше всего подходит по смыслу. Можно использовать общие коды типа <code class=syntax>BAD_ARGUMENTS</code> или <code class=syntax>TYPE_MISMATCH</code>. Заводить новый код нужно, только если вы чётко понимаете, что вам нужна специальная автоматическая обработка конкретно этой ошибки на клиенте. Для внутренних программных ошибок используется код <code class=syntax>LOGICAL_ERROR</code>.</p> <h3 id=error-messages-add>Как добавить новое сообщение об ошибке?<a class=headerlink href=#error-messages-add title="Permanent link"> </a></h3> <p>Когда добавляете сообщение об ошибке:</p> <ol> <li>Опишите, что произошло, в пользовательских терминах, а не кусками кода.</li> <li>Добавьте максимум контекста (с чем произошло, когда, почему, и т.д.).</li> <li>Добавьте типичные причины.</li> <li>Добавьте варианты исправления (настройки, ссылки на документацию).</li> <li>Вообразите дальнейшие действия пользователя. Ваше сообщение должно помочь ему решить проблему без использования отладочных инструментов и без чужой помощи.</li> <li>Если сообщение об ошибке не формулируется в пользовательских терминах, и действия пользователя не могут исправить проблему -- это внутренняя программная ошибка, используйте код LOGICAL_ERROR или assert.</li> </ol> <h2 id=platforma>Платформа<a class=headerlink href=#platforma title="Permanent link"> </a></h2> <p><strong>1.</strong> Мы пишем код под конкретные платформы.</p> <p>Хотя, при прочих равных условиях, предпочитается более-менее кроссплатформенный или легко портируемый код.</p> <p><strong>2.</strong> Язык - C++20 (см. список доступных <a href=https://en.cppreference.com/w/cpp/compiler_support#C.2B.2B20_features rel="external nofollow noreferrer" target=_blank>C++20 фич</a>).</p> <p><strong>3.</strong> Компилятор - <code class=syntax>clang</code>. На данный момент (апрель 2021), код собирается версией 11. (Также код может быть собран <code class=syntax>gcc</code> версии 10, но такая сборка не тестируется и непригодна для продакшена).</p> <p>Используется стандартная библиотека (реализация <code class=syntax>libc++</code>).</p> <p><strong>4.</strong> ОС - Linux, Mac OS X или FreeBSD.</p> <p><strong>5.</strong> Код пишется под процессоры с архитектурой x86_64, AArch64 и ppc64le.</p> <p><strong>6.</strong> Используются флаги компиляции <code class=syntax>-Wall -Wextra -Werror</code> и <code class=syntax>-Weverything</code> с некоторыми исключениями.</p> <p><strong>7.</strong> Используется статическая линковка со всеми библиотеками кроме libc.</p> <h2 id=instrumentarii>Инструментарий<a class=headerlink href=#instrumentarii title="Permanent link"> </a></h2> <p><strong>1.</strong> Хорошая среда разработки - KDevelop.</p> <p><strong>2.</strong> Для отладки используется <code class=syntax>gdb</code>, <code class=syntax>valgrind</code> (<code class=syntax>memcheck</code>), <code class=syntax>strace</code>, <code class=syntax>-fsanitize=...</code>, <code class=syntax>tcmalloc_minimal_debug</code>.</p> <p><strong>3.</strong> Для профилирования используется <code class=syntax>Linux Perf</code>, <code class=syntax>valgrind</code> (<code class=syntax>callgrind</code>), <code class=syntax>strace -cf</code>.</p> <p><strong>4.</strong> Исходники в Git.</p> <p><strong>5.</strong> Сборка с помощью <code class=syntax>CMake</code>.</p> <p><strong>6.</strong> Программы выкладываются с помощью <code class=syntax>deb</code> пакетов.</p> <p><strong>7.</strong> Коммиты в master не должны ломать сборку проекта.</p> <p>А работоспособность собранных программ гарантируется только для отдельных ревизий.</p> <p><strong>8.</strong> Коммитьте как можно чаще, в том числе и нерабочий код.</p> <p>Для этого следует использовать бранчи.</p> <p>Если ваш код в ветке <code class=syntax>master</code> ещё не собирается, исключите его из сборки перед <code class=syntax>push</code>, также вы будете должны его доработать или удалить в течение нескольких дней.</p> <p><strong>9.</strong> Для нетривиальных изменений, используются бранчи. Следует загружать бранчи на сервер.</p> <p><strong>10.</strong> Ненужный код удаляется из исходников.</p> <h2 id=biblioteki>Библиотеки<a class=headerlink href=#biblioteki title="Permanent link"> </a></h2> <p><strong>1.</strong> Используются стандартная библиотека C++20 (допустимо использовать экспериментальные расширения) а также фреймворки <code class=syntax>boost</code>, <code class=syntax>Poco</code>.</p> <p><strong>2.</strong> При необходимости, можно использовать любые известные библиотеки, доступные в ОС из пакетов.</p> <p>Если есть хорошее готовое решение, то оно используется, даже если для этого придётся установить ещё одну библиотеку.</p> <p>(Но будьте готовы к тому, что иногда вам придётся выкидывать плохие библиотеки из кода.)</p> <p><strong>3.</strong> Если в пакетах нет нужной библиотеки, или её версия достаточно старая, или если она собрана не так, как нужно, то можно использовать библиотеку, устанавливаемую не из пакетов.</p> <p><strong>4.</strong> Если библиотека достаточно маленькая и у неё нет своей системы сборки, то следует включить её файлы в проект, в директорию <code class=syntax>contrib</code>.</p> <p><strong>5.</strong> Предпочтение всегда отдаётся уже использующимся библиотекам.</p> <h2 id=obshchee-1>Общее<a class=headerlink href=#obshchee-1 title="Permanent link"> </a></h2> <p><strong>1.</strong> Пишите как можно меньше кода.</p> <p><strong>2.</strong> Пробуйте самое простое решение.</p> <p><strong>3.</strong> Не нужно писать код, если вы ещё не знаете, что будет делать ваша программа, и как будет работать её внутренний цикл.</p> <p><strong>4.</strong> В простейших случаях, используйте <code class=syntax>using</code> вместо классов/структур.</p> <p><strong>5.</strong> Если есть возможность - не пишите конструкторы копирования, операторы присваивания, деструктор (кроме виртуального, если класс содержит хотя бы одну виртуальную функцию), move-конструкторы и move-присваивания. То есть, чтобы соответствущие функции, генерируемые компилятором, работали правильно. Можно использовать <code class=syntax>default</code>.</p> <p><strong>6.</strong> Приветствуется упрощение и уменьшение объёма кода.</p> <h2 id=dopolnitelno>Дополнительно<a class=headerlink href=#dopolnitelno title="Permanent link"> </a></h2> <p><strong>1.</strong> Явное указание <code class=syntax>std::</code> для типов из <code class=syntax>stddef.h</code>.</p> <p>Рекомендуется не указывать. То есть, рекомендуется писать <code class=syntax>size_t</code> вместо <code class=syntax>std::size_t</code>, это короче.</p> <p>При желании, можно дописать <code class=syntax>std::</code>, этот вариант допустим.</p> <p><strong>2.</strong> Явное указание <code class=syntax>std::</code> для функций из стандартной библиотеки C.</p> <p>Не рекомендуется. То есть, пишите <code class=syntax>memcpy</code> вместо <code class=syntax>std::memcpy</code>.</p> <p>Причина - существуют похожие нестандартные функции, например, <code class=syntax>memmem</code>. Мы можем использовать и изредка используем эти функции. Эти функции отсутствуют в <code class=syntax>namespace std</code>.</p> <p>Если вы везде напишете <code class=syntax>std::memcpy</code> вместо <code class=syntax>memcpy</code>, то будет неудобно смотреться <code class=syntax>memmem</code> без <code class=syntax>std::</code>.</p> <p>Тем не менее, указывать <code class=syntax>std::</code> тоже допустимо, если так больше нравится.</p> <p><strong>3.</strong> Использование функций из C при наличии аналогов в стандартной библиотеке C++.</p> <p>Допустимо, если это использование эффективнее.</p> <p>Для примера, для копирования длинных кусков памяти, используйте <code class=syntax>memcpy</code> вместо <code class=syntax>std::copy</code>.</p> <p><strong>4.</strong> Перенос длинных аргументов функций.</p> <p>Допустимо использовать любой стиль переноса, похожий на приведённые ниже:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span>
  <span class=n>T1</span> <span class=n>x1</span><span class=p>,</span>
  <span class=n>T2</span> <span class=n>x2</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span>
  <span class=kt>size_t</span> <span class=n>left</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>right</span><span class=p>,</span>
  <span class=k>const</span> <span class=o>&amp;</span> <span class=n>RangesInDataParts</span> <span class=n>ranges</span><span class=p>,</span>
  <span class=kt>size_t</span> <span class=n>limit</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span><span class=kt>size_t</span> <span class=n>left</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>right</span><span class=p>,</span>
  <span class=k>const</span> <span class=o>&amp;</span> <span class=n>RangesInDataParts</span> <span class=n>ranges</span><span class=p>,</span>
  <span class=kt>size_t</span> <span class=n>limit</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span><span class=kt>size_t</span> <span class=n>left</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>right</span><span class=p>,</span>
      <span class=k>const</span> <span class=o>&amp;</span> <span class=n>RangesInDataParts</span> <span class=n>ranges</span><span class=p>,</span>
      <span class=kt>size_t</span> <span class=n>limit</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span>
      <span class=kt>size_t</span> <span class=n>left</span><span class=p>,</span>
      <span class=kt>size_t</span> <span class=n>right</span><span class=p>,</span>
      <span class=k>const</span> <span class=o>&amp;</span> <span class=n>RangesInDataParts</span> <span class=n>ranges</span><span class=p>,</span>
      <span class=kt>size_t</span> <span class=n>limit</span><span class=p>)</span>
</code></pre></div> </div> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Was this content helpful?</span> <div id=rating-stars class="display-6 mb-0" data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']" data-documentation=documentation>RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2021 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/878a159538935028f2d2dce3eb3074d44eb191df rel="external nofollow noreferrer" target=_blank class=text-reset>878a159538</a> </div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#obshchee title=Общее class="nav-link text-wrap d-inline-block w-100"> Общее </a> <a href=#formatirovanie title=Форматирование class="nav-link text-wrap d-inline-block w-100"> Форматирование </a> <a href=#kommentarii title=Комментарии class="nav-link text-wrap d-inline-block w-100"> Комментарии </a> <a href=#imena title=Имена class="nav-link text-wrap d-inline-block w-100"> Имена </a> <a href=#kak-pisat-kod title="Как писать код" class="nav-link text-wrap d-inline-block w-100"> Как писать код </a> <a href=#neispolzuemye-vozmozhnosti-iazyka-c title="Неиспользуемые возможности языка C++" class="nav-link text-wrap d-inline-block w-100"> Неиспользуемые возможности языка C++ </a> <a href=#error-messages title="Сообщения об ошибках" class="nav-link text-wrap d-inline-block w-100"> Сообщения об ошибках </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#error-messages-user-error title="Пользовательская ошибка" class="nav-link text-wrap d-inline-block w-100"> Пользовательская ошибка </a> <a href=#error-messages-internal-error title="Внутренняя программная ошибка" class="nav-link text-wrap d-inline-block w-100"> Внутренняя программная ошибка </a> <a href=#error-messages-choose title="Как выбрать код ошибки?" class="nav-link text-wrap d-inline-block w-100"> Как выбрать код ошибки? </a> <a href=#error-messages-add title="Как добавить новое сообщение об ошибке?" class="nav-link text-wrap d-inline-block w-100"> Как добавить новое сообщение об ошибке? </a> </nav> <a href=#platforma title=Платформа class="nav-link text-wrap d-inline-block w-100"> Платформа </a> <a href=#instrumentarii title=Инструментарий class="nav-link text-wrap d-inline-block w-100"> Инструментарий </a> <a href=#biblioteki title=Библиотеки class="nav-link text-wrap d-inline-block w-100"> Библиотеки </a> <a href=#obshchee-1 title=Общее class="nav-link text-wrap d-inline-block w-100"> Общее </a> <a href=#dopolnitelno title=Дополнительно class="nav-link text-wrap d-inline-block w-100"> Дополнительно </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?da3fd50d></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>