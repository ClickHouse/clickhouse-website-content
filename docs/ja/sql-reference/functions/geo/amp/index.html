<!doctype html><html ⚡ lang=ja> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>地理座標の操作 | ClickHouseドキュメント</title><link href=https://clickhouse.tech/docs/ja/sql-reference/functions/geo/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "地理座標の操作 | ClickHouseドキュメント",
"mainEntityOfPage": "https://clickhouse.tech/docs/ja/sql-reference/functions/geo/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "地理座標の操作 | ClickHouseドキュメント",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer,main{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.w-25{width:25%}.w-50{width:50%}.w-75{width:75%}.w-100{width:100%}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.w-15{width:15%}.headerlink{text-decoration:none;margin-left:.5rem}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .c{color:#747369}.syntax .k{color:#c9c}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .c1{color:#747369}.syntax .ld{color:#9c9}.syntax .m{color:#f99157}.syntax .s{color:#9c9}.syntax .py{color:#f2f0ec}.syntax .w{color:#f2f0ec}.syntax .mi{color:#f99157}.syntax .s2{color:#9c9}.syntax .sx{color:#9c9}.syntax .s1{color:#9c9}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Help wanted!</p> <p class=lead>The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href=/docs/en/sql-reference/functions/geo/ class=alert-link>You can also use the original English version as a reference.</a></p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/sql-reference/functions/geo.md target=_blank rel="external nofollow noreferrer"> Help ClickHouse documentation by editing this page </a> </p> </div> <h1 id=functions-for-working-with-geographical-coordinates>地理座標を操作するための関数<a class=headerlink href=../amp/#functions-for-working-with-geographical-coordinates title="Permanent link"> </a></h1> <h2 id=greatcircledistance>グレートサークル距離<a class=headerlink href=../amp/#greatcircledistance title="Permanent link"> </a></h2> <p>を使用して、地球の表面上の二つの点の間の距離を計算します <a href=https://en.wikipedia.org/wiki/Great-circle_distance rel="external nofollow noreferrer" target=_blank>大円の公式</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>greatCircleDistance</span><span class=p>(</span><span class=n>lon1Deg</span><span class=p>,</span> <span class=n>lat1Deg</span><span class=p>,</span> <span class=n>lon2Deg</span><span class=p>,</span> <span class=n>lat2Deg</span><span class=p>)</span>
</code></pre></div> <p><strong>入力パラメータ</strong></p> <ul> <li><code class=syntax>lon1Deg</code> — Longitude of the first point in degrees. Range: <code class=syntax>[-180°, 180°]</code>.</li> <li><code class=syntax>lat1Deg</code> — Latitude of the first point in degrees. Range: <code class=syntax>[-90°, 90°]</code>.</li> <li><code class=syntax>lon2Deg</code> — Longitude of the second point in degrees. Range: <code class=syntax>[-180°, 180°]</code>.</li> <li><code class=syntax>lat2Deg</code> — Latitude of the second point in degrees. Range: <code class=syntax>[-90°, 90°]</code>.</li> </ul> <p>正の値は北緯と東経に対応し、負の値は南緯と西経に対応します。</p> <p><strong>戻り値</strong></p> <p>メートル単位で、地球の表面上の二つの点の間の距離。</p> <p>入力パラメーター値が範囲外にある場合に例外を生成します。</p> <p><strong>例</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>greatCircleDistance</span><span class=p>(</span><span class=mi>55</span><span class=p>.</span><span class=mi>755831</span><span class=p>,</span> <span class=mi>37</span><span class=p>.</span><span class=mi>617673</span><span class=p>,</span> <span class=o>-</span><span class=mi>55</span><span class=p>.</span><span class=mi>755831</span><span class=p>,</span> <span class=o>-</span><span class=mi>37</span><span class=p>.</span><span class=mi>617673</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─greatCircleDistance(55.755831, 37.617673, -55.755831, -37.617673)─┐
│                                                14132374.194975413 │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=pointinellipses>ポイントネリップス<a class=headerlink href=../amp/#pointinellipses title="Permanent link"> </a></h2> <p>点が少なくとも一方の楕円に属しているかどうかをチェックします。<br> 座標はデカルト座標系では幾何学的です。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>pointInEllipses</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>x₀</span><span class=p>,</span> <span class=n>y₀</span><span class=p>,</span> <span class=n>a₀</span><span class=p>,</span> <span class=n>b₀</span><span class=p>,...,</span><span class=n>xₙ</span><span class=p>,</span> <span class=n>yₙ</span><span class=p>,</span> <span class=n>aₙ</span><span class=p>,</span> <span class=n>bₙ</span><span class=p>)</span>
</code></pre></div> <p><strong>入力パラメータ</strong></p> <ul> <li><code class=syntax>x, y</code> — Coordinates of a point on the plane.</li> <li><code class=syntax>xᵢ, yᵢ</code> — Coordinates of the center of the <code class=syntax>i</code>-番目の省略記号。</li> <li><code class=syntax>aᵢ, bᵢ</code> — Axes of the <code class=syntax>i</code>-x、y座標の単位で番目の省略記号。</li> </ul> <p>入力パラメータ <code class=syntax>2+4⋅n</code>,ここで <code class=syntax>n</code> 楕円の数です。</p> <p><strong>戻り値</strong></p> <p><code class=syntax>1</code> 点が楕円の少なくとも一方の内側にある場合; <code class=syntax>0</code>そうでない場合。</p> <p><strong>例</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>pointInEllipses</span><span class=p>(</span><span class=mi>10</span><span class=p>.,</span> <span class=mi>10</span><span class=p>.,</span> <span class=mi>10</span><span class=p>.,</span> <span class=mi>9</span><span class=p>.</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>.,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>9999</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─pointInEllipses(10., 10., 10., 9.1, 1., 0.9999)─┐
│                                               1 │
└─────────────────────────────────────────────────┘
</code></pre></div> <h2 id=pointinpolygon>ポイントポリゴン<a class=headerlink href=../amp/#pointinpolygon title="Permanent link"> </a></h2> <p>ポイントが平面上のポリゴンに属するかどうかを確認します。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>pointInPolygon</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>),</span> <span class=p>[(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>),</span> <span class=p>(</span><span class=k>c</span><span class=p>,</span> <span class=n>d</span><span class=p>)</span> <span class=p>...],</span> <span class=p>...)</span>
</code></pre></div> <p><strong>入力値</strong></p> <ul> <li><code class=syntax>(x, y)</code> — Coordinates of a point on the plane. Data type — <a href=../../../data-types/tuple/amp/ >タプル</a> — A tuple of two numbers.</li> <li><code class=syntax>[(a, b), (c, d) ...]</code> — Polygon vertices. Data type — <a href=../../../data-types/array/amp/ >配列</a>. 各頂点は、座標のペアで表されます <code class=syntax>(a, b)</code>. 頂点は時計回りまたは反時計回りの順序で指定する必要があります。 頂点の最小数は3です。 多角形は一定でなければなりません。</li> <li>この機能にも対応し多角形穴あき(切り抜く部門). この場合、関数の追加引数を使用して切り取られたセクションを定義するポリゴンを追加します。 この機能はサポートしない非単に接続ポリゴン.</li> </ul> <p><strong>戻り値</strong></p> <p><code class=syntax>1</code> ポイントがポリゴンの内側にある場合, <code class=syntax>0</code> そうでない場合。<br> ポイントがポリゴン境界上にある場合、関数は0または1のいずれかを返します。</p> <p><strong>例</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>pointInPolygon</span><span class=p>((</span><span class=mi>3</span><span class=p>.,</span> <span class=mi>3</span><span class=p>.),</span> <span class=p>[(</span><span class=mi>6</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>4</span><span class=p>),</span> <span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>8</span><span class=p>),</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>)])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│   1 │
└─────┘
</code></pre></div> <h2 id=geohashencode>geohashEncode<a class=headerlink href=../amp/#geohashencode title="Permanent link"> </a></h2> <p>緯度と経度をジオハッシュ文字列としてエンコードします。<a href=http://geohash.org/,https://en.wikipedia.org/wiki/Geohash target=_blank>http://geohash.org/,https://en.wikipedia.org/wiki/Geohash</a>）。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>geohashEncode</span><span class=p>(</span><span class=n>longitude</span><span class=p>,</span> <span class=n>latitude</span><span class=p>,</span> <span class=p>[</span><span class=k>precision</span><span class=p>])</span>
</code></pre></div> <p><strong>入力値</strong></p> <ul> <li>経度-エンコードする座標の経度部分。 範囲の浮遊<code class=syntax>[-180°, 180°]</code></li> <li>緯度-エンコードする座標の緯度の部分。 範囲の浮遊 <code class=syntax>[-90°, 90°]</code></li> <li>精度-オプションで、結果のエンコードされた文字列の長さ。 <code class=syntax>12</code>. 範囲内の整数 <code class=syntax>[1, 12]</code>. より小さい値 <code class=syntax>1</code> またはより大きい <code class=syntax>12</code> に変換されます。 <code class=syntax>12</code>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>英数字 <code class=syntax>String</code> 符号化座標（base32エンコーディングアルファベットの修正バージョンが使用されます）。</li> </ul> <p><strong>例</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>geohashEncode</span><span class=p>(</span><span class=o>-</span><span class=mi>5</span><span class=p>.</span><span class=mi>60302734375</span><span class=p>,</span> <span class=mi>42</span><span class=p>.</span><span class=mi>593994140625</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res──────────┐
│ ezs42d000000 │
└──────────────┘
</code></pre></div> <h2 id=geohashdecode>geohashDecode<a class=headerlink href=../amp/#geohashdecode title="Permanent link"> </a></h2> <p>ジオハッシュでエンコードされた文字列を経度と緯度にデコードします。</p> <p><strong>入力値</strong></p> <ul> <li>エンコード文字列-ジオハッシュエンコード文字列。</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>(経度,緯度)-2-タプルの <code class=syntax>Float64</code> 経度と緯度の値。</li> </ul> <p><strong>例</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>geohashDecode</span><span class=p>(</span><span class=s1>'ezs42'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────────────────────────────┐
│ (-5.60302734375,42.60498046875) │
└─────────────────────────────────┘
</code></pre></div> <h2 id=geotoh3>geoToH3<a class=headerlink href=../amp/#geotoh3 title="Permanent link"> </a></h2> <p>ﾂづｩﾂ。 <a href=https://uber.github.io/h3/#/documentation/overview/introduction rel="external nofollow noreferrer" target=_blank>H3</a> ポイント指数 <code class=syntax>(lon, lat)</code> 指定決断を使って。</p> <p><a href=https://uber.github.io/h3/#/documentation/overview/introduction rel="external nofollow noreferrer" target=_blank>H3</a> 地球の表面が六角形のタイルに分割された地理的索引システムです。 このシステムは階層的であり、すなわち最上位の各六角形は七つに分割することができますが、より小さなものなどです。</p> <p>このインデックスは、主にバケットの場所やその他の地理空間操作に使用されます。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>geoToH3</span><span class=p>(</span><span class=n>lon</span><span class=p>,</span> <span class=n>lat</span><span class=p>,</span> <span class=n>resolution</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>lon</code> — Longitude. Type: <a href=../../../data-types/float/amp/ >Float64</a>.</li> <li><code class=syntax>lat</code> — Latitude. Type: <a href=../../../data-types/float/amp/ >Float64</a>.</li> <li><code class=syntax>resolution</code> — Index resolution. Range: <code class=syntax>[0, 15]</code>. タイプ: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>六角形のインデックス番号。</li> <li>エラーの場合は0。</li> </ul> <p>タイプ: <code class=syntax>UInt64</code>.</p> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>geoToH3</span><span class=p>(</span><span class=mi>37</span><span class=p>.</span><span class=mi>79506683</span><span class=p>,</span> <span class=mi>55</span><span class=p>.</span><span class=mi>71290588</span><span class=p>,</span> <span class=mi>15</span><span class=p>)</span> <span class=k>as</span> <span class=n>h3Index</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌────────────h3Index─┐
│ 644325524701193974 │
└────────────────────┘
</code></pre></div> <h2 id=geohashesinbox>geohashesInBox<a class=headerlink href=../amp/#geohashesinbox title="Permanent link"> </a></h2> <p>指定されたボックスの内側にあり、指定されたボックスの境界と交差する、指定された精度のジオハッシュエンコードされた文字列の配列を返しま</p> <p><strong>入力値</strong></p> <ul> <li>longitudie_min-最小の経度、範囲内の浮動小数点値 <code class=syntax>[-180°, 180°]</code></li> <li>latitude_min-最小緯度、範囲内の浮動小数点値 <code class=syntax>[-90°, 90°]</code></li> <li>縦方向max-最大経度、範囲内の浮動小数点値 <code class=syntax>[-180°, 180°]</code></li> <li>latitude_max-最大緯度、範囲内の浮動小数点値 <code class=syntax>[-90°, 90°]</code></li> <li>精度-ジオハッシュ精度, <code class=syntax>UInt8</code> 範囲内 <code class=syntax>[1, 12]</code></li> </ul> <p>すべての座標パラメータは同じタイプでなければなりません。 <code class=syntax>Float32</code> または <code class=syntax>Float64</code>.</p> <p><strong>戻り値</strong></p> <ul> <li>精度の配列-提供された領域をカバーするジオハッシュボックスの長い文字列、あなたは項目の順序に頼るべきではありません。</li> <li>[]-空の配列の場合 <em>分</em> の値 <em>緯度</em> と <em>経度</em> 対応するよりも小さくない <em>最大</em> 値。</li> </ul> <p>結果の配列が10'000'000項目以上の場合、関数は例外をスローすることに注意してください。</p> <p><strong>例</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>geohashesInBox</span><span class=p>(</span><span class=mi>24</span><span class=p>.</span><span class=mi>48</span><span class=p>,</span> <span class=mi>40</span><span class=p>.</span><span class=mi>56</span><span class=p>,</span> <span class=mi>24</span><span class=p>.</span><span class=mi>785</span><span class=p>,</span> <span class=mi>40</span><span class=p>.</span><span class=mi>81</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=n>thasos</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─thasos──────────────────────────────────────┐
│ ['sx1q','sx1r','sx32','sx1w','sx1x','sx38'] │
└─────────────────────────────────────────────┘
</code></pre></div> <h2 id=h3getbasecell>h3GetBaseCell<a class=headerlink href=../amp/#h3getbasecell title="Permanent link"> </a></h2> <p>インデックスの基本セル番号を返します。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>h3GetBaseCell</span><span class=p>(</span><span class=k>index</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>index</code> — Hexagon index number. Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>六角形のベースのセル番号。 タイプ: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>h3GetBaseCell</span><span class=p>(</span><span class=mi>612916788725809151</span><span class=p>)</span> <span class=k>as</span> <span class=n>basecell</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─basecell─┐
│       12 │
└──────────┘
</code></pre></div> <h2 id=h3hexaream2>h3HexAreaM2<a class=headerlink href=../amp/#h3hexaream2 title="Permanent link"> </a></h2> <p>与えられた解像度での平方メートルの平均六角形面積。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>h3HexAreaM2</span><span class=p>(</span><span class=n>resolution</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>resolution</code> — Index resolution. Range: <code class=syntax>[0, 15]</code>. タイプ: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>Area in m². Type: <a href=../../../data-types/float/amp/ >Float64</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>h3HexAreaM2</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span> <span class=k>as</span> <span class=n>area</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─area─┐
│ 43.9 │
└──────┘
</code></pre></div> <h2 id=h3indexesareneighbors>h3IndexesAreNeighbors<a class=headerlink href=../amp/#h3indexesareneighbors title="Permanent link"> </a></h2> <p>指定されたH3indexがneighborであるかどうかを返します。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>h3IndexesAreNeighbors</span><span class=p>(</span><span class=n>index1</span><span class=p>,</span> <span class=n>index2</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>index1</code> — Hexagon index number. Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> <li><code class=syntax>index2</code> — Hexagon index number. Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>ﾂづｩﾂ。 <code class=syntax>1</code> インデックスが近傍の場合, <code class=syntax>0</code> そうでなければ タイプ: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>h3IndexesAreNeighbors</span><span class=p>(</span><span class=mi>617420388351344639</span><span class=p>,</span> <span class=mi>617420388352655359</span><span class=p>)</span> <span class=k>AS</span> <span class=n>n</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─n─┐
│ 1 │
└───┘
</code></pre></div> <h2 id=h3tochildren>h3ToChildren<a class=headerlink href=../amp/#h3tochildren title="Permanent link"> </a></h2> <p>指定したインデックスの子インデックスを持つ配列を返します。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>h3ToChildren</span><span class=p>(</span><span class=k>index</span><span class=p>,</span> <span class=n>resolution</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>index</code> — Hexagon index number. Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> <li><code class=syntax>resolution</code> — Index resolution. Range: <code class=syntax>[0, 15]</code>. タイプ: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>子h3インデックスを持つ配列。 型の配列: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>h3ToChildren</span><span class=p>(</span><span class=mi>599405990164561919</span><span class=p>,</span> <span class=mi>6</span><span class=p>)</span> <span class=k>AS</span> <span class=n>children</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─children───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ [603909588852408319,603909588986626047,603909589120843775,603909589255061503,603909589389279231,603909589523496959,603909589657714687] │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=h3toparent>h3ToParent<a class=headerlink href=../amp/#h3toparent title="Permanent link"> </a></h2> <p>指定された索引を含む親(より粗い)索引を返します。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>h3ToParent</span><span class=p>(</span><span class=k>index</span><span class=p>,</span> <span class=n>resolution</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>index</code> — Hexagon index number. Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> <li><code class=syntax>resolution</code> — Index resolution. Range: <code class=syntax>[0, 15]</code>. タイプ: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>親H3インデックス。 タイプ: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>h3ToParent</span><span class=p>(</span><span class=mi>599405990164561919</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span> <span class=k>as</span> <span class=n>parent</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─────────────parent─┐
│ 590398848891879423 │
└────────────────────┘
</code></pre></div> <h2 id=h3tostring>h3ToString<a class=headerlink href=../amp/#h3tostring title="Permanent link"> </a></h2> <p>インデックスのH3Index表現を文字列表現に変換します。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>h3ToString</span><span class=p>(</span><span class=k>index</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>index</code> — Hexagon index number. Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>H3インデックスの文字列表現。 タイプ: <a href=../../../data-types/string/amp/ >文字列</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>h3ToString</span><span class=p>(</span><span class=mi>617420388352917503</span><span class=p>)</span> <span class=k>as</span> <span class=n>h3_string</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─h3_string───────┐
│ 89184926cdbffff │
└─────────────────┘
</code></pre></div> <h2 id=stringtoh3>stringToH3<a class=headerlink href=../amp/#stringtoh3 title="Permanent link"> </a></h2> <p>文字列表現をH3Index(UInt64)表現に変換します。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>stringToH3</span><span class=p>(</span><span class=n>index_str</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>index_str</code> — String representation of the H3 index. Type: <a href=../../../data-types/string/amp/ >文字列</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>六角形のインデックス番号。 エラーの場合は0を返します。 タイプ: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>stringToH3</span><span class=p>(</span><span class=s1>'89184926cc3ffff'</span><span class=p>)</span> <span class=k>as</span> <span class=k>index</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────────index─┐
│ 617420388351344639 │
└────────────────────┘
</code></pre></div> <h2 id=h3getresolution>h3GetResolution<a class=headerlink href=../amp/#h3getresolution title="Permanent link"> </a></h2> <p>インデックスの解像度を返します。</p> <p><strong>構文</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>h3GetResolution</span><span class=p>(</span><span class=k>index</span><span class=p>)</span>
</code></pre></div> <p><strong>パラメータ</strong></p> <ul> <li><code class=syntax>index</code> — Hexagon index number. Type: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>戻り値</strong></p> <ul> <li>インデックスの解決。 範囲: <code class=syntax>[0, 15]</code>. タイプ: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li> </ul> <p><strong>例</strong></p> <p>クエリ:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>h3GetResolution</span><span class=p>(</span><span class=mi>617420388352917503</span><span class=p>)</span> <span class=k>as</span> <span class=n>res</span>
</code></pre></div> <p>結果:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─res─┐
│   9 │
└─────┘
</code></pre></div> <p><a href=https://clickhouse.tech/docs/en/query_language/functions/geo/ target=_blank>元の記事</a> <!--hide--></p> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2021 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/878a159538935028f2d2dce3eb3074d44eb191df rel="external nofollow noreferrer" target=_blank class=text-reset>878a159538</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/ja/sql-reference/functions/geo/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 