<!doctype html><html ⚡ lang=en> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>New York Taxi Data | ClickHouse Documentation</title><link href=https://clickhouse.tech/docs/en/getting-started/example-datasets/nyc-taxi/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "New York Taxi Data | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.tech/docs/en/getting-started/example-datasets/nyc-taxi/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "New York Taxi Data | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}b{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}th{text-align:inherit}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}summary{display:list-item;cursor:pointer}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.mark,mark{padding:.2em;background-color:#fcf8e3}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table td,.table th{padding:.75rem;vertical-align:top;border-top:1px solid #dee2e6}.table thead th{vertical-align:bottom;border-bottom:2px solid #dee2e6}.table tbody+tbody{border-top:2px solid #dee2e6}.table-primary,.table-primary>td,.table-primary>th{background-color:#b8daff}.table-primary tbody+tbody,.table-primary td,.table-primary th,.table-primary thead th{border-color:#7abaff}.table-info,.table-info>td,.table-info>th{background-color:#bee5eb}.table-info tbody+tbody,.table-info td,.table-info th,.table-info thead th{border-color:#86cfda}.table-light,.table-light>td,.table-light>th{background-color:#fdfdfe}.table-light tbody+tbody,.table-light td,.table-light th,.table-light thead th{border-color:#fbfcfc}.table-dark,.table-dark>td,.table-dark>th{background-color:#c6c8ca}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#95999c}.table-active,.table-active>td,.table-active>th{background-color:rgba(0,0,0,.075)}.table .thead-dark th{color:#fff;background-color:#343a40;border-color:#454d55}.table .thead-light th{color:#495057;background-color:#e9ecef;border-color:#dee2e6}.table-dark{color:#fff;background-color:#343a40}.table-dark td,.table-dark th,.table-dark thead th{border-color:#454d55}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info:focus{color:#fff;background-color:#138496;border-color:#117a8b;box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-info{color:#0c5460;background-color:#d1ecf1;border-color:#bee5eb}.alert-info .alert-link{color:#062c33}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-info{background-color:#17a2b8}a.bg-info:focus,a.bg-info:hover{background-color:#117a8b}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-info{color:#17a2b8}a.text-info:focus,a.text-info:hover{color:#0f6674}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table td,.table th{background-color:#fff}.table-dark{color:inherit}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#dee2e6}.table .thead-dark th{color:inherit;border-color:#dee2e6}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}a.btn-outline-yellow{border-color:#fc0;color:#fc0}.btn-outline-yellow:hover,.btn-yellow{background:#fc0;color:#000}.btn-yellow:hover{background:#ffe100}.btn-yellow:hover,.btn-yellow:link,.btn-yellow:visited{color:#000}.btn:active,.btn:hover{text-decoration:none}.text-red{color:#ff3939}.text-orange{color:#f14600}.text-yellow{color:#fc0}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}summary{font-weight:700;color:#eee}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content thead{background:#444451;color:#fff}#content td,#content th{padding:.75rem;vertical-align:top}#content td{border:1px solid #dee2e6}#content th{border:1px solid #444451}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre,td,th,thead,tr{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body.blog,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content thead{background:#333}#content td{border:1px solid #444451}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .c{color:#747369}.syntax .err{color:#f2777a}.syntax .k{color:#c9c}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .c1{color:#747369}.syntax .ld{color:#9c9}.syntax .m{color:#f99157}.syntax .s{color:#9c9}.syntax .nb{color:#f2f0ec}.syntax .no{color:#f2777a}.syntax .py{color:#f2f0ec}.syntax .mi{color:#f99157}.syntax .s2{color:#9c9}.syntax .sh{color:#9c9}.syntax .s1{color:#9c9}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <h1 id=new-york-taxi-data>New York Taxi Data<a class=headerlink href=../amp/#new-york-taxi-data title="Permanent link"> </a></h1> <p>This dataset can be obtained in two ways:</p> <ul> <li>import from raw data</li> <li>download of prepared partitions</li> </ul> <h2 id=how-to-import-the-raw-data>How to Import the Raw Data<a class=headerlink href=../amp/#how-to-import-the-raw-data title="Permanent link"> </a></h2> <p>See <a href=https://github.com/toddwschneider/nyc-taxi-data target=_blank>https://github.com/toddwschneider/nyc-taxi-data</a> and <a href=http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html target=_blank>http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html</a> for the description of a dataset and instructions for downloading.</p> <p>Downloading will result in about 227 GB of uncompressed data in CSV files. The download takes about an hour over a 1 Gbit connection (parallel downloading from s3.amazonaws.com recovers at least half of a 1 Gbit channel).<br> Some of the files might not download fully. Check the file sizes and re-download any that seem doubtful.</p> <p>Some of the files might contain invalid rows. You can fix them as follows:</p> <div class=codehilite><pre><span></span><code class=syntax>sed -E <span class=s1>'/(.*,){18,}/d'</span> data/yellow_tripdata_2010-02.csv &gt; data/yellow_tripdata_2010-02.csv_
sed -E <span class=s1>'/(.*,){18,}/d'</span> data/yellow_tripdata_2010-03.csv &gt; data/yellow_tripdata_2010-03.csv_
mv data/yellow_tripdata_2010-02.csv_ data/yellow_tripdata_2010-02.csv
mv data/yellow_tripdata_2010-03.csv_ data/yellow_tripdata_2010-03.csv
</code></pre></div> <p>Then the data must be pre-processed in PostgreSQL. This will create selections of points in the polygons (to match points on the map with the boroughs of New York City) and combine all the data into a single denormalized flat table by using a JOIN. To do this, you will need to install PostgreSQL with PostGIS support.</p> <p>Be careful when running <code class=syntax>initialize_database.sh</code> and manually re-check that all the tables were created correctly.</p> <p>It takes about 20-30 minutes to process each month’s worth of data in PostgreSQL, for a total of about 48 hours.</p> <p>You can check the number of downloaded rows as follows:</p> <div class=codehilite><pre><span></span><code class=syntax>$ <span class=nb>time</span> psql nyc-taxi-data -c <span class=s2>"SELECT count(*) FROM trips;"</span>
<span class=c1>## Count</span>
 <span class=m>1298979494</span>
<span class=o>(</span><span class=m>1</span> row<span class=o>)</span>

real    7m9.164s
</code></pre></div> <p>(This is slightly more than 1.1 billion rows reported by Mark Litwintschik in a series of blog posts.)</p> <p>The data in PostgreSQL uses 370 GB of space.</p> <p>Exporting the data from PostgreSQL:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>COPY</span>
<span class=p>(</span>
    <span class=k>SELECT</span> <span class=n>trips</span><span class=p>.</span><span class=n>id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>vendor_id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_datetime</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_datetime</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>store_and_fwd_flag</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>rate_code_id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_longitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_latitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_longitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_latitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>passenger_count</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>trip_distance</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>fare_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>extra</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>mta_tax</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>tip_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>tolls_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>ehail_fee</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>improvement_surcharge</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>total_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>payment_type</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>trip_type</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff</span><span class=p>,</span>

           <span class=n>cab_types</span><span class=p>.</span><span class=k>type</span> <span class=n>cab_type</span><span class=p>,</span>

           <span class=n>weather</span><span class=p>.</span><span class=n>precipitation_tenths_of_mm</span> <span class=n>rain</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>snow_depth_mm</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>snowfall_mm</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>max_temperature_tenths_degrees_celsius</span> <span class=n>max_temp</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>min_temperature_tenths_degrees_celsius</span> <span class=n>min_temp</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>average_wind_speed_tenths_of_meters_per_second</span> <span class=n>wind</span><span class=p>,</span>

           <span class=n>pick_up</span><span class=p>.</span><span class=n>gid</span> <span class=n>pickup_nyct2010_gid</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ctlabel</span> <span class=n>pickup_ctlabel</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>borocode</span> <span class=n>pickup_borocode</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>boroname</span> <span class=n>pickup_boroname</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ct2010</span> <span class=n>pickup_ct2010</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>boroct2010</span> <span class=n>pickup_boroct2010</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>cdeligibil</span> <span class=n>pickup_cdeligibil</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ntacode</span> <span class=n>pickup_ntacode</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ntaname</span> <span class=n>pickup_ntaname</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>puma</span> <span class=n>pickup_puma</span><span class=p>,</span>

           <span class=n>drop_off</span><span class=p>.</span><span class=n>gid</span> <span class=n>dropoff_nyct2010_gid</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ctlabel</span> <span class=n>dropoff_ctlabel</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>borocode</span> <span class=n>dropoff_borocode</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>boroname</span> <span class=n>dropoff_boroname</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ct2010</span> <span class=n>dropoff_ct2010</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>boroct2010</span> <span class=n>dropoff_boroct2010</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>cdeligibil</span> <span class=n>dropoff_cdeligibil</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ntacode</span> <span class=n>dropoff_ntacode</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ntaname</span> <span class=n>dropoff_ntaname</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>puma</span> <span class=n>dropoff_puma</span>
    <span class=k>FROM</span> <span class=n>trips</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>cab_types</span>
        <span class=k>ON</span> <span class=n>trips</span><span class=p>.</span><span class=n>cab_type_id</span> <span class=o>=</span> <span class=n>cab_types</span><span class=p>.</span><span class=n>id</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>central_park_weather_observations_raw</span> <span class=n>weather</span>
        <span class=k>ON</span> <span class=n>weather</span><span class=p>.</span><span class=nb>date</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>pickup_datetime</span><span class=p>::</span><span class=nb>date</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>nyct2010</span> <span class=n>pick_up</span>
        <span class=k>ON</span> <span class=n>pick_up</span><span class=p>.</span><span class=n>gid</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>pickup_nyct2010_gid</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>nyct2010</span> <span class=n>drop_off</span>
        <span class=k>ON</span> <span class=n>drop_off</span><span class=p>.</span><span class=n>gid</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_nyct2010_gid</span>
<span class=p>)</span> <span class=k>TO</span> <span class=s1>'/opt/milovidov/nyc-taxi-data/trips.tsv'</span><span class=p>;</span>
</code></pre></div> <p>The data snapshot is created at a speed of about 50 MB per second. While creating the snapshot, PostgreSQL reads from the disk at a speed of about 28 MB per second.<br> This takes about 5 hours. The resulting TSV file is 590612904969 bytes.</p> <p>Create a temporary table in ClickHouse:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips</span>
<span class=p>(</span>
<span class=n>trip_id</span>                 <span class=n>UInt32</span><span class=p>,</span>
<span class=n>vendor_id</span>               <span class=n>String</span><span class=p>,</span>
<span class=n>pickup_datetime</span>         <span class=n>DateTime</span><span class=p>,</span>
<span class=n>dropoff_datetime</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>DateTime</span><span class=p>),</span>
<span class=n>store_and_fwd_flag</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>)),</span>
<span class=n>rate_code_id</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_longitude</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>pickup_latitude</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>dropoff_longitude</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>dropoff_latitude</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>passenger_count</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>trip_distance</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>fare_amount</span>             <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>extra</span>                   <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>mta_tax</span>                 <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>tip_amount</span>              <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>tolls_amount</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>ehail_fee</span>               <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>improvement_surcharge</span>   <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>total_amount</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>payment_type</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>trip_type</span>               <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup</span>                  <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff</span>                 <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>cab_type</span>                <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>precipitation</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>snow_depth</span>              <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>snowfall</span>                <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>max_temperature</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>min_temperature</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>average_wind_speed</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_nyct2010_gid</span>     <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_ctlabel</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_borocode</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_boroname</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_ct2010</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_boroct2010</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_cdeligibil</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>)),</span>
<span class=n>pickup_ntacode</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_ntaname</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_puma</span>             <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_nyct2010_gid</span>    <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>dropoff_ctlabel</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_borocode</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>dropoff_boroname</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ct2010</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_boroct2010</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_cdeligibil</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ntacode</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ntaname</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_puma</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
</code></pre></div> <p>It is needed for converting fields to more correct data types and, if possible, to eliminate NULLs.</p> <div class=codehilite><pre><span></span><code class=syntax>$ <span class=nb>time</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO trips FORMAT TabSeparated"</span> &lt; trips.tsv

real    75m56.214s
</code></pre></div> <p>Data is read at a speed of 112-140 Mb/second.<br> Loading data into a Log type table in one stream took 76 minutes.<br> The data in this table uses 142 GB.</p> <p>(Importing data directly from Postgres is also possible using <code class=syntax>COPY ... TO PROGRAM</code>.)</p> <p>Unfortunately, all the fields associated with the weather (precipitation…average_wind_speed) were filled with NULL. Because of this, we will remove them from the final data set.</p> <p>To start, we’ll create a table on a single server. Later we will make the table distributed.</p> <p>Create and populate a summary table:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips_mergetree</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>,</span> <span class=n>pickup_datetime</span><span class=p>,</span> <span class=mi>8192</span><span class=p>)</span>
<span class=k>AS</span> <span class=k>SELECT</span>

<span class=n>trip_id</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>vendor_id</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'1'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'2'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'CMT'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'VTS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'DDS'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>'B02512'</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span> <span class=s1>'B02598'</span> <span class=o>=</span> <span class=mi>11</span><span class=p>,</span> <span class=s1>'B02617'</span> <span class=o>=</span> <span class=mi>12</span><span class=p>,</span> <span class=s1>'B02682'</span> <span class=o>=</span> <span class=mi>13</span><span class=p>,</span> <span class=s1>'B02764'</span> <span class=o>=</span> <span class=mi>14</span><span class=p>))</span> <span class=k>AS</span> <span class=n>vendor_id</span><span class=p>,</span>
<span class=n>toDate</span><span class=p>(</span><span class=n>pickup_datetime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_date</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_datetime</span><span class=p>,</span> <span class=n>toDateTime</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_datetime</span><span class=p>,</span>
<span class=n>toDate</span><span class=p>(</span><span class=n>dropoff_datetime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_date</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_datetime</span><span class=p>,</span> <span class=n>toDateTime</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_datetime</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>store_and_fwd_flag</span><span class=p>)</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'Y'</span><span class=p>,</span> <span class=s1>'1'</span><span class=p>,</span> <span class=s1>'2'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>store_and_fwd_flag</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>rate_code_id</span><span class=p>)</span> <span class=k>AS</span> <span class=n>rate_code_id</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_longitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_longitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_latitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_latitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_longitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_longitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_latitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_latitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>passenger_count</span><span class=p>)</span> <span class=k>AS</span> <span class=n>passenger_count</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>trip_distance</span><span class=p>)</span> <span class=k>AS</span> <span class=n>trip_distance</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>fare_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>fare_amount</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>extra</span><span class=p>)</span> <span class=k>AS</span> <span class=n>extra</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>mta_tax</span><span class=p>)</span> <span class=k>AS</span> <span class=n>mta_tax</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>tip_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>tip_amount</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>tolls_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>tolls_amount</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>ehail_fee</span><span class=p>)</span> <span class=k>AS</span> <span class=n>ehail_fee</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>improvement_surcharge</span><span class=p>)</span> <span class=k>AS</span> <span class=n>improvement_surcharge</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>total_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>total_amount</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>((</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>payment_type</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pt</span><span class=p>)</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'CSH'</span><span class=p>,</span> <span class=s1>'CASH'</span><span class=p>,</span> <span class=s1>'Cash'</span><span class=p>,</span> <span class=s1>'CAS'</span><span class=p>,</span> <span class=s1>'Cas'</span><span class=p>,</span> <span class=s1>'1'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'CSH'</span> <span class=p>:</span> <span class=p>(</span><span class=n>pt</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'CRD'</span><span class=p>,</span> <span class=s1>'Credit'</span><span class=p>,</span> <span class=s1>'Cre'</span><span class=p>,</span> <span class=s1>'CRE'</span><span class=p>,</span> <span class=s1>'CREDIT'</span><span class=p>,</span> <span class=s1>'2'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'CRE'</span> <span class=p>:</span> <span class=p>(</span><span class=n>pt</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'NOC'</span><span class=p>,</span> <span class=s1>'No Charge'</span><span class=p>,</span> <span class=s1>'No'</span><span class=p>,</span> <span class=s1>'3'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'NOC'</span> <span class=p>:</span> <span class=p>(</span><span class=n>pt</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'DIS'</span><span class=p>,</span> <span class=s1>'Dispute'</span><span class=p>,</span> <span class=s1>'Dis'</span><span class=p>,</span> <span class=s1>'4'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'DIS'</span> <span class=p>:</span> <span class=s1>'UNK'</span><span class=p>)))</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'CSH'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'CRE'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'UNK'</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'NOC'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'DIS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>))</span> <span class=k>AS</span> <span class=n>payment_type_</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>trip_type</span><span class=p>)</span> <span class=k>AS</span> <span class=n>trip_type</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>toFixedString</span><span class=p>(</span><span class=n>unhex</span><span class=p>(</span><span class=n>pickup</span><span class=p>),</span> <span class=mi>25</span><span class=p>),</span> <span class=n>toFixedString</span><span class=p>(</span><span class=s1>''</span><span class=p>,</span> <span class=mi>25</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>toFixedString</span><span class=p>(</span><span class=n>unhex</span><span class=p>(</span><span class=n>dropoff</span><span class=p>),</span> <span class=mi>25</span><span class=p>),</span> <span class=n>toFixedString</span><span class=p>(</span><span class=s1>''</span><span class=p>,</span> <span class=mi>25</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>cab_type</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'yellow'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'green'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'uber'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>))</span> <span class=k>AS</span> <span class=n>cab_type</span><span class=p>,</span>

<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_nyct2010_gid</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_nyct2010_gid</span><span class=p>,</span>
<span class=n>toFloat32</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_ctlabel</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_ctlabel</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_borocode</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_borocode</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_boroname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_boroname</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_ct2010</span><span class=p>,</span> <span class=s1>'000000'</span><span class=p>),</span> <span class=mi>6</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_ct2010</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_boroct2010</span><span class=p>,</span> <span class=s1>'0000000'</span><span class=p>),</span> <span class=mi>7</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_boroct2010</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_cdeligibil</span><span class=p>,</span> <span class=s1>' '</span><span class=p>))</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_cdeligibil</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_ntacode</span><span class=p>,</span> <span class=s1>'0000'</span><span class=p>),</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_ntacode</span><span class=p>,</span>

<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_ntaname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_ntaname</span><span class=p>,</span>

<span class=n>toUInt16</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_puma</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_puma</span><span class=p>,</span>

<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_nyct2010_gid</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_nyct2010_gid</span><span class=p>,</span>
<span class=n>toFloat32</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_ctlabel</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_ctlabel</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_borocode</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_borocode</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_boroname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_boroname</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_ct2010</span><span class=p>,</span> <span class=s1>'000000'</span><span class=p>),</span> <span class=mi>6</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_ct2010</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_boroct2010</span><span class=p>,</span> <span class=s1>'0000000'</span><span class=p>),</span> <span class=mi>7</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_boroct2010</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_cdeligibil</span><span class=p>,</span> <span class=s1>' '</span><span class=p>))</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_cdeligibil</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_ntacode</span><span class=p>,</span> <span class=s1>'0000'</span><span class=p>),</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_ntacode</span><span class=p>,</span>

<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_ntaname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_ntaname</span><span class=p>,</span>

<span class=n>toUInt16</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_puma</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_puma</span>

<span class=k>FROM</span> <span class=n>trips</span>
</code></pre></div> <p>This takes 3030 seconds at a speed of about 428,000 rows per second.<br> To load it faster, you can create the table with the <code class=syntax>Log</code> engine instead of <code class=syntax>MergeTree</code>. In this case, the download works faster than 200 seconds.</p> <p>The table uses 126 GB of disk space.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>))</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span> <span class=k>WHERE</span> <span class=k>table</span> <span class=o>=</span> <span class=s1>'trips_mergetree'</span> <span class=k>AND</span> <span class=n>active</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─formatReadableSize(sum(bytes))─┐
│ 126.18 GiB                     │
└────────────────────────────────┘
</code></pre></div> <p>Among other things, you can run the OPTIMIZE query on MergeTree. But it’s not required since everything will be fine without it.</p> <h2 id=download-of-prepared-partitions>Download of Prepared Partitions<a class=headerlink href=../amp/#download-of-prepared-partitions title="Permanent link"> </a></h2> <div class=codehilite><pre><span></span><code class=syntax>$ curl -O https://datasets.clickhouse.tech/trips_mergetree/partitions/trips_mergetree.tar
$ tar xvf trips_mergetree.tar -C /var/lib/clickhouse <span class=c1># path to ClickHouse data directory</span>
$ <span class=c1># check permissions of unpacked data, fix if required</span>
$ sudo service clickhouse-server restart
$ clickhouse-client --query <span class=s2>"select count(*) from datasets.trips_mergetree"</span>
</code></pre></div> <div class="admonition info alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Info</p> <p>If you will run the queries described below, you have to use the full table name, <code class=syntax>datasets.trips_mergetree</code>.</p> </div> <h2 id=results-on-single-server>Results on Single Server<a class=headerlink href=../amp/#results-on-single-server title="Permanent link"> </a></h2> <p>Q1:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>cab_type</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>cab_type</span>
</code></pre></div> <p>0.490 seconds.</p> <p>Q2:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>avg</span><span class=p>(</span><span class=n>total_amount</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span>
</code></pre></div> <p>1.224 seconds.</p> <p>Q3:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=n>toYear</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>)</span> <span class=k>AS</span> <span class=k>year</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>year</span>
</code></pre></div> <p>2.104 seconds.</p> <p>Q4:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=n>toYear</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>)</span> <span class=k>AS</span> <span class=k>year</span><span class=p>,</span> <span class=n>round</span><span class=p>(</span><span class=n>trip_distance</span><span class=p>)</span> <span class=k>AS</span> <span class=n>distance</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>trips_mergetree</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>year</span><span class=p>,</span> <span class=n>distance</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>year</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>DESC</span>
</code></pre></div> <p>3.593 seconds.</p> <p>The following server was used:</p> <p>Two Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz, 16 physical kernels total,128 GiB RAM,8x6 TB HD on hardware RAID-5</p> <p>Execution time is the best of three runs. But starting from the second run, queries read data from the file system cache. No further caching occurs: the data is read out and processed in each run.</p> <p>Creating a table on three servers:</p> <p>On each server:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>default</span><span class=p>.</span><span class=n>trips_mergetree_third</span> <span class=p>(</span> <span class=n>trip_id</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>vendor_id</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'1'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'2'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'CMT'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'VTS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'DDS'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>'B02512'</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span> <span class=s1>'B02598'</span> <span class=o>=</span> <span class=mi>11</span><span class=p>,</span> <span class=s1>'B02617'</span> <span class=o>=</span> <span class=mi>12</span><span class=p>,</span> <span class=s1>'B02682'</span> <span class=o>=</span> <span class=mi>13</span><span class=p>,</span> <span class=s1>'B02764'</span> <span class=o>=</span> <span class=mi>14</span><span class=p>),</span>  <span class=n>pickup_date</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>pickup_datetime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>dropoff_date</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>dropoff_datetime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>store_and_fwd_flag</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>rate_code_id</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup_longitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>pickup_latitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>dropoff_longitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>dropoff_latitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>passenger_count</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>trip_distance</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>fare_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>extra</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>mta_tax</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>tip_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>tolls_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>ehail_fee</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>improvement_surcharge</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>total_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>payment_type_</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'UNK'</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'CSH'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'CRE'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'NOC'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'DIS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>),</span>  <span class=n>trip_type</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>25</span><span class=p>),</span>  <span class=n>dropoff</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>25</span><span class=p>),</span>  <span class=n>cab_type</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'yellow'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'green'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'uber'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>),</span>  <span class=n>pickup_nyct2010_gid</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup_ctlabel</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>pickup_borocode</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup_boroname</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>),</span>  <span class=n>pickup_ct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>6</span><span class=p>),</span>  <span class=n>pickup_boroct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>7</span><span class=p>),</span>  <span class=n>pickup_cdeligibil</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>),</span>  <span class=n>pickup_ntacode</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>4</span><span class=p>),</span>  <span class=n>pickup_ntaname</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>),</span>  <span class=n>pickup_puma</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>dropoff_nyct2010_gid</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>dropoff_ctlabel</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>dropoff_borocode</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>dropoff_boroname</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>),</span>  <span class=n>dropoff_ct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>6</span><span class=p>),</span>  <span class=n>dropoff_boroct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>7</span><span class=p>),</span>  <span class=n>dropoff_cdeligibil</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>),</span>  <span class=n>dropoff_ntacode</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>4</span><span class=p>),</span>  <span class=n>dropoff_ntaname</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>),</span>  <span class=n>dropoff_puma</span> <span class=n>UInt16</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>,</span> <span class=n>pickup_datetime</span><span class=p>,</span> <span class=mi>8192</span><span class=p>)</span>
</code></pre></div> <p>On the source server:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips_mergetree_x3</span> <span class=k>AS</span> <span class=n>trips_mergetree_third</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Distributed</span><span class=p>(</span><span class=n>perftest</span><span class=p>,</span> <span class=k>default</span><span class=p>,</span> <span class=n>trips_mergetree_third</span><span class=p>,</span> <span class=n>rand</span><span class=p>())</span>
</code></pre></div> <p>The following query redistributes data:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>trips_mergetree_x3</span> <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span>
</code></pre></div> <p>This takes 2454 seconds.</p> <p>On three servers:</p> <p>Q1: 0.212 seconds.<br> Q2: 0.438 seconds.<br> Q3: 0.733 seconds.<br> Q4: 1.241 seconds.</p> <p>No surprises here, since the queries are scaled linearly.</p> <p>We also have the results from a cluster of 140 servers:</p> <p>Q1: 0.028 sec.<br> Q2: 0.043 sec.<br> Q3: 0.051 sec.<br> Q4: 0.072 sec.</p> <p>In this case, the query processing time is determined above all by network latency.<br> We ran queries using a client located in a Yandex datacenter in Finland on a cluster in Russia, which added about 20 ms of latency.</p> <h2 id=summary>Summary<a class=headerlink href=../amp/#summary title="Permanent link"> </a></h2> <table> <thead> <tr> <th>servers</th> <th>Q1</th> <th>Q2</th> <th>Q3</th> <th>Q4</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>0.490</td> <td>1.224</td> <td>2.104</td> <td>3.593</td> </tr> <tr> <td>3</td> <td>0.212</td> <td>0.438</td> <td>0.733</td> <td>1.241</td> </tr> <tr> <td>140</td> <td>0.028</td> <td>0.043</td> <td>0.051</td> <td>0.072</td> </tr> </tbody> </table> <p><a href=https://clickhouse.tech/docs/en/getting_started/example_datasets/nyc_taxi/ target=_blank>Original article</a> <!--hide--></p> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2021 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/878a159538935028f2d2dce3eb3074d44eb191df rel="external nofollow noreferrer" target=_blank class=text-reset>878a159538</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/en/getting-started/example-datasets/nyc-taxi/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 