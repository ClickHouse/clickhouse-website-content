<!doctype html><html ⚡ lang=ru> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>Инструкция для разработчиков | Документация ClickHouse</title><link href=https://clickhouse.tech/docs/ru/development/developer-instruction/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Инструкция для разработчиков | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/ru/development/developer-instruction/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Инструкция для разработчиков | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}b{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}label{display:inline-block;margin-bottom:.5rem}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-warning{background-color:#ffeeba}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-file-label{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(1.5em+.75rem+2px);padding:.375rem .75rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.custom-file-label::after{position:absolute;top:0;right:0;bottom:0;z-index:3;display:block;height:calc(1.5em+.75rem);padding:.375rem .75rem;line-height:1.5;color:#495057;content:"Browse";background-color:#e9ecef;border-left:inherit;border-radius:0 .25rem .25rem 0}@media(prefers-reduced-motion:reduce){.custom-file-label{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.alert-warning .alert-link{color:#533f03}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.progress{display:-ms-flexbox;display:flex;height:1rem;overflow:hidden;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-warning{background-color:#ffc107}a.bg-warning:focus,a.bg-warning:hover{background-color:#d39e00}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-warning{color:#ffc107}a.text-warning:focus,a.text-warning:hover{color:#ba8b00}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}details{background:#444451;color:#eee;padding:1rem;margin-bottom:1rem;margin-top:1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .k{color:#000;font-weight:700}.syntax .l{color:#08f}.syntax .n{color:#2f1e2e}.syntax .o{color:#800}.syntax .p{color:#2f1e2e}.syntax .cp{color:#8d8687}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .s{color:#48b685}.syntax .na{color:#06b6ef}.syntax .nb{color:#2f1e2e}.syntax .no{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .mi{color:#08f}.syntax .s2{color:#48b685}.syntax .s1{color:#080}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .nb{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <h1 id=instruktsiia-dlia-razrabotchikov>Инструкция для разработчиков<a class=headerlink href=../amp/#instruktsiia-dlia-razrabotchikov title="Permanent link"> </a></h1> <p>Сборка ClickHouse поддерживается на Linux, FreeBSD, Mac OS X.</p> <h1 id=esli-vy-ispolzuete-windows>Если вы используете Windows<a class=headerlink href=../amp/#esli-vy-ispolzuete-windows title="Permanent link"> </a></h1> <p>Если вы используете Windows, вам потребуется создать виртуальную машину с Ubuntu. Для работы с виртуальной машиной, установите VirtualBox. Скачать Ubuntu можно на сайте: <a href=https://www.ubuntu.com/#download target=_blank>https://www.ubuntu.com/#download</a> Создайте виртуальную машину из полученного образа. Выделите для неё не менее 4 GB оперативной памяти. Для запуска терминала в Ubuntu, найдите в меню программу со словом terminal (gnome-terminal, konsole или что-то в этом роде) или нажмите Ctrl+Alt+T.</p> <h1 id=esli-vy-ispolzuete-32-bitnuiu-sistemu>Если вы используете 32-битную систему<a class=headerlink href=../amp/#esli-vy-ispolzuete-32-bitnuiu-sistemu title="Permanent link"> </a></h1> <p>ClickHouse не работает и не собирается на 32-битных системах. Получите доступ к 64-битной системе и продолжайте.</p> <h1 id=sozdanie-repozitoriia-na-github>Создание репозитория на GitHub<a class=headerlink href=../amp/#sozdanie-repozitoriia-na-github title="Permanent link"> </a></h1> <p>Для работы с репозиторием ClickHouse, вам потребуется аккаунт на GitHub. Наверное, он у вас уже есть.</p> <p>Если аккаунта нет - зарегистрируйтесь на <a href=https://github.com/ target=_blank>https://github.com/</a>. Создайте ssh ключи, если их нет, и загрузите публичные ключи на GitHub. Это потребуется для отправки изменений. Для работы с GitHub можно использовать такие же ssh ключи, как и для работы с другими ssh серверами - скорее всего, они уже у вас есть.</p> <p>Создайте fork репозитория ClickHouse. Для этого, на странице <a href=https://github.com/ClickHouse/ClickHouse target=_blank>https://github.com/ClickHouse/ClickHouse</a> нажмите на кнопку «fork» в правом верхнем углу. Вы получите полную копию репозитория ClickHouse на своём аккаунте, которая называется «форк». Процесс разработки состоит в том, чтобы внести нужные изменения в свой форк репозитория, а затем создать «pull request» для принятия изменений в основной репозиторий.</p> <p>Для работы с git репозиториями, установите <code class=syntax>git</code>.</p> <p>В Ubuntu выполните в терминале:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>sudo apt update</span>
<span class=err>sudo apt install git</span>
</code></pre></div> <p>Краткое руководство по использованию Git: <a href=https://education.github.com/git-cheat-sheet-education.pdf target=_blank>https://education.github.com/git-cheat-sheet-education.pdf</a></p> <p>Подробное руководство по использованию Git: <a href=https://git-scm.com/book/ru/v2 target=_blank>https://git-scm.com/book/ru/v2</a></p> <h1 id=klonirovanie-repozitoriia-na-rabochuiu-mashinu>Клонирование репозитория на рабочую машину<a class=headerlink href=../amp/#klonirovanie-repozitoriia-na-rabochuiu-mashinu title="Permanent link"> </a></h1> <p>Затем вам потребуется загрузить исходники для работы на свой компьютер. Это называется «клонирование репозитория», потому что создаёт на вашем компьютере локальную копию репозитория, с которой вы будете работать.</p> <p>Выполните в терминале:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>git clone --recursive git@github.com:ClickHouse/ClickHouse.git</span>
<span class=err>cd ClickHouse</span>
</code></pre></div> <p>Замените <em>yandex</em> на имя вашего аккаунта на GitHub.</p> <p>Эта команда создаст директорию ClickHouse, содержащую рабочую копию проекта.</p> <p>Необходимо, чтобы путь к рабочей копии не содержал пробелы в именах директорий. Это может привести к проблемам в работе системы сборки.</p> <p>Обратите внимание, что репозиторий ClickHouse использует submodules. Так называются ссылки на дополнительные репозитории (например, внешние библиотеки, от которых зависит проект). Это значит, что при клонировании репозитория, следует указывать ключ <code class=syntax>--recursive</code>, как в примере выше. Если репозиторий был клонирован без submodules, то для их скачивания, необходимо выполнить:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>git submodule init</span>
<span class=err>git submodule update</span>
</code></pre></div> <p>Проверить наличие submodules можно с помощью команды <code class=syntax>git submodule status</code>.</p> <p>Если вы получили сообщение об ошибке:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>Permission</span> <span class=n>denied</span> <span class=p>(</span><span class=n>publickey</span><span class=p>).</span>
<span class=n>fatal</span><span class=p>:</span> <span class=n>Could</span> <span class=k>not</span> <span class=k>read</span> <span class=k>from</span> <span class=n>remote</span> <span class=n>repository</span><span class=p>.</span>

<span class=n>Please</span> <span class=n>make</span> <span class=n>sure</span> <span class=n>you</span> <span class=n>have</span> <span class=n>the</span> <span class=n>correct</span> <span class=k>access</span> <span class=n>rights</span>
<span class=k>and</span> <span class=n>the</span> <span class=n>repository</span> <span class=k>exists</span><span class=p>.</span>
</code></pre></div> <p>Как правило это означает, что отсутствуют ssh ключи для соединения с GitHub. Ключи расположены в директории <code class=syntax>~/.ssh</code>. В интерфейсе GitHub, в настройках, необходимо загрузить публичные ключи, чтобы он их понимал.</p> <p>Вы также можете клонировать репозиторий по протоколу https:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>git clone https://github.com/ClickHouse/ClickHouse.git</span>
</code></pre></div> <p>Этот вариант не подходит для отправки изменений на сервер. Вы можете временно его использовать, а затем добавить ssh ключи и заменить адрес репозитория с помощью команды <code class=syntax>git remote</code>.</p> <p>Вы можете также добавить для своего локального репозитория адрес оригинального репозитория Яндекса, чтобы притягивать оттуда обновления:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>git remote add upstream git@github.com:ClickHouse/ClickHouse.git</span>
</code></pre></div> <p>После этого, вы сможете добавлять в свой репозиторий обновления из репозитория Яндекса с помощью команды <code class=syntax>git pull upstream master</code>.</p> <h2 id=rabota-s-sabmoduliami-git>Работа с сабмодулями Git<a class=headerlink href=../amp/#rabota-s-sabmoduliami-git title="Permanent link"> </a></h2> <p>Работа с сабмодулями git может быть достаточно болезненной. Следующие команды позволят содержать их в порядке:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err># ! Каждая команда принимает аргумент --recursive</span>
<span class=err># Обновить URLs удалённого репозитория для каждого сабмодуля, используется относительно редко</span>
<span class=err>git submodule sync</span>
<span class=err># Добавить новые сабмодули</span>
<span class=err>git submodule init</span>
<span class=err># Обновить сабмодули до актуального состояния</span>
<span class=err>git submodule update</span>
<span class=err># Две последние команды могут быть объединены вместе:</span>
<span class=err>git submodule update --init</span>
</code></pre></div> <p>The next commands would help you to reset all submodules to the initial state (!WARING! - any chenges inside will be deleted):<br> Следующие команды помогут сбросить все сабмодули в изначальное состояние (!ВНИМАНИЕ! - все изменения в сабмодулях будут утеряны):</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err># Synchronizes submodules' remote URL with .gitmodules</span>
<span class=err># Обновить URLs удалённого репозитория для каждого сабмодуля</span>
<span class=err>git submodule sync --recursive</span>
<span class=err># Обновить существующие модули и добавить отсутствующие</span>
<span class=err>git submodule update --init --recursive</span>
<span class=err># Удалить все изменения в сабмодуле относительно HEAD</span>
<span class=err>git submodule foreach git reset --hard</span>
<span class=err># Очистить игнорируемые файлы</span>
<span class=err>git submodule foreach git clean -xfd</span>
<span class=err># Повторить последние 4 команды для каждого из сабмодулей</span>
<span class=err>git submodule foreach git submodule sync --recursive</span>
<span class=err>git submodule foreach git submodule update --init --recursive</span>
<span class=err>git submodule foreach git submodule foreach git reset --hard</span>
<span class=err>git submodule foreach git submodule foreach git clean -xfd</span>
</code></pre></div> <h1 id=sistema-sborki>Система сборки<a class=headerlink href=../amp/#sistema-sborki title="Permanent link"> </a></h1> <p>ClickHouse использует систему сборки CMake и Ninja.</p> <p>CMake - генератор задач сборки.<br> Ninja - система запуска сборочных задач.</p> <p>Для установки на Ubuntu или Debian, Mint, выполните <code class=syntax>sudo apt install cmake ninja-build</code>.</p> <p>Для установки на CentOS, RedHat, выполните <code class=syntax>sudo yum install cmake ninja-build</code>.</p> <p>Если у вас Arch или Gentoo, то вы сами знаете, как установить CMake.</p> <p>Для установки CMake и Ninja на Mac OS X, сначала установите Homebrew, а затем, с помощью него, установите всё остальное.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span>
<span class=err>brew install cmake ninja</span>
</code></pre></div> <p>Проверьте версию CMake: <code class=syntax>cmake --version</code>. Если версия меньше 3.3, то установите новую версию с сайта <a href=https://cmake.org/download/ target=_blank>https://cmake.org/download/</a></p> <h1 id=neobiazatelnye-vneshnie-biblioteki>Необязательные внешние библиотеки<a class=headerlink href=../amp/#neobiazatelnye-vneshnie-biblioteki title="Permanent link"> </a></h1> <p>ClickHouse использует для сборки некоторое количество внешних библиотек. Но ни одну из них не требуется отдельно устанавливать, так как они собираются вместе с ClickHouse, из исходников, которые расположены в submodules. Посмотреть набор этих библиотек можно в директории contrib.</p> <h1 id=kompiliator-c>Компилятор C++<a class=headerlink href=../amp/#kompiliator-c title="Permanent link"> </a></h1> <p>В качестве компилятора C++ поддерживается GCC начиная с версии 9 или Clang начиная с версии 8.</p> <p>Официальные сборки от Яндекса, на данный момент, используют GCC, так как он генерирует слегка более производительный машинный код (разница в среднем до нескольких процентов по нашим бенчмаркам). Clang обычно более удобен для разработки. Впрочем, наша среда continuous integration проверяет около десятка вариантов сборки.</p> <p>Для установки GCC под Ubuntu, выполните: <code class=syntax>sudo apt install gcc g++</code>.</p> <p>Проверьте версию gcc: <code class=syntax>gcc --version</code>. Если версия меньше 10, то следуйте инструкции: <a href=https://clickhouse.tech/docs/ru/development/build/#install-gcc-10 target=_blank>https://clickhouse.tech/docs/ru/development/build/#install-gcc-10</a>.</p> <p>Сборка под Mac OS X поддерживается только для компилятора Clang. Чтобы установить его выполните <code class=syntax>brew install llvm</code></p> <p>Если вы решили использовать Clang, вы также можете установить <code class=syntax>libc++</code> и <code class=syntax>lld</code>, если вы знаете, что это такое. При желании, установите <code class=syntax>ccache</code>.</p> <h1 id=protsess-sborki>Процесс сборки<a class=headerlink href=../amp/#protsess-sborki title="Permanent link"> </a></h1> <p>Теперь вы готовы к сборке ClickHouse. Для размещения собранных файлов, рекомендуется создать отдельную директорию build внутри директории ClickHouse:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>mkdir build</span>
<span class=err>cd build</span>
</code></pre></div> <p>Вы можете иметь несколько разных директорий (build_release, build_debug) для разных вариантов сборки.</p> <p>Находясь в директории build, выполните конфигурацию сборки с помощью CMake.<br> Перед первым запуском необходимо выставить переменные окружения, отвечающие за выбор компилятора (в данном примере это - gcc версии 9).</p> <p>Linux:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>export CC=gcc-10 CXX=g++-10</span>
<span class=err>cmake ..</span>
</code></pre></div> <p>Mac OS X:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>export CC=clang CXX=clang++</span>
<span class=err>cmake ..</span>
</code></pre></div> <p>Переменная CC отвечает за компилятор C (сокращение от слов C Compiler), переменная CXX отвечает за выбор компилятора C++ (символ X - это как плюс, но положенный набок, ради того, чтобы превратить его в букву).</p> <p>Для более быстрой сборки, можно использовать debug вариант - сборку без оптимизаций. Для этого, укажите параметр <code class=syntax>-D CMAKE_BUILD_TYPE=Debug</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>cmake -D CMAKE_BUILD_TYPE=Debug ..</span>
</code></pre></div> <p>Вы можете изменить вариант сборки, выполнив эту команду в директории build.</p> <p>Запустите ninja для сборки:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>ninja clickhouse-server clickhouse-client</span>
</code></pre></div> <p>В этом примере собираются только нужные в первую очередь программы.</p> <p>Если вы хотите собрать все программы (утилиты и тесты), то запустите ninja без параметров:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>ninja</span>
</code></pre></div> <p>Для полной сборки требуется около 30 GB свободного места на диске или 15 GB для сборки только основных программ.</p> <p>При наличии небольшого количества оперативной памяти на компьютере, следует ограничить количество параллельных задач с помощью параметра <code class=syntax>-j</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>ninja -j 1 clickhouse-server clickhouse-client</span>
</code></pre></div> <p>На машинах с 4 GB памяти, рекомендуется указывать значение 1, а если памяти до 8 GB, укажите значение 2.</p> <p>Если вы получили сообщение <code class=syntax>ninja: error: loading 'build.ninja': No such file or directory</code>, значит конфигурация сборки прошла с ошибкой и вам необходимо посмотреть на сообщение об ошибке выше.</p> <p>В случае успешного запуска, вы увидите прогресс сборки - количество обработанных задач и общее количество задач.</p> <p>В процессе сборки могут появится сообщения <code class=syntax>libprotobuf WARNING</code> про protobuf файлы в библиотеке libhdfs2. Это не имеет значения.</p> <p>При успешной сборке, вы получите готовый исполняемый файл <code class=syntax>ClickHouse/build/programs/clickhouse</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>ls -l programs/clickhouse</span>
</code></pre></div> <h1 id=zapusk-sobrannoi-versii-clickhouse>Запуск собранной версии ClickHouse<a class=headerlink href=../amp/#zapusk-sobrannoi-versii-clickhouse title="Permanent link"> </a></h1> <p>Для запуска сервера из под текущего пользователя, с выводом логов в терминал и с использованием примеров конфигурационных файлов, расположенных в исходниках, перейдите в директорию <code class=syntax>ClickHouse/programs/server/</code> (эта директория находится не в директории build) и выполните:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cp>../../build/programs/clickhouse server</span>
</code></pre></div> <p>В этом случае, ClickHouse будет использовать конфигурационные файлы, расположенные в текущей директории. Вы можете запустить <code class=syntax>clickhouse server</code> из любой директории, передав ему путь к конфигурационному файлу в аргументе командной строки <code class=syntax>--config-file</code>.</p> <p>Для подключения к ClickHouse с помощью clickhouse-client, в соседнем терминале, зайдите в директорию <code class=syntax>ClickHouse/build/programs/</code> и выполните <code class=syntax>./clickhouse client</code>.</p> <p>Если вы получили сообщение <code class=syntax>Connection refused</code> на Mac OS X или FreeBSD, то укажите для клиента 127.0.0.1 в качестве имени хоста:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>clickhouse client --host 127.0.0.1</span>
</code></pre></div> <p>Вы можете заменить собранным вами ClickHouse продакшен версию, установленную в системе. Для этого, установите ClickHouse на свою машину по инструкции с официального сайта. Затем выполните:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>sudo service clickhouse-server stop</span>
<span class=err>sudo cp ClickHouse/build/programs/clickhouse /usr/bin/</span>
<span class=err>sudo service clickhouse-server start</span>
</code></pre></div> <p>Обратите внимание, что <code class=syntax>clickhouse-client</code>, <code class=syntax>clickhouse-server</code> и другие, являеются симлинками на общий бинарник <code class=syntax>clickhouse</code>.</p> <p>Также вы можете запустить собранный вами ClickHouse с конфигурационным файлом системного ClickHouse:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>sudo service clickhouse-server stop</span>
<span class=err>sudo -u clickhouse ClickHouse/build/programs/clickhouse server --config-file /etc/clickhouse-server/config.xml</span>
</code></pre></div> <h1 id=sreda-razrabotki>Среда разработки<a class=headerlink href=../amp/#sreda-razrabotki title="Permanent link"> </a></h1> <p>Если вы не знаете, какую среду разработки использовать, то рекомендуется использовать CLion. CLion является платным ПО, но его можно использовать бесплатно в течение пробного периода. Также он бесплатен для учащихся. CLion можно использовать как под Linux, так и под Mac OS X.</p> <p>Также в качестве среды разработки, вы можете использовать KDevelop или QTCreator. KDevelop - очень удобная, но нестабильная среда разработки. Если KDevelop вылетает через небольшое время после открытия проекта, вам следует нажать на кнопку «Stop All» как только он открыл список файлов проекта. После этого, KDevelop можно будет использовать.</p> <p>В качестве простых редакторов кода можно использовать Sublime Text или Visual Studio Code или Kate (все варианты доступны под Linux).</p> <p>На всякий случай заметим, что CLion самостоятельно создаёт свою build директорию, самостоятельно выбирает тип сборки debug по-умолчанию, для конфигурации использует встроенную в CLion версию CMake вместо установленного вами, а для запуска задач использует make вместо ninja. Это нормально, просто имейте это ввиду, чтобы не возникало путаницы.</p> <h1 id=napisanie-koda>Написание кода<a class=headerlink href=../amp/#napisanie-koda title="Permanent link"> </a></h1> <p>Описание архитектуры ClickHouse: <a href=https://clickhouse.tech/docs/ru/development/architecture/ target=_blank>https://clickhouse.tech/docs/ru/development/architecture/</a></p> <p>Стиль кода: <a href=https://clickhouse.tech/docs/ru/development/style/ target=_blank>https://clickhouse.tech/docs/ru/development/style/</a></p> <p>Разработка тестов: <a href=https://clickhouse.tech/docs/ru/development/tests/ target=_blank>https://clickhouse.tech/docs/ru/development/tests/</a></p> <p>Список задач: <a href="https://github.com/ClickHouse/ClickHouse/issues?q=is%3Aopen+is%3Aissue+label%3A%22easy+task%22" target=_blank>https://github.com/ClickHouse/ClickHouse/issues?q=is%3Aopen+is%3Aissue+label%3A%22easy+task%22</a></p> <h1 id=testovye-dannye>Тестовые данные<a class=headerlink href=../amp/#testovye-dannye title="Permanent link"> </a></h1> <p>Разработка ClickHouse часто требует загрузки реалистичных наборов данных. Особенно это важно для тестирования производительности. Специально для вас мы подготовили набор данных, представляющий собой анонимизированные данные Яндекс.Метрики. Загрузка этих данных потребует ещё 3 GB места на диске. Для выполнения большинства задач разработки, загружать эти данные не обязательно.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>sudo</span> <span class=n>apt</span> <span class=n>install</span> <span class=n>wget</span> <span class=n>xz</span><span class=o>-</span><span class=n>utils</span>

<span class=n>wget</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>datasets</span><span class=p>.</span><span class=n>clickhouse</span><span class=p>.</span><span class=n>tech</span><span class=o>/</span><span class=n>hits</span><span class=o>/</span><span class=n>tsv</span><span class=o>/</span><span class=n>hits_v1</span><span class=p>.</span><span class=n>tsv</span><span class=p>.</span><span class=n>xz</span>
<span class=n>wget</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>datasets</span><span class=p>.</span><span class=n>clickhouse</span><span class=p>.</span><span class=n>tech</span><span class=o>/</span><span class=n>visits</span><span class=o>/</span><span class=n>tsv</span><span class=o>/</span><span class=n>visits_v1</span><span class=p>.</span><span class=n>tsv</span><span class=p>.</span><span class=n>xz</span>

<span class=n>xz</span> <span class=o>-</span><span class=n>v</span> <span class=o>-</span><span class=n>d</span> <span class=n>hits_v1</span><span class=p>.</span><span class=n>tsv</span><span class=p>.</span><span class=n>xz</span>
<span class=n>xz</span> <span class=o>-</span><span class=n>v</span> <span class=o>-</span><span class=n>d</span> <span class=n>visits_v1</span><span class=p>.</span><span class=n>tsv</span><span class=p>.</span><span class=n>xz</span>

<span class=n>clickhouse</span><span class=o>-</span><span class=n>client</span>

<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=p>(</span> <span class=n>WatchID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>JavaEnable</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Title</span> <span class=n>String</span><span class=p>,</span>  <span class=n>GoodEvent</span> <span class=n>Int16</span><span class=p>,</span>  <span class=n>EventTime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>EventDate</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>CounterID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClientIP</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClientIP6</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>  <span class=n>RegionID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>UserID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>CounterClass</span> <span class=nb>Int8</span><span class=p>,</span>  <span class=n>OS</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>UserAgent</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>URL</span> <span class=n>String</span><span class=p>,</span>  <span class=n>Referer</span> <span class=n>String</span><span class=p>,</span>  <span class=n>URLDomain</span> <span class=n>String</span><span class=p>,</span>  <span class=n>RefererDomain</span> <span class=n>String</span><span class=p>,</span>  <span class=n>Refresh</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsRobot</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>RefererCategories</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=n>URLCategories</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=n>URLRegions</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=n>RefererRegions</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=n>ResolutionWidth</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>ResolutionHeight</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>ResolutionDepth</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>FlashMajor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>FlashMinor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>FlashMinor2</span> <span class=n>String</span><span class=p>,</span>  <span class=n>NetMajor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>NetMinor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>UserAgentMajor</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>UserAgentMinor</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span>  <span class=n>CookieEnable</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>JavascriptEnable</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsMobile</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>MobilePhone</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>MobilePhoneModel</span> <span class=n>String</span><span class=p>,</span>  <span class=n>Params</span> <span class=n>String</span><span class=p>,</span>  <span class=n>IPNetworkID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>TraficSourceID</span> <span class=nb>Int8</span><span class=p>,</span>  <span class=n>SearchEngineID</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>SearchPhrase</span> <span class=n>String</span><span class=p>,</span>  <span class=n>AdvEngineID</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsArtifical</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>WindowClientWidth</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>WindowClientHeight</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>ClientTimeZone</span> <span class=n>Int16</span><span class=p>,</span>  <span class=n>ClientEventTime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>SilverlightVersion1</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>SilverlightVersion2</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>SilverlightVersion3</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>SilverlightVersion4</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>PageCharset</span> <span class=n>String</span><span class=p>,</span>  <span class=n>CodeVersion</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>IsLink</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsDownload</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsNotBounce</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>FUniqID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>HID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>IsOldCounter</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsEvent</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsParameter</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>DontCountHits</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>WithHash</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>HitColor</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span>  <span class=n>UTCEventTime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>Age</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Sex</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Income</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Interests</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>Robotness</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>GeneralInterests</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=n>RemoteIP</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>RemoteIP6</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>  <span class=n>WindowName</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>OpenerName</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>HistoryLength</span> <span class=n>Int16</span><span class=p>,</span>  <span class=n>BrowserLanguage</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span>  <span class=n>BrowserCountry</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span>  <span class=n>SocialNetwork</span> <span class=n>String</span><span class=p>,</span>  <span class=n>SocialAction</span> <span class=n>String</span><span class=p>,</span>  <span class=n>HTTPError</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>SendTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>DNSTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ConnectTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ResponseStartTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ResponseEndTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>FetchTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>RedirectTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>DOMInteractiveTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>DOMContentLoadedTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>DOMCompleteTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>LoadEventStartTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>LoadEventEndTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>NSToDOMContentLoadedTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>FirstPaintTiming</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>RedirectCount</span> <span class=nb>Int8</span><span class=p>,</span>  <span class=n>SocialSourceNetworkID</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>SocialSourcePage</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ParamPrice</span> <span class=n>Int64</span><span class=p>,</span>  <span class=n>ParamOrderID</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ParamCurrency</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span>  <span class=n>ParamCurrencyID</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>GoalsReached</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=n>OpenstatServiceName</span> <span class=n>String</span><span class=p>,</span>  <span class=n>OpenstatCampaignID</span> <span class=n>String</span><span class=p>,</span>  <span class=n>OpenstatAdID</span> <span class=n>String</span><span class=p>,</span>  <span class=n>OpenstatSourceID</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMSource</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMMedium</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMCampaign</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMContent</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMTerm</span> <span class=n>String</span><span class=p>,</span>  <span class=n>FromTag</span> <span class=n>String</span><span class=p>,</span>  <span class=n>HasGCLID</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>RefererHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>URLHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>CLID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>YCLID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>ShareService</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ShareURL</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ShareTitle</span> <span class=n>String</span><span class=p>,</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key1</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key2</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key3</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key4</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key5</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>ValueDouble</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>  <span class=n>IslandID</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>  <span class=n>RequestNum</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>RequestTry</span> <span class=n>UInt8</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span> <span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span> <span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=n>EventTime</span><span class=p>);</span>

<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>test</span><span class=p>.</span><span class=n>visits</span> <span class=p>(</span> <span class=n>CounterID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>StartDate</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>Sign</span> <span class=nb>Int8</span><span class=p>,</span>  <span class=n>IsNew</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>VisitID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>UserID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>StartTime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>Duration</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>UTCStartTime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>PageViews</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>Hits</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>IsBounce</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Referer</span> <span class=n>String</span><span class=p>,</span>  <span class=n>StartURL</span> <span class=n>String</span><span class=p>,</span>  <span class=n>RefererDomain</span> <span class=n>String</span><span class=p>,</span>  <span class=n>StartURLDomain</span> <span class=n>String</span><span class=p>,</span>  <span class=n>EndURL</span> <span class=n>String</span><span class=p>,</span>  <span class=n>LinkURL</span> <span class=n>String</span><span class=p>,</span>  <span class=n>IsDownload</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>TraficSourceID</span> <span class=nb>Int8</span><span class=p>,</span>  <span class=n>SearchEngineID</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>SearchPhrase</span> <span class=n>String</span><span class=p>,</span>  <span class=n>AdvEngineID</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>PlaceID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>RefererCategories</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=n>URLCategories</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=n>URLRegions</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=n>RefererRegions</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=n>IsYandex</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>GoalReachesDepth</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>GoalReachesURL</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>GoalReachesAny</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>SocialSourceNetworkID</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>SocialSourcePage</span> <span class=n>String</span><span class=p>,</span>  <span class=n>MobilePhoneModel</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ClientEventTime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>RegionID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClientIP</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClientIP6</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>  <span class=n>RemoteIP</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>RemoteIP6</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>  <span class=n>IPNetworkID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>SilverlightVersion3</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>CodeVersion</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ResolutionWidth</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>ResolutionHeight</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>UserAgentMajor</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>UserAgentMinor</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>WindowClientWidth</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>WindowClientHeight</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>SilverlightVersion2</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>SilverlightVersion4</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>FlashVersion3</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>FlashVersion4</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>ClientTimeZone</span> <span class=n>Int16</span><span class=p>,</span>  <span class=n>OS</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>UserAgent</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>ResolutionDepth</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>FlashMajor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>FlashMinor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>NetMajor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>NetMinor</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>MobilePhone</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>SilverlightVersion1</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Age</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Sex</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>Income</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>JavaEnable</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>CookieEnable</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>JavascriptEnable</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>IsMobile</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>BrowserLanguage</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>BrowserCountry</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>Interests</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>Robotness</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>GeneralInterests</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=n>Params</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>Goals</span><span class=p>.</span><span class=n>ID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Goals</span><span class=p>.</span><span class=nb>Serial</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Goals</span><span class=p>.</span><span class=n>EventTime</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>DateTime</span><span class=p>),</span>  <span class=o>`</span><span class=n>Goals</span><span class=p>.</span><span class=n>Price</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>Int64</span><span class=p>),</span>  <span class=o>`</span><span class=n>Goals</span><span class=p>.</span><span class=n>OrderID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>Goals</span><span class=p>.</span><span class=n>CurrencyID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=n>WatchIDs</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt64</span><span class=p>),</span>  <span class=n>ParamSumPrice</span> <span class=n>Int64</span><span class=p>,</span>  <span class=n>ParamCurrency</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span>  <span class=n>ParamCurrencyID</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>ClickLogID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>ClickEventID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickGoodEvent</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickEventTime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>ClickPriorityID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickPhraseID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickPageID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickPlaceID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickTypeID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickResourceID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>ClickCost</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClickClientIP</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClickDomainID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClickURL</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ClickAttempt</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>ClickOrderID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClickBannerID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClickMarketCategoryID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClickMarketPP</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>ClickMarketCategoryName</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ClickMarketPPName</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ClickAWAPSCampaignName</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ClickPageName</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ClickTargetType</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>ClickTargetPhraseID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>ClickContextType</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>ClickSelectType</span> <span class=nb>Int8</span><span class=p>,</span>  <span class=n>ClickOptions</span> <span class=n>String</span><span class=p>,</span>  <span class=n>ClickGroupBannerID</span> <span class=n>Int32</span><span class=p>,</span>  <span class=n>OpenstatServiceName</span> <span class=n>String</span><span class=p>,</span>  <span class=n>OpenstatCampaignID</span> <span class=n>String</span><span class=p>,</span>  <span class=n>OpenstatAdID</span> <span class=n>String</span><span class=p>,</span>  <span class=n>OpenstatSourceID</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMSource</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMMedium</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMCampaign</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMContent</span> <span class=n>String</span><span class=p>,</span>  <span class=n>UTMTerm</span> <span class=n>String</span><span class=p>,</span>  <span class=n>FromTag</span> <span class=n>String</span><span class=p>,</span>  <span class=n>HasGCLID</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>FirstVisit</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>PredLastVisit</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>LastVisit</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>TotalVisits</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=n>ID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=nb>Int8</span><span class=p>),</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=n>SearchEngineID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=n>AdvEngineID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=n>PlaceID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt16</span><span class=p>),</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=n>SocialSourceNetworkID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=k>Domain</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=n>SearchPhrase</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>TraficSource</span><span class=p>.</span><span class=n>SocialSourcePage</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=n>Attendance</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>),</span>  <span class=n>CLID</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>YCLID</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>NormalizedRefererHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>SearchPhraseHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>RefererDomainHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>NormalizedStartURLHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>StartURLDomainHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>NormalizedEndURLHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>TopLevelDomain</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>URLScheme</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>OpenstatServiceNameHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>OpenstatCampaignIDHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>OpenstatAdIDHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>OpenstatSourceIDHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>UTMSourceHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>UTMMediumHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>UTMCampaignHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>UTMContentHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>UTMTermHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>FromHash</span> <span class=n>UInt64</span><span class=p>,</span>  <span class=n>WebVisorEnabled</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>WebVisorActivity</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key1</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key2</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key3</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key4</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>Key5</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>ParsedParams</span><span class=p>.</span><span class=n>ValueDouble</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=k>Type</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>GoalID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>OrderID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>OrderPrice</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>Int64</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>PP</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>DirectPlaceID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>DirectOrderID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>DirectBannerID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>GoodID</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>GoodName</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>GoodQuantity</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>Int32</span><span class=p>),</span>  <span class=o>`</span><span class=n>Market</span><span class=p>.</span><span class=n>GoodPrice</span><span class=o>`</span> <span class=nb>Array</span><span class=p>(</span><span class=n>Int64</span><span class=p>),</span>  <span class=n>IslandID</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>16</span><span class=p>))</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>CollapsingMergeTree</span><span class=p>(</span><span class=n>Sign</span><span class=p>)</span> <span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>StartDate</span><span class=p>)</span> <span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>StartDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=n>VisitID</span><span class=p>);</span>

<span class=n>clickhouse</span><span class=o>-</span><span class=n>client</span> <span class=c1>--max_insert_block_size 100000 --query "INSERT INTO test.hits FORMAT TSV" &lt; hits_v1.tsv</span>
<span class=n>clickhouse</span><span class=o>-</span><span class=n>client</span> <span class=c1>--max_insert_block_size 100000 --query "INSERT INTO test.visits FORMAT TSV" &lt; visits_v1.tsv</span>
</code></pre></div> <h1 id=sozdanie-pull-request>Создание Pull Request<a class=headerlink href=../amp/#sozdanie-pull-request title="Permanent link"> </a></h1> <p>Откройте свой форк репозитория в интерфейсе GitHub. Если вы вели разработку в бранче, выберите этот бранч. На странице будет доступна кнопка «Pull request». По сути, это означает «создать заявку на принятие моих изменений в основной репозиторий».</p> <p>Pull request можно создать, даже если работа над задачей ещё не завершена. В этом случае, добавьте в его название слово «WIP» (work in progress). Название можно будет изменить позже. Это полезно для совместного просмотра и обсуждения изменений, а также для запуска всех имеющихся тестов. Введите краткое описание изменений - впоследствии, оно будет использовано для релизных changelog.</p> <p>Тесты будут запущены, как только сотрудники Яндекса поставят для pull request тег «Can be tested». Результаты первых проверок (стиль кода) появятся уже через несколько минут. Результаты сборки появятся примерно через пол часа. Результаты основного набора тестов будут доступны в пределах часа.</p> <p>Система подготовит сборки ClickHouse специально для вашего pull request. Для их получения, нажмите на ссылку «Details» у проверки «Clickhouse build check». Там вы сможете найти прямые ссылки на собранные .deb пакеты ClickHouse, которые, при желании, вы даже сможете установить на свои продакшен серверы (если не страшно).</p> <p>Вероятнее всего, часть сборок не будет успешной с первого раза. Ведь мы проверяем сборку кода и gcc и clang, а при сборке с помощью clang включаются почти все существующие в природе warnings (всегда с флагом <code class=syntax>-Werror</code>). На той же странице, вы сможете найти логи сборки - вам не обязательно самому собирать ClickHouse всеми возможными способами.</p> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/ru/development/developer-instruction/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 