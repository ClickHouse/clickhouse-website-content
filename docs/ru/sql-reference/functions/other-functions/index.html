<!DOCTYPE html><html lang=ru data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Прочие функции | Документация ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/logo-180x180.png><meta property=og:title content="Прочие функции | Документация ClickHouse"><meta property=og:description content="Прочие функции hostName() Возвращает строку - имя хоста, на котором эта функция была выполнена. При распределённой обраб"><meta property=og:type content=article><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta content=https://clickhouse.tech/docs/ru/sql-reference/functions/other-functions/ property=og:url><link href=https://clickhouse.tech/docs/ru/sql-reference/functions/other-functions/ rel=canonical><link href=https://clickhouse.tech/docs/ru/sql-reference/functions/other-functions/amp/ rel=amphtml><link rel=search href=/opensearch.xml title=ClickHouse type=application/opensearchdescription+xml><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Прочие функции | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/ru/sql-reference/functions/other-functions/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Прочие функции | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><meta name=description content="Прочие функции hostName() Возвращает строку - имя хоста, на котором эта функция была выполнена. При распределённой обраб"><meta name=keywords content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics"><link rel=alternate href=https://clickhouse.tech/docs/en/sql-reference/functions/other-functions/ hreflang=en><link rel=alternate href=https://clickhouse.tech/docs/zh/sql-reference/functions/other-functions/ hreflang=zh><link rel=alternate href=https://clickhouse.tech/docs/ru/sql-reference/functions/other-functions/ hreflang=ru><link rel=alternate href=https://clickhouse.tech/docs/ja/sql-reference/functions/other-functions/ hreflang=ja><link rel=alternate href=https://clickhouse.tech/docs/en/sql-reference/functions/other-functions/ hreflang=x-default><link href=/css/base.css?48d3d791 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Прочие функции </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li id=edit-wrapper class=nav-item> <a id=edit-link href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/sql-reference/functions/other-functions.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ru.svg alt=Русский title=Русский width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/sql-reference/functions/other-functions/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/sql-reference/functions/other-functions/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/ru/sql-reference/functions/other-functions/ class="dropdown-item disabled"> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/sql-reference/functions/other-functions/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Введение class="nav-link text-light dropdown-toggle px-0">Введение</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../../introduction/distinctive-features/ title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a> <a href=../../../introduction/performance/ title=Производительность class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a> <a href=../../../introduction/history/ title="История ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">История ClickHouse</a> <a href=../../../introduction/adopters/ title=Adopters class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a> <a href=../../../introduction/info/ title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Начало работы" class="nav-link text-light dropdown-toggle px-0">Начало работы</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting-started/install/ title=Установка class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a> <a href=../../../getting-started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../../getting-started/playground/ title=Playground class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a> <a href=#sidebar-sidebar-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-5 title="Тестовые массивы данных" class="nav-link text-light dropdown-toggle px-0">Тестовые массивы данных</a> <div id=sidebar-sidebar-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting-started/example-datasets/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../getting-started/example-datasets/metrica/ title="Анонимизированные данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Анонимизированные данные Яндекс.Метрики</a> <a href=../../../getting-started/example-datasets/star-schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../../getting-started/example-datasets/recipes/ title="Набор данных кулинарных рецептов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Набор данных кулинарных рецептов</a> <a href=../../../getting-started/example-datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting-started/example-datasets/criteo/ title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a> <a href=../../../getting-started/example-datasets/amplab-benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting-started/example-datasets/brown-benchmark/ title="Brown University Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Brown University Benchmark</a> <a href=../../../getting-started/example-datasets/nyc-taxi/ title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a> <a href=../../../getting-started/example-datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting-started/example-datasets/cell-towers/ title="Вышки сотовой связи" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Вышки сотовой связи</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Интерфейсы class="nav-link text-light dropdown-toggle px-0">Интерфейсы</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../interfaces/cli/ title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a> <a href=../../../interfaces/tcp/ title="Родной интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Родной интерфейс (TCP)</a> <a href=../../../interfaces/http/ title=HTTP-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a> <a href=../../../interfaces/mysql/ title=MySQL-интерфейс class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL-интерфейс</a> <a href=../../../interfaces/formats/ title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a> <a href=../../../interfaces/jdbc/ title=JDBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a> <a href=../../../interfaces/odbc/ title=ODBC-драйвер class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a> <a href=../../../interfaces/cpp/ title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a> <a href=#sidebar-sidebar-3-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-10 title="Сторонние интерфейсы" class="nav-link text-light dropdown-toggle px-0">Сторонние интерфейсы</a> <div id=sidebar-sidebar-3-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title="Сторонние интерфейсы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Сторонние интерфейсы</a> <a href=../../../interfaces/third-party/client-libraries/ title="Клиентские библиотеки от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки от сторонних разработчиков</a> <a href=../../../interfaces/third-party/integrations/ title="Библиотеки для интеграции от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Библиотеки для интеграции от сторонних разработчиков</a> <a href=../../../interfaces/third-party/gui/ title="Визуальные интерфейсы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы от сторонних разработчиков</a> <a href=../../../interfaces/third-party/proxy/ title="Прокси-серверы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси-серверы от сторонних разработчиков</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Engines class="nav-link text-light dropdown-toggle px-0">Engines</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title="Движки таблиц" class="nav-link text-light dropdown-toggle px-0">Движки таблиц</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-4-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-2 title="MergeTree Family" class="nav-link text-light dropdown-toggle px-0">MergeTree Family</a> <div id=sidebar-sidebar-4-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/mergetree-family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table-engines/mergetree-family/replication/ title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a> <a href=../../../engines/table-engines/mergetree-family/custom-partitioning-key/ title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a> <a href=../../../engines/table-engines/mergetree-family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/collapsingmergetree/ title=CollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-4-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-3 title="Семейство Log" class="nav-link text-light dropdown-toggle px-0">Семейство Log</a> <div id=sidebar-sidebar-4-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/log-family/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../engines/table-engines/log-family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table-engines/log-family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../engines/table-engines/log-family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-4-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-4 title="Движки таблиц для интеграции" class="nav-link text-light dropdown-toggle px-0">Движки таблиц для интеграции</a> <div id=sidebar-sidebar-4-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table-engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table-engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table-engines/integrations/s3/ title=S3 class="nav-link text-light text-wrap d-inline-block w-100 px-0">S3</a> <a href=../../../engines/table-engines/integrations/mongodb/ title=MongoDB class="nav-link text-light text-wrap d-inline-block w-100 px-0">MongoDB</a> <a href=../../../engines/table-engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../../engines/table-engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../engines/table-engines/integrations/embedded-rocksdb/ title=EmbeddedRocksDB class="nav-link text-light text-wrap d-inline-block w-100 px-0">EmbeddedRocksDB</a> <a href=../../../engines/table-engines/integrations/postgresql/ title=PostgreSQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">PostgreSQL</a> <a href=../../../engines/table-engines/integrations/ExternalDistributed/ title=ExternalDistributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">ExternalDistributed</a> <a href=../../../engines/table-engines/integrations/ title="Движки таблиц для интеграции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки таблиц для интеграции</a> <a href=../../../engines/table-engines/integrations/rabbitmq/ title=RabbitMQ class="nav-link text-light text-wrap d-inline-block w-100 px-0">RabbitMQ</a> </nav> </div> <a href=#sidebar-sidebar-4-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-5 title="Специальные движки таблиц" class="nav-link text-light dropdown-toggle px-0">Специальные движки таблиц</a> <div id=sidebar-sidebar-4-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/special/ title="Специальные движки таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Специальные движки таблиц</a> <a href=../../../engines/table-engines/special/distributed/ title=Distributed class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a> <a href=../../../engines/table-engines/special/dictionary/ title=Dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a> <a href=../../../engines/table-engines/special/merge/ title=Merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a> <a href=../../../engines/table-engines/special/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../../engines/table-engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table-engines/special/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../engines/table-engines/special/join/ title=Join class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a> <a href=../../../engines/table-engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../engines/table-engines/special/view/ title=View class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a> <a href=../../../engines/table-engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table-engines/special/memory/ title=Memory class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a> <a href=../../../engines/table-engines/special/buffer/ title=Buffer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a> <a href=../../../engines/table-engines/special/external-data/ title="Внешние данные для обработки запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные для обработки запроса</a> <a href=../../../engines/table-engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3 title="Движки баз данных" class="nav-link text-light dropdown-toggle px-0">Движки баз данных</a> <div id=sidebar-sidebar-4-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database-engines/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../engines/database-engines/materialize-mysql/ title=MaterializeMySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializeMySQL</a> <a href=../../../engines/database-engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database-engines/lazy/ title=Lazy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a> <a href=../../../engines/database-engines/atomic/ title=Atomic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a> <a href=../../../engines/database-engines/postgresql/ title=PostgreSQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">PostgreSQL</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Справка по SQL" class="nav-link text-light dropdown-toggle px-0">Справка по SQL</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title=Выражения class="nav-link text-light dropdown-toggle px-0">Выражения</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/statements/ title="SQL выражения в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SQL выражения в ClickHouse</a> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title=SELECT class="nav-link text-light dropdown-toggle px-0">SELECT</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/statements/select/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../../sql-reference/statements/select/all/ title=ALL class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALL</a> <a href=../../../sql-reference/statements/select/array-join/ title="ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN</a> <a href=../../../sql-reference/statements/select/distinct/ title=DISTINCT class="nav-link text-light text-wrap d-inline-block w-100 px-0">DISTINCT</a> <a href=../../../sql-reference/statements/select/format/ title=FORMAT class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT</a> <a href=../../../sql-reference/statements/select/from/ title=FROM class="nav-link text-light text-wrap d-inline-block w-100 px-0">FROM</a> <a href=../../../sql-reference/statements/select/group-by/ title="GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GROUP BY</a> <a href=../../../sql-reference/statements/select/having/ title=HAVING class="nav-link text-light text-wrap d-inline-block w-100 px-0">HAVING</a> <a href=../../../sql-reference/statements/select/into-outfile/ title="INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE</a> <a href=../../../sql-reference/statements/select/join/ title=JOIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">JOIN</a> <a href=../../../sql-reference/statements/select/limit/ title=LIMIT class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a> <a href=../../../sql-reference/statements/select/limit-by/ title="LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT BY</a> <a href=../../../sql-reference/statements/select/offset/ title=OFFSET class="nav-link text-light text-wrap d-inline-block w-100 px-0">OFFSET</a> <a href=../../../sql-reference/statements/select/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../../sql-reference/statements/select/prewhere/ title=PREWHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE</a> <a href=../../../sql-reference/statements/select/sample/ title=SAMPLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE</a> <a href=../../../sql-reference/statements/select/union/ title=UNION class="nav-link text-light text-wrap d-inline-block w-100 px-0">UNION</a> <a href=../../../sql-reference/statements/select/where/ title=WHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">WHERE</a> <a href=../../../sql-reference/statements/select/with/ title=WITH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WITH</a> </nav> </div> <a href=../../../sql-reference/statements/insert-into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=#sidebar-sidebar-5-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-4 title=CREATE class="nav-link text-light dropdown-toggle px-0">CREATE</a> <div id=sidebar-sidebar-5-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/statements/create/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../../sql-reference/statements/create/database/ title="База данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">База данных</a> <a href=../../../sql-reference/statements/create/table/ title=Таблица class="nav-link text-light text-wrap d-inline-block w-100 px-0">Таблица</a> <a href=../../../sql-reference/statements/create/view/ title=Представление class="nav-link text-light text-wrap d-inline-block w-100 px-0">Представление</a> <a href=../../../sql-reference/statements/create/dictionary/ title=Словарь class="nav-link text-light text-wrap d-inline-block w-100 px-0">Словарь</a> <a href=../../../sql-reference/statements/create/user/ title=Пользователь class="nav-link text-light text-wrap d-inline-block w-100 px-0">Пользователь</a> <a href=../../../sql-reference/statements/create/role/ title=Роль class="nav-link text-light text-wrap d-inline-block w-100 px-0">Роль</a> <a href=../../../sql-reference/statements/create/row-policy/ title="Политика доступа" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Политика доступа</a> <a href=../../../sql-reference/statements/create/quota/ title=Квота class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квота</a> <a href=../../../sql-reference/statements/create/settings-profile/ title="Профиль настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профиль настроек</a> </nav> </div> <a href=#sidebar-sidebar-5-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-5 title=ALTER class="nav-link text-light dropdown-toggle px-0">ALTER</a> <div id=sidebar-sidebar-5-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql-reference/statements/alter/column/ title="Манипуляции со столбцами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Манипуляции со столбцами</a> <a href=../../../sql-reference/statements/alter/partition/ title=PARTITION class="nav-link text-light text-wrap d-inline-block w-100 px-0">PARTITION</a> <a href=../../../sql-reference/statements/alter/delete/ title=DELETE class="nav-link text-light text-wrap d-inline-block w-100 px-0">DELETE</a> <a href=../../../sql-reference/statements/alter/update/ title=UPDATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">UPDATE</a> <a href=../../../sql-reference/statements/alter/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../../sql-reference/statements/alter/sample-by/ title="SAMPLE BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE BY</a> <a href=../../../sql-reference/statements/alter/index/ title="Манипуляции с индексами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Манипуляции с индексами</a> <a href=../../../sql-reference/statements/alter/constraint/ title="Манипуляции с ограничениями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Манипуляции с ограничениями</a> <a href=../../../sql-reference/statements/alter/ttl/ title=TTL class="nav-link text-light text-wrap d-inline-block w-100 px-0">TTL</a> <a href=../../../sql-reference/statements/alter/user/ title=USER class="nav-link text-light text-wrap d-inline-block w-100 px-0">USER</a> <a href=../../../sql-reference/statements/alter/quota/ title=QUOTA class="nav-link text-light text-wrap d-inline-block w-100 px-0">QUOTA</a> <a href=../../../sql-reference/statements/alter/role/ title=ROLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROLE</a> <a href=../../../sql-reference/statements/alter/row-policy/ title="ROW POLICY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ROW POLICY</a> <a href=../../../sql-reference/statements/alter/settings-profile/ title="SETTINGS PROFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SETTINGS PROFILE</a> </nav> </div> <a href=../../../sql-reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql-reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql-reference/statements/grant/ title=GRANT class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRANT</a> <a href=../../../sql-reference/statements/explain/ title=EXPLAIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXPLAIN</a> <a href=../../../sql-reference/statements/revoke/ title=REVOKE class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a> <a href=../../../sql-reference/statements/attach/ title=ATTACH class="nav-link text-light text-wrap d-inline-block w-100 px-0">ATTACH</a> <a href=../../../sql-reference/statements/check-table/ title=CHECK class="nav-link text-light text-wrap d-inline-block w-100 px-0">CHECK</a> <a href=../../../sql-reference/statements/describe-table/ title=DESCRIBE class="nav-link text-light text-wrap d-inline-block w-100 px-0">DESCRIBE</a> <a href=../../../sql-reference/statements/detach/ title=DETACH class="nav-link text-light text-wrap d-inline-block w-100 px-0">DETACH</a> <a href=../../../sql-reference/statements/drop/ title=DROP class="nav-link text-light text-wrap d-inline-block w-100 px-0">DROP</a> <a href=../../../sql-reference/statements/exists/ title=EXISTS class="nav-link text-light text-wrap d-inline-block w-100 px-0">EXISTS</a> <a href=../../../sql-reference/statements/kill/ title=KILL class="nav-link text-light text-wrap d-inline-block w-100 px-0">KILL</a> <a href=../../../sql-reference/statements/optimize/ title=OPTIMIZE class="nav-link text-light text-wrap d-inline-block w-100 px-0">OPTIMIZE</a> <a href=../../../sql-reference/statements/rename/ title=RENAME class="nav-link text-light text-wrap d-inline-block w-100 px-0">RENAME</a> <a href=../../../sql-reference/statements/set/ title=SET class="nav-link text-light text-wrap d-inline-block w-100 px-0">SET</a> <a href=../../../sql-reference/statements/set-role/ title="SET ROLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SET ROLE</a> <a href=../../../sql-reference/statements/truncate/ title=TRUNCATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">TRUNCATE</a> <a href=../../../sql-reference/statements/use/ title=USE class="nav-link text-light text-wrap d-inline-block w-100 px-0">USE</a> <a href=../../../sql-reference/statements/watch/ title=WATCH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WATCH</a> </nav> </div> <a href=../../../sql-reference/syntax/ title=Синтаксис class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис</a> <a href=../../../sql-reference/distributed-ddl/ title="Распределенные DDL запросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Распределенные DDL запросы</a> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title=Функции class="nav-link text-light dropdown-toggle px-0">Функции</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../sql-reference/functions/arithmetic-functions/ title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a> <a href=../../../sql-reference/functions/array-functions/ title=Массивы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Массивы</a> <a href=../../../sql-reference/functions/comparison-functions/ title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a> <a href=../../../sql-reference/functions/logical-functions/ title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a> <a href=../../../sql-reference/functions/type-conversion-functions/ title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a> <a href=../../../sql-reference/functions/date-time-functions/ title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a> <a href=../../../sql-reference/functions/string-functions/ title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a> <a href=../../../sql-reference/functions/string-search-functions/ title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a> <a href=../../../sql-reference/functions/string-replace-functions/ title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a> <a href=../../../sql-reference/functions/conditional-functions/ title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a> <a href=../../../sql-reference/functions/files/ title="Функции для работы с файлами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с файлами</a> <a href=../../../sql-reference/functions/math-functions/ title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a> <a href=../../../sql-reference/functions/rounding-functions/ title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a> <a href=../../../sql-reference/functions/tuple-map-functions/ title="Работа с контейнерами map" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Работа с контейнерами map</a> <a href=../../../sql-reference/functions/splitting-merging-functions/ title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a> <a href=../../../sql-reference/functions/bit-functions/ title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a> <a href=../../../sql-reference/functions/bitmap-functions/ title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a> <a href=../../../sql-reference/functions/hash-functions/ title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a> <a href=../../../sql-reference/functions/random-functions/ title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a> <a href=../../../sql-reference/functions/encoding-functions/ title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a> <a href=../../../sql-reference/functions/uuid-functions/ title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a> <a href=../../../sql-reference/functions/url-functions/ title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a> <a href=../../../sql-reference/functions/ip-address-functions/ title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a> <a href=../../../sql-reference/functions/json-functions/ title=JSON class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON</a> <a href=../../../sql-reference/functions/ext-dict-functions/ title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a> <a href=../../../sql-reference/functions/ym-dict-functions/ title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a> <a href=../../../sql-reference/functions/in-functions/ title="Функции для реализации оператора IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN</a> <a href=../../../sql-reference/functions/array-join/ title="Функция ArrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция ArrayJoin</a> <a href=#sidebar-sidebar-5-5-30 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5-30 title=Гео-данные class="nav-link text-light dropdown-toggle px-0">Гео-данные</a> <div id=sidebar-sidebar-5-5-30 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/functions/geo/coordinates/ title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a> <a href=../../../sql-reference/functions/geo/h3/ title="Функции для работы с индексами H3" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с индексами H3</a> <a href=../../../sql-reference/functions/geo/geohash/ title="Функции для работы с системой Geohash" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с системой Geohash</a> </nav> </div> <a href=../../../sql-reference/functions/functions-for-nulls/ title="Функции для работы с Nullable-аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с Nullable-аргументами</a> <a href=../../../sql-reference/functions/machine-learning-functions/ title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a> <a href=../../../sql-reference/functions/introspection/ title="Функции интроспекции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции интроспекции</a> <a href=../../../sql-reference/functions/other-functions/ title="Прочие функции" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Прочие функции</a> <a href=../../../sql-reference/functions/encryption-functions/ title="Функции для шифрования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для шифрования</a> <a href=../../../sql-reference/functions/tuple-functions/ title="Функции для работы с кортежами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с кортежами</a> </nav> </div> <a href=#sidebar-sidebar-5-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-6 title="Агрегатные функции" class="nav-link text-light dropdown-toggle px-0">Агрегатные функции</a> <div id=sidebar-sidebar-5-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/aggregate-functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-5-6-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-6-2 title=Справочник class="nav-link text-light dropdown-toggle px-0">Справочник</a> <div id=sidebar-sidebar-5-6-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/aggregate-functions/reference/count/ title=count class="nav-link text-light text-wrap d-inline-block w-100 px-0">count</a> <a href=../../../sql-reference/aggregate-functions/reference/min/ title=min class="nav-link text-light text-wrap d-inline-block w-100 px-0">min</a> <a href=../../../sql-reference/aggregate-functions/reference/max/ title=max class="nav-link text-light text-wrap d-inline-block w-100 px-0">max</a> <a href=../../../sql-reference/aggregate-functions/reference/sum/ title=sum class="nav-link text-light text-wrap d-inline-block w-100 px-0">sum</a> <a href=../../../sql-reference/aggregate-functions/reference/avg/ title=avg class="nav-link text-light text-wrap d-inline-block w-100 px-0">avg</a> <a href=../../../sql-reference/aggregate-functions/reference/any/ title=any class="nav-link text-light text-wrap d-inline-block w-100 px-0">any</a> <a href=../../../sql-reference/aggregate-functions/reference/stddevpop/ title=stddevPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">stddevPop</a> <a href=../../../sql-reference/aggregate-functions/reference/stddevsamp/ title=stddevSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">stddevSamp</a> <a href=../../../sql-reference/aggregate-functions/reference/varpop/ title=varPop(x) class="nav-link text-light text-wrap d-inline-block w-100 px-0">varPop(x)</a> <a href=../../../sql-reference/aggregate-functions/reference/varsamp/ title=varSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">varSamp</a> <a href=../../../sql-reference/aggregate-functions/reference/covarpop/ title=covarPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">covarPop</a> <a href=../../../sql-reference/aggregate-functions/reference/covarsamp/ title=covarSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">covarSamp</a> <a href=../../../sql-reference/aggregate-functions/reference/anyheavy/ title=anyHeavy class="nav-link text-light text-wrap d-inline-block w-100 px-0">anyHeavy</a> <a href=../../../sql-reference/aggregate-functions/reference/anylast/ title=anyLast class="nav-link text-light text-wrap d-inline-block w-100 px-0">anyLast</a> <a href=../../../sql-reference/aggregate-functions/reference/argmin/ title=argMin class="nav-link text-light text-wrap d-inline-block w-100 px-0">argMin</a> <a href=../../../sql-reference/aggregate-functions/reference/argmax/ title=argMax class="nav-link text-light text-wrap d-inline-block w-100 px-0">argMax</a> <a href=../../../sql-reference/aggregate-functions/reference/avgweighted/ title=avgWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">avgWeighted</a> <a href=../../../sql-reference/aggregate-functions/reference/corr/ title=corr class="nav-link text-light text-wrap d-inline-block w-100 px-0">corr</a> <a href=../../../sql-reference/aggregate-functions/reference/topk/ title=topK class="nav-link text-light text-wrap d-inline-block w-100 px-0">topK</a> <a href=../../../sql-reference/aggregate-functions/reference/topkweighted/ title=topKWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">topKWeighted</a> <a href=../../../sql-reference/aggregate-functions/reference/grouparray/ title=groupArray class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArray</a> <a href=../../../sql-reference/aggregate-functions/reference/groupuniqarray/ title=groupUniqArray class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupUniqArray</a> <a href=../../../sql-reference/aggregate-functions/reference/grouparrayinsertat/ title=groupArrayInsertAt class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayInsertAt</a> <a href=../../../sql-reference/aggregate-functions/reference/grouparraymovingsum/ title=groupArrayMovingSum class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayMovingSum</a> <a href=../../../sql-reference/aggregate-functions/reference/grouparraymovingavg/ title=groupArrayMovingAvg class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArrayMovingAvg</a> <a href=../../../sql-reference/aggregate-functions/reference/grouparraysample/ title=groupArraySample class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupArraySample</a> <a href=../../../sql-reference/aggregate-functions/reference/groupbitand/ title=groupBitAnd class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitAnd</a> <a href=../../../sql-reference/aggregate-functions/reference/groupbitor/ title=groupBitOr class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitOr</a> <a href=../../../sql-reference/aggregate-functions/reference/groupbitxor/ title=groupBitXor class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitXor</a> <a href=../../../sql-reference/aggregate-functions/reference/groupbitmap/ title=groupBitmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">groupBitmap</a> <a href=../../../sql-reference/aggregate-functions/reference/sumwithoverflow/ title=sumWithOverflow class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumWithOverflow</a> <a href=../../../sql-reference/aggregate-functions/reference/deltasum/ title=deltaSum class="nav-link text-light text-wrap d-inline-block w-100 px-0">deltaSum</a> <a href=../../../sql-reference/aggregate-functions/reference/deltasumtimestamp/ title=deltaSumTimestamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">deltaSumTimestamp</a> <a href=../../../sql-reference/aggregate-functions/reference/summap/ title="sumMap(key, value), sumMap(Tuple(key, value))" class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumMap(key, value), sumMap(Tuple(key, value))</a> <a href=../../../sql-reference/aggregate-functions/reference/minmap/ title=minMap class="nav-link text-light text-wrap d-inline-block w-100 px-0">minMap</a> <a href=../../../sql-reference/aggregate-functions/reference/maxmap/ title=maxMap class="nav-link text-light text-wrap d-inline-block w-100 px-0">maxMap</a> <a href=../../../sql-reference/aggregate-functions/reference/sumcount/ title=sumCount class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumCount</a> <a href=../../../sql-reference/aggregate-functions/reference/rankCorr/ title=rankCorr class="nav-link text-light text-wrap d-inline-block w-100 px-0">rankCorr</a> <a href=../../../sql-reference/aggregate-functions/reference/sumkahan/ title=sumKahan class="nav-link text-light text-wrap d-inline-block w-100 px-0">sumKahan</a> <a href=../../../sql-reference/aggregate-functions/reference/intervalLengthSum/ title=intervalLengthSum class="nav-link text-light text-wrap d-inline-block w-100 px-0">intervalLengthSum</a> <a href=../../../sql-reference/aggregate-functions/reference/skewpop/ title=skewPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">skewPop</a> <a href=../../../sql-reference/aggregate-functions/reference/skewsamp/ title=skewSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">skewSamp</a> <a href=../../../sql-reference/aggregate-functions/reference/kurtpop/ title=kurtPop class="nav-link text-light text-wrap d-inline-block w-100 px-0">kurtPop</a> <a href=../../../sql-reference/aggregate-functions/reference/kurtsamp/ title=kurtSamp class="nav-link text-light text-wrap d-inline-block w-100 px-0">kurtSamp</a> <a href=../../../sql-reference/aggregate-functions/reference/uniq/ title=uniq class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniq</a> <a href=../../../sql-reference/aggregate-functions/reference/uniqexact/ title=uniqExact class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqExact</a> <a href=../../../sql-reference/aggregate-functions/reference/uniqcombined/ title=uniqCombined class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqCombined</a> <a href=../../../sql-reference/aggregate-functions/reference/uniqcombined64/ title=uniqCombined64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqCombined64</a> <a href=../../../sql-reference/aggregate-functions/reference/uniqhll12/ title=uniqHLL12 class="nav-link text-light text-wrap d-inline-block w-100 px-0">uniqHLL12</a> <a href=../../../sql-reference/aggregate-functions/reference/quantile/ title=quantile class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantile</a> <a href=../../../sql-reference/aggregate-functions/reference/quantiles/ title=quantiles class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantiles</a> <a href=../../../sql-reference/aggregate-functions/reference/quantileexact/ title=quantileExact class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileExact</a> <a href=../../../sql-reference/aggregate-functions/reference/quantileexactweighted/ title=quantileExactWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileExactWeighted</a> <a href=../../../sql-reference/aggregate-functions/reference/quantiletiming/ title=quantileTiming class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTiming</a> <a href=../../../sql-reference/aggregate-functions/reference/quantiletimingweighted/ title=quantileTimingWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTimingWeighted</a> <a href=../../../sql-reference/aggregate-functions/reference/quantiledeterministic/ title=quantileDeterministic class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileDeterministic</a> <a href=../../../sql-reference/aggregate-functions/reference/quantiletdigest/ title=quantileTDigest class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTDigest</a> <a href=../../../sql-reference/aggregate-functions/reference/quantiletdigestweighted/ title=quantileTDigestWeighted class="nav-link text-light text-wrap d-inline-block w-100 px-0">quantileTDigestWeighted</a> <a href=../../../sql-reference/aggregate-functions/reference/simplelinearregression/ title=simpleLinearRegression class="nav-link text-light text-wrap d-inline-block w-100 px-0">simpleLinearRegression</a> <a href=../../../sql-reference/aggregate-functions/reference/stochasticlinearregression/ title=stochasticLinearRegression class="nav-link text-light text-wrap d-inline-block w-100 px-0">stochasticLinearRegression</a> <a href=../../../sql-reference/aggregate-functions/reference/stochasticlogisticregression/ title=stochasticLogisticRegression class="nav-link text-light text-wrap d-inline-block w-100 px-0">stochasticLogisticRegression</a> <a href=../../../sql-reference/aggregate-functions/reference/studentttest/ title=studentTTest class="nav-link text-light text-wrap d-inline-block w-100 px-0">studentTTest</a> <a href=../../../sql-reference/aggregate-functions/reference/welchttest/ title=welchTTest class="nav-link text-light text-wrap d-inline-block w-100 px-0">welchTTest</a> <a href=../../../sql-reference/aggregate-functions/reference/mannwhitneyutest/ title=mannWhitneyUTest class="nav-link text-light text-wrap d-inline-block w-100 px-0">mannWhitneyUTest</a> <a href=../../../sql-reference/aggregate-functions/reference/median/ title=median class="nav-link text-light text-wrap d-inline-block w-100 px-0">median</a> </nav> </div> <a href=../../../sql-reference/aggregate-functions/combinators/ title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a> <a href=../../../sql-reference/aggregate-functions/parametric-functions/ title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a> </nav> </div> <a href=#sidebar-sidebar-5-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7 title="Табличные функции" class="nav-link text-light dropdown-toggle px-0">Табличные функции</a> <div id=sidebar-sidebar-5-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/table-functions/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../sql-reference/table-functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../sql-reference/table-functions/merge/ title=merge class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a> <a href=../../../sql-reference/table-functions/numbers/ title=numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a> <a href=../../../sql-reference/table-functions/remote/ title=remote class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote</a> <a href=../../../sql-reference/table-functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql-reference/table-functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql-reference/table-functions/postgresql/ title=postgresql class="nav-link text-light text-wrap d-inline-block w-100 px-0">postgresql</a> <a href=../../../sql-reference/table-functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql-reference/table-functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql-reference/table-functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql-reference/table-functions/s3/ title=s3 class="nav-link text-light text-wrap d-inline-block w-100 px-0">s3</a> <a href=../../../sql-reference/table-functions/input/ title=input class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a> <a href=../../../sql-reference/table-functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> <a href=../../../sql-reference/table-functions/cluster/ title=cluster class="nav-link text-light text-wrap d-inline-block w-100 px-0">cluster</a> <a href=../../../sql-reference/table-functions/null/ title="null функция" class="nav-link text-light text-wrap d-inline-block w-100 px-0">null функция</a> <a href=../../../sql-reference/table-functions/dictionary/ title=dictionary class="nav-link text-light text-wrap d-inline-block w-100 px-0">dictionary</a> <a href=../../../sql-reference/table-functions/view/ title=view class="nav-link text-light text-wrap d-inline-block w-100 px-0">view</a> </nav> </div> <a href=#sidebar-sidebar-5-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8 title=Словари class="nav-link text-light dropdown-toggle px-0">Словари</a> <div id=sidebar-sidebar-5-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/dictionaries/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=#sidebar-sidebar-5-8-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8-2 title="Внешние словари" class="nav-link text-light dropdown-toggle px-0">Внешние словари</a> <div id=sidebar-sidebar-5-8-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts/ title="Внешние словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние словари</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/ title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/ title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/ title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/ title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/ title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/ title="Иерархические словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Иерархические словари</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-polygon/ title="Cловари полигонов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cловари полигонов</a> </nav> </div> <a href=../../../sql-reference/dictionaries/internal-dicts/ title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a> </nav> </div> <a href=#sidebar-sidebar-5-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9 title="Типы данных" class="nav-link text-light dropdown-toggle px-0">Типы данных</a> <div id=sidebar-sidebar-5-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../sql-reference/data-types/int-uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../sql-reference/data-types/float/ title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a> <a href=../../../sql-reference/data-types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../../sql-reference/data-types/boolean/ title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a> <a href=../../../sql-reference/data-types/string/ title=String class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a> <a href=../../../sql-reference/data-types/fixedstring/ title=FixedString(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString(N)</a> <a href=../../../sql-reference/data-types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql-reference/data-types/date/ title=Date class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a> <a href=../../../sql-reference/data-types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql-reference/data-types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql-reference/data-types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../sql-reference/data-types/lowcardinality/ title=LowCardinality class="nav-link text-light text-wrap d-inline-block w-100 px-0">LowCardinality</a> <a href=../../../sql-reference/data-types/array/ title=Array(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a> <a href=../../../sql-reference/data-types/aggregatefunction/ title=AggregateFunction class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction</a> <a href=../../../sql-reference/data-types/tuple/ title="Tuple(T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, ...)</a> <a href=#sidebar-sidebar-5-9-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-17 title="Вложенные структуры данных" class="nav-link text-light dropdown-toggle px-0">Вложенные структуры данных</a> <div id=sidebar-sidebar-5-9-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/nested-data-structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> </nav> </div> <a href=../../../sql-reference/data-types/nullable/ title=Nullable class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable</a> <a href=#sidebar-sidebar-5-9-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-19 title="Служебные типы данных" class="nav-link text-light dropdown-toggle px-0">Служебные типы данных</a> <div id=sidebar-sidebar-5-9-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/special-data-types/expression/ title=Expression class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a> <a href=../../../sql-reference/data-types/special-data-types/set/ title=Set class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a> <a href=../../../sql-reference/data-types/special-data-types/nothing/ title=Nothing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a> <a href=../../../sql-reference/data-types/special-data-types/interval/ title=Interval class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a> </nav> </div> <a href=#sidebar-sidebar-5-9-20 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-20 title=Домены class="nav-link text-light dropdown-toggle px-0">Домены</a> <div id=sidebar-sidebar-5-9-20 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/domains/ title=Домены class="nav-link text-light text-wrap d-inline-block w-100 px-0">Домены</a> <a href=../../../sql-reference/data-types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql-reference/data-types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../../sql-reference/data-types/multiword-types/ title="Составные типы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Составные типы</a> <a href=../../../sql-reference/data-types/geo/ title="Географические структуры" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Географические структуры</a> <a href=../../../sql-reference/data-types/map/ title="Map(key, value)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Map(key, value)</a> <a href=../../../sql-reference/data-types/simpleaggregatefunction/ title="SimpleAggregateFunction(func, type)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction(func, type)</a> </nav> </div> <a href=#sidebar-sidebar-5-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-10 title=Операторы class="nav-link text-light dropdown-toggle px-0">Операторы</a> <div id=sidebar-sidebar-5-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/operators/ title=Операторы class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a> <a href=../../../sql-reference/operators/in/ title="Операторы IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы IN</a> </nav> </div> <a href=../../../sql-reference/ansi/ title="ANSI Compatibility" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSI Compatibility</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=Руководства class="nav-link text-light dropdown-toggle px-0">Руководства</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../../guides/apply-catboost-model/ title="Применение модели CatBoost в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение модели CatBoost в ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Эксплуатация class="nav-link text-light dropdown-toggle px-0">Эксплуатация</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=Эксплуатация class="nav-link text-light text-wrap d-inline-block w-100 px-0">Эксплуатация</a> <a href=../../../operations/requirements/ title=Требования class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a> <a href=../../../operations/monitoring/ title=Мониторинг class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a> <a href=../../../operations/troubleshooting/ title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a> <a href=../../../operations/update/ title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a> <a href=#sidebar-sidebar-7-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-6 title="Внешние аутентификаторы пользователей и каталоги" class="nav-link text-light dropdown-toggle px-0">Внешние аутентификаторы пользователей и каталоги</a> <div id=sidebar-sidebar-7-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/external-authenticators/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../operations/external-authenticators/kerberos/ title=Kerberos class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kerberos</a> <a href=../../../operations/external-authenticators/ldap/ title=LDAP class="nav-link text-light text-wrap d-inline-block w-100 px-0">LDAP</a> </nav> </div> <a href=../../../operations/access-rights/ title="Управление доступом" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Управление доступом</a> <a href=../../../operations/backup/ title="Резервное копирование данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование данных</a> <a href=../../../operations/configuration-files/ title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a> <a href=../../../operations/quotas/ title=Квоты class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a> <a href=#sidebar-sidebar-7-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-11 title="Optimizing Performance" class="nav-link text-light dropdown-toggle px-0">Optimizing Performance</a> <div id=sidebar-sidebar-7-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing-performance/sampling-query-profiler/ title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a> </nav> </div> <a href=#sidebar-sidebar-7-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-12 title="Системные таблицы" class="nav-link text-light dropdown-toggle px-0">Системные таблицы</a> <div id=sidebar-sidebar-7-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/system-tables/ title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a> <a href=../../../operations/system-tables/asynchronous_metric_log/ title=system.asynchronous_metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.asynchronous_metric_log</a> <a href=../../../operations/system-tables/asynchronous_metrics/ title=system.asynchronous_metrics class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.asynchronous_metrics</a> <a href=../../../operations/system-tables/clusters/ title=system.clusters class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.clusters</a> <a href=../../../operations/system-tables/columns/ title=system.columns class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.columns</a> <a href=../../../operations/system-tables/contributors/ title=system.contributors class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.contributors</a> <a href=../../../operations/system-tables/crash-log/ title=system.crash_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.crash_log</a> <a href=../../../operations/system-tables/current-roles/ title=system.current_roles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.current_roles</a> <a href=../../../operations/system-tables/data_type_families/ title=system.data_type_families class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.data_type_families</a> <a href=../../../operations/system-tables/databases/ title=system.databases class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.databases</a> <a href=../../../operations/system-tables/detached_parts/ title=system.detached_parts class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.detached_parts</a> <a href=../../../operations/system-tables/dictionaries/ title=system.dictionaries class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.dictionaries</a> <a href=../../../operations/system-tables/disks/ title=system.disks class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.disks</a> <a href=../../../operations/system-tables/distributed_ddl_queue/ title=system.distributed_ddl_queue class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.distributed_ddl_queue</a> <a href=../../../operations/system-tables/distribution_queue/ title=system.distribution_queue class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.distribution_queue</a> <a href=../../../operations/system-tables/enabled-roles/ title=system.enabled_roles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.enabled_roles</a> <a href=../../../operations/system-tables/errors/ title=system.errors class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.errors</a> <a href=../../../operations/system-tables/events/ title=system.events class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.events</a> <a href=../../../operations/system-tables/functions/ title=system.functions class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.functions</a> <a href=../../../operations/system-tables/grants/ title=system.grants class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.grants</a> <a href=../../../operations/system-tables/graphite_retentions/ title=system.graphite_retentions class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.graphite_retentions</a> <a href=../../../operations/system-tables/licenses/ title=system.licenses class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.licenses</a> <a href=../../../operations/system-tables/merges/ title=system.merges class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.merges</a> <a href=../../../operations/system-tables/metric_log/ title=system.metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.metric_log</a> <a href=../../../operations/system-tables/metrics/ title=system.metrics class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.metrics</a> <a href=../../../operations/system-tables/mutations/ title=system.mutations class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.mutations</a> <a href=../../../operations/system-tables/numbers/ title=system.numbers class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.numbers</a> <a href=../../../operations/system-tables/numbers_mt/ title=system.numbers_mt class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.numbers_mt</a> <a href=../../../operations/system-tables/one/ title=system.one class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.one</a> <a href=../../../operations/system-tables/opentelemetry_span_log/ title=system.opentelemetry_span_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.opentelemetry_span_log</a> <a href=../../../operations/system-tables/part_log/ title=system.part_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.part_log</a> <a href=../../../operations/system-tables/parts/ title=system.parts class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.parts</a> <a href=../../../operations/system-tables/parts_columns/ title=system.parts_columns class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.parts_columns</a> <a href=../../../operations/system-tables/processes/ title=system.processes class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.processes</a> <a href=../../../operations/system-tables/query_log/ title=system.query_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_log</a> <a href=../../../operations/system-tables/query_thread_log/ title=system.query_thread_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_thread_log</a> <a href=../../../operations/system-tables/quota_limits/ title=system.quota_limits class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quota_limits</a> <a href=../../../operations/system-tables/quota_usage/ title=system.quota_usage class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quota_usage</a> <a href=../../../operations/system-tables/quotas/ title=system.quotas class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quotas</a> <a href=../../../operations/system-tables/quotas_usage/ title=system.quotas_usage class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.quotas_usage</a> <a href=../../../operations/system-tables/replicas/ title=system.replicas class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replicas</a> <a href=../../../operations/system-tables/replicated_fetches/ title=system.replicated_fetches class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replicated_fetches</a> <a href=../../../operations/system-tables/replication_queue/ title=system.replication_queue class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.replication_queue</a> <a href=../../../operations/system-tables/role-grants/ title=system.role_grants class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.role_grants</a> <a href=../../../operations/system-tables/roles/ title=system.roles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.roles</a> <a href=../../../operations/system-tables/row_policies/ title=system.row_policies class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.row_policies</a> <a href=../../../operations/system-tables/settings/ title=system.settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings</a> <a href=../../../operations/system-tables/settings_profile_elements/ title=system.settings_profile_elements class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings_profile_elements</a> <a href=../../../operations/system-tables/settings_profiles/ title=system.settings_profiles class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.settings_profiles</a> <a href=../../../operations/system-tables/stack_trace/ title=system.stack_trace class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.stack_trace</a> <a href=../../../operations/system-tables/storage_policies/ title=system.storage_policies class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.storage_policies</a> <a href=../../../operations/system-tables/table_engines/ title=system.table_engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.table_engines</a> <a href=../../../operations/system-tables/tables/ title=system.tables class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.tables</a> <a href=../../../operations/system-tables/text_log/ title=system.text_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.text_log</a> <a href=../../../operations/system-tables/trace_log/ title=system.trace_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.trace_log</a> <a href=../../../operations/system-tables/users/ title=system.users class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.users</a> <a href=../../../operations/system-tables/zookeeper/ title=system.zookeeper class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.zookeeper</a> </nav> </div> <a href=../../../operations/performance-test/ title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title="Конфигурационные параметры сервера" class="nav-link text-light dropdown-toggle px-0">Конфигурационные параметры сервера</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server-configuration-parameters/ title=Введение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a> <a href=../../../operations/server-configuration-parameters/settings/ title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные параметры сервера</a> </nav> </div> <a href=#sidebar-sidebar-7-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-15 title=Settings class="nav-link text-light dropdown-toggle px-0">Settings</a> <div id=sidebar-sidebar-7-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=Introduction class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introduction</a> <a href=../../../operations/settings/permissions-for-queries/ title="Разрешения для запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения для запросов</a> <a href=../../../operations/settings/query-complexity/ title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a> <a href=../../../operations/settings/settings/ title=Настройки class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a> <a href=../../../operations/settings/settings-profiles/ title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a> <a href=../../../operations/settings/constraints-on-settings/ title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a> <a href=../../../operations/settings/settings-users/ title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a> <a href=../../../operations/settings/merge-tree-settings/ title="Настройки MergeTree таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки MergeTree таблиц</a> </nav> </div> <a href=#sidebar-sidebar-7-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-16 title=Утилиты class="nav-link text-light dropdown-toggle px-0">Утилиты</a> <div id=sidebar-sidebar-7-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/ title=Обзор class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a> <a href=../../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-benchmark class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a> <a href=../../../operations/utilities/clickhouse-format/ title=clickhouse-format class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-format</a> <a href=../../../operations/utilities/clickhouse-compressor/ title="ClickHouse compressor" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse compressor</a> <a href=../../../operations/utilities/odbc-bridge/ title=clickhouse-odbc-bridge class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-odbc-bridge</a> <a href=../../../operations/utilities/clickhouse-obfuscator/ title="Обфускатор ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обфускатор ClickHouse</a> </nav> </div> <a href=../../../operations/tips/ title="Usage Recommendations" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Usage Recommendations</a> <a href=../../../operations/opentelemetry/ title="Поддержка OpenTelemetry" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поддержка OpenTelemetry</a> <a href=../../../operations/caches/ title=Кеши class="nav-link text-light text-wrap d-inline-block w-100 px-0">Кеши</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Development class="nav-link text-light dropdown-toggle px-0">Development</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/developer-instruction/ title="Инструкция для разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Инструкция для разработчиков</a> <a href=../../../development/architecture/ title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a> <a href=../../../development/build/ title="Build on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux</a> <a href=../../../development/build-osx/ title="Build on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Mac OS X</a> <a href=../../../development/build-cross-osx/ title="Build on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux for Mac OS X</a> <a href=../../../development/build-cross-arm/ title="Build on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Build on Linux for AARCH64 (ARM64)</a> <a href=../../../development/style/ title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a> <a href=../../../development/tests/ title=Testing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing</a> <a href=../../../development/contrib/ title="Используемые сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Используемые сторонние библиотеки</a> <a href=../../../development/browse-code/ title="Навигация по коду ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Навигация по коду ClickHouse</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title="Коммерческие услуги" class="nav-link text-light dropdown-toggle px-0">Коммерческие услуги</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/cloud/ title="Поставщики облачных услуг ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поставщики облачных услуг ClickHouse</a> <a href=../../../commercial/support/ title=Support class="nav-link text-light text-wrap d-inline-block w-100 px-0">Support</a> <a href=../../../commercial/ title="Коммерческие услуги" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Коммерческие услуги</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=F.A.Q. class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/general/ title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a> <a href=../../../faq/use-cases/ title=Применение class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение</a> <a href=../../../faq/operations/ title=Операции class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операции</a> <a href=../../../faq/integration/ title=Интеграция class="nav-link text-light text-wrap d-inline-block w-100 px-0">Интеграция</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title="Что нового?" class="nav-link text-light dropdown-toggle px-0">Что нового?</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-11-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11-1 title=Changelog class="nav-link text-light dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-11-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats-new/changelog/ title=2021 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a> <a href=../../../whats-new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats-new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats-new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats-new/extended-roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../../whats-new/security-changelog/ title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a> <a href=../../../whats-new/ title="Что нового в ClickHouse?" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Что нового в ClickHouse?</a> </nav> </div> <a href=../../../single/clickhouse_ru.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-4"> <div id=content class=mt-md-n3> <nav class=text-muted aria-label=breadcrumb> <ol class="breadcrumb bg-transparent p-0"> <li class=breadcrumb-item><a href=../../ class=text-reset>Справка по SQL</a> </li> <li class=breadcrumb-item><a href=../ class=text-reset>Функции</a> </li> </ol> </nav> <h1 id=other-functions>Прочие функции<a class=headerlink href=#other-functions title="Permanent link"> </a></h1> <h2 id=hostname>hostName()<a class=headerlink href=#hostname title="Permanent link"> </a></h2> <p>Возвращает строку - имя хоста, на котором эта функция была выполнена. При распределённой обработке запроса, это будет имя хоста удалённого сервера, если функция выполняется на удалённом сервере.</p> <h2 id=getmacro>getMacro<a class=headerlink href=#getmacro title="Permanent link"> </a></h2> <p>Возвращает именованное значение из секции <a href=../../../operations/server-configuration-parameters/settings/#macros>macros</a> конфигурации сервера.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getMacro</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>name</code> — имя, которое необходимо получить из секции <code class=syntax>macros</code>. <a href=../../data-types/string/#string>String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение по указанному имени.</li> </ul> <p>Тип: <a href=../../data-types/string/ >String</a>.</p> <p><strong>Пример</strong></p> <p>Пример секции <code class=syntax>macros</code> в конфигурационном файле сервера:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;macros&gt;</span>
    <span class=nt>&lt;test&gt;</span>Value<span class=nt>&lt;/test&gt;</span>
<span class=nt>&lt;/macros&gt;</span>
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>getMacro</span><span class=p>(</span><span class=s1>'test'</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─getMacro('test')─┐
│ Value            │
└──────────────────┘
</code></pre></div> <p>Альтернативный способ получения значения:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>macros</span>
<span class=k>WHERE</span> <span class=n>macro</span> <span class=o>=</span> <span class=s1>'test'</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─macro─┬─substitution─┐
│ test  │ Value        │
└───────┴──────────────┘
</code></pre></div> <h2 id=fqdn>FQDN<a class=headerlink href=#fqdn title="Permanent link"> </a></h2> <p>Возвращает полное имя домена.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>fqdn</span><span class=p>()</span>
</code></pre></div> <p>Эта функция регистронезависимая.</p> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Полное имя домена.</li> </ul> <p>Тип: <code class=syntax>String</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>FQDN</span><span class=p>();</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─FQDN()──────────────────────────┐
│ clickhouse.ru-central1.internal │
└─────────────────────────────────┘
</code></pre></div> <h2 id=basename>basename<a class=headerlink href=#basename title="Permanent link"> </a></h2> <p>Извлекает конечную часть строки после последнего слэша или бэкслэша. Функция часто используется для извлечения имени файла из пути.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>basename</span><span class=p>(</span> <span class=n>expr</span> <span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — выражение, возвращающее значение типа <a href=./ >String</a>. В результирующем значении все бэкслэши должны быть экранированы.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Строка, содержащая:</p> <ul> <li> <p>Конечную часть строки после последнего слэша или бэкслэша.</p> <div class=codehilite><pre><span></span><code class=syntax>Если входная строка содержит путь, заканчивающийся слэшем или бэкслэшем, например, `/` или `с:\`, функция возвращает пустую строку.
</code></pre></div> </li> <li> <p>Исходная строка, если нет слэша или бэкслэша.</p> </li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'some/long/path/to/file'</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'some\\long\\path\\to\\file'</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'some-file-name'</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────┬─basename('some-file-name')─┐
│ some-file-name │ some-file-name             │
└────────────────┴────────────────────────────┘
</code></pre></div> <h2 id=visiblewidthx>visibleWidth(x)<a class=headerlink href=#visiblewidthx title="Permanent link"> </a></h2> <p>Вычисляет приблизительную ширину при выводе значения в текстовом (tab-separated) виде на консоль.<br> Функция используется системой для реализации Pretty форматов.</p> <p><code class=syntax>NULL</code> представляется как строка, соответствующая отображению <code class=syntax>NULL</code> в форматах <code class=syntax>Pretty</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>visibleWidth</span><span class=p>(</span><span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─visibleWidth(NULL)─┐
│                  4 │
└────────────────────┘
</code></pre></div> <h2 id=totypenamex>toTypeName(x)<a class=headerlink href=#totypenamex title="Permanent link"> </a></h2> <p>Возвращает строку, содержащую имя типа переданного аргумента.</p> <p>Если на вход функции передать <code class=syntax>NULL</code>, то она вернёт тип <code class=syntax>Nullable(Nothing)</code>, что соответствует внутреннему представлению <code class=syntax>NULL</code> в ClickHouse.</p> <h2 id=function-blocksize>blockSize()<a class=headerlink href=#function-blocksize title="Permanent link"> </a></h2> <p>Получить размер блока.<br> В ClickHouse выполнение запроса всегда идёт по блокам (наборам кусочков столбцов). Функция позволяет получить размер блока, для которого её вызвали.</p> <h2 id=function-bytesize>byteSize<a class=headerlink href=#function-bytesize title="Permanent link"> </a></h2> <p>Возвращает оценку в байтах размера аргументов в памяти в несжатом виде.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>byteSize</span><span class=p>(</span><span class=n>argument</span> <span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>argument</code> — значение.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Оценка размера аргументов в памяти в байтах.</li> </ul> <p>Тип: <a href=../../data-types/int-uint/ >UInt64</a>.</p> <p><strong>Примеры</strong></p> <p>Для аргументов типа <a href=../../data-types/string/ >String</a> функция возвращает длину строки + 9 (нуль-терминатор + длина)</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>byteSize</span><span class=p>(</span><span class=s1>'string'</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─byteSize('string')─┐
│                 15 │
└────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>test</span>
<span class=p>(</span>
    <span class=o>`</span><span class=k>key</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u8</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u16</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u32</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u64</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i8</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i16</span><span class=o>`</span> <span class=n>Int16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i32</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i64</span><span class=o>`</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>f32</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>f64</span><span class=o>`</span> <span class=n>Float64</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>key</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>test</span> <span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mi>32</span><span class=p>,</span> <span class=mi>64</span><span class=p>,</span>  <span class=o>-</span><span class=mi>8</span><span class=p>,</span> <span class=o>-</span><span class=mi>16</span><span class=p>,</span> <span class=o>-</span><span class=mi>32</span><span class=p>,</span> <span class=o>-</span><span class=mi>64</span><span class=p>,</span> <span class=mi>32</span><span class=p>.</span><span class=mi>32</span><span class=p>,</span> <span class=mi>64</span><span class=p>.</span><span class=mi>64</span><span class=p>);</span>

<span class=k>SELECT</span> <span class=k>key</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u8</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt8</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u16</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt16</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u32</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u64</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt64</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i8</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=nb>Int8</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i16</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int16</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i32</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i64</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int64</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>f32</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Float32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>f64</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Float64</span><span class=p>)</span><span class=o>`</span> <span class=k>FROM</span> <span class=n>test</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>key</span> <span class=k>ASC</span> <span class=n>FORMAT</span> <span class=n>Vertical</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
key:               1
byteSize(UInt8):   1
byteSize(UInt16):  2
byteSize(UInt32):  4
byteSize(UInt64):  8
byteSize(Int8):    1
byteSize(Int16):   2
byteSize(Int32):   4
byteSize(Int64):   8
byteSize(Float32): 4
byteSize(Float64): 8
</code></pre></div> <p>Если функция принимает несколько аргументов, то она возвращает их совокупный размер в байтах.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>byteSize</span><span class=p>(</span><span class=k>NULL</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>3</span><span class=p>,</span> <span class=s1>''</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─byteSize(NULL, 1, 0.3, '')─┐
│                         19 │
└────────────────────────────┘
</code></pre></div> <h2 id=materializex>materialize(x)<a class=headerlink href=#materializex title="Permanent link"> </a></h2> <p>Превращает константу в полноценный столбец, содержащий только одно значение.<br> В ClickHouse полноценные столбцы и константы представлены в памяти по-разному. Функции по-разному работают для аргументов-констант и обычных аргументов (выполняется разный код), хотя результат почти всегда должен быть одинаковым. Эта функция предназначена для отладки такого поведения.</p> <h2 id=ignore>ignore(…)<a class=headerlink href=#ignore title="Permanent link"> </a></h2> <p>Принимает любые аргументы, в т.ч. <code class=syntax>NULL</code>, всегда возвращает 0.<br> При этом, аргумент всё равно вычисляется. Это может использоваться для бенчмарков.</p> <h2 id=sleepseconds>sleep(seconds)<a class=headerlink href=#sleepseconds title="Permanent link"> </a></h2> <p>Спит seconds секунд на каждый блок данных. Можно указать как целое число, так и число с плавающей запятой.</p> <h2 id=currentdatabase>currentDatabase()<a class=headerlink href=#currentdatabase title="Permanent link"> </a></h2> <p>Возвращает имя текущей базы данных.<br> Эта функция может использоваться в параметрах движка таблицы в запросе CREATE TABLE там, где нужно указать базу данных.</p> <h2 id=other-function-currentuser>currentUser()<a class=headerlink href=#other-function-currentuser title="Permanent link"> </a></h2> <p>Возвращает логин текущего пользователя. При распределенном запросе, возвращается имя пользователя, инициировавшего запрос.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>currentUser</span><span class=p>();</span>
</code></pre></div> <p>Алиас: <code class=syntax>user()</code>, <code class=syntax>USER()</code>.</p> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Логин текущего пользователя.</li> <li>При распределенном запросе — логин пользователя, инициировавшего запрос.</li> </ul> <p>Тип: <code class=syntax>String</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>currentUser</span><span class=p>();</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─currentUser()─┐
│ default       │
└───────────────┘
</code></pre></div> <h2 id=is-constant>isConstant<a class=headerlink href=#is-constant title="Permanent link"> </a></h2> <p>Проверяет, является ли аргумент константным выражением.</p> <p>Константное выражение — это выражение, результат которого известен на момент анализа запроса (до его выполнения). Например, выражения над <a href=../../syntax/#literals>литералами</a> являются константными.</p> <p>Используется в целях разработки, отладки или демонстрирования.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>isConstant</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — выражение для проверки.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>1</code> — выражение <code class=syntax>x</code> является константным.</li> <li><code class=syntax>0</code> — выражение <code class=syntax>x</code> не является константным.</li> </ul> <p>Тип: <a href=../../data-types/int-uint/ >UInt8</a>.</p> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>isConstant</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=mi>43</span> <span class=k>AS</span> <span class=n>x</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(plus(x, 1))─┐
│                      1 │
└────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span> <span class=mi>3</span><span class=p>.</span><span class=mi>14</span> <span class=k>AS</span> <span class=n>pi</span> <span class=k>SELECT</span> <span class=n>isConstant</span><span class=p>(</span><span class=n>cos</span><span class=p>(</span><span class=n>pi</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(cos(pi))─┐
│                   1 │
└─────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>isConstant</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(number)─┐
│                  0 │
└────────────────────┘
</code></pre></div> <h2 id=isfinitex>isFinite(x)<a class=headerlink href=#isfinitex title="Permanent link"> </a></h2> <p>Принимает Float32 или Float64 и возвращает UInt8, равный 1, если аргумент не бесконечный и не NaN, иначе 0.</p> <h2 id=ifnotfinite>ifNotFinite<a class=headerlink href=#ifnotfinite title="Permanent link"> </a></h2> <p>Проверяет, является ли значение дробного числа с плавающей точкой конечным.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax>ifNotFinite(x,y)
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — значение, которое нужно проверить на бесконечность. Тип: <a href=./ >Float*</a>.</li> <li><code class=syntax>y</code> — запасное значение. Тип: <a href=./ >Float*</a>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>x</code>, если <code class=syntax>x</code> принимает конечное значение.</li> <li><code class=syntax>y</code>, если<code class=syntax>x</code> принимает не конечное значение.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax>SELECT 1/0 as infimum, ifNotFinite(infimum,42)
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─infimum─┬─ifNotFinite(divide(1, 0), 42)─┐
│     inf │                            42 │
└─────────┴───────────────────────────────┘
</code></pre></div> <p>Аналогичный результат можно получить с помощью <a href=../conditional-functions/#ternary-operator>тернарного оператора</a> <code class=syntax>isFinite(x) ? x : y</code>.</p> <h2 id=isinfinitex>isInfinite(x)<a class=headerlink href=#isinfinitex title="Permanent link"> </a></h2> <p>Принимает Float32 или Float64 и возвращает UInt8, равный 1, если аргумент бесконечный, иначе 0. Отметим, что в случае NaN возвращается 0.</p> <h2 id=isnanx>isNaN(x)<a class=headerlink href=#isnanx title="Permanent link"> </a></h2> <p>Принимает Float32 или Float64 и возвращает UInt8, равный 1, если аргумент является NaN, иначе 0.</p> <h2 id=hascolumnintablehostname-username-password-database-table-column>hasColumnInTable([‘hostname’[, ‘username’[, ‘password’]],] ‘database’, ‘table’, ‘column’)<a class=headerlink href=#hascolumnintablehostname-username-password-database-table-column title="Permanent link"> </a></h2> <p>Принимает константные строки - имя базы данных, имя таблицы и название столбца. Возвращает константное выражение типа UInt8, равное 1,<br> если есть столбец, иначе 0. Если задан параметр hostname, проверка будет выполнена на удалённом сервере.<br> Функция кидает исключение, если таблица не существует.<br> Для элементов вложенной структуры данных функция проверяет существование столбца. Для самой же вложенной структуры данных функция возвращает 0.</p> <h2 id=function-bar>bar<a class=headerlink href=#function-bar title="Permanent link"> </a></h2> <p>Позволяет построить unicode-art диаграмму.</p> <p><code class=syntax>bar(x, min, max, width)</code> рисует полосу ширины пропорциональной <code class=syntax>(x - min)</code> и равной <code class=syntax>width</code> символов при <code class=syntax>x = max</code>.</p> <p>Аргументы:</p> <ul> <li><code class=syntax>x</code> — Величина для отображения.</li> <li><code class=syntax>min, max</code> — Целочисленные константы, значение должно помещаться в <code class=syntax>Int64</code>.</li> <li><code class=syntax>width</code> — Константа, положительное число, может быть дробным.</li> </ul> <p>Полоса рисуется с точностью до одной восьмой символа.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>toHour</span><span class=p>(</span><span class=n>EventTime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>h</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span><span class=p>,</span>
    <span class=n>bar</span><span class=p>(</span><span class=k>c</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>600000</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span> <span class=k>AS</span> <span class=n>bar</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>h</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>h</span> <span class=k>ASC</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──h─┬──────c─┬─bar────────────────┐
│  0 │ 292907 │ █████████▋         │
│  1 │ 180563 │ ██████             │
│  2 │ 114861 │ ███▋               │
│  3 │  85069 │ ██▋                │
│  4 │  68543 │ ██▎                │
│  5 │  78116 │ ██▌                │
│  6 │ 113474 │ ███▋               │
│  7 │ 170678 │ █████▋             │
│  8 │ 278380 │ █████████▎         │
│  9 │ 391053 │ █████████████      │
│ 10 │ 457681 │ ███████████████▎   │
│ 11 │ 493667 │ ████████████████▍  │
│ 12 │ 509641 │ ████████████████▊  │
│ 13 │ 522947 │ █████████████████▍ │
│ 14 │ 539954 │ █████████████████▊ │
│ 15 │ 528460 │ █████████████████▌ │
│ 16 │ 539201 │ █████████████████▊ │
│ 17 │ 523539 │ █████████████████▍ │
│ 18 │ 506467 │ ████████████████▊  │
│ 19 │ 520915 │ █████████████████▎ │
│ 20 │ 521665 │ █████████████████▍ │
│ 21 │ 542078 │ ██████████████████ │
│ 22 │ 493642 │ ████████████████▍  │
│ 23 │ 400397 │ █████████████▎     │
└────┴────────┴────────────────────┘
</code></pre></div> <h2 id=transform>transform<a class=headerlink href=#transform title="Permanent link"> </a></h2> <p>Преобразовать значение согласно явно указанному отображению одних элементов на другие.<br> Имеется два варианта функции:</p> <h3 id=transformx-array-from-array-to-default>transform(x, array_from, array_to, default)<a class=headerlink href=#transformx-array-from-array-to-default title="Permanent link"> </a></h3> <p><code class=syntax>x</code> - что преобразовывать.</p> <p><code class=syntax>array_from</code> - константный массив значений для преобразования.</p> <p><code class=syntax>array_to</code> - константный массив значений, в которые должны быть преобразованы значения из from.</p> <p><code class=syntax>default</code> - какое значение использовать, если x не равен ни одному из значений во from.</p> <p><code class=syntax>array_from</code> и <code class=syntax>array_to</code> - массивы одинаковых размеров.</p> <p>Типы:</p> <p><code class=syntax>transform(T, Array(T), Array(U), U) -&gt; U</code></p> <p><code class=syntax>T</code> и <code class=syntax>U</code> - могут быть числовыми, строковыми, или Date или DateTime типами.<br> При этом, где обозначена одна и та же буква (T или U), могут быть, в случае числовых типов, не совпадающие типы, а типы, для которых есть общий тип.<br> Например, первый аргумент может иметь тип Int64, а второй - Array(UInt16).</p> <p>Если значение x равно одному из элементов массива array_from, то возвращает соответствующий (такой же по номеру) элемент массива array_to; иначе возвращает default. Если имеется несколько совпадающих элементов в array_from, то возвращает какой-нибудь из соответствующих.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>transform</span><span class=p>(</span><span class=n>SearchEngineID</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=s1>'Yandex'</span><span class=p>,</span> <span class=s1>'Google'</span><span class=p>],</span> <span class=s1>'Other'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>title</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>WHERE</span> <span class=n>SearchEngineID</span> <span class=o>!=</span> <span class=mi>0</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>title</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─title─────┬──────c─┐
│ Yandex    │ 498635 │
│ Google    │ 229872 │
│ Other     │ 104472 │
└───────────┴────────┘
</code></pre></div> <h3 id=transformx-array-from-array-to>transform(x, array_from, array_to)<a class=headerlink href=#transformx-array-from-array-to title="Permanent link"> </a></h3> <p>Отличается от первого варианта отсутствующим аргументом default.<br> Если значение x равно одному из элементов массива array_from, то возвращает соответствующий (такой же по номеру) элемент массива array_to; иначе возвращает x.</p> <p>Типы:</p> <p><code class=syntax>transform(T, Array(T), Array(T)) -&gt; T</code></p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>transform</span><span class=p>(</span><span class=k>domain</span><span class=p>(</span><span class=n>Referer</span><span class=p>),</span> <span class=p>[</span><span class=s1>'yandex.ru'</span><span class=p>,</span> <span class=s1>'google.ru'</span><span class=p>,</span> <span class=s1>'vk.com'</span><span class=p>],</span> <span class=p>[</span><span class=s1>'www.yandex'</span><span class=p>,</span> <span class=s1>'example.com'</span><span class=p>])</span> <span class=k>AS</span> <span class=n>s</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=k>domain</span><span class=p>(</span><span class=n>Referer</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>count</span><span class=p>()</span> <span class=k>DESC</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─s──────────────┬───────c─┐
│                │ 2906259 │
│ www.yandex     │  867767 │
│ ███████.ru     │  313599 │
│ mail.yandex.ru │  107147 │
│ ██████.ru      │  100355 │
│ █████████.ru   │   65040 │
│ news.yandex.ru │   64515 │
│ ██████.net     │   59141 │
│ example.com    │   57316 │
└────────────────┴─────────┘
</code></pre></div> <h2 id=formatreadablesizex>formatReadableSize(x)<a class=headerlink href=#formatreadablesizex title="Permanent link"> </a></h2> <p>Принимает размер (число байт). Возвращает округленный размер с суффиксом (KiB, MiB и т.д.) в виде строки.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>arrayJoin</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1024</span><span class=p>,</span> <span class=mi>1024</span><span class=o>*</span><span class=mi>1024</span><span class=p>,</span> <span class=mi>192851925</span><span class=p>])</span> <span class=k>AS</span> <span class=n>filesize_bytes</span><span class=p>,</span>
    <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesize_bytes</span><span class=p>)</span> <span class=k>AS</span> <span class=n>filesize</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─filesize_bytes─┬─filesize───┐
│              1 │ 1.00 B     │
│           1024 │ 1.00 KiB   │
│        1048576 │ 1.00 MiB   │
│      192851925 │ 183.92 MiB │
└────────────────┴────────────┘
</code></pre></div> <h2 id=formatreadablequantityx>formatReadableQuantity(x)<a class=headerlink href=#formatreadablequantityx title="Permanent link"> </a></h2> <p>Принимает число. Возвращает округленное число с суффиксом (thousand, million, billion и т.д.) в виде строки.</p> <p>Облегчает визуальное восприятие больших чисел живым человеком.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>arrayJoin</span><span class=p>([</span><span class=mi>1024</span><span class=p>,</span> <span class=mi>1234</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=p>(</span><span class=mi>4567</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>)</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=mi>98765432101234</span><span class=p>])</span> <span class=k>AS</span> <span class=nb>number</span><span class=p>,</span>
    <span class=n>formatReadableQuantity</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>AS</span> <span class=n>number_for_humans</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─────────number─┬─number_for_humans─┐
│           1024 │ 1.02 thousand     │
│        1234000 │ 1.23 million      │
│     4567000000 │ 4.57 billion      │
│ 98765432101234 │ 98.77 trillion    │
└────────────────┴───────────────────┘
</code></pre></div> <h2 id=leasta-b>least(a, b)<a class=headerlink href=#leasta-b title="Permanent link"> </a></h2> <p>Возвращает наименьшее значение из a и b.</p> <h2 id=greatesta-b>greatest(a, b)<a class=headerlink href=#greatesta-b title="Permanent link"> </a></h2> <p>Возвращает наибольшее значение из a и b.</p> <h2 id=uptime>uptime()<a class=headerlink href=#uptime title="Permanent link"> </a></h2> <p>Возвращает аптайм сервера в секундах.</p> <h2 id=version>version()<a class=headerlink href=#version title="Permanent link"> </a></h2> <p>Возвращает версию сервера в виде строки.</p> <h2 id=function-rownumberinblock>rowNumberInBlock<a class=headerlink href=#function-rownumberinblock title="Permanent link"> </a></h2> <p>Возвращает порядковый номер строки в блоке данных. Для каждого блока данных нумерация начинается с 0.</p> <h2 id=rownumberinallblocks>rowNumberInAllBlocks()<a class=headerlink href=#rownumberinallblocks title="Permanent link"> </a></h2> <p>Возвращает порядковый номер строки в блоке данных. Функция учитывает только задействованные блоки данных.</p> <h2 id=neighbor>neighbor<a class=headerlink href=#neighbor title="Permanent link"> </a></h2> <p>Функция позволяет получить доступ к значению в столбце <code class=syntax>column</code>, находящемуся на смещении <code class=syntax>offset</code> относительно текущей строки. Является частичной реализацией <a href=https://en.wikipedia.org/wiki/SQL_window_function rel="external nofollow noreferrer" target=_blank>оконных функций</a> <code class=syntax>LEAD()</code> и <code class=syntax>LAG()</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>neighbor</span><span class=p>(</span><span class=k>column</span><span class=p>,</span> <span class=k>offset</span><span class=p>[,</span> <span class=n>default_value</span><span class=p>])</span>
</code></pre></div> <p>Результат функции зависит от затронутых блоков данных и порядка данных в блоке.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Предупреждение</p> <p>Функция может получить доступ к значению в столбце соседней строки только внутри обрабатываемого в данный момент блока данных.</p> </div> <p>Порядок строк, используемый при вычислении функции <code class=syntax>neighbor</code>, может отличаться от порядка строк, возвращаемых пользователю.<br> Чтобы этого не случилось, вы можете сделать подзапрос с <a href=../../statements/select/order-by/ >ORDER BY</a> и вызвать функцию извне подзапроса.</p> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>column</code> — имя столбца или скалярное выражение.</li> <li><code class=syntax>offset</code> — смещение от текущей строки <code class=syntax>column</code>. <a href=./ >Int64</a>.</li> <li><code class=syntax>default_value</code> — опциональный параметр. Значение, которое будет возвращено, если смещение выходит за пределы блока данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение <code class=syntax>column</code> в смещении от текущей строки, если значение <code class=syntax>offset</code> не выходит за пределы блока.</li> <li>Значение по умолчанию для <code class=syntax>column</code>, если значение <code class=syntax>offset</code> выходит за пределы блока данных. Если передан параметр <code class=syntax>default_value</code>, то значение берется из него.</li> </ul> <p>Тип: зависит от данных в <code class=syntax>column</code> или переданного значения по умолчанию в <code class=syntax>default_value</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=nb>number</span><span class=p>,</span> <span class=n>neighbor</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span> <span class=k>LIMIT</span> <span class=mi>10</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─neighbor(number, 2)─┐
│      0 │                   2 │
│      1 │                   3 │
│      2 │                   4 │
│      3 │                   5 │
│      4 │                   6 │
│      5 │                   7 │
│      6 │                   8 │
│      7 │                   9 │
│      8 │                   0 │
│      9 │                   0 │
└────────┴─────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=nb>number</span><span class=p>,</span> <span class=n>neighbor</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>999</span><span class=p>)</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span> <span class=k>LIMIT</span> <span class=mi>10</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─neighbor(number, 2, 999)─┐
│      0 │                        2 │
│      1 │                        3 │
│      2 │                        4 │
│      3 │                        5 │
│      4 │                        6 │
│      5 │                        7 │
│      6 │                        8 │
│      7 │                        9 │
│      8 │                      999 │
│      9 │                      999 │
└────────┴──────────────────────────┘
</code></pre></div> <p>Эта функция может использоваться для оценки year-over-year значение показателя:</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>'2018-01-01'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>start_date</span>
<span class=k>SELECT</span>
    <span class=n>toStartOfMonth</span><span class=p>(</span><span class=n>start_date</span> <span class=o>+</span> <span class=p>(</span><span class=nb>number</span> <span class=o>*</span> <span class=mi>32</span><span class=p>))</span> <span class=k>AS</span> <span class=k>month</span><span class=p>,</span>
    <span class=n>toInt32</span><span class=p>(</span><span class=k>month</span><span class=p>)</span> <span class=o>%</span> <span class=mi>100</span> <span class=k>AS</span> <span class=n>money</span><span class=p>,</span>
    <span class=n>neighbor</span><span class=p>(</span><span class=n>money</span><span class=p>,</span> <span class=o>-</span><span class=mi>12</span><span class=p>)</span> <span class=k>AS</span> <span class=n>prev_year</span><span class=p>,</span>
    <span class=n>round</span><span class=p>(</span><span class=n>prev_year</span> <span class=o>/</span> <span class=n>money</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=k>AS</span> <span class=n>year_over_year</span>
<span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────month─┬─money─┬─prev_year─┬─year_over_year─┐
│ 2018-01-01 │    32 │         0 │              0 │
│ 2018-02-01 │    63 │         0 │              0 │
│ 2018-03-01 │    91 │         0 │              0 │
│ 2018-04-01 │    22 │         0 │              0 │
│ 2018-05-01 │    52 │         0 │              0 │
│ 2018-06-01 │    83 │         0 │              0 │
│ 2018-07-01 │    13 │         0 │              0 │
│ 2018-08-01 │    44 │         0 │              0 │
│ 2018-09-01 │    75 │         0 │              0 │
│ 2018-10-01 │     5 │         0 │              0 │
│ 2018-11-01 │    36 │         0 │              0 │
│ 2018-12-01 │    66 │         0 │              0 │
│ 2019-01-01 │    97 │        32 │           0.33 │
│ 2019-02-01 │    28 │        63 │           2.25 │
│ 2019-03-01 │    56 │        91 │           1.62 │
│ 2019-04-01 │    87 │        22 │           0.25 │
└────────────┴───────┴───────────┴────────────────┘
</code></pre></div> <h2 id=other_functions-runningdifference>runningDifference(x)<a class=headerlink href=#other_functions-runningdifference title="Permanent link"> </a></h2> <p>Считает разницу между последовательными значениями строк в блоке данных.<br> Возвращает 0 для первой строки и разницу с предыдущей строкой для каждой последующей строки.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Предупреждение</p> <p>Функция может взять значение предыдущей строки только внутри текущего обработанного блока данных.</p> </div> <p>Результат функции зависит от затронутых блоков данных и порядка данных в блоке.</p> <p>Порядок строк, используемый при вычислении функции <code class=syntax>runningDifference</code>, может отличаться от порядка строк, возвращаемых пользователю.<br> Чтобы этого не случилось, вы можете сделать подзапрос с <a href=../../statements/select/order-by/ >ORDER BY</a> и вызвать функцию извне подзапроса.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>EventID</span><span class=p>,</span>
    <span class=n>EventTime</span><span class=p>,</span>
    <span class=n>runningDifference</span><span class=p>(</span><span class=n>EventTime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>delta</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>SELECT</span>
        <span class=n>EventID</span><span class=p>,</span>
        <span class=n>EventTime</span>
    <span class=k>FROM</span> <span class=n>events</span>
    <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=s1>'2016-11-24'</span>
    <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventTime</span> <span class=k>ASC</span>
    <span class=k>LIMIT</span> <span class=mi>5</span>
<span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─EventID─┬───────────EventTime─┬─delta─┐
│    1106 │ 2016-11-24 00:00:04 │     0 │
│    1107 │ 2016-11-24 00:00:05 │     1 │
│    1108 │ 2016-11-24 00:00:05 │     0 │
│    1109 │ 2016-11-24 00:00:09 │     4 │
│    1110 │ 2016-11-24 00:00:10 │     1 │
└─────────┴─────────────────────┴───────┘
</code></pre></div> <p>Обратите внимание — размер блока влияет на результат. С каждым новым блоком состояние <code class=syntax>runningDifference</code> сбрасывается.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=nb>number</span><span class=p>,</span>
    <span class=n>runningDifference</span><span class=p>(</span><span class=nb>number</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>diff</span>
<span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>100000</span><span class=p>)</span>
<span class=k>WHERE</span> <span class=n>diff</span> <span class=o>!=</span> <span class=mi>1</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
┌─number─┬─diff─┐
│  65536 │    0 │
└────────┴──────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>set max_block_size=100000 -- по умолчанию 65536!

SELECT
    number,
    runningDifference(number + 1) AS diff
FROM numbers(100000)
WHERE diff != 1
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
</code></pre></div> <h2 id=runningdifferencestartingwithfirstvalue>runningDifferenceStartingWithFirstValue<a class=headerlink href=#runningdifferencestartingwithfirstvalue title="Permanent link"> </a></h2> <p>То же, что и <a href=./#other_functions-runningdifference>runningDifference</a>, но в первой строке возвращается значение первой строки, а не ноль.</p> <h2 id=runningconcurrency>runningConcurrency<a class=headerlink href=#runningconcurrency title="Permanent link"> </a></h2> <p>Подсчитывает количество одновременно идущих событий.<br> У каждого события есть время начала и время окончания. Считается, что время начала включено в событие, а время окончания исключено из него. Столбцы со временем начала и окончания событий должны иметь одинаковый тип данных.<br> Функция подсчитывает количество событий, происходящих одновременно на момент начала каждого из событий в выборке.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Предупреждение</p> <p>События должны быть отсортированы по возрастанию времени начала. Если это требование нарушено, то функция вызывает исключение.<br> Каждый блок данных обрабатывается независимо. Если события из разных блоков данных накладываются по времени, они не могут быть корректно обработаны.</p> </div> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>runningConcurrency</span><span class=p>(</span><span class=k>start</span><span class=p>,</span> <span class=k>end</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>start</code> — Столбец с временем начала событий. <a href=../../data-types/date/ >Date</a>, <a href=../../data-types/datetime/ >DateTime</a> или <a href=../../data-types/datetime64/ >DateTime64</a>.</li> <li><code class=syntax>end</code> — Столбец с временем окончания событий. <a href=../../data-types/date/ >Date</a>, <a href=../../data-types/datetime/ >DateTime</a> или <a href=../../data-types/datetime64/ >DateTime64</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Количество одновременно идущих событий на момент начала каждого события.</li> </ul> <p>Тип: <a href=../../data-types/int-uint/ >UInt32</a></p> <p><strong>Пример</strong></p> <p>Рассмотрим таблицу:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────start─┬────────end─┐
│ 2021-03-03 │ 2021-03-11 │
│ 2021-03-06 │ 2021-03-12 │
│ 2021-03-07 │ 2021-03-08 │
│ 2021-03-11 │ 2021-03-12 │
└────────────┴────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>start</span><span class=p>,</span> <span class=n>runningConcurrency</span><span class=p>(</span><span class=k>start</span><span class=p>,</span> <span class=k>end</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>example_table</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────start─┬─runningConcurrency(start, end)─┐
│ 2021-03-03 │                              1 │
│ 2021-03-06 │                              2 │
│ 2021-03-07 │                              3 │
│ 2021-03-11 │                              2 │
└────────────┴────────────────────────────────┘
</code></pre></div> <h2 id=macnumtostringnum>MACNumToString(num)<a class=headerlink href=#macnumtostringnum title="Permanent link"> </a></h2> <p>Принимает число типа UInt64. Интерпретирует его, как MAC-адрес в big endian. Возвращает строку, содержащую соответствующий MAC-адрес в формате AA:BB:CC:DD:EE:FF (числа в шестнадцатеричной форме через двоеточие).</p> <h2 id=macstringtonums>MACStringToNum(s)<a class=headerlink href=#macstringtonums title="Permanent link"> </a></h2> <p>Функция, обратная к MACNumToString. Если MAC адрес в неправильном формате, то возвращает 0.</p> <h2 id=macstringtoouis>MACStringToOUI(s)<a class=headerlink href=#macstringtoouis title="Permanent link"> </a></h2> <p>Принимает MAC адрес в формате AA:BB:CC:DD:EE:FF (числа в шестнадцатеричной форме через двоеточие). Возвращает первые три октета как число в формате UInt64. Если MAC адрес в неправильном формате, то возвращает 0.</p> <h2 id=getsizeofenumtype>getSizeOfEnumType<a class=headerlink href=#getsizeofenumtype title="Permanent link"> </a></h2> <p>Возвращает количество полей в <a href=./ >Enum</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getSizeOfEnumType</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение типа <code class=syntax>Enum</code>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Количество полей входного значения типа <code class=syntax>Enum</code>.</li> <li>Исключение, если тип не <code class=syntax>Enum</code>.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>getSizeOfEnumType</span><span class=p>(</span> <span class=k>CAST</span><span class=p>(</span><span class=s1>'a'</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'a'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'b'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>)</span> <span class=p>)</span> <span class=k>AS</span> <span class=n>x</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┐
│ 2 │
└───┘
</code></pre></div> <h2 id=blockserializedsize>blockSerializedSize<a class=headerlink href=#blockserializedsize title="Permanent link"> </a></h2> <p>Возвращает размер на диске (без учета сжатия).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>blockSerializedSize</span><span class=p>(</span><span class=n>value</span><span class=p>[,</span> <span class=n>value</span><span class=p>[,</span> <span class=p>...]])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Количество байтов, которые будут записаны на диск для блока значений (без сжатия).</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>blockSerializedSize</span><span class=p>(</span><span class=n>maxState</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span> <span class=k>as</span> <span class=n>x</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┐
│ 2 │
└───┘
</code></pre></div> <h2 id=tocolumntypename>toColumnTypeName<a class=headerlink href=#tocolumntypename title="Permanent link"> </a></h2> <p>Возвращает имя класса, которым представлен тип данных столбца в оперативной памяти.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toColumnTypeName</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Строка с именем класса, который используется для представления типа данных <code class=syntax>value</code> в оперативной памяти.</li> </ul> <p><strong>Пример разницы между <code class=syntax>toTypeName</code> и <code class=syntax>toColumnTypeName</code></strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>toTypeName</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span> <span class=k>AS</span> <span class=n>DateTime</span><span class=p>))</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─toTypeName(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime                                            │
└─────────────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>toColumnTypeName</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span> <span class=k>AS</span> <span class=n>DateTime</span><span class=p>))</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─toColumnTypeName(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ Const(UInt32)                                             │
└───────────────────────────────────────────────────────────┘
</code></pre></div> <p>В примере видно, что тип данных <code class=syntax>DateTime</code> хранится в памяти как <code class=syntax>Const(UInt32)</code>.</p> <h2 id=dumpcolumnstructure>dumpColumnStructure<a class=headerlink href=#dumpcolumnstructure title="Permanent link"> </a></h2> <p>Выводит развернутое описание структур данных в оперативной памяти</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dumpColumnStructure</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Строка с описанием структуры, которая используется для представления типа данных <code class=syntax>value</code> в оперативной памяти.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>dumpColumnStructure</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span><span class=p>,</span> <span class=s1>'DateTime'</span><span class=p>))</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─dumpColumnStructure(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime, Const(size = 1, UInt32(size = 1))                  │
└──────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=defaultvalueofargumenttype>defaultValueOfArgumentType<a class=headerlink href=#defaultvalueofargumenttype title="Permanent link"> </a></h2> <p>Выводит значение по умолчанию для типа данных.</p> <p>Не учитывает значения по умолчанию для столбцов, заданные пользователем.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultValueOfArgumentType</span><span class=p>(</span><span class=n>expression</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expression</code> — значение произвольного типа или выражение, результатом которого является значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>0</code> для чисел;</li> <li>Пустая строка для строк;</li> <li><code class=syntax>ᴺᵁᴸᴸ</code> для <a href=./ >Nullable</a>.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfArgumentType</span><span class=p>(</span> <span class=k>CAST</span><span class=p>(</span><span class=mi>1</span> <span class=k>AS</span> <span class=nb>Int8</span><span class=p>)</span> <span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfArgumentType(CAST(1, 'Int8'))─┐
│                                           0 │
└─────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfArgumentType</span><span class=p>(</span> <span class=k>CAST</span><span class=p>(</span><span class=mi>1</span> <span class=k>AS</span> <span class=k>Nullable</span><span class=p>(</span><span class=nb>Int8</span><span class=p>)</span> <span class=p>)</span> <span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfArgumentType(CAST(1, 'Nullable(Int8)'))─┐
│                                                  ᴺᵁᴸᴸ │
└───────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=defaultvalueoftypename>defaultValueOfTypeName<a class=headerlink href=#defaultvalueoftypename title="Permanent link"> </a></h2> <p>Выводит значение по умолчанию для указанного типа данных.</p> <p>Не включает значения по умолчанию для настраиваемых столбцов, установленных пользователем.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=k>type</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>type</code> — тип данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li><code class=syntax>0</code> для чисел;</li> <li>Пустая строка для строк;</li> <li><code class=syntax>ᴺᵁᴸᴸ</code> для <a href=../../data-types/nullable/ >Nullable</a>.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=s1>'Int8'</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfTypeName('Int8')─┐
│                              0 │
└────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=s1>'Nullable(Int8)'</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfTypeName('Nullable(Int8)')─┐
│                                     ᴺᵁᴸᴸ │
└──────────────────────────────────────────┘
</code></pre></div> <h2 id=indexhint>indexHint<a class=headerlink href=#indexhint title="Permanent link"> </a></h2> <p>Возвращает все данные из диапазона, в который попадают данные, соответствующие указанному выражению.<br> Переданное выражение не будет вычислено. Выбор диапазона производится по индексу.<br> Индекс в ClickHouse разреженный, при чтении диапазона в ответ попадают «лишние» соседние данные.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>indexHint</span><span class=p>(</span><span class=o>&lt;</span><span class=n>expression</span><span class=o>&gt;</span><span class=p>)</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <p>Возвращает диапазон индекса, в котором выполняется заданное условие.</p> <p>Тип: <a href=https://clickhouse.yandex/docs/ru/data_types/int_uint/#diapazony-uint rel="external nofollow noreferrer" target=_blank>Uint8</a>.</p> <p><strong>Пример</strong></p> <p>Рассмотрим пример с использованием тестовых данных таблицы <a href=../../../getting-started/example-datasets/ontime/ >ontime</a>.</p> <p>Исходная таблица:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│ 4276457 │
└─────────┘
</code></pre></div> <p>В таблице есть индексы по полям <code class=syntax>(FlightDate, (Year, FlightDate))</code>.</p> <p>Выполним выборку по дате, где индекс не используется.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>FlightDate</span> <span class=k>AS</span> <span class=n>k</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>ontime</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span>
</code></pre></div> <p>ClickHouse обработал всю таблицу (<code class=syntax>Processed 4.28 million rows</code>).</p> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-01-01 │   13970 │
│ 2017-01-02 │   15882 │
........................
│ 2017-09-28 │   16411 │
│ 2017-09-29 │   16384 │
│ 2017-09-30 │   12520 │
└────────────┴─────────┘
</code></pre></div> <p>Для подключения индекса выбираем конкретную дату.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>FlightDate</span> <span class=k>AS</span> <span class=n>k</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>ontime</span> <span class=k>WHERE</span> <span class=n>k</span> <span class=o>=</span> <span class=s1>'2017-09-15'</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span>
</code></pre></div> <p>При использовании индекса ClickHouse обработал значительно меньшее количество строк (<code class=syntax>Processed 32.74 thousand rows</code>).</p> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-09-15 │   16428 │
└────────────┴─────────┘
</code></pre></div> <p>Передадим в функцию <code class=syntax>indexHint</code> выражение <code class=syntax>k = '2017-09-15'</code>.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>FlightDate</span> <span class=k>AS</span> <span class=n>k</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span>
<span class=k>FROM</span> <span class=n>ontime</span>
<span class=k>WHERE</span> <span class=n>indexHint</span><span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=s1>'2017-09-15'</span><span class=p>)</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ASC</span>
</code></pre></div> <p>ClickHouse применил индекс по аналогии с примером выше (<code class=syntax>Processed 32.74 thousand rows</code>).<br> Выражение <code class=syntax>k = '2017-09-15'</code> не используется при формировании результата.<br> Функция <code class=syntax>indexHint</code> позволяет увидеть соседние данные.</p> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-09-14 │    7071 │
│ 2017-09-15 │   16428 │
│ 2017-09-16 │    1077 │
│ 2017-09-30 │    8167 │
└────────────┴─────────┘
</code></pre></div> <h2 id=other-functions-replicate>replicate<a class=headerlink href=#other-functions-replicate title="Permanent link"> </a></h2> <p>Создает массив, заполненный одним значением.</p> <p>Используется для внутренней реализации <a href=../array-join/#functions_arrayjoin>arrayJoin</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>replicate</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>arr</span><span class=p>);</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>arr</code> — исходный массив. ClickHouse создаёт новый массив такой же длины как исходный и заполняет его значением <code class=syntax>x</code>.</li> <li><code class=syntax>x</code> — значение, которым будет заполнен результирующий массив.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Массив, заполненный значением <code class=syntax>x</code>.</p> <p>Тип: <code class=syntax>Array</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>replicate</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=s1>'a'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'c'</span><span class=p>]);</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─replicate(1, ['a', 'b', 'c'])─┐
│ [1,1,1]                       │
└───────────────────────────────┘
</code></pre></div> <h2 id=filesystemavailable>filesystemAvailable<a class=headerlink href=#filesystemavailable title="Permanent link"> </a></h2> <p>Возвращает объём доступного для записи данных места на файловой системе. Он всегда меньше общего свободного места (<a href=#filesystemfree>filesystemFree</a>), потому что некоторое пространство зарезервировано для нужд операционной системы.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemAvailable</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Объём доступного для записи данных места в байтах.</li> </ul> <p>Тип: <a href=./ >UInt64</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemAvailable</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Available space"</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemAvailable</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Type"</span><span class=p>;</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Available space─┬─Type───┐
│ 30.75 GiB       │ UInt64 │
└─────────────────┴────────┘
</code></pre></div> <h2 id=filesystemfree>filesystemFree<a class=headerlink href=#filesystemfree title="Permanent link"> </a></h2> <p>Возвращает объём свободного места на файловой системе. Смотрите также <code class=syntax>filesystemAvailable</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemFree</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Объем свободного места в байтах.</li> </ul> <p>Тип: <a href=./ >UInt64</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemFree</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Free space"</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemFree</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Type"</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Free space─┬─Type───┐
│ 32.39 GiB  │ UInt64 │
└────────────┴────────┘
</code></pre></div> <h2 id=filesystemcapacity>filesystemCapacity<a class=headerlink href=#filesystemcapacity title="Permanent link"> </a></h2> <p>Возвращает информацию о ёмкости файловой системы в байтах. Для оценки должен быть настроен <a href=./#server_configuration_parameters-path>путь</a> к каталогу с данными.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemCapacity</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Информация о ёмкости файловой системы в байтах.</li> </ul> <p>Тип: <a href=./ >UInt64</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemCapacity</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Capacity"</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemCapacity</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Type"</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Capacity──┬─Type───┐
│ 39.32 GiB │ UInt64 │
└───────────┴────────┘
</code></pre></div> <h2 id=initializeaggregation>initializeAggregation<a class=headerlink href=#initializeaggregation title="Permanent link"> </a></h2> <p>Вычисляет результат агрегатной функции для каждой строки. Предназначена для инициализации агрегатных функций с комбинатором <a href=../../aggregate-functions/combinators/#state>-State</a>. Может быть полезна для создания состояний агрегатных функций для последующей их вставки в столбцы типа <a href=../../data-types/aggregatefunction/#data-type-aggregatefunction>AggregateFunction</a> или использования в качестве значений по-умолчанию.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>initializeAggregation</span> <span class=p>(</span><span class=n>aggregate_function</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>argN</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>aggregate_function</code> — название агрегатной функции, состояние которой нужно создать. <a href=../../data-types/string/#string>String</a>.</li> <li><code class=syntax>arg</code> — аргументы, которые передаются в агрегатную функцию.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>В каждой строке результат агрегатной функции, примененной к аргументам из этой строки.</li> </ul> <p>Тип возвращаемого значения такой же, как и у функции, переданной первым аргументом.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>uniqMerge</span><span class=p>(</span><span class=k>state</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'uniqState'</span><span class=p>,</span> <span class=nb>number</span> <span class=o>%</span> <span class=mi>3</span><span class=p>)</span> <span class=k>AS</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10000</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─uniqMerge(state)─┐
│                3 │
└──────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>(</span><span class=k>state</span><span class=p>),</span> <span class=n>toTypeName</span><span class=p>(</span><span class=k>state</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=nb>number</span> <span class=o>%</span> <span class=mi>3</span><span class=p>)</span> <span class=k>AS</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(state)─┬─toTypeName(state)─────────────┐
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
│                          2 │ AggregateFunction(sum, UInt8) │
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
└────────────────────────────┴───────────────────────────────┘
</code></pre></div> <p>Пример с движком таблиц <code class=syntax>AggregatingMergeTree</code> и столбцом типа <code class=syntax>AggregateFunction</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>metrics</span>
<span class=p>(</span>
    <span class=k>key</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>value</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=k>sum</span><span class=p>,</span> <span class=n>UInt64</span><span class=p>)</span> <span class=k>DEFAULT</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=n>toUInt64</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>AggregatingMergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>key</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>metrics</span> <span class=k>VALUES</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=n>toUInt64</span><span class=p>(</span><span class=mi>42</span><span class=p>)))</span>
</code></pre></div> <p><strong>Смотрите также</strong><br> - <a href=../array-functions/#arrayreduce>arrayReduce</a></p> <h2 id=function-finalizeaggregation>finalizeAggregation<a class=headerlink href=#function-finalizeaggregation title="Permanent link"> </a></h2> <p>Принимает состояние агрегатной функции. Возвращает результат агрегирования (или конечное состояние при использовании комбинатора <a href=../../aggregate-functions/combinators/#state>-State</a>).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>finalizeAggregation</span><span class=p>(</span><span class=k>state</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>state</code> — состояние агрегатной функции. <a href=../../data-types/aggregatefunction/#data-type-aggregatefunction>AggregateFunction</a>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Значения, которые были агрегированы.</li> </ul> <p>Тип: соответствует типу агрегируемых значений.</p> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>((</span> <span class=k>SELECT</span> <span class=n>countState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(_subquery16)─┐
│                               10 │
└──────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>((</span> <span class=k>SELECT</span> <span class=n>sumState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(_subquery20)─┐
│                               45 │
└──────────────────────────────────┘
</code></pre></div> <p>Обратите внимание, что значения <code class=syntax>NULL</code> игнорируются.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>(</span><span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'anyState'</span><span class=p>,</span> <span class=p>[</span><span class=k>NULL</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(arrayReduce('anyState', [NULL, 2, 3]))─┐
│                                                          2 │
└────────────────────────────────────────────────────────────┘
</code></pre></div> <p>Комбинированный пример:</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=nb>number</span><span class=p>)</span> <span class=k>AS</span> <span class=n>one_row_sum_state</span>
<span class=k>SELECT</span>
    <span class=nb>number</span><span class=p>,</span>
    <span class=n>finalizeAggregation</span><span class=p>(</span><span class=n>one_row_sum_state</span><span class=p>)</span> <span class=k>AS</span> <span class=n>one_row_sum</span><span class=p>,</span>
    <span class=n>runningAccumulate</span><span class=p>(</span><span class=n>one_row_sum_state</span><span class=p>)</span> <span class=k>AS</span> <span class=n>cumulative_sum</span>
<span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─one_row_sum─┬─cumulative_sum─┐
│      0 │           0 │              0 │
│      1 │           1 │              1 │
│      2 │           2 │              3 │
│      3 │           3 │              6 │
│      4 │           4 │             10 │
│      5 │           5 │             15 │
│      6 │           6 │             21 │
│      7 │           7 │             28 │
│      8 │           8 │             36 │
│      9 │           9 │             45 │
└────────┴─────────────┴────────────────┘
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li><a href=../array-functions/#arrayreduce>arrayReduce</a></li> <li><a href=#initializeaggregation>initializeAggregation</a></li> </ul> <h2 id=runningaccumulate>runningAccumulate<a class=headerlink href=#runningaccumulate title="Permanent link"> </a></h2> <p>Накапливает состояния агрегатной функции для каждой строки блока данных.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Warning</p> <p>Функция обнуляет состояние для каждого нового блока.</p> </div> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>runningAccumulate</span><span class=p>(</span><span class=n>agg_state</span><span class=p>[,</span> <span class=k>grouping</span><span class=p>])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>agg_state</code> — состояние агрегатной функции. <a href=../../data-types/aggregatefunction/#data-type-aggregatefunction>AggregateFunction</a>.</li> <li><code class=syntax>grouping</code> — ключ группировки. Опциональный параметр. Состояние функции обнуляется, если значение <code class=syntax>grouping</code> меняется. Параметр может быть любого <a href=../../data-types/ >поддерживаемого типа данных</a>, для которого определен оператор равенства.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Каждая результирующая строка содержит результат агрегатной функции, накопленный для всех входных строк от 0 до текущей позиции. <code class=syntax>runningAccumulate</code> обнуляет состояния для каждого нового блока данных или при изменении значения <code class=syntax>grouping</code>.</li> </ul> <p>Тип зависит от используемой агрегатной функции.</p> <p><strong>Примеры</strong></p> <p>Рассмотрим примеры использования <code class=syntax>runningAccumulate</code> для нахождения кумулятивной суммы чисел без и с группировкой.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>k</span><span class=p>,</span> <span class=n>runningAccumulate</span><span class=p>(</span><span class=n>sum_k</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=nb>number</span> <span class=k>as</span> <span class=n>k</span><span class=p>,</span> <span class=n>sumState</span><span class=p>(</span><span class=n>k</span><span class=p>)</span> <span class=k>AS</span> <span class=n>sum_k</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─k─┬─res─┐
│ 0 │   0 │
│ 1 │   1 │
│ 2 │   3 │
│ 3 │   6 │
│ 4 │  10 │
│ 5 │  15 │
│ 6 │  21 │
│ 7 │  28 │
│ 8 │  36 │
│ 9 │  45 │
└───┴─────┘
</code></pre></div> <p>Подзапрос формирует <code class=syntax>sumState</code> для каждого числа от <code class=syntax>0</code> до <code class=syntax>9</code>. <code class=syntax>sumState</code> возвращает состояние функции <a href=../../aggregate-functions/reference/sum/#agg_function-sum>sum</a>, содержащее сумму одного числа.</p> <p>Весь запрос делает следующее:</p> <ol> <li>Для первой строки <code class=syntax>runningAccumulate</code> берет <code class=syntax>sumState(0)</code> и возвращает <code class=syntax>0</code>.</li> <li>Для второй строки функция объединяет <code class=syntax>sumState (0)</code> и <code class=syntax>sumState (1)</code>, что приводит к <code class=syntax>sumState (0 + 1)</code>, и возвращает в результате <code class=syntax>1</code>.</li> <li>Для третьей строки функция объединяет <code class=syntax>sumState (0 + 1)</code> и <code class=syntax>sumState (2)</code>, что приводит к <code class=syntax>sumState (0 + 1 + 2)</code>, и в результате возвращает <code class=syntax>3</code>.</li> <li>Действия повторяются до тех пор, пока не закончится блок.</li> </ol> <p>В следующем примере показано использование параметра <code class=syntax>grouping</code>:</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>grouping</span><span class=p>,</span>
    <span class=n>item</span><span class=p>,</span>
    <span class=n>runningAccumulate</span><span class=p>(</span><span class=k>state</span><span class=p>,</span> <span class=k>grouping</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>SELECT</span>
        <span class=n>toInt8</span><span class=p>(</span><span class=nb>number</span> <span class=o>/</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=k>grouping</span><span class=p>,</span>
        <span class=nb>number</span> <span class=k>AS</span> <span class=n>item</span><span class=p>,</span>
        <span class=n>sumState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>AS</span> <span class=k>state</span>
    <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>15</span><span class=p>)</span>
    <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>item</span>
    <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>item</span> <span class=k>ASC</span>
<span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─grouping─┬─item─┬─res─┐
│        0 │    0 │   0 │
│        0 │    1 │   1 │
│        0 │    2 │   3 │
│        0 │    3 │   6 │
│        1 │    4 │   4 │
│        1 │    5 │   9 │
│        1 │    6 │  15 │
│        1 │    7 │  22 │
│        2 │    8 │   8 │
│        2 │    9 │  17 │
│        2 │   10 │  27 │
│        2 │   11 │  38 │
│        3 │   12 │  12 │
│        3 │   13 │  25 │
│        3 │   14 │  39 │
└──────────┴──────┴─────┘
</code></pre></div> <p>Как вы можете видеть, <code class=syntax>runningAccumulate</code> объединяет состояния для каждой группы строк отдельно.</p> <h2 id=joinget>joinGet<a class=headerlink href=#joinget title="Permanent link"> </a></h2> <p>Функция позволяет извлекать данные из таблицы таким же образом как из <a href=./ >словаря</a>.</p> <p>Получает данные из таблиц <a href=./#creating-a-table>Join</a> по ключу.</p> <p>Поддерживаются только таблицы, созданные с <code class=syntax>ENGINE = Join(ANY, LEFT, &lt;join_keys&gt;)</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>joinGet</span><span class=p>(</span><span class=n>join_storage_table_name</span><span class=p>,</span> <span class=o>`</span><span class=n>value_column</span><span class=o>`</span><span class=p>,</span> <span class=n>join_keys</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>join_storage_table_name</code> — <a href=../../syntax/#syntax-identifiers>идентификатор</a>, который указывает, откуда производится выборка данных. Поиск по идентификатору осуществляется в базе данных по умолчанию (см. конфигурацию <code class=syntax>default_database</code>). Чтобы переопределить базу данных по умолчанию, используйте команду <code class=syntax>USE db_name</code>, или укажите базу данных и таблицу через разделитель <code class=syntax>db_name.db_table</code>, см. пример.</li> <li><code class=syntax>value_column</code> — столбец, из которого нужно произвести выборку данных.</li> <li><code class=syntax>join_keys</code> — список ключей, по которым производится выборка данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Возвращает значение по списку ключей.</p> <p>Если значения не существует в исходной таблице, вернется <code class=syntax>0</code> или <code class=syntax>null</code> в соответствии с настройками <a href=../../../operations/settings/settings/#join_use_nulls>join_use_nulls</a>.</p> <p>Подробнее о настройке <code class=syntax>join_use_nulls</code> в <a href=./ >операциях Join</a>.</p> <p><strong>Пример</strong></p> <p>Входная таблица:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=n>db_test</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span> <span class=o>`</span><span class=n>val</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=k>Join</span><span class=p>(</span><span class=k>ANY</span><span class=p>,</span> <span class=k>LEFT</span><span class=p>,</span> <span class=n>id</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>join_use_nulls</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span> <span class=k>VALUES</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>11</span><span class=p>)(</span><span class=mi>2</span><span class=p>,</span><span class=mi>12</span><span class=p>)(</span><span class=mi>4</span><span class=p>,</span><span class=mi>13</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─id─┬─val─┐
│  4 │  13 │
│  2 │  12 │
│  1 │  11 │
└────┴─────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>joinGet</span><span class=p>(</span><span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span><span class=p>,</span><span class=s1>'val'</span><span class=p>,</span><span class=n>toUInt32</span><span class=p>(</span><span class=nb>number</span><span class=p>))</span> <span class=k>from</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>join_use_nulls</span> <span class=o>=</span> <span class=mi>1</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─joinGet(db_test.id_val, 'val', toUInt32(number))─┐
│                                                0 │
│                                               11 │
│                                               12 │
│                                                0 │
└──────────────────────────────────────────────────┘
</code></pre></div> <h2 id=function-modelevaluate>modelEvaluate(model_name, …)<a class=headerlink href=#function-modelevaluate title="Permanent link"> </a></h2> <p>Оценивает внешнюю модель.</p> <p>Принимает на вход имя и аргументы модели. Возвращает Float64.</p> <h2 id=throwifx-custom-message>throwIf(x[, custom_message])<a class=headerlink href=#throwifx-custom-message title="Permanent link"> </a></h2> <p>Бросает исключение, если аргумент не равен нулю.<br> custom_message - необязательный параметр, константная строка, задает текст сообщения об ошибке.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>throwIf</span><span class=p>(</span><span class=nb>number</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'Too many'</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>↙ Progress: 0.00 rows, 0.00 B (0.00 rows/s., 0.00 B/s.) Received exception from server (version 19.14.1):
Code: 395. DB::Exception: Received from localhost:9000. DB::Exception: Too many.
</code></pre></div> <h2 id=identity>identity<a class=headerlink href=#identity title="Permanent link"> </a></h2> <p>Возвращает свой аргумент. Используется для отладки и тестирования, позволяет отменить использование индекса, и получить результат и производительность полного сканирования таблицы. Это работает, потому что оптимизатор запросов не может «заглянуть» внутрь функции <code class=syntax>identity</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>identity</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</code></pre></div> <p><strong>Пример</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>identity</span><span class=p>(</span><span class=mi>42</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─identity(42)─┐
│           42 │
└──────────────┘
</code></pre></div> <h2 id=randomascii>randomPrintableASCII<a class=headerlink href=#randomascii title="Permanent link"> </a></h2> <p>Генерирует строку со случайным набором печатных символов <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer" target=_blank>ASCII</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomPrintableASCII</span><span class=p>(</span><span class=k>length</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина результирующей строки. Положительное целое число.<div class=codehilite><pre><span></span><code class=syntax>Если передать `length &lt; 0`, то поведение функции не определено.
</code></pre></div> </li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Строка со случайным набором печатных символов <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer" target=_blank>ASCII</a>.</li> </ul> <p>Тип: <a href=./ >String</a></p> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=nb>number</span><span class=p>,</span> <span class=n>randomPrintableASCII</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span> <span class=k>as</span> <span class=n>str</span><span class=p>,</span> <span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>)</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span> <span class=k>LIMIT</span> <span class=mi>3</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─str────────────────────────────┬─length(randomPrintableASCII(30))─┐
│      0 │ SuiCOSTvC0csfABSw=UcSzp2.`rv8x │                               30 │
│      1 │ 1Ag NlJ &amp;RCN:*&gt;HVPG;PE-nO"SUFD │                               30 │
│      2 │ /"+&lt;"wUTh:=LjJ Vm!c&amp;hI*m#XTfzz │                               30 │
└────────┴────────────────────────────────┴──────────────────────────────────┘
</code></pre></div> <h2 id=randomstring>randomString<a class=headerlink href=#randomstring title="Permanent link"> </a></h2> <p>Генерирует бинарную строку заданной длины, заполненную случайными байтами (в том числе нулевыми).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomString</span><span class=p>(</span><span class=k>length</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина строки. Положительное целое число.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Строка, заполненная случайными байтами.</li> </ul> <p>Type: <a href=../../data-types/string/ >String</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>randomString</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span> <span class=k>AS</span> <span class=n>str</span><span class=p>,</span> <span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>)</span> <span class=k>AS</span> <span class=n>len</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=n>FORMAT</span> <span class=n>Vertical</span><span class=p>;</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
str: 3 G  :   pT ?w тi  k aV f6
len: 30

Row 2:
──────
str: 9 ,]    ^   )  ]??  8
len: 30
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li><a href=../../table-functions/generate/#generaterandom>generateRandom</a></li> <li><a href=./#randomascii>randomPrintableASCII</a></li> </ul> <h2 id=randomfixedstring>randomFixedString<a class=headerlink href=#randomfixedstring title="Permanent link"> </a></h2> <p>Генерирует бинарную строку заданной длины, заполненную случайными байтами, включая нулевые.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomFixedString</span><span class=p>(</span><span class=k>length</span><span class=p>);</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина строки в байтах. <a href=../../data-types/int-uint/ >UInt64</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Строка, заполненная случайными байтами.</li> </ul> <p>Тип: <a href=../../data-types/fixedstring/ >FixedString</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>randomFixedString</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span> <span class=k>as</span> <span class=n>rnd</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>rnd</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─rnd──────┬─toTypeName(randomFixedString(13))─┐
│ j▒h㋖HɨZ'▒ │ FixedString(13)                 │
└──────────┴───────────────────────────────────┘
</code></pre></div> <h2 id=randomstringutf8>randomStringUTF8<a class=headerlink href=#randomstringutf8 title="Permanent link"> </a></h2> <p>Генерирует строку заданной длины со случайными символами в кодировке UTF-8.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomStringUTF8</span><span class=p>(</span><span class=k>length</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина итоговой строки в кодовых точках. <a href=../../data-types/int-uint/ >UInt64</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Случайная строка в кодировке UTF-8.</li> </ul> <p>Тип: <a href=../../data-types/string/ >String</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>randomStringUTF8</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─randomStringUTF8(13)─┐
│ 𘤗𙉝д兠庇󡅴󱱎󦐪􂕌𔊹𓰛   │
└──────────────────────┘
</code></pre></div> <h2 id=getSetting>getSetting<a class=headerlink href=#getSetting title="Permanent link"> </a></h2> <p>Возвращает текущее значение <a href=../../../operations/settings/#custom_settings>пользовательской настройки</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getSetting</span><span class=p>(</span><span class=s1>'custom_setting'</span><span class=p>)</span>
</code></pre></div> <p><strong>Параметр</strong></p> <ul> <li><code class=syntax>custom_setting</code> — название настройки. <a href=../../data-types/string/ >String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Текущее значение пользовательской настройки.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>custom_a</span> <span class=o>=</span> <span class=mi>123</span><span class=p>;</span>
<span class=k>SELECT</span> <span class=n>getSetting</span><span class=p>(</span><span class=s1>'custom_a'</span><span class=p>);</span>
</code></pre></div> <p><strong>Результат</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=mf>123</span>
</code></pre></div> <p><strong>См. также</strong></p> <ul> <li><a href=../../../operations/settings/#custom_settings>Пользовательские настройки</a></li> </ul> <h2 id=is-decimal-overflow>isDecimalOverflow<a class=headerlink href=#is-decimal-overflow title="Permanent link"> </a></h2> <p>Проверяет, находится ли число <a href=../../data-types/decimal/ >Decimal</a> вне собственной (или заданной) области значений.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>d</span><span class=p>,</span> <span class=p>[</span><span class=n>p</span><span class=p>])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>d</code> — число. <a href=../../data-types/decimal/ >Decimal</a>.</li> <li><code class=syntax>p</code> — точность. Необязательный параметр. Если опущен, используется исходная точность первого аргумента. Использование этого параметра может быть полезно для извлечения данных в другую СУБД или файл. <a href=../../data-types/int-uint/#uint-ranges>UInt8</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li><code class=syntax>1</code> — число имеет больше цифр, чем позволяет точность.</li> <li><code class=syntax>0</code> — число удовлетворяет заданной точности.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=mi>9</span><span class=p>),</span>
       <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>)),</span>
       <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=mi>9</span><span class=p>),</span>
       <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>1   1   1   1
</code></pre></div> <h2 id=count-digits>countDigits<a class=headerlink href=#count-digits title="Permanent link"> </a></h2> <p>Возвращает количество десятичных цифр, необходимых для представления значения.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>countDigits</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — <a href=../../data-types/int-uint/#uint8-uint16-uint32-uint64-int8-int16-int32-int64>целое</a> или <a href=../../data-types/decimal/ >дробное</a> число.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Количество цифр.</p> <p>Тип: <a href=../../data-types/int-uint/#uint-ranges>UInt8</a>.</p> <p>!!! note "Примечание"<br> Для <code class=syntax>Decimal</code> значений учитывается их масштаб: вычисляется результат по базовому целочисленному типу, полученному как <code class=syntax>(value * scale)</code>. Например: <code class=syntax>countDigits(42) = 2</code>, <code class=syntax>countDigits(42.000) = 5</code>, <code class=syntax>countDigits(0.04200) = 4</code>. То есть вы можете проверить десятичное переполнение для <code class=syntax>Decimal64</code> с помощью <code class=syntax>countDecimal(x) &gt; 18</code>. Это медленный вариант <a href=#is-decimal-overflow>isDecimalOverflow</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>9</span><span class=p>)),</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>9</span><span class=p>)),</span>
       <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>18</span><span class=p>)),</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal64</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>18</span><span class=p>)),</span>
       <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal128</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>38</span><span class=p>)),</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal128</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>38</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>10  10  19  19  39  39
</code></pre></div> <h2 id=error-code-to-name>errorCodeToName<a class=headerlink href=#error-code-to-name title="Permanent link"> </a></h2> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Название переменной для кода ошибки.</li> </ul> <p>Тип: <a href=../../data-types/lowcardinality/ >LowCardinality(String)</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>errorCodeToName</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>UNSUPPORTED_METHOD
</code></pre></div> <h2 id=tcpPort>tcpPort<a class=headerlink href=#tcpPort title="Permanent link"> </a></h2> <p>Вовращает номер TCP порта, который использует сервер для <a href=../../../interfaces/tcp/ >нативного протокола</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>tcpPort</span><span class=p>()</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li>Нет.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Номер TCP порта.</li> </ul> <p>Тип: <a href=../../data-types/int-uint/ >UInt16</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>tcpPort</span><span class=p>();</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─tcpPort()─┐
│      9000 │
└───────────┘
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li><a href=../../../operations/server-configuration-parameters/settings/#server_configuration_parameters-tcp_port>tcp_port</a></li> </ul> </div> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Was this content helpful?</span> <div id=rating-stars class="display-6 mb-0" data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']" data-documentation=documentation>RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2021 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/878a159538935028f2d2dce3eb3074d44eb191df rel="external nofollow noreferrer" target=_blank class=text-reset>878a159538</a> </div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#hostname title=hostName() class="nav-link text-wrap d-inline-block w-100"> hostName() </a> <a href=#getmacro title=getMacro class="nav-link text-wrap d-inline-block w-100"> getMacro </a> <a href=#fqdn title=FQDN class="nav-link text-wrap d-inline-block w-100"> FQDN </a> <a href=#basename title=basename class="nav-link text-wrap d-inline-block w-100"> basename </a> <a href=#visiblewidthx title=visibleWidth(x) class="nav-link text-wrap d-inline-block w-100"> visibleWidth(x) </a> <a href=#totypenamex title=toTypeName(x) class="nav-link text-wrap d-inline-block w-100"> toTypeName(x) </a> <a href=#function-blocksize title=blockSize() class="nav-link text-wrap d-inline-block w-100"> blockSize() </a> <a href=#function-bytesize title=byteSize class="nav-link text-wrap d-inline-block w-100"> byteSize </a> <a href=#materializex title=materialize(x) class="nav-link text-wrap d-inline-block w-100"> materialize(x) </a> <a href=#ignore title=ignore(…) class="nav-link text-wrap d-inline-block w-100"> ignore(…) </a> <a href=#sleepseconds title=sleep(seconds) class="nav-link text-wrap d-inline-block w-100"> sleep(seconds) </a> <a href=#currentdatabase title=currentDatabase() class="nav-link text-wrap d-inline-block w-100"> currentDatabase() </a> <a href=#other-function-currentuser title=currentUser() class="nav-link text-wrap d-inline-block w-100"> currentUser() </a> <a href=#is-constant title=isConstant class="nav-link text-wrap d-inline-block w-100"> isConstant </a> <a href=#isfinitex title=isFinite(x) class="nav-link text-wrap d-inline-block w-100"> isFinite(x) </a> <a href=#ifnotfinite title=ifNotFinite class="nav-link text-wrap d-inline-block w-100"> ifNotFinite </a> <a href=#isinfinitex title=isInfinite(x) class="nav-link text-wrap d-inline-block w-100"> isInfinite(x) </a> <a href=#isnanx title=isNaN(x) class="nav-link text-wrap d-inline-block w-100"> isNaN(x) </a> <a href=#hascolumnintablehostname-username-password-database-table-column title="hasColumnInTable([‘hostname’[, ‘username’[, ‘password’]],] ‘database’, ‘table’, ‘column’)" class="nav-link text-wrap d-inline-block w-100"> hasColumnInTable([‘hostname’[, ‘username’[, ‘password’]],] ‘database’, ‘table’, ‘column’) </a> <a href=#function-bar title=bar class="nav-link text-wrap d-inline-block w-100"> bar </a> <a href=#transform title=transform class="nav-link text-wrap d-inline-block w-100"> transform </a> <nav id=toc-toc-21 class="nav flex-column pl-2"> <a href=#transformx-array-from-array-to-default title="transform(x, array_from, array_to, default)" class="nav-link text-wrap d-inline-block w-100"> transform(x, array_from, array_to, default) </a> <a href=#transformx-array-from-array-to title="transform(x, array_from, array_to)" class="nav-link text-wrap d-inline-block w-100"> transform(x, array_from, array_to) </a> </nav> <a href=#formatreadablesizex title=formatReadableSize(x) class="nav-link text-wrap d-inline-block w-100"> formatReadableSize(x) </a> <a href=#formatreadablequantityx title=formatReadableQuantity(x) class="nav-link text-wrap d-inline-block w-100"> formatReadableQuantity(x) </a> <a href=#leasta-b title="least(a, b)" class="nav-link text-wrap d-inline-block w-100"> least(a, b) </a> <a href=#greatesta-b title="greatest(a, b)" class="nav-link text-wrap d-inline-block w-100"> greatest(a, b) </a> <a href=#uptime title=uptime() class="nav-link text-wrap d-inline-block w-100"> uptime() </a> <a href=#version title=version() class="nav-link text-wrap d-inline-block w-100"> version() </a> <a href=#function-rownumberinblock title=rowNumberInBlock class="nav-link text-wrap d-inline-block w-100"> rowNumberInBlock </a> <a href=#rownumberinallblocks title=rowNumberInAllBlocks() class="nav-link text-wrap d-inline-block w-100"> rowNumberInAllBlocks() </a> <a href=#neighbor title=neighbor class="nav-link text-wrap d-inline-block w-100"> neighbor </a> <a href=#other_functions-runningdifference title=runningDifference(x) class="nav-link text-wrap d-inline-block w-100"> runningDifference(x) </a> <a href=#runningdifferencestartingwithfirstvalue title=runningDifferenceStartingWithFirstValue class="nav-link text-wrap d-inline-block w-100"> runningDifferenceStartingWithFirstValue </a> <a href=#runningconcurrency title=runningConcurrency class="nav-link text-wrap d-inline-block w-100"> runningConcurrency </a> <a href=#macnumtostringnum title=MACNumToString(num) class="nav-link text-wrap d-inline-block w-100"> MACNumToString(num) </a> <a href=#macstringtonums title=MACStringToNum(s) class="nav-link text-wrap d-inline-block w-100"> MACStringToNum(s) </a> <a href=#macstringtoouis title=MACStringToOUI(s) class="nav-link text-wrap d-inline-block w-100"> MACStringToOUI(s) </a> <a href=#getsizeofenumtype title=getSizeOfEnumType class="nav-link text-wrap d-inline-block w-100"> getSizeOfEnumType </a> <a href=#blockserializedsize title=blockSerializedSize class="nav-link text-wrap d-inline-block w-100"> blockSerializedSize </a> <a href=#tocolumntypename title=toColumnTypeName class="nav-link text-wrap d-inline-block w-100"> toColumnTypeName </a> <a href=#dumpcolumnstructure title=dumpColumnStructure class="nav-link text-wrap d-inline-block w-100"> dumpColumnStructure </a> <a href=#defaultvalueofargumenttype title=defaultValueOfArgumentType class="nav-link text-wrap d-inline-block w-100"> defaultValueOfArgumentType </a> <a href=#defaultvalueoftypename title=defaultValueOfTypeName class="nav-link text-wrap d-inline-block w-100"> defaultValueOfTypeName </a> <a href=#indexhint title=indexHint class="nav-link text-wrap d-inline-block w-100"> indexHint </a> <a href=#other-functions-replicate title=replicate class="nav-link text-wrap d-inline-block w-100"> replicate </a> <a href=#filesystemavailable title=filesystemAvailable class="nav-link text-wrap d-inline-block w-100"> filesystemAvailable </a> <a href=#filesystemfree title=filesystemFree class="nav-link text-wrap d-inline-block w-100"> filesystemFree </a> <a href=#filesystemcapacity title=filesystemCapacity class="nav-link text-wrap d-inline-block w-100"> filesystemCapacity </a> <a href=#initializeaggregation title=initializeAggregation class="nav-link text-wrap d-inline-block w-100"> initializeAggregation </a> <a href=#function-finalizeaggregation title=finalizeAggregation class="nav-link text-wrap d-inline-block w-100"> finalizeAggregation </a> <a href=#runningaccumulate title=runningAccumulate class="nav-link text-wrap d-inline-block w-100"> runningAccumulate </a> <a href=#joinget title=joinGet class="nav-link text-wrap d-inline-block w-100"> joinGet </a> <a href=#function-modelevaluate title="modelEvaluate(model_name, …)" class="nav-link text-wrap d-inline-block w-100"> modelEvaluate(model_name, …) </a> <a href=#throwifx-custom-message title="throwIf(x[, custom_message])" class="nav-link text-wrap d-inline-block w-100"> throwIf(x[, custom_message]) </a> <a href=#identity title=identity class="nav-link text-wrap d-inline-block w-100"> identity </a> <a href=#randomascii title=randomPrintableASCII class="nav-link text-wrap d-inline-block w-100"> randomPrintableASCII </a> <a href=#randomstring title=randomString class="nav-link text-wrap d-inline-block w-100"> randomString </a> <a href=#randomfixedstring title=randomFixedString class="nav-link text-wrap d-inline-block w-100"> randomFixedString </a> <a href=#randomstringutf8 title=randomStringUTF8 class="nav-link text-wrap d-inline-block w-100"> randomStringUTF8 </a> <a href=#getSetting title=getSetting class="nav-link text-wrap d-inline-block w-100"> getSetting </a> <a href=#is-decimal-overflow title=isDecimalOverflow class="nav-link text-wrap d-inline-block w-100"> isDecimalOverflow </a> <a href=#count-digits title=countDigits class="nav-link text-wrap d-inline-block w-100"> countDigits </a> <a href=#error-code-to-name title=errorCodeToName class="nav-link text-wrap d-inline-block w-100"> errorCodeToName </a> <a href=#tcpPort title=tcpPort class="nav-link text-wrap d-inline-block w-100"> tcpPort </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?da3fd50d></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>