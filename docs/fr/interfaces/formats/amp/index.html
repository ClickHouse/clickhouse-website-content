<!doctype html><html ⚡ lang=fr> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>Formats d'entrée et de sortie | Documentation ClickHouse</title><link href=https://clickhouse.tech/docs/fr/interfaces/formats/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Formats d'entrée et de sortie | Documentation ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/fr/interfaces/formats/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Formats d'entrée et de sortie | Documentation ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer,header,main,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}b,strong{font-weight:bolder}sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}caption{padding-top:.75rem;padding-bottom:.75rem;color:#6c757d;text-align:left;caption-side:bottom}th{text-align:inherit}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}template{display:none}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table td,.table th{padding:.75rem;vertical-align:top;border-top:1px solid #dee2e6}.table thead th{vertical-align:bottom;border-bottom:2px solid #dee2e6}.table tbody+tbody{border-top:2px solid #dee2e6}.table-primary,.table-primary>td,.table-primary>th{background-color:#b8daff}.table-primary tbody+tbody,.table-primary td,.table-primary th,.table-primary thead th{border-color:#7abaff}.table-light,.table-light>td,.table-light>th{background-color:#fdfdfe}.table-light tbody+tbody,.table-light td,.table-light th,.table-light thead th{border-color:#fbfcfc}.table-dark,.table-dark>td,.table-dark>th{background-color:#c6c8ca}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#95999c}.table .thead-dark th{color:#fff;background-color:#343a40;border-color:#454d55}.table .thead-light th{color:#495057;background-color:#e9ecef;border-color:#dee2e6}.table-dark{color:#fff;background-color:#343a40}.table-dark td,.table-dark th,.table-dark thead th{border-color:#454d55}.custom-select.is-valid{border-color:#28a745;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group,.btn-group-vertical{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group-vertical>.btn:hover,.btn-group>.btn:hover{z-index:1}.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.btn-group-vertical{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:center;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn-group:not(:last-child)>.btn{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn:not(:first-child){border-top-left-radius:0;border-top-right-radius:0}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-file,.input-group>.custom-select{position:relative;-ms-flex:1 1 0;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-file+.custom-file,.input-group>.custom-file+.custom-select,.input-group>.custom-select+.custom-file,.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-file .custom-file-input:focus{z-index:4}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.custom-file{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-file-input{position:relative;z-index:2;width:100%;height:calc(1.5em+.75rem+2px);margin:0;opacity:0}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.border{border:1px solid #dee2e6}.border-right{border-right:1px solid #dee2e6}.border-bottom{border-bottom:1px solid #dee2e6}.border-0{border:0}.border-right-0{border-right:0}.border-bottom-0{border-bottom:0}.border-primary{border-color:#007bff}.border-light{border-color:#f8f9fa}.border-dark{border-color:#343a40}.border-white{border-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.position-fixed{position:fixed}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.h-auto{height:auto}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pr-0{padding-right:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pr-1{padding-right:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pr-2{padding-right:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pr-3{padding-right:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pr-4{padding-right:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pr-5{padding-right:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}.m-auto{margin:auto}.my-auto{margin-top:auto}.mr-auto{margin-right:auto}.mb-auto,.my-auto{margin-bottom:auto}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pr-md-0{padding-right:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pr-md-1{padding-right:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pr-md-2{padding-right:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pr-md-3{padding-right:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pr-md-4{padding-right:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pr-md-5{padding-right:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}.m-md-auto{margin:auto}.my-md-auto{margin-top:auto}.mr-md-auto{margin-right:auto}.mb-md-auto,.my-md-auto{margin-bottom:auto}}@media(min-width:992px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pr-lg-0{padding-right:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pr-lg-1{padding-right:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pr-lg-2{padding-right:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pr-lg-3{padding-right:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pr-lg-4{padding-right:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pr-lg-5{padding-right:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}.m-lg-auto{margin:auto}.my-lg-auto{margin-top:auto}.mr-lg-auto{margin-right:auto}.mb-lg-auto,.my-lg-auto{margin-bottom:auto}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table td,.table th{background-color:#fff}.table-dark{color:inherit}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#dee2e6}.table .thead-dark th{color:inherit;border-color:#dee2e6}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-red{color:#ff3939}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content thead{background:#444451;color:#fff}#content td,#content th{padding:.75rem;vertical-align:top}#content td{border:1px solid #dee2e6}#content th{border:1px solid #444451}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre,td,th,thead,tr{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content thead{background:#333}#content td{border:1px solid #444451}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .k{color:#000;font-weight:700}.syntax .l{color:#08f}.syntax .n{color:#2f1e2e}.syntax .o{color:#800}.syntax .p{color:#2f1e2e}.syntax .cp{color:#8d8687}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .m{color:#08f}.syntax .s{color:#48b685}.syntax .na{color:#06b6ef}.syntax .nc{color:#fec418}.syntax .nd{color:#5bc4bf}.syntax .ne{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .nt{color:#5bc4bf}.syntax .mi{color:#08f}.syntax .s2{color:#48b685}.syntax .se{color:#08f}.syntax .si{color:#08f}.syntax .s1{color:#080}.syntax .ss{color:#48b685}.syntax .il{color:#08f}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .ss{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Help wanted!</p> <p class=lead>The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href=/docs/en/interfaces/formats/ class=alert-link>You can also use the original English version as a reference.</a></p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fr/interfaces/formats.md target=_blank rel="external nofollow noreferrer"> Help ClickHouse documentation by editing this page </a> </p> </div> <h1 id=formats>Formats pour les données D'entrée et de sortie<a class=headerlink href=../amp/#formats title="Permanent link"> </a></h1> <p>ClickHouse peut accepter et renvoyer des données dans différents formats. Un format pris en charge pour l'entrée peut être utilisée pour analyser les données fournies à <code class=syntax>INSERT</code>s, pour effectuer <code class=syntax>SELECT</code>s à partir d'une table sauvegardée par fichier, telle Qu'un fichier, une URL ou un HDFS, ou pour lire un dictionnaire externe. Un format pris en charge pour la sortie peut être utilisé pour organiser<br> les résultats d'une <code class=syntax>SELECT</code> et pour effectuer <code class=syntax>INSERT</code>s dans une table sauvegardée par fichier.</p> <p>Les formats pris en charge sont:</p> <table> <thead> <tr> <th>Format</th> <th>Entrée</th> <th>Sortie</th> </tr> </thead> <tbody> <tr> <td><a href=../amp/#tabseparated>TabSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#tabseparatedraw>TabSeparatedRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#tabseparatedwithnames>TabSeparatedWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#format-template>Modèle</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#templateignorespaces>TemplateIgnoreSpaces</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../amp/#csv>CSV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#csvwithnames>CSVWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#format-customseparated>CustomSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#data-format-values>Valeur</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#vertical>Vertical</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#verticalraw>VerticalRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#json>JSON</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#jsoncompact>JSONCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#jsoneachrow>JSONEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#tskv>TSKV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#pretty>Joli</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#prettycompact>PrettyCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#prettycompactmonoblock>PrettyCompactMonoBlock</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#prettynoescapes>PrettyNoEscapes</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#prettyspace>PrettySpace</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#protobuf>Protobuf</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#data-format-avro>Avro</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#data-format-avro-confluent>AvroConfluent</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../amp/#data-format-parquet>Parquet</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#data-format-orc>ORC</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../amp/#rowbinary>RowBinary</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#rowbinarywithnamesandtypes>Rowbinarywithnamesettypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#native>Natif</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#null>NULL</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#xml>XML</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=../amp/#capnproto>CapnProto</a></td> <td>✔</td> <td>✗</td> </tr> </tbody> </table> <p>Vous pouvez contrôler certains paramètres de traitement de format avec les paramètres ClickHouse. Pour plus d'informations, lisez le <a href=../../../operations/settings/settings/amp/ >Paramètre</a> section.</p> <h2 id=tabseparated>TabSeparated<a class=headerlink href=../amp/#tabseparated title="Permanent link"> </a></h2> <p>Au format TabSeparated, les données sont écrites par ligne. Chaque ligne contient des valeurs séparées par des onglets. Chaque valeur est suivie par un onglet, à l'exception de la dernière valeur dans la ligne, qui est suivi par un saut de ligne. Les flux de ligne strictement Unix sont supposés partout. La dernière ligne doit également contenir un saut de ligne à la fin. Les valeurs sont écrites au format texte, sans guillemets et avec des caractères spéciaux échappés.</p> <p>Ce format est également disponible sous le nom de <code class=syntax>TSV</code>.</p> <p>Le <code class=syntax>TabSeparated</code> le format est pratique pour le traitement des données à l'aide de programmes et de scripts personnalisés. Il est utilisé par défaut dans L'interface HTTP et dans le mode batch du client de ligne de commande. Ce format permet également de transférer des données entre différents SGBD. Par exemple, vous pouvez obtenir un dump de MySQL et le télécharger sur ClickHouse, ou vice versa.</p> <p>Le <code class=syntax>TabSeparated</code> format prend en charge la sortie des valeurs totales (lors de L'utilisation avec des totaux) et des valeurs extrêmes (lorsque ‘extremes’ est réglé sur 1). Dans ces cas, les valeurs totales et les extrêmes sont sorties après les données principales. Le résultat principal, les valeurs totales et les extrêmes sont séparés les uns des autres par une ligne vide. Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>TabSeparated</span><span class=o>``</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>2014-03-17      1406958
2014-03-18      1383658
2014-03-19      1405797
2014-03-20      1353623
2014-03-21      1245779
2014-03-22      1031592
2014-03-23      1046491

1970-01-01      8873898

2014-03-17      1031592
2014-03-23      1406958
</code></pre></div> <h3 id=data-formatting>Mise En Forme Des Données<a class=headerlink href=../amp/#data-formatting title="Permanent link"> </a></h3> <p>Les nombres entiers sont écrits sous forme décimale. Les numéros peuvent contenir un supplément “+” caractère au début (ignoré lors de l'analyse, et non enregistré lors du formatage). Les nombres non négatifs ne peuvent pas contenir le signe négatif. Lors de la lecture, il est permis d'analyser une chaîne vide en tant que zéro, ou (pour les types signés) une chaîne composée d'un signe moins en tant que zéro. Les nombres qui ne correspondent pas au type de données correspondant peuvent être analysés comme un nombre différent, sans message d'erreur.</p> <p>Les nombres à virgule flottante sont écrits sous forme décimale. Le point est utilisé comme séparateur décimal. Les entrées exponentielles sont prises en charge, tout comme ‘inf’, ‘+inf’, ‘-inf’, et ‘nan’. Une entrée de nombres à virgule flottante peut commencer ou se terminer par une virgule décimale.<br> Pendant le formatage, la précision peut être perdue sur les nombres à virgule flottante.<br> Pendant l'analyse, il n'est pas strictement nécessaire de lire le nombre représentable de la machine le plus proche.</p> <p>Les Dates sont écrites au format AAAA-MM-JJ et analysées dans le même format, mais avec tous les caractères comme séparateurs.<br> Les Dates avec les heures sont écrites dans le format <code class=syntax>YYYY-MM-DD hh:mm:ss</code> et analysé dans le même format, mais avec des caractères comme séparateurs.<br> Tout cela se produit dans le fuseau horaire du système au moment où le client ou le serveur démarre (selon lequel d'entre eux formate les données). Pour les dates avec des heures, l'heure d'été n'est pas spécifiée. Donc, si un vidage a des temps pendant l'heure d'été, le vidage ne correspond pas sans équivoque aux données, et l'analyse sélectionnera l'une des deux fois.<br> Lors d'une opération de lecture, les dates et dates incorrectes avec des heures peuvent être analysées avec un débordement naturel ou en tant que dates et heures nulles, sans message d'erreur.</p> <p>À titre d'exception, l'analyse des dates avec des heures est également prise en charge au format d'horodatage Unix, si elle se compose exactement de 10 chiffres décimaux. Le résultat n'est pas dépendant du fuseau horaire. Les formats AAAA-MM-JJ hh:mm:ss et NNNNNNNNNN sont différenciés automatiquement.</p> <p>Les chaînes sont sorties avec des caractères spéciaux échappés par une barre oblique inverse. Les séquences d'échappement suivantes sont utilisées pour la sortie: <code class=syntax>\b</code>, <code class=syntax>\f</code>, <code class=syntax>\r</code>, <code class=syntax>\n</code>, <code class=syntax>\t</code>, <code class=syntax>\0</code>, <code class=syntax>\'</code>, <code class=syntax>\\</code>. L'analyse prend également en charge les séquences <code class=syntax>\a</code>, <code class=syntax>\v</code>, et <code class=syntax>\xHH</code> (séquences d'échappement hexadécimales) et <code class=syntax>\c</code> séquences, où <code class=syntax>c</code> est un caractère (ces séquences sont convertis à <code class=syntax>c</code>). Ainsi, la lecture de données prend en charge les formats où un saut de ligne peut être écrit comme <code class=syntax>\n</code> ou <code class=syntax>\</code> ou comme un saut de ligne. Par exemple, la chaîne <code class=syntax>Hello world</code> avec un saut de ligne entre les mots au lieu de l'espace peut être analysé dans l'une des variantes suivantes:</p> <div class=codehilite><pre><span></span><code class=syntax>Hello\nworld

Hello\
world
</code></pre></div> <p>La deuxième variante est prise en charge car MySQL l'utilise lors de l'écriture de vidages séparés par des tabulations.</p> <p>L'ensemble minimum de caractères que vous devez échapper lors du passage de données au format TabSeparated: tab, saut de ligne (LF) et barre oblique inverse.</p> <p>Seul un petit ensemble de symboles sont échappés. Vous pouvez facilement tomber sur une valeur de chaîne que votre terminal va ruiner en sortie.</p> <p>Les tableaux sont écrits sous la forme d'une liste de valeurs séparées par des virgules entre crochets. Le nombre d'éléments dans le tableau sont formatés comme normalement. <code class=syntax>Date</code> et <code class=syntax>DateTime</code> les types sont écrits entre guillemets simples. Les chaînes sont écrites entre guillemets simples avec les mêmes règles d'échappement que ci-dessus.</p> <p><a href=../../../sql-reference/syntax/amp/ >NULL</a> est formaté en tant qu' <code class=syntax>\N</code>.</p> <p>Chaque élément de <a href=../../../sql-reference/data-types/nested-data-structures/nested/amp/ >Imbriqué</a> structures est représenté sous forme de tableau.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>nestedt</span>
<span class=p>(</span>
    <span class=o>`</span><span class=n>id</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>aux</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>a</span> <span class=n>UInt8</span><span class=p>,</span>
        <span class=n>b</span> <span class=n>String</span>
    <span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>nestedt</span> <span class=k>Values</span> <span class=p>(</span> <span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=p>[</span><span class=s1>'a'</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>nestedt</span> <span class=n>FORMAT</span> <span class=n>TSV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>1  [1]    ['a']
</code></pre></div> <h2 id=tabseparatedraw>TabSeparatedRaw<a class=headerlink href=../amp/#tabseparatedraw title="Permanent link"> </a></h2> <p>Diffère de <code class=syntax>TabSeparated</code> format en ce que les lignes sont écrites sans échappement.<br> Ce format n'est approprié que pour la sortie d'un résultat de requête, mais pas pour l'analyse (récupération des données à insérer dans une table).</p> <p>Ce format est également disponible sous le nom de <code class=syntax>TSVRaw</code>.</p> <h2 id=tabseparatedwithnames>TabSeparatedWithNames<a class=headerlink href=../amp/#tabseparatedwithnames title="Permanent link"> </a></h2> <p>Diffère de la <code class=syntax>TabSeparated</code> formater en ce que les noms de colonne sont écrits dans la première ligne.<br> Pendant l'analyse, la première ligne est complètement ignorée. Vous ne pouvez pas utiliser les noms de colonnes pour déterminer leur position ou vérifier leur exactitude.<br> (La prise en charge de l'analyse de la ligne d'en-tête peut être ajoutée à l'avenir.)</p> <p>Ce format est également disponible sous le nom de <code class=syntax>TSVWithNames</code>.</p> <h2 id=tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes<a class=headerlink href=../amp/#tabseparatedwithnamesandtypes title="Permanent link"> </a></h2> <p>Diffère de la <code class=syntax>TabSeparated</code> format que les noms de colonne sont écrits à la première ligne, tandis que les types de colonne sont dans la deuxième rangée.<br> Pendant l'analyse, les première et deuxième lignes sont complètement ignorées.</p> <p>Ce format est également disponible sous le nom de <code class=syntax>TSVWithNamesAndTypes</code>.</p> <h2 id=format-template>Modèle<a class=headerlink href=../amp/#format-template title="Permanent link"> </a></h2> <p>Ce format permet de spécifier une chaîne de format personnalisée avec des espaces réservés pour les valeurs avec une règle d'échappement spécifiée.</p> <p>Il utilise les paramètres <code class=syntax>format_template_resultset</code>, <code class=syntax>format_template_row</code>, <code class=syntax>format_template_rows_between_delimiter</code> and some settings of other formats (e.g. <code class=syntax>output_format_json_quote_64bit_integers</code> lors de l'utilisation de <code class=syntax>JSON</code> s'échapper, voir plus loin)</p> <p>Paramètre <code class=syntax>format_template_row</code> spécifie le chemin d'accès au fichier, qui contient une chaîne de format pour les lignes avec la syntaxe suivante:</p> <p><code class=syntax>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p> <p>où <code class=syntax>delimiter_i</code> est un délimiteur entre les valeurs (<code class=syntax>$</code> symbole peut être échappé comme <code class=syntax>$$</code>),<br> <code class=syntax>column_i</code> est un nom ou un index d'une colonne dont les valeurs sont choisies ou inséré (si vide, alors la colonne sera ignoré),<br> <code class=syntax>serializeAs_i</code> est une règle d'échappement pour les valeurs de colonne. Les règles d'échappement suivantes sont prises en charge:</p> <ul> <li><code class=syntax>CSV</code>, <code class=syntax>JSON</code>, <code class=syntax>XML</code> (de même pour les formats des mêmes noms)</li> <li><code class=syntax>Escaped</code> (de la même manière à <code class=syntax>TSV</code>)</li> <li><code class=syntax>Quoted</code> (de la même manière à <code class=syntax>Values</code>)</li> <li><code class=syntax>Raw</code> (sans s'échapper, de même pour <code class=syntax>TSVRaw</code>)</li> <li><code class=syntax>None</code> (pas de règle d'échappement, voir plus loin)</li> </ul> <p>Si une règle d'échappement est omise, alors <code class=syntax>None</code> sera utilisé. <code class=syntax>XML</code> et <code class=syntax>Raw</code> sont adaptés uniquement pour la sortie.</p> <p>Donc, pour la chaîne de format suivante:</p> <div class=codehilite><pre><span></span><code class=syntax>  `Search phrase: <span class=cp>${</span><span class=n>SearchPhrase</span><span class=p>:</span><span class=n>Quoted</span><span class=cp>}</span>, count: <span class=cp>${</span><span class=n>c</span><span class=p>:</span><span class=n>Escaped</span><span class=cp>}</span>, ad price: $$${price:JSON};`
</code></pre></div> <p>les valeurs de <code class=syntax>SearchPhrase</code>, <code class=syntax>c</code> et <code class=syntax>price</code> colonnes, qui sont échappées comme <code class=syntax>Quoted</code>, <code class=syntax>Escaped</code> et <code class=syntax>JSON</code> imprimées (pour sélectionner) ou sera prévu (insert) entre <code class=syntax>Search phrase:</code>, <code class=syntax>, count:</code>, <code class=syntax>, ad price: $</code> et <code class=syntax>;</code> délimiteurs respectivement. Exemple:</p> <p><code class=syntax>Search phrase: 'bathroom interior design', count: 2166, ad price: $3;</code></p> <p>Le <code class=syntax>format_template_rows_between_delimiter</code> paramètre spécifie délimiteur entre les lignes, qui est imprimé (ou attendu) après chaque ligne, sauf la dernière (<code class=syntax>\n</code> par défaut)</p> <p>Paramètre <code class=syntax>format_template_resultset</code> spécifie le chemin d'accès au fichier, qui contient une chaîne de format pour resultset. Format string for resultset a la même syntaxe qu'une chaîne de format pour row et permet de spécifier un préfixe, un suffixe et un moyen d'imprimer des informations supplémentaires. Il contient les espaces réservés suivants au lieu des noms de colonnes:</p> <ul> <li><code class=syntax>data</code> est les lignes avec des données dans <code class=syntax>format_template_row</code> format, séparés par des <code class=syntax>format_template_rows_between_delimiter</code>. Cet espace doit être le premier espace réservé dans la chaîne de format.</li> <li><code class=syntax>totals</code> est la ligne avec des valeurs totales dans <code class=syntax>format_template_row</code> format (lors de L'utilisation avec des totaux)</li> <li><code class=syntax>min</code> est la ligne avec des valeurs minimales dans <code class=syntax>format_template_row</code> format (lorsque les extrêmes sont définis sur 1)</li> <li><code class=syntax>max</code> est la ligne avec des valeurs maximales en <code class=syntax>format_template_row</code> format (lorsque les extrêmes sont définis sur 1)</li> <li><code class=syntax>rows</code> le nombre total de lignes de sortie</li> <li><code class=syntax>rows_before_limit</code> est le nombre minimal de lignes qu'il y aurait eu sans limite. Sortie uniquement si la requête contient LIMIT. Si la requête contient GROUP BY, rows_before_limit_at_least est le nombre exact de lignes qu'il y aurait eu sans limite.</li> <li><code class=syntax>time</code> est le temps d'exécution de la requête en secondes</li> <li><code class=syntax>rows_read</code> est le nombre de lignes a été lu</li> <li><code class=syntax>bytes_read</code> est le nombre d'octets (non compressé) a été lu</li> </ul> <p>Réservé <code class=syntax>data</code>, <code class=syntax>totals</code>, <code class=syntax>min</code> et <code class=syntax>max</code> ne doit pas avoir de règle d'échappement spécifiée (ou <code class=syntax>None</code> doit être spécifié explicitement). Les espaces réservés restants peuvent avoir une règle d'échappement spécifiée.<br> Si l' <code class=syntax>format_template_resultset</code> paramètre est une chaîne vide, <code class=syntax>${data}</code> est utilisé comme valeur par défaut.<br> Pour insérer des requêtes format permet de sauter certaines colonnes ou certains champs si préfixe ou suffixe (voir Exemple).</p> <p>Sélectionnez exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>'/some/path/resultset.format'</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>'/some/path/row.format'</span><span class=p>,</span> <span class=n>format_template_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>'\n    '</span>
</code></pre></div> <p><code class=syntax>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>&lt;!DOCTYPE HTML&gt;
&lt;html&gt; &lt;head&gt; &lt;title&gt;Search phrases&lt;/title&gt; &lt;/head&gt;
 &lt;body&gt;
  &lt;table border="1"&gt; &lt;caption&gt;Search phrases&lt;/caption&gt;
    &lt;tr&gt; &lt;th&gt;Search phrase&lt;/th&gt; &lt;th&gt;Count&lt;/th&gt; &lt;/tr&gt;
    ${data}
  &lt;/table&gt;
  &lt;table border="1"&gt; &lt;caption&gt;Max&lt;/caption&gt;
    ${max}
  &lt;/table&gt;
  &lt;b&gt;Processed ${rows_read:XML} rows in ${time:XML} sec&lt;/b&gt;
 &lt;/body&gt;
&lt;/html&gt;
</code></pre></div> <p><code class=syntax>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>&lt;tr&gt; &lt;td&gt;${0:XML}&lt;/td&gt; &lt;td&gt;${1:XML}&lt;/td&gt; &lt;/tr&gt;
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>"1"</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Search phrase<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Count<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8267016<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>bathroom interior design<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>2166<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>yandex<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1655<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>spring 2014 fashion<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1549<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>freeform photos<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1480<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>"1"</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Max<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8873898<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
 <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p>Insérez exemple:</p> <div class=codehilite><pre><span></span><code class=syntax>Some header
Page views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1
Page views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1
Total rows: 2
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>'/some/path/resultset.format'</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>'/some/path/row.format'</span>
</code></pre></div> <p><code class=syntax>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>Some header\n${data}\nTotal rows: ${:CSV}\n
</code></pre></div> <p><code class=syntax>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>Page views: ${PageViews:CSV}, User id: ${UserID:CSV}, Useless field: ${:CSV}, Duration: ${Duration:CSV}, Sign: ${Sign:CSV}
</code></pre></div> <p><code class=syntax>PageViews</code>, <code class=syntax>UserID</code>, <code class=syntax>Duration</code> et <code class=syntax>Sign</code> à l'intérieur des espaces réservés sont des noms de colonnes dans la table. Les valeurs après <code class=syntax>Useless field</code> en rangées et après <code class=syntax>\nTotal rows:</code> dans le suffixe sera ignoré.<br> Tous les séparateurs dans les données d'entrée doivent être strictement égal à délimiteurs dans les chaînes de format.</p> <h2 id=templateignorespaces>TemplateIgnoreSpaces<a class=headerlink href=../amp/#templateignorespaces title="Permanent link"> </a></h2> <p>Ce format est adapté uniquement pour l'entrée.<br> Semblable à <code class=syntax>Template</code>, mais ignore les espaces entre les séparateurs et les valeurs dans le flux d'entrée. Toutefois, si les chaînes de format contiennent des espaces, ces caractères seront attendus dans le flux d'entrée. Permet également de spécifier des espaces réservés vides (<code class=syntax>${}</code> ou <code class=syntax>${:None}</code>) pour diviser un délimiteur en parties séparées pour ignorer les espaces entre eux. Ces espaces réservés sont utilisés uniquement pour ignorer les caractères d'espace.<br> Il est possible de lire <code class=syntax>JSON</code> l'utilisation de ce format, si les valeurs des colonnes ont le même ordre dans toutes les lignes. Par exemple, la requête suivante peut être utilisée pour insérer des données à partir d'un exemple de format de sortie <a href=../amp/#json>JSON</a>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=k>table_name</span> <span class=n>FORMAT</span> <span class=n>TemplateIgnoreSpaces</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>'/some/path/resultset.format'</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>'/some/path/row.format'</span><span class=p>,</span> <span class=n>format_template_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>','</span>
</code></pre></div> <p><code class=syntax>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>{${}"meta"${}:${:JSON},${}"data"${}:${}[${data}]${},${}"totals"${}:${:JSON},${}"extremes"${}:${:JSON},${}"rows"${}:${:JSON},${}"rows_before_limit_at_least"${}:${:JSON}${}}
</code></pre></div> <p><code class=syntax>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>{${}"SearchPhrase"${}:${}${phrase:JSON}${},${}"c"${}:${}${cnt:JSON}${}}
</code></pre></div> <h2 id=tskv>TSKV<a class=headerlink href=../amp/#tskv title="Permanent link"> </a></h2> <p>Similaire à TabSeparated, mais affiche une valeur au format name = value. Les noms sont échappés de la même manière qu'au format TabSeparated, et le symbole = est également échappé.</p> <div class=codehilite><pre><span></span><code class=syntax>SearchPhrase=   count()=8267016
SearchPhrase=bathroom interior design    count()=2166
SearchPhrase=yandex     count()=1655
SearchPhrase=2014 spring fashion    count()=1549
SearchPhrase=freeform photos       count()=1480
SearchPhrase=angelina jolie    count()=1245
SearchPhrase=omsk       count()=1112
SearchPhrase=photos of dog breeds    count()=1091
SearchPhrase=curtain designs        count()=1064
SearchPhrase=baku       count()=1000
</code></pre></div> <p><a href=../../../sql-reference/syntax/amp/ >NULL</a> est formaté en tant qu' <code class=syntax>\N</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>TSKV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>x=1    y=\N
</code></pre></div> <p>Quand il y a un grand nombre de petites colonnes, ce format est inefficace, et il n'y a généralement pas de raison de l'utiliser. Néanmoins, ce n'est pas pire que JSONEachRow en termes d'efficacité.</p> <p>Both data output and parsing are supported in this format. For parsing, any order is supported for the values of different columns. It is acceptable for some values to be omitted – they are treated as equal to their default values. In this case, zeros and blank rows are used as default values. Complex values that could be specified in the table are not supported as defaults.</p> <p>L'analyse permet la présence du champ supplémentaire <code class=syntax>tskv</code> sans le signe égal ou de valeur. Ce champ est ignoré.</p> <h2 id=csv>CSV<a class=headerlink href=../amp/#csv title="Permanent link"> </a></h2> <p>Format des valeurs séparées par des virgules (<a href=https://tools.ietf.org/html/rfc4180 rel="external nofollow noreferrer" target=_blank>RFC</a>).</p> <p>Lors du formatage, les lignes sont entourées de guillemets doubles. Un guillemet double à l'intérieur d'une chaîne est affiché sous la forme de deux guillemets doubles dans une rangée. Il n'y a pas d'autres règles pour échapper les caractères. Date et date-heure sont entre guillemets. Les nombres sont produits sans guillemets. Les valeurs sont séparées par un caractère délimiteur, qui est <code class=syntax>,</code> par défaut. Le caractère délimiteur est défini dans le paramètre <a href=../../../operations/settings/settings/amp/#settings-format_csv_delimiter>format_csv_delimiter</a>. Les lignes sont séparées à L'aide du saut de ligne Unix (LF). Les tableaux sont sérialisés au format CSV comme suit: tout d'abord, le tableau est sérialisé en une chaîne comme au format TabSeparated, puis la chaîne résultante est sortie au format CSV entre guillemets doubles. Les Tuples au format CSV sont sérialisés en tant que colonnes séparées (c'est-à-dire que leur imbrication dans le tuple est perdue).</p> <div class=codehilite><pre><span></span><code class=syntax>$ clickhouse-client --format_csv_delimiter<span class=o>=</span><span class=s2>"|"</span> --query<span class=o>=</span><span class=s2>"INSERT INTO test.csv FORMAT CSV"</span> &lt; data.csv
</code></pre></div> <p>*Par défaut, le délimiteur est <code class=syntax>,</code>. Voir la <a href=../../../operations/settings/settings/amp/#settings-format_csv_delimiter>format_csv_delimiter</a> réglage pour plus d'informations.</p> <p>Lors de l'analyse, toutes les valeurs peuvent être analysés avec ou sans guillemets. Les guillemets doubles et simples sont pris en charge. Les lignes peuvent également être organisées sans guillemets. Dans ce cas, ils sont analysés jusqu'au caractère délimiteur ou au saut de ligne (CR ou LF). En violation de la RFC, lors de l'analyse des lignes sans guillemets, les espaces et les onglets de début et de fin sont ignorés. Pour le saut de ligne, les types Unix (LF), Windows (CR LF) et Mac OS Classic (CR LF) sont tous pris en charge.</p> <p>Les valeurs d'entrée non cotées vides sont remplacées par des valeurs par défaut pour les colonnes respectives, si<br> <a href=../../../operations/settings/settings/amp/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a><br> est activé.</p> <p><code class=syntax>NULL</code> est formaté en tant qu' <code class=syntax>\N</code> ou <code class=syntax>NULL</code> ou une chaîne vide non cotée (voir paramètres <a href=../../../operations/settings/settings/amp/#settings-input_format_csv_unquoted_null_literal_as_null>input_format_csv_unquoted_null_literal_as_null</a> et <a href=../../../operations/settings/settings/amp/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>).</p> <p>Le format CSV prend en charge la sortie des totaux et des extrêmes de la même manière que <code class=syntax>TabSeparated</code>.</p> <h2 id=csvwithnames>CSVWithNames<a class=headerlink href=../amp/#csvwithnames title="Permanent link"> </a></h2> <p>Imprime également la ligne d'en-tête, semblable à <code class=syntax>TabSeparatedWithNames</code>.</p> <h2 id=format-customseparated>CustomSeparated<a class=headerlink href=../amp/#format-customseparated title="Permanent link"> </a></h2> <p>Semblable à <a href=../amp/#format-template>Modèle</a>, mais il imprime ou lit toutes les colonnes et utilise la règle d'échappement du paramètre <code class=syntax>format_custom_escaping_rule</code> et délimiteurs de paramètres <code class=syntax>format_custom_field_delimiter</code>, <code class=syntax>format_custom_row_before_delimiter</code>, <code class=syntax>format_custom_row_after_delimiter</code>, <code class=syntax>format_custom_row_between_delimiter</code>, <code class=syntax>format_custom_result_before_delimiter</code> et <code class=syntax>format_custom_result_after_delimiter</code>, pas à partir de chaînes de format.<br> Il y a aussi <code class=syntax>CustomSeparatedIgnoreSpaces</code> le format, qui est similaire à <code class=syntax>TemplateIgnoreSpaces</code>.</p> <h2 id=json>JSON<a class=headerlink href=../amp/#json title="Permanent link"> </a></h2> <p>Sorties de données au format JSON. Outre les tables de données, il génère également des noms et des types de colonnes, ainsi que des informations supplémentaires: le nombre total de lignes de sortie et le nombre de lignes qui auraient pu être sorties s'il n'y avait pas de limite. Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=n>JSON</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span>
        <span class=nt>"meta"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"SearchPhrase"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"String"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"c"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"UInt64"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"data"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>""</span><span class=p>,</span>
                        <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"8267016"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>"bathroom interior design"</span><span class=p>,</span>
                        <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"2166"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>"yandex"</span><span class=p>,</span>
                        <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"1655"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>"spring 2014 fashion"</span><span class=p>,</span>
                        <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"1549"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>"freeform photos"</span><span class=p>,</span>
                        <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"1480"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"totals"</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>""</span><span class=p>,</span>
                <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"8873898"</span>
        <span class=p>},</span>

        <span class=nt>"extremes"</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>"min"</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>""</span><span class=p>,</span>
                        <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"1480"</span>
                <span class=p>},</span>
                <span class=nt>"max"</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>"SearchPhrase"</span><span class=p>:</span> <span class=s2>""</span><span class=p>,</span>
                        <span class=nt>"c"</span><span class=p>:</span> <span class=s2>"8267016"</span>
                <span class=p>}</span>
        <span class=p>},</span>

        <span class=nt>"rows"</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>"rows_before_limit_at_least"</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>Le JSON est compatible avec JavaScript. Pour ce faire, certains caractères sont en outre échappés: la barre oblique <code class=syntax>/</code> s'est échappée comme l' <code class=syntax>\/</code>; sauts de ligne alternatifs <code class=syntax>U+2028</code> et <code class=syntax>U+2029</code>, qui cassent certains navigateurs, sont échappés comme <code class=syntax>\uXXXX</code>. Les caractères de contrôle ASCII sont échappés: retour arrière, flux de formulaire, saut de ligne, retour chariot et tabulation horizontale sont remplacés par <code class=syntax>\b</code>, <code class=syntax>\f</code>, <code class=syntax>\n</code>, <code class=syntax>\r</code>, <code class=syntax>\t</code> , ainsi que les octets restants dans la plage 00-1F en utilisant <code class=syntax>\uXXXX</code> sequences. Invalid UTF-8 sequences are changed to the replacement character � so the output text will consist of valid UTF-8 sequences. For compatibility with JavaScript, Int64 and UInt64 integers are enclosed in double-quotes by default. To remove the quotes, you can set the configuration parameter <a href=../../../operations/settings/settings/amp/#session_settings-output_format_json_quote_64bit_integers>output_format_json_quote_64bit_integers</a> à 0.</p> <p><code class=syntax>rows</code> – The total number of output rows.</p> <p><code class=syntax>rows_before_limit_at_least</code> Le nombre minimal de lignes aurait été sans limite. Sortie uniquement si la requête contient LIMIT.<br> Si la requête contient GROUP BY, rows_before_limit_at_least est le nombre exact de lignes qu'il y aurait eu sans limite.</p> <p><code class=syntax>totals</code> – Total values (when using WITH TOTALS).</p> <p><code class=syntax>extremes</code> – Extreme values (when extremes are set to 1).</p> <p>Ce format n'est approprié que pour la sortie d'un résultat de requête, mais pas pour l'analyse (récupération des données à insérer dans une table).</p> <p>Supports ClickHouse <a href=../../../sql-reference/syntax/amp/ >NULL</a> s'affiche à l'écran <code class=syntax>null</code> dans la sortie JSON.</p> <p>Voir aussi l' <a href=../amp/#jsoneachrow>JSONEachRow</a> format.</p> <h2 id=jsoncompact>JSONCompact<a class=headerlink href=../amp/#jsoncompact title="Permanent link"> </a></h2> <p>Diffère de JSON uniquement en ce que les lignes de données sont sorties dans des tableaux, pas dans des objets.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span>
        <span class=nt>"meta"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"SearchPhrase"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"String"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"c"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"UInt64"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"data"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>[</span><span class=s2>""</span><span class=p>,</span> <span class=s2>"8267016"</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>"bathroom interior design"</span><span class=p>,</span> <span class=s2>"2166"</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>"yandex"</span><span class=p>,</span> <span class=s2>"1655"</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>"fashion trends spring 2014"</span><span class=p>,</span> <span class=s2>"1549"</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>"freeform photo"</span><span class=p>,</span> <span class=s2>"1480"</span><span class=p>]</span>
        <span class=p>],</span>

        <span class=nt>"totals"</span><span class=p>:</span> <span class=p>[</span><span class=s2>""</span><span class=p>,</span><span class=s2>"8873898"</span><span class=p>],</span>

        <span class=nt>"extremes"</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>"min"</span><span class=p>:</span> <span class=p>[</span><span class=s2>""</span><span class=p>,</span><span class=s2>"1480"</span><span class=p>],</span>
                <span class=nt>"max"</span><span class=p>:</span> <span class=p>[</span><span class=s2>""</span><span class=p>,</span><span class=s2>"8267016"</span><span class=p>]</span>
        <span class=p>},</span>

        <span class=nt>"rows"</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>"rows_before_limit_at_least"</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</code></pre></div> <p>Ce format n'est approprié que pour la sortie d'un résultat de requête, mais pas pour l'analyse (récupération des données à insérer dans une table).<br> Voir aussi l' <code class=syntax>JSONEachRow</code> format.</p> <h2 id=jsoneachrow>JSONEachRow<a class=headerlink href=../amp/#jsoneachrow title="Permanent link"> </a></h2> <p>Lorsque vous utilisez ce format, ClickHouse affiche les lignes en tant qu'objets JSON séparés et délimités par des retours à la ligne, mais les données dans leur ensemble ne sont pas JSON valides.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span><span class=nt>"SearchPhrase"</span><span class=p>:</span><span class=s2>"curtain designs"</span><span class=p>,</span><span class=nt>"count()"</span><span class=p>:</span><span class=s2>"1064"</span><span class=p>}</span>
<span class=p>{</span><span class=nt>"SearchPhrase"</span><span class=p>:</span><span class=s2>"baku"</span><span class=p>,</span><span class=nt>"count()"</span><span class=p>:</span><span class=s2>"1000"</span><span class=p>}</span>
<span class=p>{</span><span class=nt>"SearchPhrase"</span><span class=p>:</span><span class=s2>""</span><span class=p>,</span><span class=nt>"count()"</span><span class=p>:</span><span class=s2>"8267016"</span><span class=p>}</span>
</code></pre></div> <p>Lors de l'insertion des données, vous devez fournir un objet JSON distinct pour chaque ligne.</p> <h3 id=inserting-data>Insertion De Données<a class=headerlink href=../amp/#inserting-data title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"PageViews"</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span> <span class=ss>"UserID"</span><span class=p>:</span><span class=ss>"4324182021466249494"</span><span class=p>,</span> <span class=ss>"Duration"</span><span class=p>:</span><span class=mi>146</span><span class=p>,</span><span class=ss>"Sign"</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=err>}</span> <span class=err>{</span><span class=ss>"UserID"</span><span class=p>:</span><span class=ss>"4324182021466249494"</span><span class=p>,</span><span class=ss>"PageViews"</span><span class=p>:</span><span class=mi>6</span><span class=p>,</span><span class=ss>"Duration"</span><span class=p>:</span><span class=mi>185</span><span class=p>,</span><span class=ss>"Sign"</span><span class=p>:</span><span class=mi>1</span><span class=err>}</span>
</code></pre></div> <p>Clickhouse permet:</p> <ul> <li>Toute commande de paires clé-valeur dans l'objet.</li> <li>Omettre certaines valeurs.</li> </ul> <p>ClickHouse ignore les espaces entre les éléments et les virgules après les objets. Vous pouvez passer tous les objets en une seule ligne. Vous n'avez pas à les séparer avec des sauts de ligne.</p> <p><strong>Valeurs omises traitement</strong></p> <p>Clickhouse remplace les valeurs omises par les valeurs par défaut pour le <a href=../../../sql-reference/data-types/amp/ >types de données</a>.</p> <p>Si <code class=syntax>DEFAULT expr</code> clickhouse utilise différentes règles de substitution en fonction de <a href=../../../operations/settings/settings/amp/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a> paramètre.</p> <p>Considérons le tableau suivant:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>x</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=n>a</span> <span class=k>DEFAULT</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
</code></pre></div> <ul> <li>Si <code class=syntax>input_format_defaults_for_omitted_fields = 0</code>, alors la valeur par défaut pour <code class=syntax>x</code> et <code class=syntax>a</code> égal <code class=syntax>0</code> (la valeur par défaut pour le <code class=syntax>UInt32</code> type de données).</li> <li>Si <code class=syntax>input_format_defaults_for_omitted_fields = 1</code>, alors la valeur par défaut pour <code class=syntax>x</code> égal <code class=syntax>0</code> mais la valeur par défaut de <code class=syntax>a</code> égal <code class=syntax>x * 2</code>.</li> </ul> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Avertissement</p> <p>Lors de l'insertion de données avec <code class=syntax>insert_sample_with_metadata = 1</code>, ClickHouse consomme plus de ressources de calcul, par rapport à l'insertion avec <code class=syntax>insert_sample_with_metadata = 0</code>.</p> </div> <h3 id=selecting-data>La Sélection De Données<a class=headerlink href=../amp/#selecting-data title="Permanent link"> </a></h3> <p>Envisager l' <code class=syntax>UserActivity</code> table comme un exemple:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────────UserID─┬─PageViews─┬─Duration─┬─Sign─┐
│ 4324182021466249494 │         5 │      146 │   -1 │
│ 4324182021466249494 │         6 │      185 │    1 │
└─────────────────────┴───────────┴──────────┴──────┘
</code></pre></div> <p>Requête <code class=syntax>SELECT * FROM UserActivity FORMAT JSONEachRow</code> retourner:</p> <div class=codehilite><pre><span></span><code class=syntax>{"UserID":"4324182021466249494","PageViews":5,"Duration":146,"Sign":-1}
{"UserID":"4324182021466249494","PageViews":6,"Duration":185,"Sign":1}
</code></pre></div> <p>Contrairement à l' <a href=../amp/#json>JSON</a> format, il n'y a pas de substitution de séquences UTF-8 non valides. Les valeurs sont échappés de la même manière que pour <code class=syntax>JSON</code>.</p> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Note</p> <p>Tout ensemble d'octets peut être sortie dans les cordes. L'utilisation de la <code class=syntax>JSONEachRow</code> formater si vous êtes sûr que les données de la table peuvent être formatées en tant que JSON sans perdre aucune information.</p> </div> <h3 id=jsoneachrow-nested>Utilisation de Structures imbriquées<a class=headerlink href=../amp/#jsoneachrow-nested title="Permanent link"> </a></h3> <p>Si vous avez une table avec <a href=../../../sql-reference/data-types/nested-data-structures/nested/amp/ >Imbriqué</a> colonnes de type de données, vous pouvez insérer des données JSON avec la même structure. Activer cette fonctionnalité avec le <a href=../../../operations/settings/settings/amp/#settings-input_format_import_nested_json>input_format_import_nested_json</a> paramètre.</p> <p>Par exemple, considérez le tableau suivant:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>json_each_row_nested</span> <span class=p>(</span><span class=n>n</span> <span class=n>Nested</span> <span class=p>(</span><span class=n>s</span> <span class=n>String</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span>
</code></pre></div> <p>Comme vous pouvez le voir dans la <code class=syntax>Nested</code> description du type de données, ClickHouse traite chaque composant de la structure imbriquée comme une colonne distincte (<code class=syntax>n.s</code> et <code class=syntax>n.i</code> pour notre table). Vous pouvez insérer des données de la manière suivante:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"n.s"</span><span class=p>:</span> <span class=p>[</span><span class=ss>"abc"</span><span class=p>,</span> <span class=ss>"def"</span><span class=p>],</span> <span class=ss>"n.i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}</span>
</code></pre></div> <p>Pour insérer des données en tant qu'objet JSON hiérarchique, définissez <a href=../../../operations/settings/settings/amp/#settings-input_format_import_nested_json>input_format_import_nested_json=1</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span>
    <span class=nt>"n"</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>"s"</span><span class=p>:</span> <span class=p>[</span><span class=s2>"abc"</span><span class=p>,</span> <span class=s2>"def"</span><span class=p>],</span>
        <span class=nt>"i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Sans ce paramètre, ClickHouse lance une exception.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>'input_format_import_nested_json'</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─name────────────────────────────┬─value─┐
│ input_format_import_nested_json │ 0     │
└─────────────────────────────────┴───────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"n"</span><span class=p>:</span> <span class=err>{</span><span class=ss>"s"</span><span class=p>:</span> <span class=p>[</span><span class=ss>"abc"</span><span class=p>,</span> <span class=ss>"def"</span><span class=p>],</span> <span class=ss>"i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>input_format_import_nested_json</span><span class=o>=</span><span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"n"</span><span class=p>:</span> <span class=err>{</span><span class=ss>"s"</span><span class=p>:</span> <span class=p>[</span><span class=ss>"abc"</span><span class=p>,</span> <span class=ss>"def"</span><span class=p>],</span> <span class=ss>"i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>json_each_row_nested</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─n.s───────────┬─n.i────┐
│ ['abc','def'] │ [1,23] │
└───────────────┴────────┘
</code></pre></div> <h2 id=native>Natif<a class=headerlink href=../amp/#native title="Permanent link"> </a></h2> <p>Le format le plus efficace. Les données sont écrites et lues par des blocs au format binaire. Pour chaque bloc, le nombre de lignes, le nombre de colonnes, les noms et types de colonnes et les parties de colonnes de ce bloc sont enregistrés les uns après les autres. En d'autres termes, ce format est “columnar” – it doesn't convert columns to rows. This is the format used in the native interface for interaction between servers, for using the command-line client, and for C++ clients.</p> <p>Vous pouvez utiliser ce format pour générer rapidement des vidages qui ne peuvent être lus que par le SGBD ClickHouse. Cela n'a pas de sens de travailler avec ce format vous-même.</p> <h2 id=null>NULL<a class=headerlink href=../amp/#null title="Permanent link"> </a></h2> <p>Rien n'est sortie. Cependant, la requête est traitée et, lors de l'utilisation du client de ligne de commande, les données sont transmises au client. Ceci est utilisé pour les tests, y compris les tests de performance.<br> Évidemment, ce format n'est approprié que pour la sortie, pas pour l'analyse.</p> <h2 id=pretty>Joli<a class=headerlink href=../amp/#pretty title="Permanent link"> </a></h2> <p>Affiche les données sous forme de tables Unicode-art, en utilisant également des séquences d'échappement ANSI pour définir les couleurs dans le terminal.<br> Une grille complète de la table est dessinée, et chaque ligne occupe deux lignes dans le terminal.<br> Chaque bloc de résultat est sorti sous la forme d'une table séparée. Ceci est nécessaire pour que les blocs puissent être sortis sans résultats de mise en mémoire tampon (la mise en mémoire tampon serait nécessaire pour pré-calculer la largeur visible de toutes les valeurs).</p> <p><a href=../../../sql-reference/syntax/amp/ >NULL</a> est sortie <code class=syntax>ᴺᵁᴸᴸ</code>.</p> <p>Exemple (montré pour le <a href=../amp/#prettycompact>PrettyCompact</a> format):</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┬────y─┐
│ 1 │ ᴺᵁᴸᴸ │
└───┴──────┘
</code></pre></div> <p>Les lignes ne sont pas échappées dans les formats Pretty*. Exemple est montré pour la <a href=../amp/#prettycompact>PrettyCompact</a> format:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'String with \'</span><span class=n>quotes</span><span class=err>\</span><span class=s1>' and \t character'</span> <span class=k>AS</span> <span class=n>Escaping_test</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─Escaping_test────────────────────────┐
│ String with 'quotes' and      character │
└──────────────────────────────────────┘
</code></pre></div> <p>Pour éviter de déverser trop de données sur le terminal, seules les 10 000 premières lignes sont imprimées. Si le nombre de lignes est supérieur ou égal à 10 000, le message “Showed first 10 000” est imprimé.<br> Ce format n'est approprié que pour la sortie d'un résultat de requête, mais pas pour l'analyse (récupération des données à insérer dans une table).</p> <p>Le joli format prend en charge la sortie des valeurs totales (lors de L'utilisation avec des totaux) et des extrêmes (lorsque ‘extremes’ est réglé sur 1). Dans ces cas, les valeurs totales et les valeurs extrêmes sont sorties après les données principales, dans des tableaux séparés. Exemple (montré pour le <a href=../amp/#prettycompact>PrettyCompact</a> format):</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>PrettyCompact</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1406958 │
│ 2014-03-18 │ 1383658 │
│ 2014-03-19 │ 1405797 │
│ 2014-03-20 │ 1353623 │
│ 2014-03-21 │ 1245779 │
│ 2014-03-22 │ 1031592 │
│ 2014-03-23 │ 1046491 │
└────────────┴─────────┘

Totals:
┌──EventDate─┬───────c─┐
│ 1970-01-01 │ 8873898 │
└────────────┴─────────┘

Extremes:
┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1031592 │
│ 2014-03-23 │ 1406958 │
└────────────┴─────────┘
</code></pre></div> <h2 id=prettycompact>PrettyCompact<a class=headerlink href=../amp/#prettycompact title="Permanent link"> </a></h2> <p>Diffère de <a href=../amp/#pretty>Joli</a> en ce que la grille est dessinée entre les lignes et le résultat est plus compact.<br> Ce format est utilisé par défaut dans le client de ligne de commande en mode interactif.</p> <h2 id=prettycompactmonoblock>PrettyCompactMonoBlock<a class=headerlink href=../amp/#prettycompactmonoblock title="Permanent link"> </a></h2> <p>Diffère de <a href=../amp/#prettycompact>PrettyCompact</a> dans ce cas, jusqu'à 10 000 lignes sont mises en mémoire tampon, puis sorties en tant que table unique, pas par blocs.</p> <h2 id=prettynoescapes>PrettyNoEscapes<a class=headerlink href=../amp/#prettynoescapes title="Permanent link"> </a></h2> <p>Diffère de Pretty en ce que les séquences d'échappement ANSI ne sont pas utilisées. Ceci est nécessaire pour afficher ce format dans un navigateur, ainsi que pour utiliser le ‘watch’ utilitaire de ligne de commande.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax>$ watch -n1 <span class=s2>"clickhouse-client --query='SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes'"</span>
</code></pre></div> <p>Vous pouvez utiliser L'interface HTTP pour afficher dans le navigateur.</p> <h3 id=prettycompactnoescapes>Joliscompactnoescapes<a class=headerlink href=../amp/#prettycompactnoescapes title="Permanent link"> </a></h3> <p>Le même que le réglage précédent.</p> <h3 id=prettyspacenoescapes>PrettySpaceNoEscapes<a class=headerlink href=../amp/#prettyspacenoescapes title="Permanent link"> </a></h3> <p>Le même que le réglage précédent.</p> <h2 id=prettyspace>PrettySpace<a class=headerlink href=../amp/#prettyspace title="Permanent link"> </a></h2> <p>Diffère de <a href=../amp/#prettycompact>PrettyCompact</a> dans cet espace (caractères d'espace) est utilisé à la place de la grille.</p> <h2 id=rowbinary>RowBinary<a class=headerlink href=../amp/#rowbinary title="Permanent link"> </a></h2> <p>Formats et analyse les données par ligne au format binaire. Les lignes et les valeurs sont répertoriées consécutivement, sans séparateurs.<br> Ce format est moins efficace que le format natif car il est basé sur des lignes.</p> <p>Les entiers utilisent une représentation little-endian de longueur fixe. Par exemple, UInt64 utilise 8 octets.<br> DateTime est représenté par UInt32 contenant L'horodatage Unix comme valeur.<br> Date est représenté comme un objet UInt16 qui contient le nombre de jours depuis 1970-01-01 comme valeur.<br> La chaîne est représentée par une longueur varint (non signée <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer" target=_blank>LEB128</a>), suivie par les octets de la chaîne.<br> FixedString est représenté simplement comme une séquence d'octets.</p> <p>Le tableau est représenté sous la forme d'une longueur varint (non signée <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer" target=_blank>LEB128</a>), suivie par les éléments de la matrice.</p> <p>Pour <a href=../../../sql-reference/syntax/amp/#null-literal>NULL</a> un soutien, un octet supplémentaire contenant 1 ou 0 est ajouté avant chaque <a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a> valeur. Si la valeur est 1, alors la valeur est <code class=syntax>NULL</code> et cet octet est interprétée comme une valeur distincte. Si 0, la valeur après l'octet n'est pas <code class=syntax>NULL</code>.</p> <h2 id=rowbinarywithnamesandtypes>Rowbinarywithnamesettypes<a class=headerlink href=../amp/#rowbinarywithnamesandtypes title="Permanent link"> </a></h2> <p>Semblable à <a href=../amp/#rowbinary>RowBinary</a> mais avec l'ajout de l'en-tête:</p> <ul> <li><a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer" target=_blank>LEB128</a>- nombre codé de colonnes (N)</li> <li>N <code class=syntax>String</code>s spécification des noms de colonnes</li> <li>N <code class=syntax>String</code>s spécification des types de colonnes</li> </ul> <h2 id=data-format-values>Valeur<a class=headerlink href=../amp/#data-format-values title="Permanent link"> </a></h2> <p>Imprime chaque ligne entre parenthèses. Les lignes sont séparées par des virgules. Il n'y a pas de virgule après la dernière ligne. Les valeurs entre parenthèses sont également séparées par des virgules. Les nombres sont produits dans un format décimal sans guillemets. Les tableaux sont affichés entre crochets. Les chaînes, les dates et les dates avec des heures sont affichées entre guillemets. Les règles d'échappement et l'analyse sont similaires à <a href=../amp/#tabseparated>TabSeparated</a> format. Pendant le formatage, les espaces supplémentaires ne sont pas insérés, mais pendant l'analyse, ils sont autorisés et ignorés (sauf pour les espaces à l'intérieur des valeurs de tableau, qui ne sont pas autorisés). <a href=../../../sql-reference/syntax/amp/ >NULL</a> est représentée comme <code class=syntax>NULL</code>.</p> <p>The minimum set of characters that you need to escape when passing data in Values ​​format: single quotes and backslashes.</p> <p>C'est le format qui est utilisé dans <code class=syntax>INSERT INTO t VALUES ...</code>, mais vous pouvez également l'utiliser pour le formatage des résultats de requête.</p> <p>Voir aussi: <a href=../../../operations/settings/settings/amp/#settings-input_format_values_interpret_expressions>input_format_values_interpret_expressions</a> et <a href=../../../operations/settings/settings/amp/#settings-input_format_values_deduce_templates_of_expressions>input_format_values_deduce_templates_of_expressions</a> paramètre.</p> <h2 id=vertical>Vertical<a class=headerlink href=../amp/#vertical title="Permanent link"> </a></h2> <p>Imprime chaque valeur sur une ligne distincte avec le nom de colonne spécifié. Ce format est pratique pour imprimer une ou plusieurs lignes si chaque ligne est constituée d'un grand nombre de colonnes.</p> <p><a href=../../../sql-reference/syntax/amp/ >NULL</a> est sortie <code class=syntax>ᴺᵁᴸᴸ</code>.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
x: 1
y: ᴺᵁᴸᴸ
</code></pre></div> <p>Les lignes ne sont pas échappées au format Vertical:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'string with \'</span><span class=n>quotes</span><span class=err>\</span><span class=s1>' and \t with some special \n characters'</span> <span class=k>AS</span> <span class=n>test</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
test: string with 'quotes' and      with some special
 characters
</code></pre></div> <p>Ce format n'est approprié que pour la sortie d'un résultat de requête, mais pas pour l'analyse (récupération des données à insérer dans une table).</p> <h2 id=verticalraw>VerticalRaw<a class=headerlink href=../amp/#verticalraw title="Permanent link"> </a></h2> <p>Semblable à <a href=../amp/#vertical>Vertical</a>, mais avec échapper désactivé. Ce format ne convient que pour la sortie des résultats de requête, pas pour l'analyse (recevoir des données et les insérer dans la table).</p> <h2 id=xml>XML<a class=headerlink href=../amp/#xml title="Permanent link"> </a></h2> <p>Le format XML ne convient que pour la sortie, pas pour l'analyse. Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cp>&lt;?xml version='1.0' encoding='UTF-8' ?&gt;</span>
<span class=nt>&lt;result&gt;</span>
        <span class=nt>&lt;meta&gt;</span>
                <span class=nt>&lt;columns&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>SearchPhrase<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>count()<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                <span class=nt>&lt;/columns&gt;</span>
        <span class=nt>&lt;/meta&gt;</span>
        <span class=nt>&lt;data&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>8267016<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>bathroom interior design<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>2166<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>yandex<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1655<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>2014 spring fashion<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1549<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>freeform photos<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1480<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>angelina jolie<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1245<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>omsk<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1112<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>photos of dog breeds<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1091<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>curtain designs<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1064<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>baku<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1000<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
        <span class=nt>&lt;/data&gt;</span>
        <span class=nt>&lt;rows&gt;</span>10<span class=nt>&lt;/rows&gt;</span>
        <span class=nt>&lt;rows_before_limit_at_least&gt;</span>141137<span class=nt>&lt;/rows_before_limit_at_least&gt;</span>
<span class=nt>&lt;/result&gt;</span>
</code></pre></div> <p>Si le nom de colonne n'a pas un format acceptable, juste ‘field’ est utilisé comme le nom de l'élément. En général, la structure XML suit la structure JSON.<br> Just as for JSON, invalid UTF-8 sequences are changed to the replacement character � so the output text will consist of valid UTF-8 sequences.</p> <p>Dans les valeurs de chaîne, les caractères <code class=syntax>&lt;</code> et <code class=syntax>&amp;</code> sont échappés comme <code class=syntax>&lt;</code> et <code class=syntax>&amp;</code>.</p> <p>Les tableaux sont produits comme <code class=syntax>&lt;array&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/array&gt;</code>,et n-uplets d' <code class=syntax>&lt;tuple&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/tuple&gt;</code>.</p> <h2 id=capnproto>CapnProto<a class=headerlink href=../amp/#capnproto title="Permanent link"> </a></h2> <p>Cap'n Proto est un format de message binaire similaire aux tampons de protocole et Thrift, mais pas comme JSON ou MessagePack.</p> <p>Les messages Cap'n Proto sont strictement typés et ne sont pas auto-descriptifs, ce qui signifie qu'ils ont besoin d'une description de schéma externe. Le schéma est appliqué à la volée et mise en cache pour chaque requête.</p> <div class=codehilite><pre><span></span><code class=syntax>$ cat capnproto_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>"INSERT INTO test.hits FORMAT CapnProto SETTINGS format_schema='schema:Message'"</span>
</code></pre></div> <p>Où <code class=syntax>schema.capnp</code> ressemble à ceci:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>struct</span> <span class=n>Message</span> {
  <span class=n>SearchPhrase</span> <span class=nd>@0</span> <span class=nc>:Text</span>;
  <span class=n>c</span> <span class=nd>@1</span> <span class=nc>:Uint64</span>;
}
</code></pre></div> <p>La désérialisation est efficace et n'augmente généralement pas la charge du système.</p> <p>Voir aussi <a href=../amp/#formatschema>Schéma De Format</a>.</p> <h2 id=protobuf>Protobuf<a class=headerlink href=../amp/#protobuf title="Permanent link"> </a></h2> <p>Protobuf-est un <a href=https://developers.google.com/protocol-buffers/ rel="external nofollow noreferrer" target=_blank>Protocol Buffers</a> format.</p> <p>Ce format nécessite un schéma de format externe. Le schéma est mis en cache entre les requêtes.<br> Clickhouse prend en charge les deux <code class=syntax>proto2</code> et <code class=syntax>proto3</code> syntaxe. Les champs répétés/optionnels/obligatoires sont pris en charge.</p> <p>Exemples d'utilisation:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=k>table</span> <span class=n>FORMAT</span> <span class=n>Protobuf</span> <span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>'schemafile:MessageType'</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>cat protobuf_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>"INSERT INTO test.table FORMAT Protobuf SETTINGS format_schema='schemafile:MessageType'"</span>
</code></pre></div> <p>où le fichier <code class=syntax>schemafile.proto</code> ressemble à ceci:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>syntax</span> <span class=l>= "proto3"</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>string</span> <span class=n>name</span> <span class=l>= 1</span>;
  <span class=n>string</span> <span class=n>surname</span> <span class=l>= 2</span>;
  <span class=n>uint32</span> <span class=n>birthDate</span> <span class=l>= 3</span>;
  <span class=n>repeated</span> <span class=n>string</span> <span class=n>phoneNumbers</span> <span class=l>= 4</span>;
};
</code></pre></div> <p>Pour trouver la correspondance entre les colonnes de table et les champs du type de message des tampons de protocole, ClickHouse compare leurs noms.<br> Cette comparaison est insensible à la casse et les caractères <code class=syntax>_</code> (trait de soulignement) et <code class=syntax>.</code> (dot) sont considérés comme égaux.<br> Si les types d'une colonne et d'un champ de message des tampons de protocole sont différents, la conversion nécessaire est appliquée.</p> <p>Les messages imbriqués sont pris en charge. Par exemple, pour le champ <code class=syntax>z</code> dans le type de message suivant</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>message</span> <span class=n>XType</span> {
    <span class=n>message</span> <span class=n>YType</span> {
      <span class=n>int32</span> <span class=n>z</span>;
    };
    <span class=n>repeated</span> <span class=n>YType</span> <span class=n>y</span>;
  };
  <span class=n>XType</span> <span class=n>x</span>;
};
</code></pre></div> <p>ClickHouse tente de trouver une colonne nommée <code class=syntax>x.y.z</code> (ou <code class=syntax>x_y_z</code> ou <code class=syntax>X.y_Z</code> et ainsi de suite).<br> Les messages imbriqués conviennent à l'entrée ou à la sortie d'un <a href=../../../sql-reference/data-types/nested-data-structures/nested/amp/ >structures de données imbriquées</a>.</p> <p>Valeurs par défaut définies dans un schéma protobuf comme ceci</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>syntax</span> <span class=l>= "proto2"</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>optional</span> <span class=n>int32</span> <span class=n>result_per_page</span> <span class=l>= 3 [default = 10]</span>;
}
</code></pre></div> <p>ne sont pas appliquées; la <a href=../../../sql-reference/statements/create/amp/#create-default-values>valeurs par défaut de la table</a> sont utilisés à leur place.</p> <p>Clickhouse entrées et sorties messages protobuf dans le <code class=syntax>length-delimited</code> format.<br> Cela signifie avant que chaque message devrait être écrit sa longueur comme un <a href=https://developers.google.com/protocol-buffers/docs/encoding#varints rel="external nofollow noreferrer" target=_blank>varint</a>.<br> Voir aussi <a href=https://cwiki.apache.org/confluence/display/GEODE/Delimiting+Protobuf+Messages rel="external nofollow noreferrer" target=_blank>comment lire / écrire des messages protobuf délimités par la longueur dans les langues populaires</a>.</p> <h2 id=data-format-avro>Avro<a class=headerlink href=../amp/#data-format-avro title="Permanent link"> </a></h2> <p><a href=http://avro.apache.org/ rel="external nofollow noreferrer" target=_blank>Apache Avro</a> est un cadre de sérialisation de données orienté ligne développé dans le projet Hadoop D'Apache.</p> <p>ClickHouse Avro format prend en charge la lecture et l'écriture <a href=http://avro.apache.org/docs/current/spec.html#Object+Container+Files rel="external nofollow noreferrer" target=_blank>Fichiers de données Avro</a>.</p> <h3 id=data_types-matching>Types De Données Correspondant<a class=headerlink href=../amp/#data_types-matching title="Permanent link"> </a></h3> <p>Le tableau ci-dessous montre les types de données pris en charge et comment ils correspondent à ClickHouse <a href=../../../sql-reference/data-types/amp/ >types de données</a> dans <code class=syntax>INSERT</code> et <code class=syntax>SELECT</code> requête.</p> <table> <thead> <tr> <th>Type de données Avro <code class=syntax>INSERT</code></th> <th>Type de données ClickHouse</th> <th>Type de données Avro <code class=syntax>SELECT</code></th> </tr> </thead> <tbody> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int (8/16/32)</a>, <a href=../../../sql-reference/data-types/int-uint/amp/ >UInt (8/16/32)</a></td> <td><code class=syntax>int</code></td> </tr> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int64</a>, <a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a></td> <td><code class=syntax>long</code></td> </tr> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../../sql-reference/data-types/float/amp/ >Float32</a></td> <td><code class=syntax>float</code></td> </tr> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../../sql-reference/data-types/float/amp/ >Float64</a></td> <td><code class=syntax>double</code></td> </tr> <tr> <td><code class=syntax>bytes</code>, <code class=syntax>string</code>, <code class=syntax>fixed</code>, <code class=syntax>enum</code></td> <td><a href=../../../sql-reference/data-types/string/amp/ >Chaîne</a></td> <td><code class=syntax>bytes</code></td> </tr> <tr> <td><code class=syntax>bytes</code>, <code class=syntax>string</code>, <code class=syntax>fixed</code></td> <td><a href=../../../sql-reference/data-types/fixedstring/amp/ >FixedString (N)</a></td> <td><code class=syntax>fixed(N)</code></td> </tr> <tr> <td><code class=syntax>enum</code></td> <td><a href=../../../sql-reference/data-types/enum/amp/ >Enum (8/16)</a></td> <td><code class=syntax>enum</code></td> </tr> <tr> <td><code class=syntax>array(T)</code></td> <td><a href=../../../sql-reference/data-types/array/amp/ >Array(T)</a></td> <td><code class=syntax>array(T)</code></td> </tr> <tr> <td><code class=syntax>union(null, T)</code>, <code class=syntax>union(T, null)</code></td> <td><a href=../../../sql-reference/data-types/date/amp/ >Nullable (T)</a></td> <td><code class=syntax>union(null, T)</code></td> </tr> <tr> <td><code class=syntax>null</code></td> <td><a href=../../../sql-reference/data-types/special-data-types/nothing/amp/ >Les Valeurs Null(Nothing)</a></td> <td><code class=syntax>null</code></td> </tr> <tr> <td><code class=syntax>int (date)</code> *</td> <td><a href=../../../sql-reference/data-types/date/amp/ >Date</a></td> <td><code class=syntax>int (date)</code> *</td> </tr> <tr> <td><code class=syntax>long (timestamp-millis)</code> *</td> <td><a href=../../../sql-reference/data-types/datetime/amp/ >DateTime64 (3)</a></td> <td><code class=syntax>long (timestamp-millis)</code> *</td> </tr> <tr> <td><code class=syntax>long (timestamp-micros)</code> *</td> <td><a href=../../../sql-reference/data-types/datetime/amp/ >DateTime64 (6)</a></td> <td><code class=syntax>long (timestamp-micros)</code> *</td> </tr> </tbody> </table> <p>* <a href=http://avro.apache.org/docs/current/spec.html#Logical+Types rel="external nofollow noreferrer" target=_blank>Types logiques Avro</a></p> <p>Types de données Avro non pris en charge: <code class=syntax>record</code> (non-root), <code class=syntax>map</code></p> <p>Types de données logiques Avro non pris en charge: <code class=syntax>uuid</code>, <code class=syntax>time-millis</code>, <code class=syntax>time-micros</code>, <code class=syntax>duration</code></p> <h3 id=inserting-data-1>Insertion De Données<a class=headerlink href=../amp/#inserting-data-1 title="Permanent link"> </a></h3> <p>Pour insérer des données d'un fichier Avro dans la table ClickHouse:</p> <div class=codehilite><pre><span></span><code class=syntax>$ cat file.avro <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO {some_table} FORMAT Avro"</span>
</code></pre></div> <p>Le schéma racine du fichier Avro d'entrée doit être de <code class=syntax>record</code> type.</p> <p>Pour trouver la correspondance entre les colonnes de table et les champs du schéma Avro ClickHouse compare leurs noms. Cette comparaison est sensible à la casse.<br> Les champs inutilisés sont ignorés.</p> <p>Les types de données des colonnes de la table ClickHouse peuvent différer des champs correspondants des données Avro insérées. Lors de l'insertion de données, ClickHouse interprète les types de données selon le tableau ci-dessus, puis <a href=../../../sql-reference/functions/type-conversion-functions/amp/#type_conversion_function-cast>jeter</a> les données au type de colonne correspondant.</p> <h3 id=selecting-data-1>La Sélection De Données<a class=headerlink href=../amp/#selecting-data-1 title="Permanent link"> </a></h3> <p>Pour sélectionner des données de la table ClickHouse dans un fichier Avro:</p> <div class=codehilite><pre><span></span><code class=syntax>$ clickhouse-client --query<span class=o>=</span><span class=s2>"SELECT * FROM {some_table} FORMAT Avro"</span> &gt; file.avro
</code></pre></div> <p>Les noms de colonnes doivent:</p> <ul> <li>commencer avec <code class=syntax>[A-Za-z_]</code></li> <li>par la suite contenir uniquement <code class=syntax>[A-Za-z0-9_]</code></li> </ul> <p>Sortie Avro fichier de compression et sync intervalle peut être configuré avec <a href=../../../operations/settings/settings/amp/#settings-output_format_avro_codec>output_format_avro_codec</a> et <a href=../../../operations/settings/settings/amp/#settings-output_format_avro_sync_interval>output_format_avro_sync_interval</a> respectivement.</p> <h2 id=data-format-avro-confluent>AvroConfluent<a class=headerlink href=../amp/#data-format-avro-confluent title="Permanent link"> </a></h2> <p>Avroconfluent prend en charge le décodage des messages Avro à objet unique couramment utilisés avec <a href=https://kafka.apache.org/ rel="external nofollow noreferrer" target=_blank>Kafka</a> et <a href=https://docs.confluent.io/current/schema-registry/index.html rel="external nofollow noreferrer" target=_blank>Confluentes Schéma De Registre</a>.</p> <p>Chaque message Avro intègre un id de schéma qui peut être résolu dans le schéma réel à l'aide du registre de schéma.</p> <p>Les schémas sont mis en cache une fois résolus.</p> <p>L'URL du registre de schéma est configurée avec <a href=../../../operations/settings/settings/amp/#settings-format_avro_schema_registry_url>format_avro_schema_registry_url</a></p> <h3 id=data_types-matching-1>Types De Données Correspondant<a class=headerlink href=../amp/#data_types-matching-1 title="Permanent link"> </a></h3> <p>Même que <a href=../amp/#data-format-avro>Avro</a></p> <h3 id=usage>Utilisation<a class=headerlink href=../amp/#usage title="Permanent link"> </a></h3> <p>Pour vérifier rapidement la résolution du schéma, vous pouvez utiliser <a href=https://github.com/edenhill/kafkacat rel="external nofollow noreferrer" target=_blank>kafkacat</a> avec <a href=../../../operations/utilities/clickhouse-local/amp/ >clickhouse-local</a>:</p> <div class=codehilite><pre><span></span><code class=syntax>$ kafkacat -b kafka-broker  -C -t topic1 -o beginning -f <span class=s1>'%s'</span> -c <span class=m>3</span> <span class=p>|</span> clickhouse-local   --input-format AvroConfluent --format_avro_schema_registry_url <span class=s1>'http://schema-registry'</span> -S <span class=s2>"field1 Int64, field2 String"</span>  -q <span class=s1>'select *  from table'</span>
<span class=m>1</span> a
<span class=m>2</span> b
<span class=m>3</span> c
</code></pre></div> <p>Utiliser <code class=syntax>AvroConfluent</code> avec <a href=../../../engines/table-engines/integrations/kafka/amp/ >Kafka</a>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>topic1_stream</span>
<span class=p>(</span>
    <span class=n>field1</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>field2</span> <span class=n>String</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Kafka</span><span class=p>()</span>
<span class=n>SETTINGS</span>
<span class=n>kafka_broker_list</span> <span class=o>=</span> <span class=s1>'kafka-broker'</span><span class=p>,</span>
<span class=n>kafka_topic_list</span> <span class=o>=</span> <span class=s1>'topic1'</span><span class=p>,</span>
<span class=n>kafka_group_name</span> <span class=o>=</span> <span class=s1>'group1'</span><span class=p>,</span>
<span class=n>kafka_format</span> <span class=o>=</span> <span class=s1>'AvroConfluent'</span><span class=p>;</span>

<span class=k>SET</span> <span class=n>format_avro_schema_registry_url</span> <span class=o>=</span> <span class=s1>'http://schema-registry'</span><span class=p>;</span>

<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>topic1_stream</span><span class=p>;</span>
</code></pre></div> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Avertissement</p> <p>Paramètre <code class=syntax>format_avro_schema_registry_url</code> doit être configuré dans <code class=syntax>users.xml</code> afin de maintenir sa valeur après un redémarrage.</p> </div> <h2 id=data-format-parquet>Parquet<a class=headerlink href=../amp/#data-format-parquet title="Permanent link"> </a></h2> <p><a href=http://parquet.apache.org/ rel="external nofollow noreferrer" target=_blank>Apache Parquet</a> est un format de stockage colonnaire répandu dans L'écosystème Hadoop. ClickHouse prend en charge les opérations de lecture et d'écriture pour ce format.</p> <h3 id=data_types-matching-2>Types De Données Correspondant<a class=headerlink href=../amp/#data_types-matching-2 title="Permanent link"> </a></h3> <p>Le tableau ci-dessous montre les types de données pris en charge et comment ils correspondent à ClickHouse <a href=../../../sql-reference/data-types/amp/ >types de données</a> dans <code class=syntax>INSERT</code> et <code class=syntax>SELECT</code> requête.</p> <table> <thead> <tr> <th>Type de données Parquet (<code class=syntax>INSERT</code>)</th> <th>Type de données ClickHouse</th> <th>Type de données Parquet (<code class=syntax>SELECT</code>)</th> </tr> </thead> <tbody> <tr> <td><code class=syntax>UINT8</code>, <code class=syntax>BOOL</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt8</a></td> <td><code class=syntax>UINT8</code></td> </tr> <tr> <td><code class=syntax>INT8</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int8</a></td> <td><code class=syntax>INT8</code></td> </tr> <tr> <td><code class=syntax>UINT16</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt16</a></td> <td><code class=syntax>UINT16</code></td> </tr> <tr> <td><code class=syntax>INT16</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int16</a></td> <td><code class=syntax>INT16</code></td> </tr> <tr> <td><code class=syntax>UINT32</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a></td> <td><code class=syntax>UINT32</code></td> </tr> <tr> <td><code class=syntax>INT32</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int32</a></td> <td><code class=syntax>INT32</code></td> </tr> <tr> <td><code class=syntax>UINT64</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a></td> <td><code class=syntax>UINT64</code></td> </tr> <tr> <td><code class=syntax>INT64</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int64</a></td> <td><code class=syntax>INT64</code></td> </tr> <tr> <td><code class=syntax>FLOAT</code>, <code class=syntax>HALF_FLOAT</code></td> <td><a href=../../../sql-reference/data-types/float/amp/ >Float32</a></td> <td><code class=syntax>FLOAT</code></td> </tr> <tr> <td><code class=syntax>DOUBLE</code></td> <td><a href=../../../sql-reference/data-types/float/amp/ >Float64</a></td> <td><code class=syntax>DOUBLE</code></td> </tr> <tr> <td><code class=syntax>DATE32</code></td> <td><a href=../../../sql-reference/data-types/date/amp/ >Date</a></td> <td><code class=syntax>UINT16</code></td> </tr> <tr> <td><code class=syntax>DATE64</code>, <code class=syntax>TIMESTAMP</code></td> <td><a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a></td> <td><code class=syntax>UINT32</code></td> </tr> <tr> <td><code class=syntax>STRING</code>, <code class=syntax>BINARY</code></td> <td><a href=../../../sql-reference/data-types/string/amp/ >Chaîne</a></td> <td><code class=syntax>STRING</code></td> </tr> <tr> <td>—</td> <td><a href=../../../sql-reference/data-types/fixedstring/amp/ >FixedString</a></td> <td><code class=syntax>STRING</code></td> </tr> <tr> <td><code class=syntax>DECIMAL</code></td> <td><a href=../../../sql-reference/data-types/decimal/amp/ >Décimal</a></td> <td><code class=syntax>DECIMAL</code></td> </tr> </tbody> </table> <p>Clickhouse prend en charge la précision configurable de <code class=syntax>Decimal</code> type. Le <code class=syntax>INSERT</code> requête traite le Parquet <code class=syntax>DECIMAL</code> tapez comme le ClickHouse <code class=syntax>Decimal128</code> type.</p> <p>Types de données Parquet non pris en charge: <code class=syntax>DATE32</code>, <code class=syntax>TIME32</code>, <code class=syntax>FIXED_SIZE_BINARY</code>, <code class=syntax>JSON</code>, <code class=syntax>UUID</code>, <code class=syntax>ENUM</code>.</p> <p>Les types de données des colonnes de table ClickHouse peuvent différer des champs correspondants des données de Parquet insérées. Lors de l'insertion de données, ClickHouse interprète les types de données selon le tableau ci-dessus, puis <a href=../../query_language/functions/type_conversion_functions/amp/#type_conversion_function-cast>jeter</a> les données de ce type de données qui est défini pour la colonne de la table ClickHouse.</p> <h3 id=inserting-and-selecting-data>Insertion et sélection de données<a class=headerlink href=../amp/#inserting-and-selecting-data title="Permanent link"> </a></h3> <p>Vous pouvez insérer des données Parquet à partir d'un fichier dans la table ClickHouse par la commande suivante:</p> <div class=codehilite><pre><span></span><code class=syntax>$ cat <span class=o>{</span>filename<span class=o>}</span> <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO {some_table} FORMAT Parquet"</span>
</code></pre></div> <p>Vous pouvez sélectionner des données à partir d'une table de ClickHouse et les enregistrer dans un fichier au format Parquet par la commande suivante:</p> <div class=codehilite><pre><span></span><code class=syntax>$ clickhouse-client --query<span class=o>=</span><span class=s2>"SELECT * FROM {some_table} FORMAT Parquet"</span> &gt; <span class=o>{</span>some_file.pq<span class=o>}</span>
</code></pre></div> <p>Pour échanger des données avec Hadoop, vous pouvez utiliser <a href=../../../engines/table-engines/integrations/hdfs/amp/ >Moteur de table HDFS</a>.</p> <h2 id=data-format-orc>ORC<a class=headerlink href=../amp/#data-format-orc title="Permanent link"> </a></h2> <p><a href=https://orc.apache.org/ rel="external nofollow noreferrer" target=_blank>Apache ORC</a> est un format de stockage colonnaire répandu dans L'écosystème Hadoop. Vous ne pouvez insérer des données dans ce format à ClickHouse.</p> <h3 id=data_types-matching-3>Types De Données Correspondant<a class=headerlink href=../amp/#data_types-matching-3 title="Permanent link"> </a></h3> <p>Le tableau ci-dessous montre les types de données pris en charge et comment ils correspondent à ClickHouse <a href=../../../sql-reference/data-types/amp/ >types de données</a> dans <code class=syntax>INSERT</code> requête.</p> <table> <thead> <tr> <th>Type de données ORC (<code class=syntax>INSERT</code>)</th> <th>Type de données ClickHouse</th> </tr> </thead> <tbody> <tr> <td><code class=syntax>UINT8</code>, <code class=syntax>BOOL</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt8</a></td> </tr> <tr> <td><code class=syntax>INT8</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int8</a></td> </tr> <tr> <td><code class=syntax>UINT16</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt16</a></td> </tr> <tr> <td><code class=syntax>INT16</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int16</a></td> </tr> <tr> <td><code class=syntax>UINT32</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a></td> </tr> <tr> <td><code class=syntax>INT32</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int32</a></td> </tr> <tr> <td><code class=syntax>UINT64</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a></td> </tr> <tr> <td><code class=syntax>INT64</code></td> <td><a href=../../../sql-reference/data-types/int-uint/amp/ >Int64</a></td> </tr> <tr> <td><code class=syntax>FLOAT</code>, <code class=syntax>HALF_FLOAT</code></td> <td><a href=../../../sql-reference/data-types/float/amp/ >Float32</a></td> </tr> <tr> <td><code class=syntax>DOUBLE</code></td> <td><a href=../../../sql-reference/data-types/float/amp/ >Float64</a></td> </tr> <tr> <td><code class=syntax>DATE32</code></td> <td><a href=../../../sql-reference/data-types/date/amp/ >Date</a></td> </tr> <tr> <td><code class=syntax>DATE64</code>, <code class=syntax>TIMESTAMP</code></td> <td><a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a></td> </tr> <tr> <td><code class=syntax>STRING</code>, <code class=syntax>BINARY</code></td> <td><a href=../../../sql-reference/data-types/string/amp/ >Chaîne</a></td> </tr> <tr> <td><code class=syntax>DECIMAL</code></td> <td><a href=../../../sql-reference/data-types/decimal/amp/ >Décimal</a></td> </tr> </tbody> </table> <p>Clickhouse prend en charge la précision configurable de la <code class=syntax>Decimal</code> type. Le <code class=syntax>INSERT</code> requête traite de l'ORC <code class=syntax>DECIMAL</code> tapez comme le ClickHouse <code class=syntax>Decimal128</code> type.</p> <p>Types de données ORC non pris en charge: <code class=syntax>DATE32</code>, <code class=syntax>TIME32</code>, <code class=syntax>FIXED_SIZE_BINARY</code>, <code class=syntax>JSON</code>, <code class=syntax>UUID</code>, <code class=syntax>ENUM</code>.</p> <p>Les types de données des colonnes de la table ClickHouse ne doivent pas correspondre aux champs de données Orc correspondants. Lors de l'insertion de données, ClickHouse interprète les types de données selon le tableau ci-dessus, puis <a href=../../../sql-reference/functions/type-conversion-functions/amp/#type_conversion_function-cast>jeter</a> les données du type de données défini pour la colonne clickhouse table.</p> <h3 id=inserting-data-2>Insertion De Données<a class=headerlink href=../amp/#inserting-data-2 title="Permanent link"> </a></h3> <p>Vous pouvez insérer des données ORC à partir d'un fichier dans la table ClickHouse par la commande suivante:</p> <div class=codehilite><pre><span></span><code class=syntax>$ cat filename.orc <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO some_table FORMAT ORC"</span>
</code></pre></div> <p>Pour échanger des données avec Hadoop, vous pouvez utiliser <a href=../../../engines/table-engines/integrations/hdfs/amp/ >Moteur de table HDFS</a>.</p> <h2 id=formatschema>Schéma De Format<a class=headerlink href=../amp/#formatschema title="Permanent link"> </a></h2> <p>Le nom du fichier contenant le schéma de format est défini par le paramètre <code class=syntax>format_schema</code>.<br> Il est nécessaire de définir ce paramètre lorsqu'il est utilisé dans l'un des formats <code class=syntax>Cap'n Proto</code> et <code class=syntax>Protobuf</code>.<br> Le format de schéma est une combinaison d'un nom de fichier et le nom d'un type de message dans ce fichier, délimité par une virgule,<br> e.g. <code class=syntax>schemafile.proto:MessageType</code>.<br> Si le fichier possède l'extension standard pour le format (par exemple, <code class=syntax>.proto</code> pour <code class=syntax>Protobuf</code>),<br> il peut être omis et dans ce cas, le format de schéma ressemble <code class=syntax>schemafile:MessageType</code>.</p> <p>Si vous entrez ou sortez des données via le <a href=../../cli/amp/ >client</a> dans le <a href=../../cli/amp/#cli_usage>mode interactif</a> le nom de fichier spécifié dans le format de schéma<br> peut contenir un chemin absolu, soit un chemin relatif au répertoire courant sur le client.<br> Si vous utilisez le client dans le <a href=../../cli/amp/#cli_usage>mode batch</a>, le chemin d'accès au schéma doit être relatif pour des raisons de sécurité.</p> <p>Si vous entrez ou sortez des données via le <a href=../../http/amp/ >Interface HTTP</a> le nom de fichier spécifié dans le format de schéma<br> doit être situé dans le répertoire spécifié dans <a href=../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-format_schema_path>format_schema_path</a><br> dans la configuration du serveur.</p> <h2 id=skippingerrors>Sauter Les Erreurs<a class=headerlink href=../amp/#skippingerrors title="Permanent link"> </a></h2> <p>Certains formats tels que <code class=syntax>CSV</code>, <code class=syntax>TabSeparated</code>, <code class=syntax>TSKV</code>, <code class=syntax>JSONEachRow</code>, <code class=syntax>Template</code>, <code class=syntax>CustomSeparated</code> et <code class=syntax>Protobuf</code> pouvez ignorer brisé ligne si erreur d'analyse s'est produite et poursuivre l'analyse à partir du début de la ligne suivante. Voir <a href=../../../operations/settings/settings/amp/#settings-input_format_allow_errors_num>input_format_allow_errors_num</a> et<br> <a href=../../../operations/settings/settings/amp/#settings-input_format_allow_errors_ratio>input_format_allow_errors_ratio</a> paramètre.<br> Limitation:<br> - En cas d'erreur d'analyse <code class=syntax>JSONEachRow</code> ignore toutes les données jusqu'à la nouvelle ligne (ou EOF), donc les lignes doivent être délimitées par <code class=syntax>\n</code> pour compter les erreurs correctement.<br> - <code class=syntax>Template</code> et <code class=syntax>CustomSeparated</code> utilisez delimiter après la dernière colonne et delimiter entre les lignes pour trouver le début de la ligne suivante, donc sauter les erreurs ne fonctionne que si au moins l'une d'entre elles n'est pas vide.</p> <p><a href=https://clickhouse.tech/docs/en/interfaces/formats/ target=_blank>Article Original</a> <!--hide--></p> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/fr/interfaces/formats/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 