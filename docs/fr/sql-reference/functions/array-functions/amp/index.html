<!doctype html><html ⚡ lang=fr> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>Travailler avec des tableaux | Documentation ClickHouse</title><link href=https://clickhouse.tech/docs/fr/sql-reference/functions/array-functions/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Travailler avec des tableaux | Documentation ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/fr/sql-reference/functions/array-functions/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Travailler avec des tableaux | Documentation ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer,main,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}.offset-1{margin-left:8.333333%}.offset-2{margin-left:16.666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.333333%}.offset-5{margin-left:41.666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.333333%}.offset-8{margin-left:66.666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.333333%}.offset-11{margin-left:91.666667%}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.333333%}.offset-md-2{margin-left:16.666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.333333%}.offset-md-5{margin-left:41.666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.333333%}.offset-md-8{margin-left:66.666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.333333%}.offset-md-11{margin-left:91.666667%}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.333333%}.offset-lg-2{margin-left:16.666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.333333%}.offset-lg-5{margin-left:41.666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.333333%}.offset-lg-8{margin-left:66.666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.333333%}.offset-lg-11{margin-left:91.666667%}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.position-fixed{position:fixed}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pr-0{padding-right:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pr-1{padding-right:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pr-2{padding-right:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pr-3{padding-right:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pr-4{padding-right:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pr-5{padding-right:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pr-md-0{padding-right:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pr-md-1{padding-right:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pr-md-2{padding-right:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pr-md-3{padding-right:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pr-md-4{padding-right:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pr-md-5{padding-right:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pr-lg-0{padding-right:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pr-lg-1{padding-right:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pr-lg-2{padding-right:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pr-lg-3{padding-right:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pr-lg-4{padding-right:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pr-lg-5{padding-right:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .k{color:#000;font-weight:700}.syntax .l{color:#08f}.syntax .n{color:#2f1e2e}.syntax .o{color:#800}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .m{color:#08f}.syntax .s{color:#48b685}.syntax .nb{color:#2f1e2e}.syntax .no{color:#ef6155}.syntax .ne{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .mi{color:#08f}.syntax .s2{color:#48b685}.syntax .se{color:#08f}.syntax .si{color:#08f}.syntax .s1{color:#080}.syntax .il{color:#08f}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .nb{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Help wanted!</p> <p class=lead>The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href=/docs/en/sql-reference/functions/array-functions/ class=alert-link>You can also use the original English version as a reference.</a></p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fr/sql-reference/functions/array-functions.md target=_blank rel="external nofollow noreferrer"> Help ClickHouse documentation by editing this page </a> </p> </div> <h1 id=functions-for-working-with-arrays>Fonctions pour travailler avec des tableaux<a class=headerlink href=../amp/#functions-for-working-with-arrays title="Permanent link"> </a></h1> <h2 id=function-empty>vide<a class=headerlink href=../amp/#function-empty title="Permanent link"> </a></h2> <p>Retourne 1 pour un tableau vide, ou 0 pour un non-vide.<br> Le type de résultat est UInt8.<br> La fonction fonctionne également pour les chaînes.</p> <h2 id=function-notempty>notEmpty<a class=headerlink href=../amp/#function-notempty title="Permanent link"> </a></h2> <p>Retourne 0 pour un tableau vide, ou 1 pour un non-vide.<br> Le type de résultat est UInt8.<br> La fonction fonctionne également pour les chaînes.</p> <h2 id=array_functions-length>longueur<a class=headerlink href=../amp/#array_functions-length title="Permanent link"> </a></h2> <p>Retourne le nombre d'éléments dans le tableau.<br> Le type de résultat est UInt64.<br> La fonction fonctionne également pour les chaînes.</p> <h2 id=emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64>emptyArrayUInt8, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64<a class=headerlink href=../amp/#emptyarrayuint8-emptyarrayuint16-emptyarrayuint32-emptyarrayuint64 title="Permanent link"> </a></h2> <h2 id=emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64>emptyArrayInt8, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64<a class=headerlink href=../amp/#emptyarrayint8-emptyarrayint16-emptyarrayint32-emptyarrayint64 title="Permanent link"> </a></h2> <h2 id=emptyarrayfloat32-emptyarrayfloat64>emptyArrayFloat32, emptyArrayFloat64<a class=headerlink href=../amp/#emptyarrayfloat32-emptyarrayfloat64 title="Permanent link"> </a></h2> <h2 id=emptyarraydate-emptyarraydatetime>emptyArrayDate, emptyArrayDateTime<a class=headerlink href=../amp/#emptyarraydate-emptyarraydatetime title="Permanent link"> </a></h2> <h2 id=emptyarraystring>emptyArrayString<a class=headerlink href=../amp/#emptyarraystring title="Permanent link"> </a></h2> <p>Accepte zéro argument et renvoie un tableau vide du type approprié.</p> <h2 id=emptyarraytosingle>emptyArrayToSingle<a class=headerlink href=../amp/#emptyarraytosingle title="Permanent link"> </a></h2> <p>Accepte un tableau vide et renvoie un élément de tableau qui est égal à la valeur par défaut.</p> <h2 id=rangeend-rangestart-end-step>plage (fin), Plage(début, fin [, étape])<a class=headerlink href=../amp/#rangeend-rangestart-end-step title="Permanent link"> </a></h2> <p>Retourne un tableau de nombres du début à la fin-1 par étape.<br> Si l'argument <code class=syntax>start</code> n'est pas spécifié, la valeur par défaut est 0.<br> Si l'argument <code class=syntax>step</code> n'est pas spécifié, la valeur par défaut est 1.<br> Il se comporte presque comme pythonic <code class=syntax>range</code>. Mais la différence est que tous les types d'arguments doivent être <code class=syntax>UInt</code> nombre.<br> Juste au cas où, une exception est levée si des tableaux d'une longueur totale de plus de 100 000 000 d'éléments sont créés dans un bloc de données.</p> <h2 id=arrayx1-operator-x1>array(x1, …), operator [x1, …]<a class=headerlink href=../amp/#arrayx1-operator-x1 title="Permanent link"> </a></h2> <p>Crée un tableau à partir des arguments de la fonction.<br> Les arguments doivent être des constantes et avoir des types qui ont le plus petit type commun. Au moins un argument doit être passé, sinon il n'est pas clair quel type de tableau créer. Qui est, vous ne pouvez pas utiliser cette fonction pour créer un tableau vide (pour ce faire, utilisez la ‘emptyArray*’ la fonction décrite ci-dessus).<br> Retourne un ‘Array(T)’ type de résultat, où ‘T’ est le plus petit type commun parmi les arguments passés.</p> <h2 id=arrayconcat>arrayConcat<a class=headerlink href=../amp/#arrayconcat title="Permanent link"> </a></h2> <p>Combine des tableaux passés comme arguments.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayConcat</span><span class=p>(</span><span class=n>arrays</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>arrays</code> – Arbitrary number of arguments of <a href=../../../data-types/array/amp/ >Tableau</a> type.<br> <strong>Exemple</strong></li> </ul> <!-- --> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayConcat</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────┐
│ [1,2,3,4,5,6] │
└───────────────┘
</code></pre></div> <h2 id=arrayelementarr-n-operator-arrn>arrayElement(arr, n), opérateur arr[n]<a class=headerlink href=../amp/#arrayelementarr-n-operator-arrn title="Permanent link"> </a></h2> <p>Récupérer l'élément avec l'index <code class=syntax>n</code> à partir du tableau <code class=syntax>arr</code>. <code class=syntax>n</code> doit être n'importe quel type entier.<br> Les index dans un tableau commencent à partir d'un.<br> Les index négatifs sont pris en charge. Dans ce cas, il sélectionne l'élément correspondant numérotées à partir de la fin. Exemple, <code class=syntax>arr[-1]</code> est le dernier élément du tableau.</p> <p>Si l'index est en dehors des limites d'un tableau, il renvoie une valeur (0 pour les nombres, une chaîne vide pour les cordes, etc.), sauf pour le cas avec un tableau non constant et un index constant 0 (dans ce cas, il y aura une erreur <code class=syntax>Array indices are 1-based</code>).</p> <h2 id=hasarr-elem>a (arr, elem)<a class=headerlink href=../amp/#hasarr-elem title="Permanent link"> </a></h2> <p>Vérifie si le ‘arr’ tableau a la ‘elem’ élément.<br> Retourne 0 si l'élément n'est pas dans le tableau, ou 1 si elle l'est.</p> <p><code class=syntax>NULL</code> est traitée comme une valeur.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>has</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>],</span> <span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─has([1, 2, NULL], NULL)─┐
│                       1 │
└─────────────────────────┘
</code></pre></div> <h2 id=hasall>hasAll<a class=headerlink href=../amp/#hasall title="Permanent link"> </a></h2> <p>Vérifie si un tableau est un sous-ensemble de l'autre.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>hasAll</span><span class=p>(</span><span class=k>set</span><span class=p>,</span> <span class=n>subset</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>set</code> – Array of any type with a set of elements.</li> <li><code class=syntax>subset</code> – Array of any type with elements that should be tested to be a subset of <code class=syntax>set</code>.</li> </ul> <p><strong>Les valeurs de retour</strong></p> <ul> <li><code class=syntax>1</code>, si <code class=syntax>set</code> contient tous les éléments de <code class=syntax>subset</code>.</li> <li><code class=syntax>0</code>, autrement.</li> </ul> <p><strong>Propriétés particulières</strong></p> <ul> <li>Un tableau vide est un sous-ensemble d'un tableau quelconque.</li> <li><code class=syntax>Null</code> traitée comme une valeur.</li> <li>Ordre des valeurs dans les deux tableaux n'a pas d'importance.</li> </ul> <p><strong>Exemple</strong></p> <p><code class=syntax>SELECT hasAll([], [])</code> retours 1.</p> <p><code class=syntax>SELECT hasAll([1, Null], [Null])</code> retours 1.</p> <p><code class=syntax>SELECT hasAll([1.0, 2, 3, 4], [1, 3])</code> retours 1.</p> <p><code class=syntax>SELECT hasAll(['a', 'b'], ['a'])</code> retours 1.</p> <p><code class=syntax>SELECT hasAll([1], ['a'])</code> renvoie 0.</p> <p><code class=syntax>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [3, 5]])</code> renvoie 0.</p> <h2 id=hasany>hasAny<a class=headerlink href=../amp/#hasany title="Permanent link"> </a></h2> <p>Vérifie si deux tableaux ont une intersection par certains éléments.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>hasAny</span><span class=p>(</span><span class=n>array1</span><span class=p>,</span> <span class=n>array2</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array1</code> – Array of any type with a set of elements.</li> <li><code class=syntax>array2</code> – Array of any type with a set of elements.</li> </ul> <p><strong>Les valeurs de retour</strong></p> <ul> <li><code class=syntax>1</code>, si <code class=syntax>array1</code> et <code class=syntax>array2</code> avoir un élément similaire au moins.</li> <li><code class=syntax>0</code>, autrement.</li> </ul> <p><strong>Propriétés particulières</strong></p> <ul> <li><code class=syntax>Null</code> traitée comme une valeur.</li> <li>Ordre des valeurs dans les deux tableaux n'a pas d'importance.</li> </ul> <p><strong>Exemple</strong></p> <p><code class=syntax>SELECT hasAny([1], [])</code> retourner <code class=syntax>0</code>.</p> <p><code class=syntax>SELECT hasAny([Null], [Null, 1])</code> retourner <code class=syntax>1</code>.</p> <p><code class=syntax>SELECT hasAny([-128, 1., 512], [1])</code> retourner <code class=syntax>1</code>.</p> <p><code class=syntax>SELECT hasAny([[1, 2], [3, 4]], ['a', 'c'])</code> retourner <code class=syntax>0</code>.</p> <p><code class=syntax>SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [1, 2]])</code> retourner <code class=syntax>1</code>.</p> <h2 id=indexofarr-x>indexOf (arr, x)<a class=headerlink href=../amp/#indexofarr-x title="Permanent link"> </a></h2> <p>Renvoie l'index de la première ‘x’ élément (à partir de 1) s'il est dans le tableau, ou 0 s'il ne l'est pas.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>indexOf</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=k>NULL</span><span class=p>],</span> <span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─indexOf([1, 3, NULL, NULL], NULL)─┐
│                                 3 │
└───────────────────────────────────┘
</code></pre></div> <p>Ensemble d'éléments de <code class=syntax>NULL</code> sont traités comme des valeurs normales.</p> <h2 id=countequalarr-x>countEqual (arr, x)<a class=headerlink href=../amp/#countequalarr-x title="Permanent link"> </a></h2> <p>Renvoie le nombre d'éléments dans le tableau égal à X. équivalent à arrayCount (elem - &gt; elem = x, arr).</p> <p><code class=syntax>NULL</code> les éléments sont traités comme des valeurs distinctes.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>countEqual</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=k>NULL</span><span class=p>],</span> <span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─countEqual([1, 2, NULL, NULL], NULL)─┐
│                                    2 │
└──────────────────────────────────────┘
</code></pre></div> <h2 id=array_functions-arrayenumerate>arrayEnumerate (arr)<a class=headerlink href=../amp/#array_functions-arrayenumerate title="Permanent link"> </a></h2> <p>Returns the array [1, 2, 3, …, length (arr) ]</p> <p>Cette fonction est normalement utilisée avec ARRAY JOIN. Il permet de compter quelque chose une seule fois pour chaque tableau après l'application de la jointure de tableau. Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=n>Reaches</span><span class=p>,</span>
    <span class=n>countIf</span><span class=p>(</span><span class=n>num</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Hits</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span>
    <span class=n>GoalsReached</span><span class=p>,</span>
    <span class=n>arrayEnumerate</span><span class=p>(</span><span class=n>GoalsReached</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span>
<span class=k>WHERE</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>160656</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─Reaches─┬──Hits─┐
│   95606 │ 31406 │
└─────────┴───────┘
</code></pre></div> <p>Dans cet exemple, Reaches est le nombre de conversions (les chaînes reçues après l'application de la jointure de tableau), et Hits est le nombre de pages vues (chaînes avant la jointure de tableau). Dans ce cas particulier, vous pouvez obtenir le même résultat dans une voie plus facile:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>sum</span><span class=p>(</span><span class=k>length</span><span class=p>(</span><span class=n>GoalsReached</span><span class=p>))</span> <span class=k>AS</span> <span class=n>Reaches</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=n>Hits</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>WHERE</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>160656</span><span class=p>)</span> <span class=k>AND</span> <span class=n>notEmpty</span><span class=p>(</span><span class=n>GoalsReached</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─Reaches─┬──Hits─┐
│   95606 │ 31406 │
└─────────┴───────┘
</code></pre></div> <p>Cette fonction peut également être utilisée dans les fonctions d'ordre supérieur. Par exemple, vous pouvez l'utiliser pour obtenir les indices de tableau pour les éléments qui correspondent à une condition.</p> <h2 id=arrayenumerateuniqarr>arrayEnumerateUniq(arr, …)<a class=headerlink href=../amp/#arrayenumerateuniqarr title="Permanent link"> </a></h2> <p>Renvoie un tableau de la même taille que le tableau source, indiquant pour chaque élément Quelle est sa position parmi les éléments de même valeur.<br> Par exemple: arrayEnumerateUniq([10, 20, 10, 30]) = [1, 1, 2, 1].</p> <p>Cette fonction est utile lors de L'utilisation de la jointure de tableau et de l'agrégation d'éléments de tableau.<br> Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>Goals</span><span class=p>.</span><span class=n>ID</span> <span class=k>AS</span> <span class=n>GoalID</span><span class=p>,</span>
    <span class=k>sum</span><span class=p>(</span><span class=n>Sign</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Reaches</span><span class=p>,</span>
    <span class=n>sumIf</span><span class=p>(</span><span class=n>Sign</span><span class=p>,</span> <span class=n>num</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Visits</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>visits</span>
<span class=nb>ARRAY</span> <span class=k>JOIN</span>
    <span class=n>Goals</span><span class=p>,</span>
    <span class=n>arrayEnumerateUniq</span><span class=p>(</span><span class=n>Goals</span><span class=p>.</span><span class=n>ID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>num</span>
<span class=k>WHERE</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>160656</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>GoalID</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>Reaches</span> <span class=k>DESC</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──GoalID─┬─Reaches─┬─Visits─┐
│   53225 │    3214 │   1097 │
│ 2825062 │    3188 │   1097 │
│   56600 │    2803 │    488 │
│ 1989037 │    2401 │    365 │
│ 2830064 │    2396 │    910 │
│ 1113562 │    2372 │    373 │
│ 3270895 │    2262 │    812 │
│ 1084657 │    2262 │    345 │
│   56599 │    2260 │    799 │
│ 3271094 │    2256 │    812 │
└─────────┴─────────┴────────┘
</code></pre></div> <p>Dans cet exemple, chaque ID d'objectif a un calcul du nombre de conversions (chaque élément de la structure de données imbriquées objectifs est un objectif atteint, que nous appelons une conversion) et le nombre de sessions. Sans array JOIN, nous aurions compté le nombre de sessions comme sum(signe). Mais dans ce cas particulier, les lignes ont été multipliées par la structure des objectifs imbriqués, donc pour compter chaque session une fois après cela, nous appliquons une condition à la valeur de arrayEnumerateUniq(Goals.ID) fonction.</p> <p>La fonction arrayEnumerateUniq peut prendre plusieurs tableaux de la même taille que les arguments. Dans ce cas, l'unicité est considérée pour les tuples d'éléments dans les mêmes positions dans tous les tableaux.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayEnumerateUniq</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────┐
│ [1,2,1,1,2,1] │
└───────────────┘
</code></pre></div> <p>Ceci est nécessaire lors de L'utilisation de Array JOIN avec une structure de données imbriquée et une agrégation supplémentaire entre plusieurs éléments de cette structure.</p> <h2 id=arraypopback>arrayPopBack<a class=headerlink href=../amp/#arraypopback title="Permanent link"> </a></h2> <p>Supprime le dernier élément du tableau.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPopBack</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> </ul> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPopBack</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───┐
│ [1,2] │
└───────┘
</code></pre></div> <h2 id=arraypopfront>arrayPopFront<a class=headerlink href=../amp/#arraypopfront title="Permanent link"> </a></h2> <p>Supprime le premier élément de la matrice.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPopFront</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> </ul> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPopFront</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───┐
│ [2,3] │
└───────┘
</code></pre></div> <h2 id=arraypushback>arrayPushBack<a class=headerlink href=../amp/#arraypushback title="Permanent link"> </a></h2> <p>Ajoute un élément à la fin du tableau.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPushBack</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=n>single_value</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> <li><code class=syntax>single_value</code> – A single value. Only numbers can be added to an array with numbers, and only strings can be added to an array of strings. When adding numbers, ClickHouse automatically sets the <code class=syntax>single_value</code> type pour le type de données du tableau. Pour plus d'informations sur les types de données dans ClickHouse, voir “<a href=../../../data-types/amp/#data_types>Types de données</a>”. Peut être <code class=syntax>NULL</code>. La fonction ajoute un <code class=syntax>NULL</code> tableau, et le type d'éléments de tableau convertit en <code class=syntax>Nullable</code>.</li> </ul> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPushBack</span><span class=p>([</span><span class=s1>'a'</span><span class=p>],</span> <span class=s1>'b'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────┐
│ ['a','b'] │
└───────────┘
</code></pre></div> <h2 id=arraypushfront>arrayPushFront<a class=headerlink href=../amp/#arraypushfront title="Permanent link"> </a></h2> <p>Ajoute un élément au début du tableau.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayPushFront</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=n>single_value</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array</code> – Array.</li> <li><code class=syntax>single_value</code> – A single value. Only numbers can be added to an array with numbers, and only strings can be added to an array of strings. When adding numbers, ClickHouse automatically sets the <code class=syntax>single_value</code> type pour le type de données du tableau. Pour plus d'informations sur les types de données dans ClickHouse, voir “<a href=../../../data-types/amp/#data_types>Types de données</a>”. Peut être <code class=syntax>NULL</code>. La fonction ajoute un <code class=syntax>NULL</code> tableau, et le type d'éléments de tableau convertit en <code class=syntax>Nullable</code>.</li> </ul> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayPushFront</span><span class=p>([</span><span class=s1>'b'</span><span class=p>],</span> <span class=s1>'a'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────┐
│ ['a','b'] │
└───────────┘
</code></pre></div> <h2 id=arrayresize>arrayResize<a class=headerlink href=../amp/#arrayresize title="Permanent link"> </a></h2> <p>Les changements de la longueur du tableau.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayResize</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=k>size</span><span class=p>[,</span> <span class=n>extender</span><span class=p>])</span>
</code></pre></div> <p><strong>Paramètre:</strong></p> <ul> <li><code class=syntax>array</code> — Array.</li> <li><code class=syntax>size</code> — Required length of the array.<ul> <li>Si <code class=syntax>size</code> est inférieure à la taille d'origine du tableau, le tableau est tronqué à partir de la droite.</li> </ul> </li> <li>Si <code class=syntax>size</code> est plus grande que la taille initiale du tableau, le tableau est étendu vers la droite avec <code class=syntax>extender</code> valeurs ou valeurs par défaut pour le type de données des éléments du tableau.</li> <li><code class=syntax>extender</code> — Value for extending an array. Can be <code class=syntax>NULL</code>.</li> </ul> <p><strong>Valeur renvoyée:</strong></p> <p>Un tableau de longueur <code class=syntax>size</code>.</p> <p><strong>Exemples d'appels</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayResize</span><span class=p>([</span><span class=mi>1</span><span class=p>],</span> <span class=mi>3</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayResize([1], 3)─┐
│ [1,0,0]             │
└─────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayResize</span><span class=p>([</span><span class=mi>1</span><span class=p>],</span> <span class=mi>3</span><span class=p>,</span> <span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayResize([1], 3, NULL)─┐
│ [1,NULL,NULL]             │
└───────────────────────────┘
</code></pre></div> <h2 id=arrayslice>arraySlice<a class=headerlink href=../amp/#arrayslice title="Permanent link"> </a></h2> <p>Retourne une tranche du tableau.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arraySlice</span><span class=p>(</span><span class=nb>array</span><span class=p>,</span> <span class=k>offset</span><span class=p>[,</span> <span class=k>length</span><span class=p>])</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array</code> – Array of data.</li> <li><code class=syntax>offset</code> – Indent from the edge of the array. A positive value indicates an offset on the left, and a negative value is an indent on the right. Numbering of the array items begins with 1.</li> <li><code class=syntax>length</code> - La longueur de la nécessaire tranche. Si vous spécifiez une valeur négative, la fonction renvoie un ouvert tranche <code class=syntax>[offset, array_length - length)</code>. Si vous omettez la valeur, la fonction renvoie la tranche <code class=syntax>[offset, the_end_of_array]</code>.</li> </ul> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySlice</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res────────┐
│ [2,NULL,4] │
└────────────┘
</code></pre></div> <p>Éléments de tableau définis sur <code class=syntax>NULL</code> sont traités comme des valeurs normales.</p> <h2 id=array_functions-sort>arraySort([func,] arr, …)<a class=headerlink href=../amp/#array_functions-sort title="Permanent link"> </a></h2> <p>Trie les éléments de la <code class=syntax>arr</code> tableau dans l'ordre croissant. Si l' <code class=syntax>func</code> fonction est spécifiée, l'ordre de tri est déterminé par le résultat de la <code class=syntax>func</code> fonction appliquée aux éléments du tableau. Si <code class=syntax>func</code> accepte plusieurs arguments, le <code class=syntax>arraySort</code> la fonction est passé plusieurs tableaux que les arguments de <code class=syntax>func</code> correspond à. Des exemples détaillés sont présentés à la fin de <code class=syntax>arraySort</code> Description.</p> <p>Exemple de tri de valeurs entières:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>0</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arraySort([1, 3, 3, 0])─┐
│ [0,1,3,3]               │
└─────────────────────────┘
</code></pre></div> <p>Exemple de tri des valeurs de chaîne:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>([</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>,</span> <span class=s1>'!'</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arraySort(['hello', 'world', '!'])─┐
│ ['!','hello','world']              │
└────────────────────────────────────┘
</code></pre></div> <p>Considérez l'ordre de tri suivant pour le <code class=syntax>NULL</code>, <code class=syntax>NaN</code> et <code class=syntax>Inf</code> valeur:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=n>inf</span><span class=p>,</span> <span class=o>-</span><span class=n>inf</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arraySort([1, nan, 2, NULL, 3, nan, -4, NULL, inf, -inf])─┐
│ [-inf,-4,1,2,3,inf,nan,nan,NULL,NULL]                     │
└───────────────────────────────────────────────────────────┘
</code></pre></div> <ul> <li><code class=syntax>-Inf</code> les valeurs sont d'abord dans le tableau.</li> <li><code class=syntax>NULL</code> les valeurs sont les derniers dans le tableau.</li> <li><code class=syntax>NaN</code> les valeurs sont juste avant <code class=syntax>NULL</code>.</li> <li><code class=syntax>Inf</code> les valeurs sont juste avant <code class=syntax>NaN</code>.</li> </ul> <p>Notez que <code class=syntax>arraySort</code> est un <a href=../../higher-order-functions/amp/ >fonction d'ordre supérieur</a>. Vous pouvez passer d'une fonction lambda comme premier argument. Dans ce cas, l'ordre de classement est déterminé par le résultat de la fonction lambda appliquée aux éléments de la matrice.</p> <p>Considérons l'exemple suivant:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>x</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [3,2,1] │
└─────────┘
</code></pre></div> <p>For each element of the source array, the lambda function returns the sorting key, that is, [1 –&gt; -1, 2 –&gt; -2, 3 –&gt; -3]. Since the <code class=syntax>arraySort</code> fonction trie les touches dans l'ordre croissant, le résultat est [3, 2, 1]. Ainsi, l' <code class=syntax>(x) –&gt; -x</code> fonction lambda définit le <a href=../amp/#array_functions-reverse-sort>l'ordre décroissant</a> dans un tri.</p> <p>La fonction lambda peut accepter plusieurs arguments. Dans ce cas, vous avez besoin de passer l' <code class=syntax>arraySort</code> fonction plusieurs tableaux de longueur identique à laquelle correspondront les arguments de la fonction lambda. Le tableau résultant sera composé d'éléments du premier tableau d'entrée; les éléments du(des) Tableau (s) d'entrée suivant (s) spécifient les clés de tri. Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res────────────────┐
│ ['world', 'hello'] │
└────────────────────┘
</code></pre></div> <p>Ici, les éléments qui sont passés dans le deuxième tableau ([2, 1]) définissent une clé de tri pour l'élément correspondant à partir du tableau source ([‘hello’, ‘world’]), qui est, [‘hello’ –&gt; 2, ‘world’ –&gt; 1]. Since the lambda function doesn't use <code class=syntax>x</code>, les valeurs réelles du tableau source n'affectent pas l'ordre dans le résultat. Si, ‘hello’ sera le deuxième élément du résultat, et ‘world’ sera le premier.</p> <p>D'autres exemples sont présentés ci-dessous.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=s1>'c'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'a'</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [2,1,0] │
└─────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [2,1,0] │
└─────────┘
</code></pre></div> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Note</p> <p>Pour améliorer l'efficacité du tri, de la <a class=alert-link href=https://en.wikipedia.org/wiki/Schwartzian_transform rel="external nofollow noreferrer" target=_blank>Transformation schwartzienne</a> est utilisée.</p> </div> <h2 id=array_functions-reverse-sort>arrayReverseSort([func,] arr, …)<a class=headerlink href=../amp/#array_functions-reverse-sort title="Permanent link"> </a></h2> <p>Trie les éléments de la <code class=syntax>arr</code> tableau dans l'ordre décroissant. Si l' <code class=syntax>func</code> la fonction est spécifiée, <code class=syntax>arr</code> est trié en fonction du résultat de la <code class=syntax>func</code> fonction appliquée aux éléments du tableau, puis le tableau trié est inversé. Si <code class=syntax>func</code> accepte plusieurs arguments, le <code class=syntax>arrayReverseSort</code> la fonction est passé plusieurs tableaux que les arguments de <code class=syntax>func</code> correspond à. Des exemples détaillés sont présentés à la fin de <code class=syntax>arrayReverseSort</code> Description.</p> <p>Exemple de tri de valeurs entières:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>0</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReverseSort([1, 3, 3, 0])─┐
│ [3,3,1,0]                      │
└────────────────────────────────┘
</code></pre></div> <p>Exemple de tri des valeurs de chaîne:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>([</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>,</span> <span class=s1>'!'</span><span class=p>]);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReverseSort(['hello', 'world', '!'])─┐
│ ['world','hello','!']                     │
└───────────────────────────────────────────┘
</code></pre></div> <p>Considérez l'ordre de tri suivant pour le <code class=syntax>NULL</code>, <code class=syntax>NaN</code> et <code class=syntax>Inf</code> valeur:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=k>NULL</span><span class=p>,</span> <span class=n>inf</span><span class=p>,</span> <span class=o>-</span><span class=n>inf</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────────────────────────────┐
│ [inf,3,2,1,-4,-inf,nan,nan,NULL,NULL] │
└───────────────────────────────────────┘
</code></pre></div> <ul> <li><code class=syntax>Inf</code> les valeurs sont d'abord dans le tableau.</li> <li><code class=syntax>NULL</code> les valeurs sont les derniers dans le tableau.</li> <li><code class=syntax>NaN</code> les valeurs sont juste avant <code class=syntax>NULL</code>.</li> <li><code class=syntax>-Inf</code> les valeurs sont juste avant <code class=syntax>NaN</code>.</li> </ul> <p>Notez que l' <code class=syntax>arrayReverseSort</code> est un <a href=../../higher-order-functions/amp/ >fonction d'ordre supérieur</a>. Vous pouvez passer d'une fonction lambda comme premier argument. Exemple est montré ci-dessous.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>x</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [1,2,3] │
└─────────┘
</code></pre></div> <p>Le tableau est trié de la façon suivante:</p> <ol> <li>Dans un premier temps, le tableau source ([1, 2, 3]) est trié en fonction du résultat de la fonction lambda appliquée aux éléments du tableau. Le résultat est un tableau [3, 2, 1].</li> <li>Tableau qui est obtenu à l'étape précédente, est renversé. Donc, le résultat final est [1, 2, 3].</li> </ol> <p>La fonction lambda peut accepter plusieurs arguments. Dans ce cas, vous avez besoin de passer l' <code class=syntax>arrayReverseSort</code> fonction plusieurs tableaux de longueur identique à laquelle correspondront les arguments de la fonction lambda. Le tableau résultant sera composé d'éléments du premier tableau d'entrée; les éléments du(des) Tableau (s) d'entrée suivant (s) spécifient les clés de tri. Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=s1>'hello'</span><span class=p>,</span> <span class=s1>'world'</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span> <span class=k>as</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res───────────────┐
│ ['hello','world'] │
└───────────────────┘
</code></pre></div> <p>Dans cet exemple, le tableau est trié de la façon suivante:</p> <ol> <li>Au début, le tableau source ([‘hello’, ‘world’]) est triée selon le résultat de la fonction lambda appliquée aux éléments de tableaux. Les éléments qui sont passés dans le deuxième tableau ([2, 1]), définissent les clés de tri pour les éléments correspondants du tableau source. Le résultat est un tableau [‘world’, ‘hello’].</li> <li>Tableau trié lors de l'étape précédente, est renversé. Donc, le résultat final est [‘hello’, ‘world’].</li> </ol> <p>D'autres exemples sont présentés ci-dessous.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=s1>'a'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'c'</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [5,3,4] │
└─────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverseSort</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=o>-</span><span class=n>y</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>res</span><span class=p>;</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────┐
│ [4,3,5] │
└─────────┘
</code></pre></div> <h2 id=arrayuniqarr>arrayUniq(arr, …)<a class=headerlink href=../amp/#arrayuniqarr title="Permanent link"> </a></h2> <p>Si un argument est passé, il compte le nombre de différents éléments dans le tableau.<br> Si plusieurs arguments sont passés, il compte le nombre de tuples différents d'éléments aux positions correspondantes dans plusieurs tableaux.</p> <p>Si vous souhaitez obtenir une liste des éléments dans un tableau, vous pouvez utiliser arrayReduce(‘groupUniqArray’, arr).</p> <h2 id=array-functions-join>arrayJoin (arr)<a class=headerlink href=../amp/#array-functions-join title="Permanent link"> </a></h2> <p>Une fonction spéciale. Voir la section <a href=../../array-join/amp/#functions_arrayjoin>“ArrayJoin function”</a>.</p> <h2 id=arraydifference>tableaudifférence<a class=headerlink href=../amp/#arraydifference title="Permanent link"> </a></h2> <p>Calcule la différence entre les éléments de tableau adjacents. Renvoie un tableau où le premier élément sera 0, le second est la différence entre <code class=syntax>a[1] - a[0]</code>, etc. The type of elements in the resulting array is determined by the type inference rules for subtraction (e.g. <code class=syntax>UInt8</code> - <code class=syntax>UInt8</code> = <code class=syntax>Int16</code>).</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayDifference</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array</code> – <a href=https://clickhouse.tech/docs/en/data_types/array/ target=_blank>Tableau</a>.</li> </ul> <p><strong>Valeurs renvoyées</strong></p> <p>Renvoie un tableau de différences entre les éléments adjacents.</p> <p>Type: <a href=https://clickhouse.tech/docs/en/data_types/int_uint/#uint-ranges target=_blank>UInt*</a>, <a href=https://clickhouse.tech/docs/en/data_types/int_uint/#int-ranges target=_blank>Int*</a>, <a href=https://clickhouse.tech/docs/en/data_types/float/ target=_blank>Flottant*</a>.</p> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayDifference</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayDifference([1, 2, 3, 4])─┐
│ [0,1,1,1]                     │
└───────────────────────────────┘
</code></pre></div> <p>Exemple de débordement dû au type de résultat Int64:</p> <p>Requête:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayDifference</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10000000000000000000</span><span class=p>])</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayDifference([0, 10000000000000000000])─┐
│ [0,-8446744073709551616]                   │
└────────────────────────────────────────────┘
</code></pre></div> <h2 id=arraydistinct>arrayDistinct<a class=headerlink href=../amp/#arraydistinct title="Permanent link"> </a></h2> <p>Prend un tableau, retourne un tableau contenant les différents éléments seulement.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayDistinct</span><span class=p>(</span><span class=nb>array</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array</code> – <a href=https://clickhouse.tech/docs/en/data_types/array/ target=_blank>Tableau</a>.</li> </ul> <p><strong>Valeurs renvoyées</strong></p> <p>Retourne un tableau contenant les éléments distincts.</p> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayDistinct</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayDistinct([1, 2, 2, 3, 1])─┐
│ [1,2,3]                        │
└────────────────────────────────┘
</code></pre></div> <h2 id=array_functions-arrayenumeratedense>arrayEnumerateDense(arr)<a class=headerlink href=../amp/#array_functions-arrayenumeratedense title="Permanent link"> </a></h2> <p>Renvoie un tableau de la même taille que le tableau source, indiquant où chaque élément apparaît en premier dans le tableau source.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayEnumerateDense</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>30</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayEnumerateDense([10, 20, 10, 30])─┐
│ [1,2,1,3]                             │
└───────────────────────────────────────┘
</code></pre></div> <h2 id=array-functions-arrayintersect>arrayIntersect (arr)<a class=headerlink href=../amp/#array-functions-arrayintersect title="Permanent link"> </a></h2> <p>Prend plusieurs tableaux, retourne un tableau avec des éléments présents dans tous les tableaux source. L'ordre des éléments dans le tableau résultant est le même que dans le premier tableau.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>arrayIntersect</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span> <span class=k>AS</span> <span class=n>no_intersect</span><span class=p>,</span>
    <span class=n>arrayIntersect</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span> <span class=k>AS</span> <span class=k>intersect</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─no_intersect─┬─intersect─┐
│ []           │ [1]       │
└──────────────┴───────────┘
</code></pre></div> <h2 id=arrayreduce>arrayReduce<a class=headerlink href=../amp/#arrayreduce title="Permanent link"> </a></h2> <p>Applique une fonction d'agrégation aux éléments du tableau et renvoie son résultat. Le nom de la fonction d'agrégation est passé sous forme de chaîne entre guillemets simples <code class=syntax>'max'</code>, <code class=syntax>'sum'</code>. Lorsque vous utilisez des fonctions d'agrégat paramétriques, le paramètre est indiqué après le nom de la fonction entre parenthèses <code class=syntax>'uniqUpTo(6)'</code>.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayReduce</span><span class=p>(</span><span class=n>agg_func</span><span class=p>,</span> <span class=n>arr1</span><span class=p>,</span> <span class=n>arr2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>arrN</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>agg_func</code> — The name of an aggregate function which should be a constant <a href=../../../data-types/string/amp/ >chaîne</a>.</li> <li><code class=syntax>arr</code> — Any number of <a href=../../../data-types/array/amp/ >tableau</a> tapez les colonnes comme paramètres de la fonction d'agrégation.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'max'</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('max', [1, 2, 3])─┐
│                             3 │
└───────────────────────────────┘
</code></pre></div> <p>Si une fonction d'agrégation prend plusieurs arguments, cette fonction doit être appliqué à plusieurs ensembles de même taille.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'maxIf'</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('maxIf', [3, 5], [1, 0])─┐
│                                    3 │
└──────────────────────────────────────┘
</code></pre></div> <p>Exemple avec une fonction d'agrégat paramétrique:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'uniqUpTo(3)'</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('uniqUpTo(3)', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10])─┐
│                                                           4 │
└─────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=arrayreduceinranges>arrayReduceInRanges<a class=headerlink href=../amp/#arrayreduceinranges title="Permanent link"> </a></h2> <p>Applique une fonction d'agrégation d'éléments de tableau dans des plages et retourne un tableau contenant le résultat correspondant à chaque gamme. La fonction retourne le même résultat que plusieurs <code class=syntax>arrayReduce(agg_func, arraySlice(arr1, index, length), ...)</code>.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayReduceInRanges</span><span class=p>(</span><span class=n>agg_func</span><span class=p>,</span> <span class=n>ranges</span><span class=p>,</span> <span class=n>arr1</span><span class=p>,</span> <span class=n>arr2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>arrN</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>agg_func</code> — The name of an aggregate function which should be a constant <a href=../../../data-types/string/amp/ >chaîne</a>.</li> <li><code class=syntax>ranges</code> — The ranges to aggretate which should be an <a href=../../../data-types/array/amp/ >tableau</a> de <a href=../../../data-types/tuple/amp/ >tuple</a> qui contient l'indice et la longueur de chaque plage.</li> <li><code class=syntax>arr</code> — Any number of <a href=../../../data-types/array/amp/ >tableau</a> tapez les colonnes comme paramètres de la fonction d'agrégation.</li> </ul> <p><strong>Valeur renvoyée</strong></p> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduceInRanges</span><span class=p>(</span>
    <span class=s1>'sum'</span><span class=p>,</span>
    <span class=p>[(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>),</span> <span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span> <span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>),</span> <span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>)],</span>
    <span class=p>[</span><span class=mi>1000000</span><span class=p>,</span> <span class=mi>200000</span><span class=p>,</span> <span class=mi>30000</span><span class=p>,</span> <span class=mi>4000</span><span class=p>,</span> <span class=mi>500</span><span class=p>,</span> <span class=mi>60</span><span class=p>,</span> <span class=mi>7</span><span class=p>]</span>
<span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─res─────────────────────────┐
│ [1234500,234000,34560,4567] │
└─────────────────────────────┘
</code></pre></div> <h2 id=arrayreverse>arrayReverse(arr)<a class=headerlink href=../amp/#arrayreverse title="Permanent link"> </a></h2> <p>Retourne un tableau de la même taille que l'original tableau contenant les éléments dans l'ordre inverse.</p> <p>Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReverse</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayReverse([1, 2, 3])─┐
│ [3,2,1]                 │
└─────────────────────────┘
</code></pre></div> <h2 id=array-functions-reverse>inverse (arr)<a class=headerlink href=../amp/#array-functions-reverse title="Permanent link"> </a></h2> <p>Synonyme de <a href=../amp/#arrayreverse>“arrayReverse”</a></p> <h2 id=arrayflatten>arrayFlatten<a class=headerlink href=../amp/#arrayflatten title="Permanent link"> </a></h2> <p>Convertit un tableau de tableaux dans un tableau associatif.</p> <p>Fonction:</p> <ul> <li>S'applique à toute profondeur de tableaux imbriqués.</li> <li>Ne change pas les tableaux qui sont déjà plats.</li> </ul> <p>Le tableau aplati contient tous les éléments de tous les tableaux source.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>flatten</span><span class=p>(</span><span class=n>array_of_arrays</span><span class=p>)</span>
</code></pre></div> <p>Alias: <code class=syntax>flatten</code>.</p> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>array_of_arrays</code> — <a href=../../../data-types/array/amp/ >Tableau</a> de tableaux. Exemple, <code class=syntax>[[1,2,3], [4,5]]</code>.</li> </ul> <p><strong>Exemple</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>flatten</span><span class=p>([[[</span><span class=mi>1</span><span class=p>]],</span> <span class=p>[[</span><span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>]]])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─flatten(array(array([1]), array([2], [3])))─┐
│ [1,2,3]                                     │
└─────────────────────────────────────────────┘
</code></pre></div> <h2 id=arraycompact>arrayCompact<a class=headerlink href=../amp/#arraycompact title="Permanent link"> </a></h2> <p>Supprime les éléments en double consécutifs d'un tableau. L'ordre des valeurs de résultat est déterminée par l'ordre dans le tableau source.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayCompact</span><span class=p>(</span><span class=n>arr</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <p><code class=syntax>arr</code> — The <a href=../../../data-types/array/amp/ >tableau</a> inspecter.</p> <p><strong>Valeur renvoyée</strong></p> <p>Le tableau sans doublon.</p> <p>Type: <code class=syntax>Array</code>.</p> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayCompact</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=n>nan</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayCompact([1, 1, nan, nan, 2, 3, 3, 3])─┐
│ [1,nan,nan,2,3]                            │
└────────────────────────────────────────────┘
</code></pre></div> <h2 id=arrayzip>arrayZip<a class=headerlink href=../amp/#arrayzip title="Permanent link"> </a></h2> <p>Combine plusieurs tableaux en un seul tableau. Le tableau résultant contient les éléments correspondants des tableaux source regroupés en tuples dans l'ordre des arguments listés.</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayZip</span><span class=p>(</span><span class=n>arr1</span><span class=p>,</span> <span class=n>arr2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>arrN</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong></p> <ul> <li><code class=syntax>arrN</code> — <a href=../../../data-types/array/amp/ >Tableau</a>.</li> </ul> <p>La fonction peut prendre n'importe quel nombre de tableaux de différents types. Tous les tableaux doivent être de taille égale.</p> <p><strong>Valeur renvoyée</strong></p> <ul> <li>Tableau avec des éléments des tableaux source regroupés en <a href=../../../data-types/tuple/amp/ >tuple</a>. Types de données dans le tuple sont les mêmes que les types de l'entrée des tableaux et dans le même ordre que les tableaux sont passés.</li> </ul> <p>Type: <a href=../../../data-types/array/amp/ >Tableau</a>.</p> <p><strong>Exemple</strong></p> <p>Requête:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayZip</span><span class=p>([</span><span class=s1>'a'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'c'</span><span class=p>],</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayZip(['a', 'b', 'c'], [5, 2, 1])─┐
│ [('a',5),('b',2),('c',1)]            │
└──────────────────────────────────────┘
</code></pre></div> <h2 id=arrayauc>arrayAUC<a class=headerlink href=../amp/#arrayauc title="Permanent link"> </a></h2> <p>Calculer AUC (zone sous la courbe, qui est un concept dans l'apprentissage automatique, voir plus de détails: <a href=https://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_under_the_curve target=_blank>https://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_under_the_curve</a>).</p> <p><strong>Syntaxe</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>arrayAUC</span><span class=p>(</span><span class=n>arr_scores</span><span class=p>,</span> <span class=n>arr_labels</span><span class=p>)</span>
</code></pre></div> <p><strong>Paramètre</strong><br> - <code class=syntax>arr_scores</code> — scores prediction model gives.<br> - <code class=syntax>arr_labels</code> — labels of samples, usually 1 for positive sample and 0 for negtive sample.</p> <p><strong>Valeur renvoyée</strong><br> Renvoie la valeur AUC avec le type Float64.</p> <p><strong>Exemple</strong><br> Requête:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>select</span> <span class=n>arrayAUC</span><span class=p>([</span><span class=mi>0</span><span class=p>.</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>35</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
</code></pre></div> <p>Résultat:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─arrayAUC([0.1, 0.4, 0.35, 0.8], [0, 0, 1, 1])─┐
│                                          0.75 │
└────────────────────────────────────────---──┘
</code></pre></div> <p><a href=https://clickhouse.tech/docs/en/query_language/functions/array_functions/ target=_blank>Article Original</a> <!--hide--></p> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/fr/sql-reference/functions/array-functions/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 