<!DOCTYPE html><html lang=zh data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>2019 | ClickHouse文档</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/logo-180x180.png><meta property=og:title content="2019 | ClickHouse文档"><meta property=og:description content="ClickHouse Release 19.17 ClickHouse Release 19.17.6.36, 2019-12-27 Bug Fix Fixed potential buffer overflow in decompress"><meta property=og:type content=article><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta content=https://clickhouse.tech/docs/zh/whats-new/changelog/2019/ property=og:url><link href=https://clickhouse.tech/docs/en/whats-new/changelog/2019/ rel=canonical><link href=https://clickhouse.tech/docs/zh/whats-new/changelog/2019/amp/ rel=amphtml><link rel=search href=/opensearch.xml title=ClickHouse type=application/opensearchdescription+xml><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "2019 | ClickHouse文档",
"mainEntityOfPage": "https://clickhouse.tech/docs/zh/whats-new/changelog/2019/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "2019 | ClickHouse文档",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><meta name=description content="ClickHouse Release 19.17 ClickHouse Release 19.17.6.36, 2019-12-27 Bug Fix Fixed potential buffer overflow in decompress"><meta name=keywords content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics"><link rel=alternate href=https://clickhouse.tech/docs/en/whats-new/changelog/2019/ hreflang=en><link rel=alternate href=https://clickhouse.tech/docs/zh/whats-new/changelog/2019/ hreflang=zh><link rel=alternate href=https://clickhouse.tech/docs/es/whats-new/changelog/2019/ hreflang=es><link rel=alternate href=https://clickhouse.tech/docs/fr/whats-new/changelog/2019/ hreflang=fr><link rel=alternate href=https://clickhouse.tech/docs/ru/whats-new/changelog/2019/ hreflang=ru><link rel=alternate href=https://clickhouse.tech/docs/ja/whats-new/changelog/2019/ hreflang=ja><link rel=alternate href=https://clickhouse.tech/docs/en/whats-new/changelog/2019/ hreflang=x-default><link href=/css/base.css?e27f3458 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 2019 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li id=edit-wrapper class=nav-item> <a id=edit-link href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/whats-new/changelog/2019.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/whats-new/changelog/2019/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/whats-new/changelog/2019/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/whats-new/changelog/2019/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/whats-new/changelog/2019/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/whats-new/changelog/2019/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/whats-new/changelog/2019/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=导言 class="nav-link text-light dropdown-toggle px-0">导言</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../ title=什么是ClickHouse？ class="nav-link text-light text-wrap d-inline-block w-100 px-0">什么是ClickHouse？</a> <a href=../../../getting-started/ title=入门 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入门</a> <a href=../../../getting-started/install/ title=安装部署 class="nav-link text-light text-wrap d-inline-block w-100 px-0">安装部署</a> <a href=../../../getting-started/tutorial/ title=使用教程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用教程</a> <a href=#sidebar-sidebar-1-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1-5 title=示例数据集 class="nav-link text-light dropdown-toggle px-0">示例数据集</a> <div id=sidebar-sidebar-1-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting-started/example-datasets/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../../getting-started/example-datasets/metrica/ title="Yandex.Metrica Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica Data</a> <a href=../../../getting-started/example-datasets/star-schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../../getting-started/example-datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting-started/example-datasets/criteo/ title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a> <a href=../../../getting-started/example-datasets/amplab-benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../../getting-started/example-datasets/nyc-taxi/ title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a> <a href=../../../getting-started/example-datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> </nav> </div> <a href=../../../getting-started/playground/ title=体验平台 class="nav-link text-light text-wrap d-inline-block w-100 px-0">体验平台</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=Interfaces class="nav-link text-light dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端</a> <a href=../../../interfaces/cli/ title=命令行客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">命令行客户端</a> <a href=../../../interfaces/tcp/ title=原生接口(TCP) class="nav-link text-light text-wrap d-inline-block w-100 px-0">原生接口(TCP)</a> <a href=../../../interfaces/http/ title=HTTP客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP客户端</a> <a href=../../../interfaces/mysql/ title=MySQL接口 class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL接口</a> <a href=../../../interfaces/formats/ title=输入/输出格式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入/输出格式</a> <a href=../../../interfaces/jdbc/ title=JDBC驱动 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC驱动</a> <a href=../../../interfaces/odbc/ title=ODBC驱动 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC驱动</a> <a href=../../../interfaces/cpp/ title=C++客户端库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++客户端库</a> <a href=#sidebar-sidebar-2-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-10 title=第三方工具 class="nav-link text-light dropdown-toggle px-0">第三方工具</a> <div id=sidebar-sidebar-2-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/ title=第三方工具 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方工具</a> <a href=../../../interfaces/third-party/client-libraries/ title=客户端开发库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端开发库</a> <a href=../../../interfaces/third-party/integrations/ title=第三方集成库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方集成库</a> <a href=../../../interfaces/third-party/proxy/ title=第三方代理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方代理</a> <a href=../../../interfaces/third-party/gui/ title=第三方开发的可视化界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方开发的可视化界面</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=引擎 class="nav-link text-light dropdown-toggle px-0">引擎</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2 title=数据库引擎 class="nav-link text-light dropdown-toggle px-0">数据库引擎</a> <div id=sidebar-sidebar-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database-engines/lazy/ title=延时引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">延时引擎</a> <a href=../../../engines/database-engines/atomic/ title=Atomic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a> <a href=../../../engines/database-engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database-engines/ title=数据库引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据库引擎</a> </nav> </div> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title=表引擎 class="nav-link text-light dropdown-toggle px-0">表引擎</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-3-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-1 title=合并树家族 class="nav-link text-light dropdown-toggle px-0">合并树家族</a> <div id=sidebar-sidebar-3-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/ title=版本折叠MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">版本折叠MergeTree</a> <a href=../../../engines/table-engines/mergetree-family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../../engines/table-engines/mergetree-family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/collapsingmergetree/ title=折叠树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">折叠树</a> <a href=../../../engines/table-engines/mergetree-family/replication/ title=数据副本 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据副本</a> <a href=../../../engines/table-engines/mergetree-family/custom-partitioning-key/ title=自定义分区键 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自定义分区键</a> </nav> </div> <a href=#sidebar-sidebar-3-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-2 title=日志系列 class="nav-link text-light dropdown-toggle px-0">日志系列</a> <div id=sidebar-sidebar-3-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/log-family/ title=日志引擎系列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志引擎系列</a> <a href=../../../engines/table-engines/log-family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../../engines/table-engines/log-family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../engines/table-engines/log-family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-3-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-3 title=集成 class="nav-link text-light dropdown-toggle px-0">集成</a> <div id=sidebar-sidebar-3-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/integrations/jdbc/ title=JDBC表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC表引擎</a> <a href=../../../engines/table-engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table-engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../../engines/table-engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../engines/table-engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-3-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-4 title=特别 class="nav-link text-light dropdown-toggle px-0">特别</a> <div id=sidebar-sidebar-3-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/special/join/ title=关联表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">关联表引擎</a> <a href=../../../engines/table-engines/special/generate/ title=随机数生成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机数生成</a> <a href=../../../engines/table-engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../../engines/table-engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table-engines/special/url/ title=URL(URL,格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL,格式)</a> <a href=../../../engines/table-engines/special/memory/ title=内存表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内存表</a> <a href=../../../engines/table-engines/special/distributed/ title=分布 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分布</a> <a href=../../../engines/table-engines/special/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../../engines/table-engines/special/dictionary/ title=字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典</a> <a href=../../../engines/table-engines/special/file/ title=文件(输入格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件(输入格式)</a> <a href=../../../engines/table-engines/special/external-data/ title=用于查询处理的外部数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用于查询处理的外部数据</a> <a href=../../../engines/table-engines/special/buffer/ title=缓冲区 class="nav-link text-light text-wrap d-inline-block w-100 px-0">缓冲区</a> <a href=../../../engines/table-engines/special/view/ title=视图 class="nav-link text-light text-wrap d-inline-block w-100 px-0">视图</a> <a href=../../../engines/table-engines/special/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> <a href=../../../engines/table-engines/ title=表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表引擎</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=SQL参考 class="nav-link text-light dropdown-toggle px-0">SQL参考</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/syntax/ title=SQL语法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">SQL语法</a> <a href=#sidebar-sidebar-4-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3 title=发言 class="nav-link text-light dropdown-toggle px-0">发言</a> <div id=sidebar-sidebar-4-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3-2 title=SELECT class="nav-link text-light dropdown-toggle px-0">SELECT</a> <div id=sidebar-sidebar-4-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/statements/select/ title=综述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">综述</a> <a href=../../../sql-reference/statements/select/all/ title="ALL 子句" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALL 子句</a> <a href=../../../sql-reference/statements/select/array-join/ title="ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN</a> <a href=../../../sql-reference/statements/select/distinct/ title=DISTINCT class="nav-link text-light text-wrap d-inline-block w-100 px-0">DISTINCT</a> <a href=../../../sql-reference/statements/select/format/ title=FORMAT class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT</a> <a href=../../../sql-reference/statements/select/from/ title=FROM class="nav-link text-light text-wrap d-inline-block w-100 px-0">FROM</a> <a href=../../../sql-reference/statements/select/group-by/ title="GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GROUP BY</a> <a href=../../../sql-reference/statements/select/having/ title=HAVING class="nav-link text-light text-wrap d-inline-block w-100 px-0">HAVING</a> <a href=../../../sql-reference/statements/select/into-outfile/ title="INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE</a> <a href=../../../sql-reference/statements/select/join/ title=JOIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">JOIN</a> <a href=../../../sql-reference/statements/select/limit/ title=LIMIT class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a> <a href=../../../sql-reference/statements/select/limit-by/ title="LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT BY</a> <a href=../../../sql-reference/statements/select/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../../sql-reference/statements/select/prewhere/ title=PREWHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE</a> <a href=../../../sql-reference/statements/select/sample/ title=SAMPLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE</a> <a href=../../../sql-reference/statements/select/union/ title="UNION ALL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UNION ALL</a> <a href=../../../sql-reference/statements/select/where/ title=WHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">WHERE</a> <a href=../../../sql-reference/statements/select/with/ title=WITH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WITH</a> </nav> </div> <a href=../../../sql-reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql-reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql-reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql-reference/statements/grant/ title=授权操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">授权操作</a> <a href=../../../sql-reference/statements/revoke/ title=REVOKE class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a> <a href=../../../sql-reference/statements/misc/ title=其他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他</a> <a href=../../../sql-reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../../sql-reference/statements/insert-into/ title="INSERT INTO 语句" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO 语句</a> </nav> </div> <a href=#sidebar-sidebar-4-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-4 title=函数 class="nav-link text-light dropdown-toggle px-0">函数</a> <div id=sidebar-sidebar-4-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/functions/ title=简介 class="nav-link text-light text-wrap d-inline-block w-100 px-0">简介</a> <a href=../../../sql-reference/functions/arithmetic-functions/ title=算术函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算术函数</a> <a href=../../../sql-reference/functions/comparison-functions/ title=比较函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比较函数</a> <a href=../../../sql-reference/functions/logical-functions/ title=逻辑函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">逻辑函数</a> <a href=../../../sql-reference/functions/type-conversion-functions/ title=类型转换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">类型转换函数</a> <a href=../../../sql-reference/functions/in-functions/ title="IN 运算符" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN 运算符</a> <a href=../../../sql-reference/functions/introspection/ title=自省 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自省</a> <a href=../../../sql-reference/functions/geo/ title=GEO函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">GEO函数</a> <a href=../../../sql-reference/functions/hash-functions/ title=Hash函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash函数</a> <a href=../../../sql-reference/functions/ip-address-functions/ title=IP函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IP函数</a> <a href=../../../sql-reference/functions/json-functions/ title=JSON函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON函数</a> <a href=../../../sql-reference/functions/functions-for-nulls/ title=Nullable处理函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable处理函数</a> <a href=../../../sql-reference/functions/url-functions/ title=URL函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL函数</a> <a href=../../../sql-reference/functions/uuid-functions/ title=UUID函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID函数</a> <a href=../../../sql-reference/functions/array-join/ title=arrayJoin函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin函数</a> <a href=../../../sql-reference/functions/bitmap-functions/ title=位图函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位图函数</a> <a href=../../../sql-reference/functions/bit-functions/ title=位操作函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位操作函数</a> <a href=../../../sql-reference/functions/other-functions/ title=其他函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他函数</a> <a href=../../../sql-reference/functions/ym-dict-functions/ title=功能与Yandex的工作。梅特里卡词典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">功能与Yandex的工作。梅特里卡词典</a> <a href=../../../sql-reference/functions/rounding-functions/ title=取整函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">取整函数</a> <a href=../../../sql-reference/functions/ext-dict-functions/ title=字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典函数</a> <a href=../../../sql-reference/functions/string-functions/ title=字符串函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串函数</a> <a href=../../../sql-reference/functions/splitting-merging-functions/ title=字符串拆分合并函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串拆分合并函数</a> <a href=../../../sql-reference/functions/string-search-functions/ title=字符串搜索函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串搜索函数</a> <a href=../../../sql-reference/functions/string-replace-functions/ title=字符串替换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串替换函数</a> <a href=../../../sql-reference/functions/math-functions/ title=数学函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学函数</a> <a href=../../../sql-reference/functions/array-functions/ title=数组函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数组函数</a> <a href=../../../sql-reference/functions/date-time-functions/ title=时间日期函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">时间日期函数</a> <a href=../../../sql-reference/functions/machine-learning-functions/ title=机器学习函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">机器学习函数</a> <a href=../../../sql-reference/functions/conditional-functions/ title=条件函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件函数</a> <a href=../../../sql-reference/functions/encoding-functions/ title=编码函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">编码函数</a> <a href=../../../sql-reference/functions/random-functions/ title=随机函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机函数</a> <a href=../../../sql-reference/functions/higher-order-functions/ title=高阶函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高阶函数</a> </nav> </div> <a href=#sidebar-sidebar-4-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-5 title=聚合函数 class="nav-link text-light dropdown-toggle px-0">聚合函数</a> <div id=sidebar-sidebar-4-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/aggregate-functions/ title=简介 class="nav-link text-light text-wrap d-inline-block w-100 px-0">简介</a> <a href=../../../sql-reference/aggregate-functions/reference/ title=参考手册 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参考手册</a> <a href=../../../sql-reference/aggregate-functions/combinators/ title=聚合函数组合器 class="nav-link text-light text-wrap d-inline-block w-100 px-0">聚合函数组合器</a> <a href=../../../sql-reference/aggregate-functions/parametric-functions/ title=参数聚合函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参数聚合函数</a> </nav> </div> <a href=#sidebar-sidebar-4-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-6 title=表函数 class="nav-link text-light dropdown-toggle px-0">表函数</a> <div id=sidebar-sidebar-4-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/table-functions/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../../sql-reference/table-functions/file/ title=文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件</a> <a href=../../../sql-reference/table-functions/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../../sql-reference/table-functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../../sql-reference/table-functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql-reference/table-functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql-reference/table-functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql-reference/table-functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql-reference/table-functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql-reference/table-functions/input/ title=输入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入</a> <a href=../../../sql-reference/table-functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> <a href=../../../sql-reference/table-functions/remote/ title=远程，远程安全 class="nav-link text-light text-wrap d-inline-block w-100 px-0">远程，远程安全</a> </nav> </div> <a href=#sidebar-sidebar-4-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7 title=字典 class="nav-link text-light dropdown-toggle px-0">字典</a> <div id=sidebar-sidebar-4-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/dictionaries/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=#sidebar-sidebar-4-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7-2 title=外部字典 class="nav-link text-light dropdown-toggle px-0">外部字典</a> <div id=sidebar-sidebar-4-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/ title=配置外部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置外部字典</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/ title=在内存中存储字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">在内存中存储字典</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/ title=字典更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典更新</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/ title=外部字典的来源 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部字典的来源</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/ title=字典键和字段 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典键和字段</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/ title=分层字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分层字典</a> </nav> </div> <a href=../../../sql-reference/dictionaries/internal-dicts/ title=内部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部字典</a> </nav> </div> <a href=../../../sql-reference/ansi/ title=ANSI兼容性 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSI兼容性</a> <a href=#sidebar-sidebar-4-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-9 title=操作符 class="nav-link text-light dropdown-toggle px-0">操作符</a> <div id=sidebar-sidebar-4-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/operators/in/ title="IN 操作符" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN 操作符</a> <a href=../../../sql-reference/operators/ title=操作符 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作符</a> </nav> </div> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=数据类型 class="nav-link text-light dropdown-toggle px-0">数据类型</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql-reference/data-types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql-reference/data-types/lowcardinality/ title=低基数类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">低基数类型</a> <a href=#sidebar-sidebar-4-10-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10-4 title=域 class="nav-link text-light dropdown-toggle px-0">域</a> <div id=sidebar-sidebar-4-10-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/domains/ title=域 class="nav-link text-light text-wrap d-inline-block w-100 px-0">域</a> <a href=../../../sql-reference/data-types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql-reference/data-types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../../sql-reference/data-types/aggregatefunction/ title="AggregateFunction(name, types_of_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments…)</a> <a href=../../../sql-reference/data-types/decimal/ title=Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)</a> <a href=../../../sql-reference/data-types/enum/ title=Enum8,Enum16 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum8,Enum16</a> <a href=../../../sql-reference/data-types/float/ title=Float32,Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32,Float64</a> <a href=../../../sql-reference/data-types/simpleaggregatefunction/ title=SimpleAggregateFunction class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction</a> <a href=../../../sql-reference/data-types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../../sql-reference/data-types/int-uint/ title=UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64</a> <a href=../../../sql-reference/data-types/nullable/ title=可为空（类型名称) class="nav-link text-light text-wrap d-inline-block w-100 px-0">可为空（类型名称)</a> <a href=../../../sql-reference/data-types/fixedstring/ title=固定字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">固定字符串</a> <a href=../../../sql-reference/data-types/string/ title=字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串</a> <a href=../../../sql-reference/data-types/boolean/ title=布尔值 class="nav-link text-light text-wrap d-inline-block w-100 px-0">布尔值</a> <a href=../../../sql-reference/data-types/ title=数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据类型</a> <a href=../../../sql-reference/data-types/date/ title=日期 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期</a> <a href=../../../sql-reference/data-types/datetime/ title=日期时间 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期时间</a> <a href=../../../sql-reference/data-types/array/ title=阵列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">阵列(T)</a> <a href=#sidebar-sidebar-4-10-20 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10-20 title=嵌套数据结构 class="nav-link text-light dropdown-toggle px-0">嵌套数据结构</a> <div id=sidebar-sidebar-4-10-20 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/nested-data-structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../../sql-reference/data-types/nested-data-structures/ title=嵌套数据结构 class="nav-link text-light text-wrap d-inline-block w-100 px-0">嵌套数据结构</a> </nav> </div> <a href=#sidebar-sidebar-4-10-21 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10-21 title=特殊数据类型 class="nav-link text-light dropdown-toggle px-0">特殊数据类型</a> <div id=sidebar-sidebar-4-10-21 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/special-data-types/interval/ title=间隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">间隔</a> <a href=../../../sql-reference/data-types/special-data-types/nothing/ title=没什么 class="nav-link text-light text-wrap d-inline-block w-100 px-0">没什么</a> <a href=../../../sql-reference/data-types/special-data-types/ title=特殊数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特殊数据类型</a> <a href=../../../sql-reference/data-types/special-data-types/expression/ title=表达式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表达式</a> <a href=../../../sql-reference/data-types/special-data-types/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=指南 class="nav-link text-light dropdown-toggle px-0">指南</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../../guides/apply-catboost-model/ title=应用CatBoost模型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">应用CatBoost模型</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=操作 class="nav-link text-light dropdown-toggle px-0">操作</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作</a> <a href=../../../operations/requirements/ title=要求 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要求</a> <a href=../../../operations/monitoring/ title=监控 class="nav-link text-light text-wrap d-inline-block w-100 px-0">监控</a> <a href=../../../operations/troubleshooting/ title=常见问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">常见问题</a> <a href=../../../operations/update/ title=更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">更新</a> <a href=../../../operations/access-rights/ title=访问权限和账户管理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">访问权限和账户管理</a> <a href=../../../operations/backup/ title=数据备份 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据备份</a> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title=优化性能 class="nav-link text-light dropdown-toggle px-0">优化性能</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing-performance/sampling-query-profiler/ title=查询分析 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询分析</a> </nav> </div> <a href=#sidebar-sidebar-6-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9 title=系统表 class="nav-link text-light dropdown-toggle px-0">系统表</a> <div id=sidebar-sidebar-6-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/system-tables/ title=系统表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统表</a> <a href=../../../operations/system-tables/query_log/ title=system.query_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_log</a> <a href=../../../operations/system-tables/asynchronous_metric_log/ title=系统。asynchronous_metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。asynchronous_metric_log</a> <a href=../../../operations/system-tables/asynchronous_metrics/ title=系统。asynchronous_metrics class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。asynchronous_metrics</a> <a href=../../../operations/system-tables/data_type_families/ title=系统。data_type_families class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。data_type_families</a> <a href=../../../operations/system-tables/detached_parts/ title=系统。detached_parts class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。detached_parts</a> <a href=../../../operations/system-tables/graphite_retentions/ title=系统。graphite_retentions class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。graphite_retentions</a> <a href=../../../operations/system-tables/merge_tree_settings/ title=系统。merge_tree_settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。merge_tree_settings</a> <a href=../../../operations/system-tables/metric_log/ title=系统。metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。metric_log</a> <a href=../../../operations/system-tables/numbers_mt/ title=系统。numbers_mt class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。numbers_mt</a> <a href=../../../operations/system-tables/part_log/ title=系统。part_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。part_log</a> <a href=../../../operations/system-tables/query_thread_log/ title=系统。query_thread_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。query_thread_log</a> <a href=../../../operations/system-tables/storage_policies/ title=系统。storage_policies class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。storage_policies</a> <a href=../../../operations/system-tables/text_log/ title=系统。text_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。text_log</a> <a href=../../../operations/system-tables/trace_log/ title=系统。trace_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。trace_log</a> <a href=../../../operations/system-tables/one/ title=系统。一 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。一</a> <a href=../../../operations/system-tables/columns/ title=系统。列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。列</a> <a href=../../../operations/system-tables/replicas/ title=系统。副本 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。副本</a> <a href=../../../operations/system-tables/functions/ title=系统。功能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。功能</a> <a href=../../../operations/system-tables/zookeeper/ title=系统。动物园管理员 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。动物园管理员</a> <a href=../../../operations/system-tables/merges/ title=系统。合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。合并</a> <a href=../../../operations/system-tables/dictionaries/ title=系统。字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。字典</a> <a href=../../../operations/system-tables/metrics/ title=系统。指标 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。指标</a> <a href=../../../operations/system-tables/numbers/ title=系统。数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。数字</a> <a href=../../../operations/system-tables/databases/ title=系统。数据库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。数据库</a> <a href=../../../operations/system-tables/events/ title=系统。活动 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。活动</a> <a href=../../../operations/system-tables/processes/ title=系统。流程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。流程</a> <a href=../../../operations/system-tables/disks/ title=系统。磁盘 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。磁盘</a> <a href=../../../operations/system-tables/mutations/ title=系统。突变 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。突变</a> <a href=../../../operations/system-tables/tables/ title=系统。表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。表</a> <a href=../../../operations/system-tables/table_engines/ title=系统。表_engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。表_engines</a> <a href=../../../operations/system-tables/settings/ title=系统。设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。设置</a> <a href=../../../operations/system-tables/contributors/ title=系统。贡献者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。贡献者</a> <a href=../../../operations/system-tables/clusters/ title=系统。集群 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。集群</a> <a href=../../../operations/system-tables/parts/ title=系统。零件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。零件</a> </nav> </div> <a href=../../../operations/performance-test/ title=测试硬件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">测试硬件</a> <a href=../../../operations/tips/ title=使用建议 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用建议</a> <a href=../../../operations/configuration-files/ title=配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置文件</a> <a href=../../../operations/quotas/ title=配额 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配额</a> <a href=#sidebar-sidebar-6-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-14 title=实用工具 class="nav-link text-light dropdown-toggle px-0">实用工具</a> <div id=sidebar-sidebar-6-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=性能测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">性能测试</a> <a href=../../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../../operations/utilities/ title=实用工具 class="nav-link text-light text-wrap d-inline-block w-100 px-0">实用工具</a> </nav> </div> <a href=#sidebar-sidebar-6-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-15 title=服务器配置参数 class="nav-link text-light dropdown-toggle px-0">服务器配置参数</a> <div id=sidebar-sidebar-6-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server-configuration-parameters/settings/ title=服务器设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器设置</a> <a href=../../../operations/server-configuration-parameters/ title=服务器配置参数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器配置参数</a> </nav> </div> <a href=#sidebar-sidebar-6-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-16 title=设置 class="nav-link text-light dropdown-toggle px-0">设置</a> <div id=sidebar-sidebar-6-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/permissions-for-queries/ title=查询权限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询权限</a> <a href=../../../operations/settings/settings-profiles/ title=设置配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置配置文件</a> <a href=../../../operations/settings/constraints-on-settings/ title=对设置的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">对设置的限制</a> <a href=../../../operations/settings/settings-users/ title=用户设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用户设置</a> <a href=../../../operations/settings/query-complexity/ title=查询复杂性的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询复杂性的限制</a> <a href=../../../operations/settings/settings/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=商业支持 class="nav-link text-light dropdown-toggle px-0">商业支持</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/cloud/ title=云 class="nav-link text-light text-wrap d-inline-block w-100 px-0">云</a> <a href=../../../commercial/support/ title=支持 class="nav-link text-light text-wrap d-inline-block w-100 px-0">支持</a> <a href=../../../commercial/ title=简介 class="nav-link text-light text-wrap d-inline-block w-100 px-0">简介</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=F.A.Q. class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/general/ title=常见问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">常见问题</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=ClickHouse事迹 class="nav-link text-light dropdown-toggle px-0">ClickHouse事迹</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-9-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-1 title=Changelog class="nav-link text-light dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-9-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats-new/changelog/ title=2021 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a> <a href=../../../whats-new/changelog/2019/ title=2019 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats-new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats-new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats-new/roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../../whats-new/security-changelog/ title=安全更新日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">安全更新日志</a> <a href=../../../whats-new/ title=ClickHouse变更及改动? class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse变更及改动?</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="ClickHouse 开发" class="nav-link text-light dropdown-toggle px-0">ClickHouse 开发</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/browse-code/ title=浏览源代码 class="nav-link text-light text-wrap d-inline-block w-100 px-0">浏览源代码</a> <a href=../../../development/build-cross-arm/ title="如何在Linux上构建ClickHouse for AARCH64（ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux上构建ClickHouse for AARCH64（ARM64)</a> <a href=../../../development/ title="ClickHouse 开发" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 开发</a> <a href=../../../development/architecture/ title="ClickHouse 架构概述" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 架构概述</a> <a href=../../../development/developer-instruction/ title=Windows使用指引 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Windows使用指引</a> <a href=../../../development/contrib/ title=使用的三方库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用的三方库</a> <a href=../../../development/build-osx/ title="在 Mac OS X 中编译 ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">在 Mac OS X 中编译 ClickHouse</a> <a href=../../../development/build-cross-osx/ title="如何在Linux中编译Mac OS X ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux中编译Mac OS X ClickHouse</a> <a href=../../../development/build/ title="如何构建 ClickHouse 发布包" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何构建 ClickHouse 发布包</a> <a href=../../../development/style/ title="如何编写 C++ 代码" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何编写 C++ 代码</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=变更日志 class="nav-link text-light dropdown-toggle px-0">变更日志</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../changelog/ title=变更日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">变更日志</a> </nav> </div> <a href=../../../single/clickhouse_zh.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-4"> <div id=content class=mt-md-n3> <nav class=text-muted aria-label=breadcrumb> <ol class="breadcrumb bg-transparent p-0"> <li class=breadcrumb-item><a href=../../ class=text-reset>ClickHouse事迹</a> </li> <li class=breadcrumb-item><a href=../ class=text-reset>Changelog</a> </li> </ol> </nav> <h2 id=clickhouse-release-v19-17>ClickHouse Release 19.17<a class=headerlink href=#clickhouse-release-v19-17 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-v19-17-6-36-2019-12-27>ClickHouse Release 19.17.6.36, 2019-12-27<a class=headerlink href=#clickhouse-release-v19-17-6-36-2019-12-27 title="Permanent link"> </a></h3> <h4 id=bug-fix>Bug Fix<a class=headerlink href=#bug-fix title="Permanent link"> </a></h4> <ul> <li>Fixed potential buffer overflow in decompress. Malicious user can pass fabricated compressed data that could cause read after buffer. This issue was found by Eldar Zaitov from Yandex information security team. <a href=https://github.com/ClickHouse/ClickHouse/pull/8404 rel="external nofollow noreferrer" target=_blank>#8404</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed possible server crash (<code class=syntax>std::terminate</code>) when the server cannot send or write data in JSON or XML format with values of String data type (that require UTF-8 validation) or when compressing result data with Brotli algorithm or in some other rare cases. <a href=https://github.com/ClickHouse/ClickHouse/pull/8384 rel="external nofollow noreferrer" target=_blank>#8384</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed dictionaries with source from a clickhouse <code class=syntax>VIEW</code>, now reading such dictionaries doesn’t cause the error <code class=syntax>There is no query</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8351 rel="external nofollow noreferrer" target=_blank>#8351</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fixed checking if a client host is allowed by host_regexp specified in users.xml. <a href=https://github.com/ClickHouse/ClickHouse/pull/8241 rel="external nofollow noreferrer" target=_blank>#8241</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/8342 rel="external nofollow noreferrer" target=_blank>#8342</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li><code class=syntax>RENAME TABLE</code> for a distributed table now renames the folder containing inserted data before sending to shards. This fixes an issue with successive renames <code class=syntax>tableA-&gt;tableB</code>, <code class=syntax>tableC-&gt;tableA</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8306 rel="external nofollow noreferrer" target=_blank>#8306</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li><code class=syntax>range_hashed</code> external dictionaries created by DDL queries now allow ranges of arbitrary numeric types. <a href=https://github.com/ClickHouse/ClickHouse/pull/8275 rel="external nofollow noreferrer" target=_blank>#8275</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>INSERT INTO table SELECT ... FROM mysql(...)</code> table function. <a href=https://github.com/ClickHouse/ClickHouse/pull/8234 rel="external nofollow noreferrer" target=_blank>#8234</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed segfault in <code class=syntax>INSERT INTO TABLE FUNCTION file()</code> while inserting into a file which doesn’t exist. Now in this case file would be created and then insert would be processed. <a href=https://github.com/ClickHouse/ClickHouse/pull/8177 rel="external nofollow noreferrer" target=_blank>#8177</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Fixed bitmapAnd error when intersecting an aggregated bitmap and a scalar bitmap. <a href=https://github.com/ClickHouse/ClickHouse/pull/8082 rel="external nofollow noreferrer" target=_blank>#8082</a> (<a href=https://github.com/moon03432 rel="external nofollow noreferrer" target=_blank>Yue Huang</a>)</li> <li>Fixed segfault when <code class=syntax>EXISTS</code> query was used without <code class=syntax>TABLE</code> or <code class=syntax>DICTIONARY</code> qualifier, just like <code class=syntax>EXISTS t</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8213 rel="external nofollow noreferrer" target=_blank>#8213</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed return type for functions <code class=syntax>rand</code> and <code class=syntax>randConstant</code> in case of nullable argument. Now functions always return <code class=syntax>UInt32</code> and never <code class=syntax>Nullable(UInt32)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8204 rel="external nofollow noreferrer" target=_blank>#8204</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fixed <code class=syntax>DROP DICTIONARY IF EXISTS db.dict</code>, now it doesn’t throw exception if <code class=syntax>db</code> doesn’t exist. <a href=https://github.com/ClickHouse/ClickHouse/pull/8185 rel="external nofollow noreferrer" target=_blank>#8185</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>If a table wasn’t completely dropped because of server crash, the server will try to restore and load it <a href=https://github.com/ClickHouse/ClickHouse/pull/8176 rel="external nofollow noreferrer" target=_blank>#8176</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed a trivial count query for a distributed table if there are more than two shard local table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8164 rel="external nofollow noreferrer" target=_blank>#8164</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li> <li>Fixed bug that lead to a data race in DB::BlockStreamProfileInfo::calculateRowsBeforeLimit() <a href=https://github.com/ClickHouse/ClickHouse/pull/8143 rel="external nofollow noreferrer" target=_blank>#8143</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander Kazakov</a>)</li> <li>Fixed <code class=syntax>ALTER table MOVE part</code> executed immediately after merging the specified part, which could cause moving a part which the specified part merged into. Now it correctly moves the specified part. <a href=https://github.com/ClickHouse/ClickHouse/pull/8104 rel="external nofollow noreferrer" target=_blank>#8104</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Expressions for dictionaries can be specified as strings now. This is useful for calculation of attributes while extracting data from non-ClickHouse sources because it allows to use non-ClickHouse syntax for those expressions. <a href=https://github.com/ClickHouse/ClickHouse/pull/8098 rel="external nofollow noreferrer" target=_blank>#8098</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed a very rare race in <code class=syntax>clickhouse-copier</code> because of an overflow in ZXid. <a href=https://github.com/ClickHouse/ClickHouse/pull/8088 rel="external nofollow noreferrer" target=_blank>#8088</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer" target=_blank>Ding Xiang Fei</a>)</li> <li>Fixed the bug when after the query failed (due to “Too many simultaneous queries” for example) it would not read external tables info, and the<br> next request would interpret this info as the beginning of the next query causing an error like <code class=syntax>Unknown packet from client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8084 rel="external nofollow noreferrer" target=_blank>#8084</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Avoid null dereference after “Unknown packet X from server” <a href=https://github.com/ClickHouse/ClickHouse/pull/8071 rel="external nofollow noreferrer" target=_blank>#8071</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Restore support of all ICU locales, add the ability to apply collations for constant expressions and add language name to system.collations table. <a href=https://github.com/ClickHouse/ClickHouse/pull/8051 rel="external nofollow noreferrer" target=_blank>#8051</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Number of streams for read from <code class=syntax>StorageFile</code> and <code class=syntax>StorageHDFS</code> is now limited, to avoid exceeding the memory limit. <a href=https://github.com/ClickHouse/ClickHouse/pull/7981 rel="external nofollow noreferrer" target=_blank>#7981</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>CHECK TABLE</code> query for <code class=syntax>*MergeTree</code> tables without key. <a href=https://github.com/ClickHouse/ClickHouse/pull/7979 rel="external nofollow noreferrer" target=_blank>#7979</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Removed the mutation number from a part name in case there were no mutations. This removing improved the compatibility with older versions. <a href=https://github.com/ClickHouse/ClickHouse/pull/8250 rel="external nofollow noreferrer" target=_blank>#8250</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed the bug that mutations are skipped for some attached parts due to their data_version are larger than the table mutation version. <a href=https://github.com/ClickHouse/ClickHouse/pull/7812 rel="external nofollow noreferrer" target=_blank>#7812</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Allow starting the server with redundant copies of parts after moving them to another device. <a href=https://github.com/ClickHouse/ClickHouse/pull/7810 rel="external nofollow noreferrer" target=_blank>#7810</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fixed the error “Sizes of columns doesn’t match” that might appear when using aggregate function columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/7790 rel="external nofollow noreferrer" target=_blank>#7790</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li> <li>Now an exception will be thrown in case of using WITH TIES alongside LIMIT BY. And now it’s possible to use TOP with LIMIT BY. <a href=https://github.com/ClickHouse/ClickHouse/pull/7637 rel="external nofollow noreferrer" target=_blank>#7637</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>)</li> <li>Fix dictionary reload if it has <code class=syntax>invalidate_query</code>, which stopped updates and some exception on previous update tries. <a href=https://github.com/ClickHouse/ClickHouse/pull/8029 rel="external nofollow noreferrer" target=_blank>#8029</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> </ul> <h3 id=clickhouse-release-v19-17-4-11-2019-11-22>ClickHouse Release 19.17.4.11, 2019-11-22<a class=headerlink href=#clickhouse-release-v19-17-4-11-2019-11-22 title="Permanent link"> </a></h3> <h4 id=backward-incompatible-change>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change title="Permanent link"> </a></h4> <ul> <li>Using column instead of AST to store scalar subquery results for better performance. Setting <code class=syntax>enable_scalar_subquery_optimization</code> was added in 19.17 and it was enabled by default. It leads to errors like <a href=https://github.com/ClickHouse/ClickHouse/issues/7851 rel="external nofollow noreferrer" target=_blank>this</a> during upgrade to 19.17.2 or 19.17.3 from previous versions. This setting was disabled by default in 19.17.4, to make possible upgrading from 19.16 and older versions without errors. <a href=https://github.com/ClickHouse/ClickHouse/pull/7392 rel="external nofollow noreferrer" target=_blank>#7392</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> </ul> <h4 id=new-feature>New Feature<a class=headerlink href=#new-feature title="Permanent link"> </a></h4> <ul> <li>Add the ability to create dictionaries with DDL queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/7360 rel="external nofollow noreferrer" target=_blank>#7360</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Make <code class=syntax>bloom_filter</code> type of index supporting <code class=syntax>LowCardinality</code> and <code class=syntax>Nullable</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/7363 rel="external nofollow noreferrer" target=_blank>#7363</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7561 rel="external nofollow noreferrer" target=_blank>#7561</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Add function <code class=syntax>isValidJSON</code> to check that passed string is a valid json. <a href=https://github.com/ClickHouse/ClickHouse/issues/5910 rel="external nofollow noreferrer" target=_blank>#5910</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7293 rel="external nofollow noreferrer" target=_blank>#7293</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer" target=_blank>Vdimir</a>)</li> <li>Implement <code class=syntax>arrayCompact</code> function <a href=https://github.com/ClickHouse/ClickHouse/pull/7328 rel="external nofollow noreferrer" target=_blank>#7328</a> (<a href=https://github.com/Joeywzr rel="external nofollow noreferrer" target=_blank>Memo</a>)</li> <li>Created function <code class=syntax>hex</code> for Decimal numbers. It works like <code class=syntax>hex(reinterpretAsString())</code>, but doesn’t delete last zero bytes. <a href=https://github.com/ClickHouse/ClickHouse/pull/7355 rel="external nofollow noreferrer" target=_blank>#7355</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>Mikhail Korotov</a>)</li> <li>Add <code class=syntax>arrayFill</code> and <code class=syntax>arrayReverseFill</code> functions, which replace elements by other elements in front/back of them in the array. <a href=https://github.com/ClickHouse/ClickHouse/pull/7380 rel="external nofollow noreferrer" target=_blank>#7380</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Add <code class=syntax>CRC32IEEE()</code>/<code class=syntax>CRC64()</code> support <a href=https://github.com/ClickHouse/ClickHouse/pull/7480 rel="external nofollow noreferrer" target=_blank>#7480</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Implement <code class=syntax>char</code> function similar to one in <a href=https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char rel="external nofollow noreferrer" target=_blank>mysql</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7486 rel="external nofollow noreferrer" target=_blank>#7486</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Add <code class=syntax>bitmapTransform</code> function. It transforms an array of values in a bitmap to another array of values, the result is a new bitmap <a href=https://github.com/ClickHouse/ClickHouse/pull/7598 rel="external nofollow noreferrer" target=_blank>#7598</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Implemented <code class=syntax>javaHashUTF16LE()</code> function <a href=https://github.com/ClickHouse/ClickHouse/pull/7651 rel="external nofollow noreferrer" target=_blank>#7651</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li> <li>Add <code class=syntax>_shard_num</code> virtual column for the Distributed engine <a href=https://github.com/ClickHouse/ClickHouse/pull/7624 rel="external nofollow noreferrer" target=_blank>#7624</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> </ul> <h4 id=experimental-feature>Experimental Feature<a class=headerlink href=#experimental-feature title="Permanent link"> </a></h4> <ul> <li>Support for processors (new query execution pipeline) in <code class=syntax>MergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7181 rel="external nofollow noreferrer" target=_blank>#7181</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> </ul> <h4 id=bug-fix-1>Bug Fix<a class=headerlink href=#bug-fix-1 title="Permanent link"> </a></h4> <ul> <li>Fix incorrect float parsing in <code class=syntax>Values</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/7817 rel="external nofollow noreferrer" target=_blank>#7817</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7870 rel="external nofollow noreferrer" target=_blank>#7870</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fix rare deadlock which can happen when trace_log is enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/7838 rel="external nofollow noreferrer" target=_blank>#7838</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Prevent message duplication when producing Kafka table has any MVs selecting from it <a href=https://github.com/ClickHouse/ClickHouse/pull/7265 rel="external nofollow noreferrer" target=_blank>#7265</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Support for <code class=syntax>Array(LowCardinality(Nullable(String)))</code> in <code class=syntax>IN</code>. Resolves <a href=https://github.com/ClickHouse/ClickHouse/issues/7364 rel="external nofollow noreferrer" target=_blank>#7364</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7366 rel="external nofollow noreferrer" target=_blank>#7366</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li> <li>Add handling of <code class=syntax>SQL_TINYINT</code> and <code class=syntax>SQL_BIGINT</code>, and fix handling of <code class=syntax>SQL_FLOAT</code> data source types in ODBC Bridge. <a href=https://github.com/ClickHouse/ClickHouse/pull/7491 rel="external nofollow noreferrer" target=_blank>#7491</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer" target=_blank>Denis Glazachev</a>)</li> <li>Fix aggregation (<code class=syntax>avg</code> and quantiles) over empty decimal columns <a href=https://github.com/ClickHouse/ClickHouse/pull/7431 rel="external nofollow noreferrer" target=_blank>#7431</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer" target=_blank>Andrey Konyaev</a>)</li> <li>Fix <code class=syntax>INSERT</code> into Distributed with <code class=syntax>MATERIALIZED</code> columns <a href=https://github.com/ClickHouse/ClickHouse/pull/7377 rel="external nofollow noreferrer" target=_blank>#7377</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Make <code class=syntax>MOVE PARTITION</code> work if some parts of partition are already on destination disk or volume <a href=https://github.com/ClickHouse/ClickHouse/pull/7434 rel="external nofollow noreferrer" target=_blank>#7434</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fixed bug with hardlinks failing to be created during mutations in <code class=syntax>ReplicatedMergeTree</code> in multi-disk configurations. <a href=https://github.com/ClickHouse/ClickHouse/pull/7558 rel="external nofollow noreferrer" target=_blank>#7558</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fixed a bug with a mutation on a MergeTree when whole part remains unchanged and best space is being found on another disk <a href=https://github.com/ClickHouse/ClickHouse/pull/7602 rel="external nofollow noreferrer" target=_blank>#7602</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fixed bug with <code class=syntax>keep_free_space_ratio</code> not being read from disks configuration <a href=https://github.com/ClickHouse/ClickHouse/pull/7645 rel="external nofollow noreferrer" target=_blank>#7645</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fix bug with table contains only <code class=syntax>Tuple</code> columns or columns with complex paths. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7541 rel="external nofollow noreferrer" target=_blank>7541</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7545 rel="external nofollow noreferrer" target=_blank>#7545</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Do not account memory for Buffer engine in max_memory_usage limit <a href=https://github.com/ClickHouse/ClickHouse/pull/7552 rel="external nofollow noreferrer" target=_blank>#7552</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Fix final mark usage in <code class=syntax>MergeTree</code> tables ordered by <code class=syntax>tuple()</code>. In rare cases it could lead to <code class=syntax>Can't adjust last granule</code> error while select. <a href=https://github.com/ClickHouse/ClickHouse/pull/7639 rel="external nofollow noreferrer" target=_blank>#7639</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix bug in mutations that have predicate with actions that require context (for example functions for json), which may lead to crashes or strange exceptions. <a href=https://github.com/ClickHouse/ClickHouse/pull/7664 rel="external nofollow noreferrer" target=_blank>#7664</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix mismatch of database and table names escaping in <code class=syntax>data/</code> and <code class=syntax>shadow/</code> directories <a href=https://github.com/ClickHouse/ClickHouse/pull/7575 rel="external nofollow noreferrer" target=_blank>#7575</a> (<a href=https://github.com/Alex-Burmak rel="external nofollow noreferrer" target=_blank>Alexander Burmak</a>)</li> <li>Support duplicated keys in RIGHT|FULL JOINs, e.g. <code class=syntax>ON t.x = u.x AND t.x = u.y</code>. Fix crash in this case. <a href=https://github.com/ClickHouse/ClickHouse/pull/7586 rel="external nofollow noreferrer" target=_blank>#7586</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix <code class=syntax>Not found column &lt;expression&gt; in block</code> when joining on expression with RIGHT or FULL JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/7641 rel="external nofollow noreferrer" target=_blank>#7641</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>One more attempt to fix infinite loop in <code class=syntax>PrettySpace</code> format <a href=https://github.com/ClickHouse/ClickHouse/pull/7591 rel="external nofollow noreferrer" target=_blank>#7591</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Fix bug in <code class=syntax>concat</code> function when all arguments were <code class=syntax>FixedString</code> of the same size. <a href=https://github.com/ClickHouse/ClickHouse/pull/7635 rel="external nofollow noreferrer" target=_blank>#7635</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed exception in case of using 1 argument while defining S3, URL and HDFS storages. <a href=https://github.com/ClickHouse/ClickHouse/pull/7618 rel="external nofollow noreferrer" target=_blank>#7618</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fix scope of the InterpreterSelectQuery for views with query <a href=https://github.com/ClickHouse/ClickHouse/pull/7601 rel="external nofollow noreferrer" target=_blank>#7601</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> </ul> <h4 id=improvement>Improvement<a class=headerlink href=#improvement title="Permanent link"> </a></h4> <ul> <li><code class=syntax>Nullable</code> columns recognized and NULL-values handled correctly by ODBC-bridge <a href=https://github.com/ClickHouse/ClickHouse/pull/7402 rel="external nofollow noreferrer" target=_blank>#7402</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Write current batch for distributed send atomically <a href=https://github.com/ClickHouse/ClickHouse/pull/7600 rel="external nofollow noreferrer" target=_blank>#7600</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Throw an exception if we cannot detect table for column name in query. <a href=https://github.com/ClickHouse/ClickHouse/pull/7358 rel="external nofollow noreferrer" target=_blank>#7358</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Add <code class=syntax>merge_max_block_size</code> setting to <code class=syntax>MergeTreeSettings</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7412 rel="external nofollow noreferrer" target=_blank>#7412</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Queries with <code class=syntax>HAVING</code> and without <code class=syntax>GROUP BY</code> assume group by constant. So, <code class=syntax>SELECT 1 HAVING 1</code> now returns a result. <a href=https://github.com/ClickHouse/ClickHouse/pull/7496 rel="external nofollow noreferrer" target=_blank>#7496</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Support parsing <code class=syntax>(X,)</code> as tuple similar to python. <a href=https://github.com/ClickHouse/ClickHouse/pull/7501 rel="external nofollow noreferrer" target=_blank>#7501</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/7562 rel="external nofollow noreferrer" target=_blank>#7562</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Make <code class=syntax>range</code> function behaviors almost like pythonic one. <a href=https://github.com/ClickHouse/ClickHouse/pull/7518 rel="external nofollow noreferrer" target=_blank>#7518</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Add <code class=syntax>constraints</code> columns to table <code class=syntax>system.settings</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7553 rel="external nofollow noreferrer" target=_blank>#7553</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Better Null format for tcp handler, so that it’s possible to use <code class=syntax>select ignore(&lt;expression&gt;) from table format Null</code> for perf measure via clickhouse-client <a href=https://github.com/ClickHouse/ClickHouse/pull/7606 rel="external nofollow noreferrer" target=_blank>#7606</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Queries like <code class=syntax>CREATE TABLE ... AS (SELECT (1, 2))</code> are parsed correctly <a href=https://github.com/ClickHouse/ClickHouse/pull/7542 rel="external nofollow noreferrer" target=_blank>#7542</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> </ul> <h4 id=performance-improvement>Performance Improvement<a class=headerlink href=#performance-improvement title="Permanent link"> </a></h4> <ul> <li>The performance of aggregation over short string keys is improved. <a href=https://github.com/ClickHouse/ClickHouse/pull/6243 rel="external nofollow noreferrer" target=_blank>#6243</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>, <a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Run another pass of syntax/expression analysis to get potential optimizations after constant predicates are folded. <a href=https://github.com/ClickHouse/ClickHouse/pull/7497 rel="external nofollow noreferrer" target=_blank>#7497</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Use storage meta info to evaluate trivial <code class=syntax>SELECT count() FROM table;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7510 rel="external nofollow noreferrer" target=_blank>#7510</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>, <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Vectorize processing <code class=syntax>arrayReduce</code> similar to Aggregator <code class=syntax>addBatch</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7608 rel="external nofollow noreferrer" target=_blank>#7608</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Minor improvements in performance of <code class=syntax>Kafka</code> consumption <a href=https://github.com/ClickHouse/ClickHouse/pull/7475 rel="external nofollow noreferrer" target=_blank>#7475</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement title="Permanent link"> </a></h4> <ul> <li>Add support for cross-compiling to the CPU architecture AARCH64. Refactor packager script. <a href=https://github.com/ClickHouse/ClickHouse/pull/7370 rel="external nofollow noreferrer" target=_blank>#7370</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7539 rel="external nofollow noreferrer" target=_blank>#7539</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Unpack darwin-x86_64 and linux-aarch64 toolchains into mounted Docker volume when building packages <a href=https://github.com/ClickHouse/ClickHouse/pull/7534 rel="external nofollow noreferrer" target=_blank>#7534</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Update Docker Image for Binary Packager <a href=https://github.com/ClickHouse/ClickHouse/pull/7474 rel="external nofollow noreferrer" target=_blank>#7474</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixed compile errors on MacOS Catalina <a href=https://github.com/ClickHouse/ClickHouse/pull/7585 rel="external nofollow noreferrer" target=_blank>#7585</a> (<a href=https://github.com/ernestp rel="external nofollow noreferrer" target=_blank>Ernest Poletaev</a>)</li> <li>Some refactoring in query analysis logic: split complex class into several simple ones. <a href=https://github.com/ClickHouse/ClickHouse/pull/7454 rel="external nofollow noreferrer" target=_blank>#7454</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix build without submodules <a href=https://github.com/ClickHouse/ClickHouse/pull/7295 rel="external nofollow noreferrer" target=_blank>#7295</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Better <code class=syntax>add_globs</code> in CMake files <a href=https://github.com/ClickHouse/ClickHouse/pull/7418 rel="external nofollow noreferrer" target=_blank>#7418</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Remove hardcoded paths in <code class=syntax>unwind</code> target <a href=https://github.com/ClickHouse/ClickHouse/pull/7460 rel="external nofollow noreferrer" target=_blank>#7460</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer" target=_blank>Konstantin Podshumok</a>)</li> <li>Allow to use mysql format without ssl <a href=https://github.com/ClickHouse/ClickHouse/pull/7524 rel="external nofollow noreferrer" target=_blank>#7524</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=other>Other<a class=headerlink href=#other title="Permanent link"> </a></h4> <ul> <li>Added ANTLR4 grammar for ClickHouse SQL dialect <a href=https://github.com/ClickHouse/ClickHouse/issues/7595 rel="external nofollow noreferrer" target=_blank>#7595</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7596 rel="external nofollow noreferrer" target=_blank>#7596</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h2 id=clickhouse-release-v19-16>ClickHouse Release 19.16<a class=headerlink href=#clickhouse-release-v19-16 title="Permanent link"> </a></h2> <h4 id=clickhouse-release-v19-16-14-65-2020-03-25>ClickHouse Release 19.16.14.65, 2020-03-25<a class=headerlink href=#clickhouse-release-v19-16-14-65-2020-03-25 title="Permanent link"> </a></h4> <ul> <li>Fixed up a bug in batched calculations of ternary logical OPs on multiple arguments (more than 10). <a href=https://github.com/ClickHouse/ClickHouse/pull/8718 rel="external nofollow noreferrer" target=_blank>#8718</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander Kazakov</a>) This bugfix was backported to version 19.16 by a special request from Altinity.</li> </ul> <h4 id=clickhouse-release-v19-16-14-65-2020-03-05>ClickHouse Release 19.16.14.65, 2020-03-05<a class=headerlink href=#clickhouse-release-v19-16-14-65-2020-03-05 title="Permanent link"> </a></h4> <ul> <li>Fix distributed subqueries incompatibility with older CH versions. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7851 rel="external nofollow noreferrer" target=_blank>#7851</a><br> <a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>(tabplubix)</a></li> <li>When executing <code class=syntax>CREATE</code> query, fold constant expressions in storage engine arguments. Replace empty database name with current database. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6508 rel="external nofollow noreferrer" target=_blank>#6508</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3492 rel="external nofollow noreferrer" target=_blank>#3492</a>. Also fix check for local address in <code class=syntax>ClickHouseDictionarySource</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9262 rel="external nofollow noreferrer" target=_blank>#9262</a> <a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>(tabplubix)</a></li> <li>Now background merges in <code class=syntax>*MergeTree</code> table engines family preserve storage policy volume order more accurately.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/8549 rel="external nofollow noreferrer" target=_blank>#8549</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Prevent losing data in <code class=syntax>Kafka</code> in rare cases when exception happens after reading suffix but before commit. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9378 rel="external nofollow noreferrer" target=_blank>#9378</a>. Related: <a href=https://github.com/ClickHouse/ClickHouse/issues/7175 rel="external nofollow noreferrer" target=_blank>#7175</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9507 rel="external nofollow noreferrer" target=_blank>#9507</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>(filimonov)</a></li> <li>Fix bug leading to server termination when trying to use / drop <code class=syntax>Kafka</code> table created with wrong parameters. Fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/9494 rel="external nofollow noreferrer" target=_blank>#9494</a>. Incorporates <a href=https://github.com/ClickHouse/ClickHouse/issues/9507 rel="external nofollow noreferrer" target=_blank>#9507</a>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9513 rel="external nofollow noreferrer" target=_blank>#9513</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>(filimonov)</a></li> <li>Allow using <code class=syntax>MaterializedView</code> with subqueries above <code class=syntax>Kafka</code> tables.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/8197 rel="external nofollow noreferrer" target=_blank>#8197</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> </ul> <h4 id=new-feature-1>New Feature<a class=headerlink href=#new-feature-1 title="Permanent link"> </a></h4> <ul> <li>Add <code class=syntax>deduplicate_blocks_in_dependent_materialized_views</code> option to control the behaviour of idempotent inserts into tables with materialized views. This new feature was added to the bugfix release by a special request from Altinity.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/9070 rel="external nofollow noreferrer" target=_blank>#9070</a> <a href=https://github.com/urykhy rel="external nofollow noreferrer" target=_blank>(urykhy)</a></li> </ul> <h3 id=clickhouse-release-v19-16-2-2-2019-10-30>ClickHouse Release 19.16.2.2, 2019-10-30<a class=headerlink href=#clickhouse-release-v19-16-2-2-2019-10-30 title="Permanent link"> </a></h3> <h4 id=backward-incompatible-change-1>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-1 title="Permanent link"> </a></h4> <ul> <li>Add missing arity validation for count/counIf.<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/7095 rel="external nofollow noreferrer" target=_blank>#7095</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7298 rel="external nofollow noreferrer" target=_blank>#7298</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer" target=_blank>Vdimir</a>)</li> <li>Remove legacy <code class=syntax>asterisk_left_columns_only</code> setting (it was disabled by default).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7335 rel="external nofollow noreferrer" target=_blank>#7335</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem<br> Zuikov</a>)</li> <li>Format strings for Template data format are now specified in files.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7118 rel="external nofollow noreferrer" target=_blank>#7118</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> </ul> <h4 id=new-feature-2>New Feature<a class=headerlink href=#new-feature-2 title="Permanent link"> </a></h4> <ul> <li>Introduce uniqCombined64() to calculate cardinality greater than UINT_MAX.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7213 rel="external nofollow noreferrer" target=_blank>#7213</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7222 rel="external nofollow noreferrer" target=_blank>#7222</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li> <li>Support Bloom filter indexes on Array columns.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/6984 rel="external nofollow noreferrer" target=_blank>#6984</a><br> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li> <li>Add a function <code class=syntax>getMacro(name)</code> that returns String with the value of corresponding <code class=syntax>&lt;macros&gt;</code><br> from server configuration. <a href=https://github.com/ClickHouse/ClickHouse/pull/7240 rel="external nofollow noreferrer" target=_blank>#7240</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Set two configuration options for a dictionary based on an HTTP source: <code class=syntax>credentials</code> and<br> <code class=syntax>http-headers</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7092 rel="external nofollow noreferrer" target=_blank>#7092</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume<br> Tassery</a>)</li> <li>Add a new ProfileEvent <code class=syntax>Merge</code> that counts the number of launched background merges.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7093 rel="external nofollow noreferrer" target=_blank>#7093</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>Mikhail<br> Korotov</a>)</li> <li>Add fullHostName function that returns a fully qualified domain name.<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/7263 rel="external nofollow noreferrer" target=_blank>#7263</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7291 rel="external nofollow noreferrer" target=_blank>#7291</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Add function <code class=syntax>arraySplit</code> and <code class=syntax>arrayReverseSplit</code> which split an array by “cut off”<br> conditions. They are useful in time sequence handling.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7294 rel="external nofollow noreferrer" target=_blank>#7294</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Add new functions that return the Array of all matched indices in multiMatch family of functions.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7299 rel="external nofollow noreferrer" target=_blank>#7299</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> Kutenin</a>)</li> <li>Add a new database engine <code class=syntax>Lazy</code> that is optimized for storing a large number of small -Log<br> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/7171 rel="external nofollow noreferrer" target=_blank>#7171</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita<br> Vasilev</a>)</li> <li>Add aggregate functions groupBitmapAnd, -Or, -Xor for bitmap columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/7109 rel="external nofollow noreferrer" target=_blank>#7109</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang<br> Yu</a>)</li> <li>Add aggregate function combinators -OrNull and -OrDefault, which return null<br> or default values when there is nothing to aggregate.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7331 rel="external nofollow noreferrer" target=_blank>#7331</a><br> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Introduce CustomSeparated data format that supports custom escaping and<br> delimiter rules. <a href=https://github.com/ClickHouse/ClickHouse/pull/7118 rel="external nofollow noreferrer" target=_blank>#7118</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Support Redis as source of external dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/4361 rel="external nofollow noreferrer" target=_blank>#4361</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6962 rel="external nofollow noreferrer" target=_blank>#6962</a> (<a href=https://github.com/comunodi rel="external nofollow noreferrer" target=_blank>comunodi</a>, <a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton<br> Popov</a>)</li> </ul> <h4 id=bug-fix-2>Bug Fix<a class=headerlink href=#bug-fix-2 title="Permanent link"> </a></h4> <ul> <li>Fix wrong query result if it has <code class=syntax>WHERE IN (SELECT ...)</code> section and <code class=syntax>optimize_read_in_order</code> is<br> used. <a href=https://github.com/ClickHouse/ClickHouse/pull/7371 rel="external nofollow noreferrer" target=_blank>#7371</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton<br> Popov</a>)</li> <li>Disabled MariaDB authentication plugin, which depends on files outside of project.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7140 rel="external nofollow noreferrer" target=_blank>#7140</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy<br> Baranov</a>)</li> <li>Fix exception <code class=syntax>Cannot convert column ... because it is constant but values of constants are different in source and result</code> which could rarely happen when functions <code class=syntax>now()</code>, <code class=syntax>today()</code>,<br> <code class=syntax>yesterday()</code>, <code class=syntax>randConstant()</code> are used.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7156 rel="external nofollow noreferrer" target=_blank>#7156</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai<br> Kochetov</a>)</li> <li>Fixed issue of using HTTP keep alive timeout instead of TCP keep alive timeout.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7351 rel="external nofollow noreferrer" target=_blank>#7351</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily<br> Nemkov</a>)</li> <li>Fixed a segmentation fault in groupBitmapOr (issue <a href=https://github.com/ClickHouse/ClickHouse/issues/7109 rel="external nofollow noreferrer" target=_blank>#7109</a>).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7289 rel="external nofollow noreferrer" target=_blank>#7289</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang<br> Yu</a>)</li> <li>For materialized views the commit for Kafka is called after all data were written.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7175 rel="external nofollow noreferrer" target=_blank>#7175</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixed wrong <code class=syntax>duration_ms</code> value in <code class=syntax>system.part_log</code> table. It was ten times off.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7172 rel="external nofollow noreferrer" target=_blank>#7172</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir<br> Chebotarev</a>)</li> <li>A quick fix to resolve crash in LIVE VIEW table and re-enabling all LIVE VIEW tests.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7201 rel="external nofollow noreferrer" target=_blank>#7201</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li> <li>Serialize NULL values correctly in min/max indexes of MergeTree parts.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7234 rel="external nofollow noreferrer" target=_blank>#7234</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander<br> Kuzmenkov</a>)</li> <li>Don’t put virtual columns to .sql metadata when table is created as <code class=syntax>CREATE TABLE AS</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7183 rel="external nofollow noreferrer" target=_blank>#7183</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix segmentation fault in <code class=syntax>ATTACH PART</code> query.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7185 rel="external nofollow noreferrer" target=_blank>#7185</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix wrong result for some queries given by the optimization of empty IN subqueries and empty<br> INNER/RIGHT JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/7284 rel="external nofollow noreferrer" target=_blank>#7284</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai<br> Kochetov</a>)</li> <li>Fixing AddressSanitizer error in the LIVE VIEW getHeader() method.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7271 rel="external nofollow noreferrer" target=_blank>#7271</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li> </ul> <h4 id=improvement-1>Improvement<a class=headerlink href=#improvement-1 title="Permanent link"> </a></h4> <ul> <li>Add a message in case of queue_wait_max_ms wait takes place.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7390 rel="external nofollow noreferrer" target=_blank>#7390</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li> <li>Made setting <code class=syntax>s3_min_upload_part_size</code> table-level.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7059 rel="external nofollow noreferrer" target=_blank>#7059</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir<br> Chebotarev</a>)</li> <li>Check TTL in StorageFactory. <a href=https://github.com/ClickHouse/ClickHouse/pull/7304 rel="external nofollow noreferrer" target=_blank>#7304</a><br> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Squash left-hand blocks in partial merge join (optimization).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7122 rel="external nofollow noreferrer" target=_blank>#7122</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem<br> Zuikov</a>)</li> <li>Do not allow non-deterministic functions in mutations of Replicated table engines, because this<br> can introduce inconsistencies between replicas.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7247 rel="external nofollow noreferrer" target=_blank>#7247</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander<br> Kazakov</a>)</li> <li>Disable memory tracker while converting exception stack trace to string. It can prevent the loss<br> of error messages of type <code class=syntax>Memory limit exceeded</code> on server, which caused the <code class=syntax>Attempt to read after eof</code> exception on client. <a href=https://github.com/ClickHouse/ClickHouse/pull/7264 rel="external nofollow noreferrer" target=_blank>#7264</a><br> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Miscellaneous format improvements. Resolves<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/6033 rel="external nofollow noreferrer" target=_blank>#6033</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/2633 rel="external nofollow noreferrer" target=_blank>#2633</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/6611 rel="external nofollow noreferrer" target=_blank>#6611</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/issues/6742 rel="external nofollow noreferrer" target=_blank>#6742</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7215 rel="external nofollow noreferrer" target=_blank>#7215</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>ClickHouse ignores values on the right side of IN operator that are not convertible to the left<br> side type. Make it work properly for compound types – Array and Tuple.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7283 rel="external nofollow noreferrer" target=_blank>#7283</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander<br> Kuzmenkov</a>)</li> <li>Support missing inequalities for ASOF JOIN. It’s possible to join less-or-equal variant and strict<br> greater and less variants for ASOF column in ON syntax.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7282 rel="external nofollow noreferrer" target=_blank>#7282</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem<br> Zuikov</a>)</li> <li>Optimize partial merge join. <a href=https://github.com/ClickHouse/ClickHouse/pull/7070 rel="external nofollow noreferrer" target=_blank>#7070</a><br> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Do not use more than 98K of memory in uniqCombined functions.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7236 rel="external nofollow noreferrer" target=_blank>#7236</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7270 rel="external nofollow noreferrer" target=_blank>#7270</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li> <li>Flush parts of right-hand joining table on disk in PartialMergeJoin (if there is not enough<br> memory). Load data back when needed. <a href=https://github.com/ClickHouse/ClickHouse/pull/7186 rel="external nofollow noreferrer" target=_blank>#7186</a><br> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=performance-improvement-1>Performance Improvement<a class=headerlink href=#performance-improvement-1 title="Permanent link"> </a></h4> <ul> <li>Speed up joinGet with const arguments by avoiding data duplication.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7359 rel="external nofollow noreferrer" target=_blank>#7359</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos<br> Bird</a>)</li> <li>Return early if the subquery is empty.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7007 rel="external nofollow noreferrer" target=_blank>#7007</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li> <li>Optimize parsing of SQL expression in Values.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/6781 rel="external nofollow noreferrer" target=_blank>#6781</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-1>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-1 title="Permanent link"> </a></h4> <ul> <li>Disable some contribs for cross-compilation to Mac OS.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7101 rel="external nofollow noreferrer" target=_blank>#7101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Add missing linking with PocoXML for clickhouse_common_io.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7200 rel="external nofollow noreferrer" target=_blank>#7200</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li> <li>Accept multiple test filter arguments in clickhouse-test.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7226 rel="external nofollow noreferrer" target=_blank>#7226</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander<br> Kuzmenkov</a>)</li> <li>Enable musl and jemalloc for ARM. <a href=https://github.com/ClickHouse/ClickHouse/pull/7300 rel="external nofollow noreferrer" target=_blank>#7300</a><br> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Added <code class=syntax>--client-option</code> parameter to <code class=syntax>clickhouse-test</code> to pass additional parameters to client.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7277 rel="external nofollow noreferrer" target=_blank>#7277</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai<br> Kochetov</a>)</li> <li>Preserve existing configs on rpm package upgrade.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7103 rel="external nofollow noreferrer" target=_blank>#7103</a><br> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Fix errors detected by PVS. <a href=https://github.com/ClickHouse/ClickHouse/pull/7153 rel="external nofollow noreferrer" target=_blank>#7153</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem<br> Zuikov</a>)</li> <li>Fix build for Darwin. <a href=https://github.com/ClickHouse/ClickHouse/pull/7149 rel="external nofollow noreferrer" target=_blank>#7149</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>glibc 2.29 compatibility. <a href=https://github.com/ClickHouse/ClickHouse/pull/7142 rel="external nofollow noreferrer" target=_blank>#7142</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos<br> Bird</a>)</li> <li>Make sure dh_clean does not touch potential source files.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7205 rel="external nofollow noreferrer" target=_blank>#7205</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos<br> Bird</a>)</li> <li>Attempt to avoid conflict when updating from altinity rpm - it has config file packaged separately<br> in clickhouse-server-common. <a href=https://github.com/ClickHouse/ClickHouse/pull/7073 rel="external nofollow noreferrer" target=_blank>#7073</a><br> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Optimize some header files for faster rebuilds.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7212 rel="external nofollow noreferrer" target=_blank>#7212</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7231 rel="external nofollow noreferrer" target=_blank>#7231</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander<br> Kuzmenkov</a>)</li> <li>Add performance tests for Date and DateTime. <a href=https://github.com/ClickHouse/ClickHouse/pull/7332 rel="external nofollow noreferrer" target=_blank>#7332</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily<br> Nemkov</a>)</li> <li>Fix some tests that contained non-deterministic mutations.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7132 rel="external nofollow noreferrer" target=_blank>#7132</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander<br> Kazakov</a>)</li> <li>Add build with MemorySanitizer to CI. <a href=https://github.com/ClickHouse/ClickHouse/pull/7066 rel="external nofollow noreferrer" target=_blank>#7066</a><br> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>Avoid use of uninitialized values in MetricsTransmitter.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7158 rel="external nofollow noreferrer" target=_blank>#7158</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li> <li>Fix some issues in Fields found by MemorySanitizer.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7135 rel="external nofollow noreferrer" target=_blank>#7135</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7179 rel="external nofollow noreferrer" target=_blank>#7179</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander<br> Kuzmenkov</a>), <a href=https://github.com/ClickHouse/ClickHouse/pull/7376 rel="external nofollow noreferrer" target=_blank>#7376</a><br> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Fix undefined behavior in murmurhash32. <a href=https://github.com/ClickHouse/ClickHouse/pull/7388 rel="external nofollow noreferrer" target=_blank>#7388</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos<br> Bird</a>)</li> <li>Fix undefined behavior in StoragesInfoStream. <a href=https://github.com/ClickHouse/ClickHouse/pull/7384 rel="external nofollow noreferrer" target=_blank>#7384</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed constant expressions folding for external database engines (MySQL, ODBC, JDBC). In previous<br> versions it wasn’t working for multiple constant expressions and was not working at all for Date,<br> DateTime and UUID. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7245 rel="external nofollow noreferrer" target=_blank>#7245</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7252 rel="external nofollow noreferrer" target=_blank>#7252</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixing ThreadSanitizer data race error in the LIVE VIEW when accessing no_users_thread variable.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7353 rel="external nofollow noreferrer" target=_blank>#7353</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li> <li>Get rid of malloc symbols in libcommon<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7134 rel="external nofollow noreferrer" target=_blank>#7134</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7065 rel="external nofollow noreferrer" target=_blank>#7065</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos<br> Bird</a>)</li> <li>Add global flag ENABLE_LIBRARIES for disabling all libraries.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7063 rel="external nofollow noreferrer" target=_blank>#7063</a><br> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=code-cleanup>Code Cleanup<a class=headerlink href=#code-cleanup title="Permanent link"> </a></h4> <ul> <li>Generalize configuration repository to prepare for DDL for Dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/7155 rel="external nofollow noreferrer" target=_blank>#7155</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Parser for dictionaries DDL without any semantic.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7209 rel="external nofollow noreferrer" target=_blank>#7209</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Split ParserCreateQuery into different smaller parsers.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7253 rel="external nofollow noreferrer" target=_blank>#7253</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Small refactoring and renaming near external dictionaries.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7111 rel="external nofollow noreferrer" target=_blank>#7111</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Refactor some code to prepare for role-based access control. <a href=https://github.com/ClickHouse/ClickHouse/pull/7235 rel="external nofollow noreferrer" target=_blank>#7235</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly<br> Baranov</a>)</li> <li>Some improvements in DatabaseOrdinary code.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7086 rel="external nofollow noreferrer" target=_blank>#7086</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita<br> Vasilev</a>)</li> <li>Do not use iterators in find() and emplace() methods of hash tables.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7026 rel="external nofollow noreferrer" target=_blank>#7026</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander<br> Kuzmenkov</a>)</li> <li>Fix getMultipleValuesFromConfig in case when parameter root is not empty. <a href=https://github.com/ClickHouse/ClickHouse/pull/7374 rel="external nofollow noreferrer" target=_blank>#7374</a><br> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>Mikhail Korotov</a>)</li> <li>Remove some copy-paste (TemporaryFile and TemporaryFileStream)<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7166 rel="external nofollow noreferrer" target=_blank>#7166</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem<br> Zuikov</a>)</li> <li>Improved code readability a little bit (<code class=syntax>MergeTreeData::getActiveContainingPart</code>).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7361 rel="external nofollow noreferrer" target=_blank>#7361</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir<br> Chebotarev</a>)</li> <li>Wait for all scheduled jobs, which are using local objects, if <code class=syntax>ThreadPool::schedule(...)</code> throws<br> an exception. Rename <code class=syntax>ThreadPool::schedule(...)</code> to <code class=syntax>ThreadPool::scheduleOrThrowOnError(...)</code> and<br> fix comments to make obvious that it may throw.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7350 rel="external nofollow noreferrer" target=_blank>#7350</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> </ul> <h2 id=clickhouse-release-19-15>ClickHouse Release 19.15<a class=headerlink href=#clickhouse-release-19-15 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-15-4-10-2019-10-31>ClickHouse Release 19.15.4.10, 2019-10-31<a class=headerlink href=#clickhouse-release-19-15-4-10-2019-10-31 title="Permanent link"> </a></h3> <h4 id=bug-fix-3>Bug Fix<a class=headerlink href=#bug-fix-3 title="Permanent link"> </a></h4> <ul> <li>Added handling of SQL_TINYINT and SQL_BIGINT, and fix handling of SQL_FLOAT data source types in ODBC Bridge.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7491 rel="external nofollow noreferrer" target=_blank>#7491</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer" target=_blank>Denis Glazachev</a>)</li> <li>Allowed to have some parts on destination disk or volume in MOVE PARTITION.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7434 rel="external nofollow noreferrer" target=_blank>#7434</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fixed NULL-values in nullable columns through ODBC-bridge.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7402 rel="external nofollow noreferrer" target=_blank>#7402</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Fixed INSERT into Distributed non local node with MATERIALIZED columns.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7377 rel="external nofollow noreferrer" target=_blank>#7377</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Fixed function getMultipleValuesFromConfig.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7374 rel="external nofollow noreferrer" target=_blank>#7374</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>Mikhail Korotov</a>)</li> <li>Fixed issue of using HTTP keep alive timeout instead of TCP keep alive timeout.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7351 rel="external nofollow noreferrer" target=_blank>#7351</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Wait for all jobs to finish on exception (fixes rare segfaults).<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7350 rel="external nofollow noreferrer" target=_blank>#7350</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Don’t push to MVs when inserting into Kafka table.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7265 rel="external nofollow noreferrer" target=_blank>#7265</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Disable memory tracker for exception stack.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7264 rel="external nofollow noreferrer" target=_blank>#7264</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fixed bad code in transforming query for external database.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7252 rel="external nofollow noreferrer" target=_blank>#7252</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Avoid use of uninitialized values in MetricsTransmitter.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7158 rel="external nofollow noreferrer" target=_blank>#7158</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Added example config with macros for tests (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-15-3-6-2019-10-09>ClickHouse Release 19.15.3.6, 2019-10-09<a class=headerlink href=#clickhouse-release-19-15-3-6-2019-10-09 title="Permanent link"> </a></h3> <h4 id=bug-fix-4>Bug Fix<a class=headerlink href=#bug-fix-4 title="Permanent link"> </a></h4> <ul> <li>Fixed bad_variant in hashed dictionary.<br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed up bug with segmentation fault in ATTACH PART query.<br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed time calculation in <code class=syntax>MergeTreeData</code>.<br> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Commit to Kafka explicitly after the writing is finalized.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7175 rel="external nofollow noreferrer" target=_blank>#7175</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Serialize NULL values correctly in min/max indexes of MergeTree parts.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/7234 rel="external nofollow noreferrer" target=_blank>#7234</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> </ul> <h3 id=clickhouse-release-19-15-2-2-2019-10-01>ClickHouse Release 19.15.2.2, 2019-10-01<a class=headerlink href=#clickhouse-release-19-15-2-2-2019-10-01 title="Permanent link"> </a></h3> <h4 id=new-feature-3>New Feature<a class=headerlink href=#new-feature-3 title="Permanent link"> </a></h4> <ul> <li>Tiered storage: support to use multiple storage volumes for tables with MergeTree engine. It’s possible to store fresh data on SSD and automatically move old data to HDD. (<a href=https://clickhouse.github.io/clickhouse-presentations/meetup30/new_features/#12 rel="external nofollow noreferrer" target=_blank>example</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4918 rel="external nofollow noreferrer" target=_blank>#4918</a> (<a href=https://github.com/ObjatieGroba rel="external nofollow noreferrer" target=_blank>Igr</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6489 rel="external nofollow noreferrer" target=_blank>#6489</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add table function <code class=syntax>input</code> for reading incoming data in <code class=syntax>INSERT SELECT</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/5450 rel="external nofollow noreferrer" target=_blank>#5450</a> (<a href=https://github.com/palasonic1 rel="external nofollow noreferrer" target=_blank>palasonic1</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6832 rel="external nofollow noreferrer" target=_blank>#6832</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Add a <code class=syntax>sparse_hashed</code> dictionary layout, that is functionally equivalent to the <code class=syntax>hashed</code> layout, but is more memory efficient. It uses about twice as less memory at the cost of slower value retrieval. <a href=https://github.com/ClickHouse/ClickHouse/pull/6894 rel="external nofollow noreferrer" target=_blank>#6894</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Implement ability to define list of users for access to dictionaries. Only current connected database using. <a href=https://github.com/ClickHouse/ClickHouse/pull/6907 rel="external nofollow noreferrer" target=_blank>#6907</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Add <code class=syntax>LIMIT</code> option to <code class=syntax>SHOW</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/6944 rel="external nofollow noreferrer" target=_blank>#6944</a> (<a href=https://github.com/malkfilipp rel="external nofollow noreferrer" target=_blank>Philipp Malkovsky</a>)</li> <li>Add <code class=syntax>bitmapSubsetLimit(bitmap, range_start, limit)</code> function, that returns subset of the smallest <code class=syntax>limit</code> values in set that is no smaller than <code class=syntax>range_start</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6957 rel="external nofollow noreferrer" target=_blank>#6957</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Add <code class=syntax>bitmapMin</code> and <code class=syntax>bitmapMax</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/6970 rel="external nofollow noreferrer" target=_blank>#6970</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Add function <code class=syntax>repeat</code> related to <a href=https://github.com/ClickHouse/ClickHouse/issues/6648 rel="external nofollow noreferrer" target=_blank>issue-6648</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6999 rel="external nofollow noreferrer" target=_blank>#6999</a> (<a href=https://github.com/ucasFL rel="external nofollow noreferrer" target=_blank>flynn</a>)</li> </ul> <h4 id=experimental-feature-1>Experimental Feature<a class=headerlink href=#experimental-feature-1 title="Permanent link"> </a></h4> <ul> <li>Implement (in memory) Merge Join variant that does not change current pipeline. Result is partially sorted by merge key. Set <code class=syntax>partial_merge_join = 1</code> to use this feature. The Merge Join is still in development. <a href=https://github.com/ClickHouse/ClickHouse/pull/6940 rel="external nofollow noreferrer" target=_blank>#6940</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Add <code class=syntax>S3</code> engine and table function. It is still in development (no authentication support yet). <a href=https://github.com/ClickHouse/ClickHouse/pull/5596 rel="external nofollow noreferrer" target=_blank>#5596</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> </ul> <h4 id=improvement-2>Improvement<a class=headerlink href=#improvement-2 title="Permanent link"> </a></h4> <ul> <li>Every message read from Kafka is inserted atomically. This resolves almost all known issues with Kafka engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/6950 rel="external nofollow noreferrer" target=_blank>#6950</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Improvements for failover of Distributed queries. Shorten recovery time, also it is now configurable and can be seen in <code class=syntax>system.clusters</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6399 rel="external nofollow noreferrer" target=_blank>#6399</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Support numeric values for Enums directly in <code class=syntax>IN</code> section. #6766 <a href=https://github.com/ClickHouse/ClickHouse/pull/6941 rel="external nofollow noreferrer" target=_blank>#6941</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Support (optional, disabled by default) redirects on URL storage. <a href=https://github.com/ClickHouse/ClickHouse/pull/6914 rel="external nofollow noreferrer" target=_blank>#6914</a> (<a href=https://github.com/maqroll rel="external nofollow noreferrer" target=_blank>maqroll</a>)</li> <li>Add information message when client with an older version connects to a server. <a href=https://github.com/ClickHouse/ClickHouse/pull/6893 rel="external nofollow noreferrer" target=_blank>#6893</a> (<a href=https://github.com/malkfilipp rel="external nofollow noreferrer" target=_blank>Philipp Malkovsky</a>)</li> <li>Remove maximum backoff sleep time limit for sending data in Distributed tables <a href=https://github.com/ClickHouse/ClickHouse/pull/6895 rel="external nofollow noreferrer" target=_blank>#6895</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Add ability to send profile events (counters) with cumulative values to graphite. It can be enabled under <code class=syntax>&lt;events_cumulative&gt;</code> in server <code class=syntax>config.xml</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6969 rel="external nofollow noreferrer" target=_blank>#6969</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Add automatically cast type <code class=syntax>T</code> to <code class=syntax>LowCardinality(T)</code> while inserting data in column of type <code class=syntax>LowCardinality(T)</code> in Native format via HTTP. <a href=https://github.com/ClickHouse/ClickHouse/pull/6891 rel="external nofollow noreferrer" target=_blank>#6891</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Add ability to use function <code class=syntax>hex</code> without using <code class=syntax>reinterpretAsString</code> for <code class=syntax>Float32</code>, <code class=syntax>Float64</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7024 rel="external nofollow noreferrer" target=_blank>#7024</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>Mikhail Korotov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-2>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-2 title="Permanent link"> </a></h4> <ul> <li>Add gdb-index to clickhouse binary with debug info. It will speed up startup time of <code class=syntax>gdb</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6947 rel="external nofollow noreferrer" target=_blank>#6947</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Speed up deb packaging with patched dpkg-deb which uses <code class=syntax>pigz</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6960 rel="external nofollow noreferrer" target=_blank>#6960</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Set <code class=syntax>enable_fuzzing = 1</code> to enable libfuzzer instrumentation of all the project code. <a href=https://github.com/ClickHouse/ClickHouse/pull/7042 rel="external nofollow noreferrer" target=_blank>#7042</a> (<a href=https://github.com/kyprizel rel="external nofollow noreferrer" target=_blank>kyprizel</a>)</li> <li>Add split build smoke test in CI. <a href=https://github.com/ClickHouse/ClickHouse/pull/7061 rel="external nofollow noreferrer" target=_blank>#7061</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add build with MemorySanitizer to CI. <a href=https://github.com/ClickHouse/ClickHouse/pull/7066 rel="external nofollow noreferrer" target=_blank>#7066</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li> <li>Replace <code class=syntax>libsparsehash</code> with <code class=syntax>sparsehash-c11</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/6965 rel="external nofollow noreferrer" target=_blank>#6965</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> </ul> <h4 id=bug-fix-5>Bug Fix<a class=headerlink href=#bug-fix-5 title="Permanent link"> </a></h4> <ul> <li>Fixed performance degradation of index analysis on complex keys on large tables. This fixes #6924. <a href=https://github.com/ClickHouse/ClickHouse/pull/7075 rel="external nofollow noreferrer" target=_blank>#7075</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix logical error causing segfaults when selecting from Kafka empty topic. <a href=https://github.com/ClickHouse/ClickHouse/pull/6909 rel="external nofollow noreferrer" target=_blank>#6909</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix too early MySQL connection close in <code class=syntax>MySQLBlockInputStream.cpp</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6882 rel="external nofollow noreferrer" target=_blank>#6882</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer" target=_blank>Clément Rodriguez</a>)</li> <li>Returned support for very old Linux kernels (fix <a href=https://github.com/ClickHouse/ClickHouse/issues/6841 rel="external nofollow noreferrer" target=_blank>#6841</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6853 rel="external nofollow noreferrer" target=_blank>#6853</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix possible data loss in <code class=syntax>insert select</code> query in case of empty block in input stream. #6834 #6862 <a href=https://github.com/ClickHouse/ClickHouse/pull/6911 rel="external nofollow noreferrer" target=_blank>#6911</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix for function <code class=syntax>АrrayEnumerateUniqRanked</code> with empty arrays in params <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer" target=_blank>#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix complex queries with array joins and global subqueries. <a href=https://github.com/ClickHouse/ClickHouse/pull/6934 rel="external nofollow noreferrer" target=_blank>#6934</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix <code class=syntax>Unknown identifier</code> error in ORDER BY and GROUP BY with multiple JOINs <a href=https://github.com/ClickHouse/ClickHouse/pull/7022 rel="external nofollow noreferrer" target=_blank>#7022</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed <code class=syntax>MSan</code> warning while executing function with <code class=syntax>LowCardinality</code> argument. <a href=https://github.com/ClickHouse/ClickHouse/pull/7062 rel="external nofollow noreferrer" target=_blank>#7062</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> </ul> <h4 id=backward-incompatible-change-2>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-2 title="Permanent link"> </a></h4> <ul> <li>Changed serialization format of bitmap* aggregate function states to improve performance. Serialized states of bitmap* from previous versions cannot be read. <a href=https://github.com/ClickHouse/ClickHouse/pull/6908 rel="external nofollow noreferrer" target=_blank>#6908</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> </ul> <h2 id=clickhouse-release-19-14>ClickHouse Release 19.14<a class=headerlink href=#clickhouse-release-19-14 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-14-7-15-2019-10-02>ClickHouse Release 19.14.7.15, 2019-10-02<a class=headerlink href=#clickhouse-release-19-14-7-15-2019-10-02 title="Permanent link"> </a></h3> <h4 id=bug-fix-6>Bug Fix<a class=headerlink href=#bug-fix-6 title="Permanent link"> </a></h4> <ul> <li>This release also contains all bug fixes from 19.11.12.69.</li> <li>Fixed compatibility for distributed queries between 19.14 and earlier versions. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/7068 rel="external nofollow noreferrer" target=_blank>#7068</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7069 rel="external nofollow noreferrer" target=_blank>#7069</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-14-6-12-2019-09-19>ClickHouse Release 19.14.6.12, 2019-09-19<a class=headerlink href=#clickhouse-release-19-14-6-12-2019-09-19 title="Permanent link"> </a></h3> <h4 id=bug-fix-7>Bug Fix<a class=headerlink href=#bug-fix-7 title="Permanent link"> </a></h4> <ul> <li>Fix for function <code class=syntax>АrrayEnumerateUniqRanked</code> with empty arrays in params. <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer" target=_blank>#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed subquery name in queries with <code class=syntax>ARRAY JOIN</code> and <code class=syntax>GLOBAL IN subquery</code> with alias. Use subquery alias for external table name if it is specified. <a href=https://github.com/ClickHouse/ClickHouse/pull/6934 rel="external nofollow noreferrer" target=_blank>#6934</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-3>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-3 title="Permanent link"> </a></h4> <ul> <li>Fix <a href=https://clickhouse-test-reports.s3.yandex.net/6944/aab95fd5175a513413c7395a73a82044bdafb906/functional_stateless_tests_(debug).html rel="external nofollow noreferrer" target=_blank>flapping</a> test <code class=syntax>00715_fetch_merged_or_mutated_part_zookeeper</code> by rewriting it to a shell scripts because it needs to wait for mutations to apply. <a href=https://github.com/ClickHouse/ClickHouse/pull/6977 rel="external nofollow noreferrer" target=_blank>#6977</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander Kazakov</a>)</li> <li>Fixed UBSan and MemSan failure in function <code class=syntax>groupUniqArray</code> with emtpy array argument. It was caused by placing of empty <code class=syntax>PaddedPODArray</code> into hash table zero cell because constructor for zero cell value was not called. <a href=https://github.com/ClickHouse/ClickHouse/pull/6937 rel="external nofollow noreferrer" target=_blank>#6937</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> </ul> <h3 id=clickhouse-release-19-14-3-3-2019-09-10>ClickHouse Release 19.14.3.3, 2019-09-10<a class=headerlink href=#clickhouse-release-19-14-3-3-2019-09-10 title="Permanent link"> </a></h3> <h4 id=new-feature-4>New Feature<a class=headerlink href=#new-feature-4 title="Permanent link"> </a></h4> <ul> <li><code class=syntax>WITH FILL</code> modifier for <code class=syntax>ORDER BY</code>. (continuation of <a href=https://github.com/ClickHouse/ClickHouse/issues/5069 rel="external nofollow noreferrer" target=_blank>#5069</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6610 rel="external nofollow noreferrer" target=_blank>#6610</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li><code class=syntax>WITH TIES</code> modifier for <code class=syntax>LIMIT</code>. (continuation of <a href=https://github.com/ClickHouse/ClickHouse/issues/5069 rel="external nofollow noreferrer" target=_blank>#5069</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6610 rel="external nofollow noreferrer" target=_blank>#6610</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Parse unquoted <code class=syntax>NULL</code> literal as NULL (if setting <code class=syntax>format_csv_unquoted_null_literal_as_null=1</code>). Initialize null fields with default values if data type of this field is not nullable (if setting <code class=syntax>input_format_null_as_default=1</code>). <a href=https://github.com/ClickHouse/ClickHouse/issues/5990 rel="external nofollow noreferrer" target=_blank>#5990</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6055 rel="external nofollow noreferrer" target=_blank>#6055</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Support for wildcards in paths of table functions <code class=syntax>file</code> and <code class=syntax>hdfs</code>. If the path contains wildcards, the table will be readonly. Example of usage: <code class=syntax>select * from hdfs('hdfs://hdfs1:9000/some_dir/another_dir/*/file{0..9}{0..9}')</code> and <code class=syntax>select * from file('some_dir/{some_file,another_file,yet_another}.tsv', 'TSV', 'value UInt32')</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6092 rel="external nofollow noreferrer" target=_blank>#6092</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>New <code class=syntax>system.metric_log</code> table which stores values of <code class=syntax>system.events</code> and <code class=syntax>system.metrics</code> with specified time interval. <a href=https://github.com/ClickHouse/ClickHouse/issues/6363 rel="external nofollow noreferrer" target=_blank>#6363</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6467 rel="external nofollow noreferrer" target=_blank>#6467</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6530 rel="external nofollow noreferrer" target=_blank>#6530</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Allow to write ClickHouse text logs to <code class=syntax>system.text_log</code> table. <a href=https://github.com/ClickHouse/ClickHouse/issues/6037 rel="external nofollow noreferrer" target=_blank>#6037</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6103 rel="external nofollow noreferrer" target=_blank>#6103</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6164 rel="external nofollow noreferrer" target=_blank>#6164</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Show private symbols in stack traces (this is done via parsing symbol tables of ELF files). Added information about file and line number in stack traces if debug info is present. Speedup symbol name lookup with indexing symbols present in program. Added new SQL functions for introspection: <code class=syntax>demangle</code> and <code class=syntax>addressToLine</code>. Renamed function <code class=syntax>symbolizeAddress</code> to <code class=syntax>addressToSymbol</code> for consistency. Function <code class=syntax>addressToSymbol</code> will return mangled name for performance reasons and you have to apply <code class=syntax>demangle</code>. Added setting <code class=syntax>allow_introspection_functions</code> which is turned off by default. <a href=https://github.com/ClickHouse/ClickHouse/pull/6201 rel="external nofollow noreferrer" target=_blank>#6201</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Table function <code class=syntax>values</code> (the name is case-insensitive). It allows to read from <code class=syntax>VALUES</code> list proposed in <a href=https://github.com/ClickHouse/ClickHouse/issues/5984 rel="external nofollow noreferrer" target=_blank>#5984</a>. Example: <code class=syntax>SELECT * FROM VALUES('a UInt64, s String', (1, 'one'), (2, 'two'), (3, 'three'))</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6217 rel="external nofollow noreferrer" target=_blank>#6217</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6209 rel="external nofollow noreferrer" target=_blank>#6209</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Added an ability to alter storage settings. Syntax: <code class=syntax>ALTER TABLE &lt;table&gt; MODIFY SETTING &lt;setting&gt; = &lt;value&gt;</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6366 rel="external nofollow noreferrer" target=_blank>#6366</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6669 rel="external nofollow noreferrer" target=_blank>#6669</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6685 rel="external nofollow noreferrer" target=_blank>#6685</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Support for removing of detached parts. Syntax: <code class=syntax>ALTER TABLE &lt;table_name&gt; DROP DETACHED PART '&lt;part_id&gt;'</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6158 rel="external nofollow noreferrer" target=_blank>#6158</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Table constraints. Allows to add constraint to table definition which will be checked at insert. <a href=https://github.com/ClickHouse/ClickHouse/pull/5273 rel="external nofollow noreferrer" target=_blank>#5273</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>Gleb Novikov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6652 rel="external nofollow noreferrer" target=_blank>#6652</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Suppport for cascaded materialized views. <a href=https://github.com/ClickHouse/ClickHouse/pull/6324 rel="external nofollow noreferrer" target=_blank>#6324</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Turn on query profiler by default to sample every query execution thread once a second. <a href=https://github.com/ClickHouse/ClickHouse/pull/6283 rel="external nofollow noreferrer" target=_blank>#6283</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Input format <code class=syntax>ORC</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6454 rel="external nofollow noreferrer" target=_blank>#6454</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6703 rel="external nofollow noreferrer" target=_blank>#6703</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer" target=_blank>akonyaev90</a>)</li> <li>Added two new functions: <code class=syntax>sigmoid</code> and <code class=syntax>tanh</code> (that are useful for machine learning applications). <a href=https://github.com/ClickHouse/ClickHouse/pull/6254 rel="external nofollow noreferrer" target=_blank>#6254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Function <code class=syntax>hasToken(haystack, token)</code>, <code class=syntax>hasTokenCaseInsensitive(haystack, token)</code> to check if given token is in haystack. Token is a maximal length substring between two non alphanumeric ASCII characters (or boundaries of haystack). Token must be a constant string. Supported by tokenbf_v1 index specialization. <a href=https://github.com/ClickHouse/ClickHouse/pull/6596 rel="external nofollow noreferrer" target=_blank>#6596</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/6662 rel="external nofollow noreferrer" target=_blank>#6662</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>New function <code class=syntax>neighbor(value, offset[, default_value])</code>. Allows to reach prev/next value within column in a block of data. <a href=https://github.com/ClickHouse/ClickHouse/pull/5925 rel="external nofollow noreferrer" target=_blank>#5925</a> (<a href=https://github.com/alex-krash rel="external nofollow noreferrer" target=_blank>Alex Krash</a>) <a href=https://github.com/ClickHouse/ClickHouse/commit/6685365ab8c5b74f9650492c88a012596eb1b0c6 rel="external nofollow noreferrer" target=_blank>6685365ab8c5b74f9650492c88a012596eb1b0c6</a> <a href=https://github.com/ClickHouse/ClickHouse/commit/341e2e4587a18065c2da1ca888c73389f48ce36c rel="external nofollow noreferrer" target=_blank>341e2e4587a18065c2da1ca888c73389f48ce36c</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>Alexey Milovidov</a></li> <li>Created a function <code class=syntax>currentUser()</code>, returning login of authorized user. Added alias <code class=syntax>user()</code> for compatibility with MySQL. <a href=https://github.com/ClickHouse/ClickHouse/pull/6470 rel="external nofollow noreferrer" target=_blank>#6470</a> (<a href=https://github.com/alex-krash rel="external nofollow noreferrer" target=_blank>Alex Krash</a>)</li> <li>New aggregate functions <code class=syntax>quantilesExactInclusive</code> and <code class=syntax>quantilesExactExclusive</code> which were proposed in <a href=https://github.com/ClickHouse/ClickHouse/issues/5885 rel="external nofollow noreferrer" target=_blank>#5885</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6477 rel="external nofollow noreferrer" target=_blank>#6477</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Function <code class=syntax>bitmapRange(bitmap, range_begin, range_end)</code> which returns new set with specified range (not include the <code class=syntax>range_end</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6314 rel="external nofollow noreferrer" target=_blank>#6314</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Function <code class=syntax>geohashesInBox(longitude_min, latitude_min, longitude_max, latitude_max, precision)</code> which creates array of precision-long strings of geohash-boxes covering provided area. <a href=https://github.com/ClickHouse/ClickHouse/pull/6127 rel="external nofollow noreferrer" target=_blank>#6127</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Implement support for INSERT query with <code class=syntax>Kafka</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/6012 rel="external nofollow noreferrer" target=_blank>#6012</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Added support for <code class=syntax>_partition</code> and <code class=syntax>_timestamp</code> virtual columns to Kafka engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/6400 rel="external nofollow noreferrer" target=_blank>#6400</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Possibility to remove sensitive data from <code class=syntax>query_log</code>, server logs, process list with regexp-based rules. <a href=https://github.com/ClickHouse/ClickHouse/pull/5710 rel="external nofollow noreferrer" target=_blank>#5710</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> </ul> <h4 id=experimental-feature-2>Experimental Feature<a class=headerlink href=#experimental-feature-2 title="Permanent link"> </a></h4> <ul> <li>Input and output data format <code class=syntax>Template</code>. It allows to specify custom format string for input and output. <a href=https://github.com/ClickHouse/ClickHouse/issues/4354 rel="external nofollow noreferrer" target=_blank>#4354</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6727 rel="external nofollow noreferrer" target=_blank>#6727</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Implementation of <code class=syntax>LIVE VIEW</code> tables that were originally proposed in <a href=https://github.com/ClickHouse/ClickHouse/pull/2898 rel="external nofollow noreferrer" target=_blank>#2898</a>, prepared in <a href=https://github.com/ClickHouse/ClickHouse/issues/3925 rel="external nofollow noreferrer" target=_blank>#3925</a>, and then updated in <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer" target=_blank>#5541</a>. See <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer" target=_blank>#5541</a> for detailed description. <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer" target=_blank>#5541</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6425 rel="external nofollow noreferrer" target=_blank>#6425</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6656 rel="external nofollow noreferrer" target=_blank>#6656</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>) Note that <code class=syntax>LIVE VIEW</code> feature may be removed in next versions.</li> </ul> <h4 id=bug-fix-8>Bug Fix<a class=headerlink href=#bug-fix-8 title="Permanent link"> </a></h4> <ul> <li>This release also contains all bug fixes from 19.13 and 19.11.</li> <li>Fix segmentation fault when the table has skip indices and vertical merge happens. <a href=https://github.com/ClickHouse/ClickHouse/pull/6723 rel="external nofollow noreferrer" target=_blank>#6723</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix per-column TTL with non-trivial column defaults. Previously in case of force TTL merge with <code class=syntax>OPTIMIZE ... FINAL</code> query, expired values was replaced by type defaults instead of user-specified column defaults. <a href=https://github.com/ClickHouse/ClickHouse/pull/6796 rel="external nofollow noreferrer" target=_blank>#6796</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix Kafka messages duplication problem on normal server restart. <a href=https://github.com/ClickHouse/ClickHouse/pull/6597 rel="external nofollow noreferrer" target=_blank>#6597</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixed infinite loop when reading Kafka messages. Do not pause/resume consumer on subscription at all - otherwise it may get paused indefinitely in some scenarios. <a href=https://github.com/ClickHouse/ClickHouse/pull/6354 rel="external nofollow noreferrer" target=_blank>#6354</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix <code class=syntax>Key expression contains comparison between inconvertible types</code> exception in <code class=syntax>bitmapContains</code> function. <a href=https://github.com/ClickHouse/ClickHouse/issues/6136 rel="external nofollow noreferrer" target=_blank>#6136</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/6146 rel="external nofollow noreferrer" target=_blank>#6146</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6156 rel="external nofollow noreferrer" target=_blank>#6156</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Fix segfault with enabled <code class=syntax>optimize_skip_unused_shards</code> and missing sharding key. <a href=https://github.com/ClickHouse/ClickHouse/pull/6384 rel="external nofollow noreferrer" target=_blank>#6384</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code class=syntax>0x14c0</code> that may happed due to concurrent <code class=syntax>DROP TABLE</code> and <code class=syntax>SELECT</code> from <code class=syntax>system.parts</code> or <code class=syntax>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code class=syntax>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer" target=_blank>#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Removed extra verbose logging in MySQL interface <a href=https://github.com/ClickHouse/ClickHouse/pull/6389 rel="external nofollow noreferrer" target=_blank>#6389</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Return the ability to parse boolean settings from ‘true’ and ‘false’ in the configuration file. <a href=https://github.com/ClickHouse/ClickHouse/pull/6278 rel="external nofollow noreferrer" target=_blank>#6278</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix crash in <code class=syntax>quantile</code> and <code class=syntax>median</code> function over <code class=syntax>Nullable(Decimal128)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6378 rel="external nofollow noreferrer" target=_blank>#6378</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed possible incomplete result returned by <code class=syntax>SELECT</code> query with <code class=syntax>WHERE</code> condition on primary key contained conversion to Float type. It was caused by incorrect checking of monotonicity in <code class=syntax>toFloat</code> function. <a href=https://github.com/ClickHouse/ClickHouse/issues/6248 rel="external nofollow noreferrer" target=_blank>#6248</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6374 rel="external nofollow noreferrer" target=_blank>#6374</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Check <code class=syntax>max_expanded_ast_elements</code> setting for mutations. Clear mutations after <code class=syntax>TRUNCATE TABLE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6205 rel="external nofollow noreferrer" target=_blank>#6205</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fix JOIN results for key columns when used with <code class=syntax>join_use_nulls</code>. Attach Nulls instead of columns defaults. <a href=https://github.com/ClickHouse/ClickHouse/pull/6249 rel="external nofollow noreferrer" target=_blank>#6249</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix for skip indices with vertical merge and alter. Fix for <code class=syntax>Bad size of marks file</code> exception. <a href=https://github.com/ClickHouse/ClickHouse/issues/6594 rel="external nofollow noreferrer" target=_blank>#6594</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6713 rel="external nofollow noreferrer" target=_blank>#6713</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix rare crash in <code class=syntax>ALTER MODIFY COLUMN</code> and vertical merge when one of merged/altered parts is empty (0 rows) <a href=https://github.com/ClickHouse/ClickHouse/issues/6746 rel="external nofollow noreferrer" target=_blank>#6746</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6780 rel="external nofollow noreferrer" target=_blank>#6780</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed bug in conversion of <code class=syntax>LowCardinality</code> types in <code class=syntax>AggregateFunctionFactory</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6257 rel="external nofollow noreferrer" target=_blank>#6257</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6281 rel="external nofollow noreferrer" target=_blank>#6281</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix wrong behavior and possible segfaults in <code class=syntax>topK</code> and <code class=syntax>topKWeighted</code> aggregated functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/6404 rel="external nofollow noreferrer" target=_blank>#6404</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fixed unsafe code around <code class=syntax>getIdentifier</code> function. <a href=https://github.com/ClickHouse/ClickHouse/issues/6401 rel="external nofollow noreferrer" target=_blank>#6401</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6409 rel="external nofollow noreferrer" target=_blank>#6409</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed bug in MySQL wire protocol (is used while connecting to ClickHouse form MySQL client). Caused by heap buffer overflow in <code class=syntax>PacketPayloadWriteBuffer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6212 rel="external nofollow noreferrer" target=_blank>#6212</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Fixed memory leak in <code class=syntax>bitmapSubsetInRange</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/6819 rel="external nofollow noreferrer" target=_blank>#6819</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Fix rare bug when mutation executed after granularity change. <a href=https://github.com/ClickHouse/ClickHouse/pull/6816 rel="external nofollow noreferrer" target=_blank>#6816</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Allow protobuf message with all fields by default. <a href=https://github.com/ClickHouse/ClickHouse/pull/6132 rel="external nofollow noreferrer" target=_blank>#6132</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Resolve a bug with <code class=syntax>nullIf</code> function when we send a <code class=syntax>NULL</code> argument on the second argument. <a href=https://github.com/ClickHouse/ClickHouse/pull/6446 rel="external nofollow noreferrer" target=_blank>#6446</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Fix rare bug with wrong memory allocation/deallocation in complex key cache dictionaries with string fields which leads to infinite memory consumption (looks like memory leak). Bug reproduces when string size was a power of two starting from eight (8, 16, 32, etc). <a href=https://github.com/ClickHouse/ClickHouse/pull/6447 rel="external nofollow noreferrer" target=_blank>#6447</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed Gorilla encoding on small sequences which caused exception <code class=syntax>Cannot write after end of buffer</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6398 rel="external nofollow noreferrer" target=_blank>#6398</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6444 rel="external nofollow noreferrer" target=_blank>#6444</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Allow to use not nullable types in JOINs with <code class=syntax>join_use_nulls</code> enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/6705 rel="external nofollow noreferrer" target=_blank>#6705</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Disable <code class=syntax>Poco::AbstractConfiguration</code> substitutions in query in <code class=syntax>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6706 rel="external nofollow noreferrer" target=_blank>#6706</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Avoid deadlock in <code class=syntax>REPLACE PARTITION</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6677 rel="external nofollow noreferrer" target=_blank>#6677</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Using <code class=syntax>arrayReduce</code> for constant arguments may lead to segfault. <a href=https://github.com/ClickHouse/ClickHouse/issues/6242 rel="external nofollow noreferrer" target=_blank>#6242</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6326 rel="external nofollow noreferrer" target=_blank>#6326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix inconsistent parts which can appear if replica was restored after <code class=syntax>DROP PARTITION</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer" target=_blank>#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer" target=_blank>#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed hang in <code class=syntax>JSONExtractRaw</code> function. <a href=https://github.com/ClickHouse/ClickHouse/issues/6195 rel="external nofollow noreferrer" target=_blank>#6195</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6198 rel="external nofollow noreferrer" target=_blank>#6198</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix bug with incorrect skip indices serialization and aggregation with adaptive granularity. <a href=https://github.com/ClickHouse/ClickHouse/issues/6594 rel="external nofollow noreferrer" target=_blank>#6594</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6748 rel="external nofollow noreferrer" target=_blank>#6748</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix <code class=syntax>WITH ROLLUP</code> and <code class=syntax>WITH CUBE</code> modifiers of <code class=syntax>GROUP BY</code> with two-level aggregation. <a href=https://github.com/ClickHouse/ClickHouse/pull/6225 rel="external nofollow noreferrer" target=_blank>#6225</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix bug with writing secondary indices marks with adaptive granularity. <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer" target=_blank>#6126</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix initialization order while server startup. Since <code class=syntax>StorageMergeTree::background_task_handle</code> is initialized in <code class=syntax>startup()</code> the <code class=syntax>MergeTreeBlockOutputStream::write()</code> may try to use it before initialization. Just check if it is initialized. <a href=https://github.com/ClickHouse/ClickHouse/pull/6080 rel="external nofollow noreferrer" target=_blank>#6080</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Clearing the data buffer from the previous read operation that was completed with an error. <a href=https://github.com/ClickHouse/ClickHouse/pull/6026 rel="external nofollow noreferrer" target=_blank>#6026</a> (<a href=https://github.com/bopohaa rel="external nofollow noreferrer" target=_blank>Nikolay</a>)</li> <li>Fix bug with enabling adaptive granularity when creating a new replica for Replicated*MergeTree table. <a href=https://github.com/ClickHouse/ClickHouse/issues/6394 rel="external nofollow noreferrer" target=_blank>#6394</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6452 rel="external nofollow noreferrer" target=_blank>#6452</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed possible crash during server startup in case of exception happened in <code class=syntax>libunwind</code> during exception at access to uninitialized <code class=syntax>ThreadStatus</code> structure. <a href=https://github.com/ClickHouse/ClickHouse/pull/6456 rel="external nofollow noreferrer" target=_blank>#6456</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>)</li> <li>Fix crash in <code class=syntax>yandexConsistentHash</code> function. Found by fuzz test. <a href=https://github.com/ClickHouse/ClickHouse/issues/6304 rel="external nofollow noreferrer" target=_blank>#6304</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6305 rel="external nofollow noreferrer" target=_blank>#6305</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed the possibility of hanging queries when server is overloaded and global thread pool becomes near full. This have higher chance to happen on clusters with large number of shards (hundreds), because distributed queries allocate a thread per connection to each shard. For example, this issue may reproduce if a cluster of 330 shards is processing 30 concurrent distributed queries. This issue affects all versions starting from 19.2. <a href=https://github.com/ClickHouse/ClickHouse/pull/6301 rel="external nofollow noreferrer" target=_blank>#6301</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed logic of <code class=syntax>arrayEnumerateUniqRanked</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/6423 rel="external nofollow noreferrer" target=_blank>#6423</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix segfault when decoding symbol table. <a href=https://github.com/ClickHouse/ClickHouse/pull/6603 rel="external nofollow noreferrer" target=_blank>#6603</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Fixed irrelevant exception in cast of <code class=syntax>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn’t contain Nulls (e.g. in query like <code class=syntax>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6094 rel="external nofollow noreferrer" target=_blank>#6094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6119 rel="external nofollow noreferrer" target=_blank>#6119</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Removed extra quoting of description in <code class=syntax>system.settings</code> table. <a href=https://github.com/ClickHouse/ClickHouse/issues/6696 rel="external nofollow noreferrer" target=_blank>#6696</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6699 rel="external nofollow noreferrer" target=_blank>#6699</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Avoid possible deadlock in <code class=syntax>TRUNCATE</code> of Replicated table. <a href=https://github.com/ClickHouse/ClickHouse/pull/6695 rel="external nofollow noreferrer" target=_blank>#6695</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix reading in order of sorting key. <a href=https://github.com/ClickHouse/ClickHouse/pull/6189 rel="external nofollow noreferrer" target=_blank>#6189</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix <code class=syntax>ALTER TABLE ... UPDATE</code> query for tables with <code class=syntax>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer" target=_blank>#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix bug opened by <a href=https://github.com/ClickHouse/ClickHouse/pull/4405 rel="external nofollow noreferrer" target=_blank>#4405</a> (since 19.4.0). Reproduces in queries to Distributed tables over MergeTree tables when we doesn’t query any columns (<code class=syntax>SELECT 1</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6236 rel="external nofollow noreferrer" target=_blank>#6236</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed overflow in integer division of signed type to unsigned type. The behaviour was exactly as in C or C++ language (integer promotion rules) that may be surprising. Please note that the overflow is still possible when dividing large signed number to large unsigned number or vice-versa (but that case is less usual). The issue existed in all server versions. <a href=https://github.com/ClickHouse/ClickHouse/issues/6214 rel="external nofollow noreferrer" target=_blank>#6214</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6233 rel="external nofollow noreferrer" target=_blank>#6233</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Limit maximum sleep time for throttling when <code class=syntax>max_execution_speed</code> or <code class=syntax>max_execution_speed_bytes</code> is set. Fixed false errors like <code class=syntax>Estimated query execution time (inf seconds) is too long</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/5547 rel="external nofollow noreferrer" target=_blank>#5547</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6232 rel="external nofollow noreferrer" target=_blank>#6232</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed issues about using <code class=syntax>MATERIALIZED</code> columns and aliases in <code class=syntax>MaterializedView</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/448 rel="external nofollow noreferrer" target=_blank>#448</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3484 rel="external nofollow noreferrer" target=_blank>#3484</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3450 rel="external nofollow noreferrer" target=_blank>#3450</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/2878 rel="external nofollow noreferrer" target=_blank>#2878</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/2285 rel="external nofollow noreferrer" target=_blank>#2285</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3796 rel="external nofollow noreferrer" target=_blank>#3796</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6316 rel="external nofollow noreferrer" target=_blank>#6316</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix <code class=syntax>FormatFactory</code> behaviour for input streams which are not implemented as processor. <a href=https://github.com/ClickHouse/ClickHouse/pull/6495 rel="external nofollow noreferrer" target=_blank>#6495</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fixed typo. <a href=https://github.com/ClickHouse/ClickHouse/pull/6631 rel="external nofollow noreferrer" target=_blank>#6631</a> (<a href=https://github.com/alexryndin rel="external nofollow noreferrer" target=_blank>Alex Ryndin</a>)</li> <li>Typo in the error message ( is -&gt; are ). <a href=https://github.com/ClickHouse/ClickHouse/pull/6839 rel="external nofollow noreferrer" target=_blank>#6839</a> (<a href=https://github.com/den-crane rel="external nofollow noreferrer" target=_blank>Denis Zhuravlev</a>)</li> <li>Fixed error while parsing of columns list from string if type contained a comma (this issue was relevant for <code class=syntax>File</code>, <code class=syntax>URL</code>, <code class=syntax>HDFS</code> storages) <a href=https://github.com/ClickHouse/ClickHouse/issues/6217 rel="external nofollow noreferrer" target=_blank>#6217</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6209 rel="external nofollow noreferrer" target=_blank>#6209</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> </ul> <h4 id=security-fix>Security Fix<a class=headerlink href=#security-fix title="Permanent link"> </a></h4> <ul> <li>This release also contains all bug security fixes from 19.13 and 19.11.</li> <li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser. Fixed the possibility of stack overflow in Merge and Distributed tables, materialized views and conditions for row-level security that involve subqueries. <a href=https://github.com/ClickHouse/ClickHouse/pull/6433 rel="external nofollow noreferrer" target=_blank>#6433</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=improvement-3>Improvement<a class=headerlink href=#improvement-3 title="Permanent link"> </a></h4> <ul> <li>Correct implementation of ternary logic for <code class=syntax>AND/OR</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6048 rel="external nofollow noreferrer" target=_blank>#6048</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander Kazakov</a>)</li> <li>Now values and rows with expired TTL will be removed after <code class=syntax>OPTIMIZE ... FINAL</code> query from old parts without TTL infos or with outdated TTL infos, e.g. after <code class=syntax>ALTER ... MODIFY TTL</code> query. Added queries <code class=syntax>SYSTEM STOP/START TTL MERGES</code> to disallow/allow assign merges with TTL and filter expired values in all merges. <a href=https://github.com/ClickHouse/ClickHouse/pull/6274 rel="external nofollow noreferrer" target=_blank>#6274</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Possibility to change the location of ClickHouse history file for client using <code class=syntax>CLICKHOUSE_HISTORY_FILE</code> env. <a href=https://github.com/ClickHouse/ClickHouse/pull/6840 rel="external nofollow noreferrer" target=_blank>#6840</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Remove <code class=syntax>dry_run</code> flag from <code class=syntax>InterpreterSelectQuery</code>. … <a href=https://github.com/ClickHouse/ClickHouse/pull/6375 rel="external nofollow noreferrer" target=_blank>#6375</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Support <code class=syntax>ASOF JOIN</code> with <code class=syntax>ON</code> section. <a href=https://github.com/ClickHouse/ClickHouse/pull/6211 rel="external nofollow noreferrer" target=_blank>#6211</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Better support of skip indexes for mutations and replication. Support for <code class=syntax>MATERIALIZE/CLEAR INDEX ... IN PARTITION</code> query. <code class=syntax>UPDATE x = x</code> recalculates all indices that use column <code class=syntax>x</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5053 rel="external nofollow noreferrer" target=_blank>#5053</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Allow to <code class=syntax>ATTACH</code> live views (for example, at the server startup) regardless to <code class=syntax>allow_experimental_live_view</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/6754 rel="external nofollow noreferrer" target=_blank>#6754</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>For stack traces gathered by query profiler, do not include stack frames generated by the query profiler itself. <a href=https://github.com/ClickHouse/ClickHouse/pull/6250 rel="external nofollow noreferrer" target=_blank>#6250</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Now table functions <code class=syntax>values</code>, <code class=syntax>file</code>, <code class=syntax>url</code>, <code class=syntax>hdfs</code> have support for ALIAS columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/6255 rel="external nofollow noreferrer" target=_blank>#6255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Throw an exception if <code class=syntax>config.d</code> file doesn’t have the corresponding root element as the config file. <a href=https://github.com/ClickHouse/ClickHouse/pull/6123 rel="external nofollow noreferrer" target=_blank>#6123</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Print extra info in exception message for <code class=syntax>no space left on device</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6182 rel="external nofollow noreferrer" target=_blank>#6182</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/6252 rel="external nofollow noreferrer" target=_blank>#6252</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6352 rel="external nofollow noreferrer" target=_blank>#6352</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>When determining shards of a <code class=syntax>Distributed</code> table to be covered by a read query (for <code class=syntax>optimize_skip_unused_shards</code> = 1) ClickHouse now checks conditions from both <code class=syntax>prewhere</code> and <code class=syntax>where</code> clauses of select statement. <a href=https://github.com/ClickHouse/ClickHouse/pull/6521 rel="external nofollow noreferrer" target=_blank>#6521</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander Kazakov</a>)</li> <li>Enabled <code class=syntax>SIMDJSON</code> for machines without AVX2 but with SSE 4.2 and PCLMUL instruction set. <a href=https://github.com/ClickHouse/ClickHouse/issues/6285 rel="external nofollow noreferrer" target=_blank>#6285</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6320 rel="external nofollow noreferrer" target=_blank>#6320</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>ClickHouse can work on filesystems without <code class=syntax>O_DIRECT</code> support (such as ZFS and BtrFS) without additional tuning. <a href=https://github.com/ClickHouse/ClickHouse/issues/4449 rel="external nofollow noreferrer" target=_blank>#4449</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6730 rel="external nofollow noreferrer" target=_blank>#6730</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Support push down predicate for final subquery. <a href=https://github.com/ClickHouse/ClickHouse/pull/6120 rel="external nofollow noreferrer" target=_blank>#6120</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6162 rel="external nofollow noreferrer" target=_blank>#6162</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Better <code class=syntax>JOIN ON</code> keys extraction <a href=https://github.com/ClickHouse/ClickHouse/pull/6131 rel="external nofollow noreferrer" target=_blank>#6131</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Upated <code class=syntax>SIMDJSON</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6285 rel="external nofollow noreferrer" target=_blank>#6285</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6306 rel="external nofollow noreferrer" target=_blank>#6306</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Optimize selecting of smallest column for <code class=syntax>SELECT count()</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/6344 rel="external nofollow noreferrer" target=_blank>#6344</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Added <code class=syntax>strict</code> parameter in <code class=syntax>windowFunnel()</code>. When the <code class=syntax>strict</code> is set, the <code class=syntax>windowFunnel()</code> applies conditions only for the unique values. <a href=https://github.com/ClickHouse/ClickHouse/pull/6548 rel="external nofollow noreferrer" target=_blank>#6548</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li> <li>Safer interface of <code class=syntax>mysqlxx::Pool</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6150 rel="external nofollow noreferrer" target=_blank>#6150</a> (<a href=https://github.com/avasiliev rel="external nofollow noreferrer" target=_blank>avasiliev</a>)</li> <li>Options line size when executing with <code class=syntax>--help</code> option now corresponds with terminal size. <a href=https://github.com/ClickHouse/ClickHouse/pull/6590 rel="external nofollow noreferrer" target=_blank>#6590</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Disable “read in order” optimization for aggregation without keys. <a href=https://github.com/ClickHouse/ClickHouse/pull/6599 rel="external nofollow noreferrer" target=_blank>#6599</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>HTTP status code for <code class=syntax>INCORRECT_DATA</code> and <code class=syntax>TYPE_MISMATCH</code> error codes was changed from default <code class=syntax>500 Internal Server Error</code> to <code class=syntax>400 Bad Request</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6271 rel="external nofollow noreferrer" target=_blank>#6271</a> (<a href=https://github.com/a-rodin rel="external nofollow noreferrer" target=_blank>Alexander Rodin</a>)</li> <li>Move Join object from <code class=syntax>ExpressionAction</code> into <code class=syntax>AnalyzedJoin</code>. <code class=syntax>ExpressionAnalyzer</code> and <code class=syntax>ExpressionAction</code> do not know about <code class=syntax>Join</code> class anymore. Its logic is hidden by <code class=syntax>AnalyzedJoin</code> iface. <a href=https://github.com/ClickHouse/ClickHouse/pull/6801 rel="external nofollow noreferrer" target=_blank>#6801</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed possible deadlock of distributed queries when one of shards is localhost but the query is sent via network connection. <a href=https://github.com/ClickHouse/ClickHouse/pull/6759 rel="external nofollow noreferrer" target=_blank>#6759</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Changed semantic of multiple tables <code class=syntax>RENAME</code> to avoid possible deadlocks. <a href=https://github.com/ClickHouse/ClickHouse/issues/6757 rel="external nofollow noreferrer" target=_blank>#6757</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6756 rel="external nofollow noreferrer" target=_blank>#6756</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Rewritten MySQL compatibility server to prevent loading full packet payload in memory. Decreased memory consumption for each connection to approximately <code class=syntax>2 * DBMS_DEFAULT_BUFFER_SIZE</code> (read/write buffers). <a href=https://github.com/ClickHouse/ClickHouse/pull/5811 rel="external nofollow noreferrer" target=_blank>#5811</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Move AST alias interpreting logic out of parser that doesn’t have to know anything about query semantics. <a href=https://github.com/ClickHouse/ClickHouse/pull/6108 rel="external nofollow noreferrer" target=_blank>#6108</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Slightly more safe parsing of <code class=syntax>NamesAndTypesList</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6408 rel="external nofollow noreferrer" target=_blank>#6408</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6410 rel="external nofollow noreferrer" target=_blank>#6410</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>clickhouse-copier</code>: Allow use <code class=syntax>where_condition</code> from config with <code class=syntax>partition_key</code> alias in query for checking partition existence (Earlier it was used only in reading data queries). <a href=https://github.com/ClickHouse/ClickHouse/pull/6577 rel="external nofollow noreferrer" target=_blank>#6577</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Added optional message argument in <code class=syntax>throwIf</code>. (<a href=https://github.com/ClickHouse/ClickHouse/issues/5772 rel="external nofollow noreferrer" target=_blank>#5772</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6329 rel="external nofollow noreferrer" target=_blank>#6329</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer" target=_blank>Vdimir</a>)</li> <li>Server exception got while sending insertion data is now being processed in client as well. <a href=https://github.com/ClickHouse/ClickHouse/issues/5891 rel="external nofollow noreferrer" target=_blank>#5891</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6711 rel="external nofollow noreferrer" target=_blank>#6711</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Added a metric <code class=syntax>DistributedFilesToInsert</code> that shows the total number of files in filesystem that are selected to send to remote servers by Distributed tables. The number is summed across all shards. <a href=https://github.com/ClickHouse/ClickHouse/pull/6600 rel="external nofollow noreferrer" target=_blank>#6600</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Move most of JOINs prepare logic from <code class=syntax>ExpressionAction/ExpressionAnalyzer</code> to <code class=syntax>AnalyzedJoin</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6785 rel="external nofollow noreferrer" target=_blank>#6785</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix TSan <a href=https://clickhouse-test-reports.s3.yandex.net/6399/c1c1d1daa98e199e620766f1bd06a5921050a00d/functional_stateful_tests_(thread).html rel="external nofollow noreferrer" target=_blank>warning</a> ‘lock-order-inversion’. <a href=https://github.com/ClickHouse/ClickHouse/pull/6740 rel="external nofollow noreferrer" target=_blank>#6740</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Better information messages about lack of Linux capabilities. Logging fatal errors with “fatal” level, that will make it easier to find in <code class=syntax>system.text_log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6441 rel="external nofollow noreferrer" target=_blank>#6441</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>When enable dumping temporary data to the disk to restrict memory usage during <code class=syntax>GROUP BY</code>, <code class=syntax>ORDER BY</code>, it didn’t check the free disk space. The fix add a new setting <code class=syntax>min_free_disk_space</code>, when the free disk space it smaller then the threshold, the query will stop and throw <code class=syntax>ErrorCodes::NOT_ENOUGH_SPACE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6678 rel="external nofollow noreferrer" target=_blank>#6678</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer" target=_blank>Weiqing Xu</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6691 rel="external nofollow noreferrer" target=_blank>#6691</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Removed recursive rwlock by thread. It makes no sense, because threads are reused between queries. <code class=syntax>SELECT</code> query may acquire a lock in one thread, hold a lock from another thread and exit from first thread. In the same time, first thread can be reused by <code class=syntax>DROP</code> query. This will lead to false “Attempt to acquire exclusive lock recursively” messages. <a href=https://github.com/ClickHouse/ClickHouse/pull/6771 rel="external nofollow noreferrer" target=_blank>#6771</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Split <code class=syntax>ExpressionAnalyzer.appendJoin()</code>. Prepare a place in <code class=syntax>ExpressionAnalyzer</code> for <code class=syntax>MergeJoin</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6524 rel="external nofollow noreferrer" target=_blank>#6524</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Added <code class=syntax>mysql_native_password</code> authentication plugin to MySQL compatibility server. <a href=https://github.com/ClickHouse/ClickHouse/pull/6194 rel="external nofollow noreferrer" target=_blank>#6194</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Less number of <code class=syntax>clock_gettime</code> calls; fixed ABI compatibility between debug/release in <code class=syntax>Allocator</code> (insignificant issue). <a href=https://github.com/ClickHouse/ClickHouse/pull/6197 rel="external nofollow noreferrer" target=_blank>#6197</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Move <code class=syntax>collectUsedColumns</code> from <code class=syntax>ExpressionAnalyzer</code> to <code class=syntax>SyntaxAnalyzer</code>. <code class=syntax>SyntaxAnalyzer</code> makes <code class=syntax>required_source_columns</code> itself now. <a href=https://github.com/ClickHouse/ClickHouse/pull/6416 rel="external nofollow noreferrer" target=_blank>#6416</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Add setting <code class=syntax>joined_subquery_requires_alias</code> to require aliases for subselects and table functions in <code class=syntax>FROM</code> that more than one table is present (i.e. queries with JOINs). <a href=https://github.com/ClickHouse/ClickHouse/pull/6733 rel="external nofollow noreferrer" target=_blank>#6733</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Extract <code class=syntax>GetAggregatesVisitor</code> class from <code class=syntax>ExpressionAnalyzer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6458 rel="external nofollow noreferrer" target=_blank>#6458</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li><code class=syntax>system.query_log</code>: change data type of <code class=syntax>type</code> column to <code class=syntax>Enum</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6265 rel="external nofollow noreferrer" target=_blank>#6265</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>)</li> <li>Static linking of <code class=syntax>sha256_password</code> authentication plugin. <a href=https://github.com/ClickHouse/ClickHouse/pull/6512 rel="external nofollow noreferrer" target=_blank>#6512</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Avoid extra dependency for the setting <code class=syntax>compile</code> to work. In previous versions, the user may get error like <code class=syntax>cannot open crti.o</code>, <code class=syntax>unable to find library -lc</code> etc. <a href=https://github.com/ClickHouse/ClickHouse/pull/6309 rel="external nofollow noreferrer" target=_blank>#6309</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>More validation of the input that may come from malicious replica. <a href=https://github.com/ClickHouse/ClickHouse/pull/6303 rel="external nofollow noreferrer" target=_blank>#6303</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Now <code class=syntax>clickhouse-obfuscator</code> file is available in <code class=syntax>clickhouse-client</code> package. In previous versions it was available as <code class=syntax>clickhouse obfuscator</code> (with whitespace). <a href=https://github.com/ClickHouse/ClickHouse/issues/5816 rel="external nofollow noreferrer" target=_blank>#5816</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6609 rel="external nofollow noreferrer" target=_blank>#6609</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Fixed deadlock when we have at least two queries that read at least two tables in different order and another query that performs DDL operation on one of tables. Fixed another very rare deadlock. <a href=https://github.com/ClickHouse/ClickHouse/pull/6764 rel="external nofollow noreferrer" target=_blank>#6764</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added <code class=syntax>os_thread_ids</code> column to <code class=syntax>system.processes</code> and <code class=syntax>system.query_log</code> for better debugging possibilities. <a href=https://github.com/ClickHouse/ClickHouse/pull/6763 rel="external nofollow noreferrer" target=_blank>#6763</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>A workaround for PHP mysqlnd extension bugs which occur when <code class=syntax>sha256_password</code> is used as a default authentication plugin (described in <a href=https://github.com/ClickHouse/ClickHouse/issues/6031 rel="external nofollow noreferrer" target=_blank>#6031</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6113 rel="external nofollow noreferrer" target=_blank>#6113</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Remove unneeded place with changed nullability columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/6693 rel="external nofollow noreferrer" target=_blank>#6693</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Set default value of <code class=syntax>queue_max_wait_ms</code> to zero, because current value (five seconds) makes no sense. There are rare circumstances when this settings has any use. Added settings <code class=syntax>replace_running_query_max_wait_ms</code>, <code class=syntax>kafka_max_wait_ms</code> and <code class=syntax>connection_pool_max_wait_ms</code> for disambiguation. <a href=https://github.com/ClickHouse/ClickHouse/pull/6692 rel="external nofollow noreferrer" target=_blank>#6692</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Extract <code class=syntax>SelectQueryExpressionAnalyzer</code> from <code class=syntax>ExpressionAnalyzer</code>. Keep the last one for non-select queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/6499 rel="external nofollow noreferrer" target=_blank>#6499</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Removed duplicating input and output formats. <a href=https://github.com/ClickHouse/ClickHouse/pull/6239 rel="external nofollow noreferrer" target=_blank>#6239</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Allow user to override <code class=syntax>poll_interval</code> and <code class=syntax>idle_connection_timeout</code> settings on connection. <a href=https://github.com/ClickHouse/ClickHouse/pull/6230 rel="external nofollow noreferrer" target=_blank>#6230</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>MergeTree</code> now has an additional option <code class=syntax>ttl_only_drop_parts</code> (disabled by default) to avoid partial pruning of parts, so that they dropped completely when all the rows in a part are expired. <a href=https://github.com/ClickHouse/ClickHouse/pull/6191 rel="external nofollow noreferrer" target=_blank>#6191</a> (<a href=https://github.com/svladykin rel="external nofollow noreferrer" target=_blank>Sergi Vladykin</a>)</li> <li>Type checks for set index functions. Throw exception if function got a wrong type. This fixes fuzz test with UBSan. <a href=https://github.com/ClickHouse/ClickHouse/pull/6511 rel="external nofollow noreferrer" target=_blank>#6511</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> </ul> <h4 id=performance-improvement-2>Performance Improvement<a class=headerlink href=#performance-improvement-2 title="Permanent link"> </a></h4> <ul> <li>Optimize queries with <code class=syntax>ORDER BY expressions</code> clause, where <code class=syntax>expressions</code> have coinciding prefix with sorting key in <code class=syntax>MergeTree</code> tables. This optimization is controlled by <code class=syntax>optimize_read_in_order</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/6054 rel="external nofollow noreferrer" target=_blank>#6054</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6629 rel="external nofollow noreferrer" target=_blank>#6629</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Allow to use multiple threads during parts loading and removal. <a href=https://github.com/ClickHouse/ClickHouse/issues/6372 rel="external nofollow noreferrer" target=_blank>#6372</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/6074 rel="external nofollow noreferrer" target=_blank>#6074</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6438 rel="external nofollow noreferrer" target=_blank>#6438</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Implemented batch variant of updating aggregate function states. It may lead to performance benefits. <a href=https://github.com/ClickHouse/ClickHouse/pull/6435 rel="external nofollow noreferrer" target=_blank>#6435</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Using <code class=syntax>FastOps</code> library for functions <code class=syntax>exp</code>, <code class=syntax>log</code>, <code class=syntax>sigmoid</code>, <code class=syntax>tanh</code>. FastOps is a fast vector math library from Michael Parakhin (Yandex CTO). Improved performance of <code class=syntax>exp</code> and <code class=syntax>log</code> functions more than 6 times. The functions <code class=syntax>exp</code> and <code class=syntax>log</code> from <code class=syntax>Float32</code> argument will return <code class=syntax>Float32</code> (in previous versions they always return <code class=syntax>Float64</code>). Now <code class=syntax>exp(nan)</code> may return <code class=syntax>inf</code>. The result of <code class=syntax>exp</code> and <code class=syntax>log</code> functions may be not the nearest machine representable number to the true answer. <a href=https://github.com/ClickHouse/ClickHouse/pull/6254 rel="external nofollow noreferrer" target=_blank>#6254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>) Using Danila Kutenin variant to make fastops working <a href=https://github.com/ClickHouse/ClickHouse/pull/6317 rel="external nofollow noreferrer" target=_blank>#6317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Disable consecutive key optimization for <code class=syntax>UInt8/16</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6298 rel="external nofollow noreferrer" target=_blank>#6298</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6701 rel="external nofollow noreferrer" target=_blank>#6701</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Improved performance of <code class=syntax>simdjson</code> library by getting rid of dynamic allocation in <code class=syntax>ParsedJson::Iterator</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6479 rel="external nofollow noreferrer" target=_blank>#6479</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Pre-fault pages when allocating memory with <code class=syntax>mmap()</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6667 rel="external nofollow noreferrer" target=_blank>#6667</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Fix performance bug in <code class=syntax>Decimal</code> comparison. <a href=https://github.com/ClickHouse/ClickHouse/pull/6380 rel="external nofollow noreferrer" target=_blank>#6380</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-4>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-4 title="Permanent link"> </a></h4> <ul> <li>Remove Compiler (runtime template instantiation) because we’ve win over it’s performance. <a href=https://github.com/ClickHouse/ClickHouse/pull/6646 rel="external nofollow noreferrer" target=_blank>#6646</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added performance test to show degradation of performance in gcc-9 in more isolated way. <a href=https://github.com/ClickHouse/ClickHouse/pull/6302 rel="external nofollow noreferrer" target=_blank>#6302</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added table function <code class=syntax>numbers_mt</code>, which is multithreaded version of <code class=syntax>numbers</code>. Updated performance tests with hash functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/6554 rel="external nofollow noreferrer" target=_blank>#6554</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Comparison mode in <code class=syntax>clickhouse-benchmark</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/6220 rel="external nofollow noreferrer" target=_blank>#6220</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6343 rel="external nofollow noreferrer" target=_blank>#6343</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Best effort for printing stack traces. Also added <code class=syntax>SIGPROF</code> as a debugging signal to print stack trace of a running thread. <a href=https://github.com/ClickHouse/ClickHouse/pull/6529 rel="external nofollow noreferrer" target=_blank>#6529</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Every function in its own file, part 10. <a href=https://github.com/ClickHouse/ClickHouse/pull/6321 rel="external nofollow noreferrer" target=_blank>#6321</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Remove doubled const <code class=syntax>TABLE_IS_READ_ONLY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6566 rel="external nofollow noreferrer" target=_blank>#6566</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Formatting changes for <code class=syntax>StringHashMap</code> PR <a href=https://github.com/ClickHouse/ClickHouse/issues/5417 rel="external nofollow noreferrer" target=_blank>#5417</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6700 rel="external nofollow noreferrer" target=_blank>#6700</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Better subquery for join creation in <code class=syntax>ExpressionAnalyzer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6824 rel="external nofollow noreferrer" target=_blank>#6824</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Remove a redundant condition (found by PVS Studio). <a href=https://github.com/ClickHouse/ClickHouse/pull/6775 rel="external nofollow noreferrer" target=_blank>#6775</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Separate the hash table interface for <code class=syntax>ReverseIndex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6672 rel="external nofollow noreferrer" target=_blank>#6672</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Refactoring of settings. <a href=https://github.com/ClickHouse/ClickHouse/pull/6689 rel="external nofollow noreferrer" target=_blank>#6689</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add comments for <code class=syntax>set</code> index functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/6319 rel="external nofollow noreferrer" target=_blank>#6319</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Increase OOM score in debug version on Linux. <a href=https://github.com/ClickHouse/ClickHouse/pull/6152 rel="external nofollow noreferrer" target=_blank>#6152</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>HDFS HA now work in debug build. <a href=https://github.com/ClickHouse/ClickHouse/pull/6650 rel="external nofollow noreferrer" target=_blank>#6650</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer" target=_blank>Weiqing Xu</a>)</li> <li>Added a test to <code class=syntax>transform_query_for_external_database</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6388 rel="external nofollow noreferrer" target=_blank>#6388</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add test for multiple materialized views for Kafka table. <a href=https://github.com/ClickHouse/ClickHouse/pull/6509 rel="external nofollow noreferrer" target=_blank>#6509</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Make a better build scheme. <a href=https://github.com/ClickHouse/ClickHouse/pull/6500 rel="external nofollow noreferrer" target=_blank>#6500</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixed <code class=syntax>test_external_dictionaries</code> integration in case it was executed under non root user. <a href=https://github.com/ClickHouse/ClickHouse/pull/6507 rel="external nofollow noreferrer" target=_blank>#6507</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>The bug reproduces when total size of written packets exceeds <code class=syntax>DBMS_DEFAULT_BUFFER_SIZE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6204 rel="external nofollow noreferrer" target=_blank>#6204</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Added a test for <code class=syntax>RENAME</code> table race condition <a href=https://github.com/ClickHouse/ClickHouse/pull/6752 rel="external nofollow noreferrer" target=_blank>#6752</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Avoid data race on Settings in <code class=syntax>KILL QUERY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6753 rel="external nofollow noreferrer" target=_blank>#6753</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add integration test for handling errors by a cache dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/6755 rel="external nofollow noreferrer" target=_blank>#6755</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Disable parsing of ELF object files on Mac OS, because it makes no sense. <a href=https://github.com/ClickHouse/ClickHouse/pull/6578 rel="external nofollow noreferrer" target=_blank>#6578</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Attempt to make changelog generator better. <a href=https://github.com/ClickHouse/ClickHouse/pull/6327 rel="external nofollow noreferrer" target=_blank>#6327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Adding <code class=syntax>-Wshadow</code> switch to the GCC. <a href=https://github.com/ClickHouse/ClickHouse/pull/6325 rel="external nofollow noreferrer" target=_blank>#6325</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer" target=_blank>kreuzerkrieg</a>)</li> <li>Removed obsolete code for <code class=syntax>mimalloc</code> support. <a href=https://github.com/ClickHouse/ClickHouse/pull/6715 rel="external nofollow noreferrer" target=_blank>#6715</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>zlib-ng</code> determines x86 capabilities and saves this info to global variables. This is done in defalteInit call, which may be made by different threads simultaneously. To avoid multithreaded writes, do it on library startup. <a href=https://github.com/ClickHouse/ClickHouse/pull/6141 rel="external nofollow noreferrer" target=_blank>#6141</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Regression test for a bug which in join which was fixed in <a href=https://github.com/ClickHouse/ClickHouse/issues/5192 rel="external nofollow noreferrer" target=_blank>#5192</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6147 rel="external nofollow noreferrer" target=_blank>#6147</a> (<a href=https://github.com/theruziev rel="external nofollow noreferrer" target=_blank>Bakhtiyor Ruziev</a>)</li> <li>Fixed MSan report. <a href=https://github.com/ClickHouse/ClickHouse/pull/6144 rel="external nofollow noreferrer" target=_blank>#6144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix flapping TTL test. <a href=https://github.com/ClickHouse/ClickHouse/pull/6782 rel="external nofollow noreferrer" target=_blank>#6782</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fixed false data race in <code class=syntax>MergeTreeDataPart::is_frozen</code> field. <a href=https://github.com/ClickHouse/ClickHouse/pull/6583 rel="external nofollow noreferrer" target=_blank>#6583</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed timeouts in fuzz test. In previous version, it managed to find false hangup in query <code class=syntax>SELECT * FROM numbers_mt(gccMurmurHash(''))</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6582 rel="external nofollow noreferrer" target=_blank>#6582</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added debug checks to <code class=syntax>static_cast</code> of columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/6581 rel="external nofollow noreferrer" target=_blank>#6581</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Support for Oracle Linux in official RPM packages. <a href=https://github.com/ClickHouse/ClickHouse/issues/6356 rel="external nofollow noreferrer" target=_blank>#6356</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6585 rel="external nofollow noreferrer" target=_blank>#6585</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Changed json perftests from <code class=syntax>once</code> to <code class=syntax>loop</code> type. <a href=https://github.com/ClickHouse/ClickHouse/pull/6536 rel="external nofollow noreferrer" target=_blank>#6536</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li><code class=syntax>odbc-bridge.cpp</code> defines <code class=syntax>main()</code> so it should not be included in <code class=syntax>clickhouse-lib</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6538 rel="external nofollow noreferrer" target=_blank>#6538</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Orivej Desh</a>)</li> <li>Test for crash in <code class=syntax>FULL|RIGHT JOIN</code> with nulls in right table’s keys. <a href=https://github.com/ClickHouse/ClickHouse/pull/6362 rel="external nofollow noreferrer" target=_blank>#6362</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Added a test for the limit on expansion of aliases just in case. <a href=https://github.com/ClickHouse/ClickHouse/pull/6442 rel="external nofollow noreferrer" target=_blank>#6442</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Switched from <code class=syntax>boost::filesystem</code> to <code class=syntax>std::filesystem</code> where appropriate. <a href=https://github.com/ClickHouse/ClickHouse/pull/6253 rel="external nofollow noreferrer" target=_blank>#6253</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6385 rel="external nofollow noreferrer" target=_blank>#6385</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added RPM packages to website. <a href=https://github.com/ClickHouse/ClickHouse/pull/6251 rel="external nofollow noreferrer" target=_blank>#6251</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add a test for fixed <code class=syntax>Unknown identifier</code> exception in <code class=syntax>IN</code> section. <a href=https://github.com/ClickHouse/ClickHouse/pull/6708 rel="external nofollow noreferrer" target=_blank>#6708</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Simplify <code class=syntax>shared_ptr_helper</code> because people facing difficulties understanding it. <a href=https://github.com/ClickHouse/ClickHouse/pull/6675 rel="external nofollow noreferrer" target=_blank>#6675</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added performance tests for fixed Gorilla and DoubleDelta codec. <a href=https://github.com/ClickHouse/ClickHouse/pull/6179 rel="external nofollow noreferrer" target=_blank>#6179</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Split the integration test <code class=syntax>test_dictionaries</code> into 4 separate tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/6776 rel="external nofollow noreferrer" target=_blank>#6776</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fix PVS-Studio warning in <code class=syntax>PipelineExecutor</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6777 rel="external nofollow noreferrer" target=_blank>#6777</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Allow to use <code class=syntax>library</code> dictionary source with ASan. <a href=https://github.com/ClickHouse/ClickHouse/pull/6482 rel="external nofollow noreferrer" target=_blank>#6482</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added option to generate changelog from a list of PRs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6350 rel="external nofollow noreferrer" target=_blank>#6350</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Lock the <code class=syntax>TinyLog</code> storage when reading. <a href=https://github.com/ClickHouse/ClickHouse/pull/6226 rel="external nofollow noreferrer" target=_blank>#6226</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Check for broken symlinks in CI. <a href=https://github.com/ClickHouse/ClickHouse/pull/6634 rel="external nofollow noreferrer" target=_blank>#6634</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Increase timeout for “stack overflow” test because it may take a long time in debug build. <a href=https://github.com/ClickHouse/ClickHouse/pull/6637 rel="external nofollow noreferrer" target=_blank>#6637</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added a check for double whitespaces. <a href=https://github.com/ClickHouse/ClickHouse/pull/6643 rel="external nofollow noreferrer" target=_blank>#6643</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix <code class=syntax>new/delete</code> memory tracking when build with sanitizers. Tracking is not clear. It only prevents memory limit exceptions in tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/6450 rel="external nofollow noreferrer" target=_blank>#6450</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Enable back the check of undefined symbols while linking. <a href=https://github.com/ClickHouse/ClickHouse/pull/6453 rel="external nofollow noreferrer" target=_blank>#6453</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Avoid rebuilding <code class=syntax>hyperscan</code> every day. <a href=https://github.com/ClickHouse/ClickHouse/pull/6307 rel="external nofollow noreferrer" target=_blank>#6307</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed UBSan report in <code class=syntax>ProtobufWriter</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6163 rel="external nofollow noreferrer" target=_blank>#6163</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Don’t allow to use query profiler with sanitizers because it is not compatible. <a href=https://github.com/ClickHouse/ClickHouse/pull/6769 rel="external nofollow noreferrer" target=_blank>#6769</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add test for reloading a dictionary after fail by timer. <a href=https://github.com/ClickHouse/ClickHouse/pull/6114 rel="external nofollow noreferrer" target=_blank>#6114</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fix inconsistency in <code class=syntax>PipelineExecutor::prepareProcessor</code> argument type. <a href=https://github.com/ClickHouse/ClickHouse/pull/6494 rel="external nofollow noreferrer" target=_blank>#6494</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Added a test for bad URIs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6493 rel="external nofollow noreferrer" target=_blank>#6493</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added more checks to <code class=syntax>CAST</code> function. This should get more information about segmentation fault in fuzzy test. <a href=https://github.com/ClickHouse/ClickHouse/pull/6346 rel="external nofollow noreferrer" target=_blank>#6346</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Added <code class=syntax>gcc-9</code> support to <code class=syntax>docker/builder</code> container that builds image locally. <a href=https://github.com/ClickHouse/ClickHouse/pull/6333 rel="external nofollow noreferrer" target=_blank>#6333</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>Gleb Novikov</a>)</li> <li>Test for primary key with <code class=syntax>LowCardinality(String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/5044 rel="external nofollow noreferrer" target=_blank>#5044</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6219 rel="external nofollow noreferrer" target=_blank>#6219</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Fixed tests affected by slow stack traces printing. <a href=https://github.com/ClickHouse/ClickHouse/pull/6315 rel="external nofollow noreferrer" target=_blank>#6315</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add a test case for crash in <code class=syntax>groupUniqArray</code> fixed in <a href=https://github.com/ClickHouse/ClickHouse/pull/6029 rel="external nofollow noreferrer" target=_blank>#6029</a>. <a href=https://github.com/ClickHouse/ClickHouse/issues/4402 rel="external nofollow noreferrer" target=_blank>#4402</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6129 rel="external nofollow noreferrer" target=_blank>#6129</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Fixed indices mutations tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/6645 rel="external nofollow noreferrer" target=_blank>#6645</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>In performance test, do not read query log for queries we didn’t run. <a href=https://github.com/ClickHouse/ClickHouse/pull/6427 rel="external nofollow noreferrer" target=_blank>#6427</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Materialized view now could be created with any low cardinality types regardless to the setting about suspicious low cardinality types. <a href=https://github.com/ClickHouse/ClickHouse/pull/6428 rel="external nofollow noreferrer" target=_blank>#6428</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Updated tests for <code class=syntax>send_logs_level</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/6207 rel="external nofollow noreferrer" target=_blank>#6207</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix build under gcc-8.2. <a href=https://github.com/ClickHouse/ClickHouse/pull/6196 rel="external nofollow noreferrer" target=_blank>#6196</a> (<a href=https://github.com/zlobober rel="external nofollow noreferrer" target=_blank>Max Akhmedov</a>)</li> <li>Fix build with internal libc++. <a href=https://github.com/ClickHouse/ClickHouse/pull/6724 rel="external nofollow noreferrer" target=_blank>#6724</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix shared build with <code class=syntax>rdkafka</code> library <a href=https://github.com/ClickHouse/ClickHouse/pull/6101 rel="external nofollow noreferrer" target=_blank>#6101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixes for Mac OS build (incomplete). <a href=https://github.com/ClickHouse/ClickHouse/pull/6390 rel="external nofollow noreferrer" target=_blank>#6390</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6429 rel="external nofollow noreferrer" target=_blank>#6429</a> (<a href=https://github.com/alex-zaitsev rel="external nofollow noreferrer" target=_blank>alex-zaitsev</a>)</li> <li>Fix “splitted” build. <a href=https://github.com/ClickHouse/ClickHouse/pull/6618 rel="external nofollow noreferrer" target=_blank>#6618</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Other build fixes: <a href=https://github.com/ClickHouse/ClickHouse/pull/6186 rel="external nofollow noreferrer" target=_blank>#6186</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6486 rel="external nofollow noreferrer" target=_blank>#6486</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6348 rel="external nofollow noreferrer" target=_blank>#6348</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer" target=_blank>vxider</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6744 rel="external nofollow noreferrer" target=_blank>#6744</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6016 rel="external nofollow noreferrer" target=_blank>#6016</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6421 rel="external nofollow noreferrer" target=_blank>#6421</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6491 rel="external nofollow noreferrer" target=_blank>#6491</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=backward-incompatible-change-3>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-3 title="Permanent link"> </a></h4> <ul> <li>Removed rarely used table function <code class=syntax>catBoostPool</code> and storage <code class=syntax>CatBoostPool</code>. If you have used this table function, please write email to <code class=syntax>clickhouse-feedback@yandex-team.com</code>. Note that CatBoost integration remains and will be supported. <a href=https://github.com/ClickHouse/ClickHouse/pull/6279 rel="external nofollow noreferrer" target=_blank>#6279</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Disable <code class=syntax>ANY RIGHT JOIN</code> and <code class=syntax>ANY FULL JOIN</code> by default. Set <code class=syntax>any_join_distinct_right_table_keys</code> setting to enable them. <a href=https://github.com/ClickHouse/ClickHouse/issues/5126 rel="external nofollow noreferrer" target=_blank>#5126</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6351 rel="external nofollow noreferrer" target=_blank>#6351</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h2 id=clickhouse-release-19-13>ClickHouse Release 19.13<a class=headerlink href=#clickhouse-release-19-13 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-13-6-51-2019-10-02>ClickHouse Release 19.13.6.51, 2019-10-02<a class=headerlink href=#clickhouse-release-19-13-6-51-2019-10-02 title="Permanent link"> </a></h3> <h4 id=bug-fix-9>Bug Fix<a class=headerlink href=#bug-fix-9 title="Permanent link"> </a></h4> <ul> <li>This release also contains all bug fixes from 19.11.12.69.</li> </ul> <h3 id=clickhouse-release-19-13-5-44-2019-09-20>ClickHouse Release 19.13.5.44, 2019-09-20<a class=headerlink href=#clickhouse-release-19-13-5-44-2019-09-20 title="Permanent link"> </a></h3> <h4 id=bug-fix-10>Bug Fix<a class=headerlink href=#bug-fix-10 title="Permanent link"> </a></h4> <ul> <li>This release also contains all bug fixes from 19.14.6.12.</li> <li>Fixed possible inconsistent state of table while executing <code class=syntax>DROP</code> query for replicated table while zookeeper is not accessible. <a href=https://github.com/ClickHouse/ClickHouse/issues/6045 rel="external nofollow noreferrer" target=_blank>#6045</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6413 rel="external nofollow noreferrer" target=_blank>#6413</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>)</li> <li>Fix for data race in StorageMerge <a href=https://github.com/ClickHouse/ClickHouse/pull/6717 rel="external nofollow noreferrer" target=_blank>#6717</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix bug introduced in query profiler which leads to endless recv from socket. <a href=https://github.com/ClickHouse/ClickHouse/pull/6386 rel="external nofollow noreferrer" target=_blank>#6386</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix excessive CPU usage while executing <code class=syntax>JSONExtractRaw</code> function over a boolean value. <a href=https://github.com/ClickHouse/ClickHouse/pull/6208 rel="external nofollow noreferrer" target=_blank>#6208</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fixes the regression while pushing to materialized view. <a href=https://github.com/ClickHouse/ClickHouse/pull/6415 rel="external nofollow noreferrer" target=_blank>#6415</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Table function <code class=syntax>url</code> had the vulnerability allowed the attacker to inject arbitrary HTTP headers in the request. This issue was found by <a href=https://github.com/NSTikhomirov rel="external nofollow noreferrer" target=_blank>Nikita Tikhomirov</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6466 rel="external nofollow noreferrer" target=_blank>#6466</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix useless <code class=syntax>AST</code> check in Set index. <a href=https://github.com/ClickHouse/ClickHouse/issues/6510 rel="external nofollow noreferrer" target=_blank>#6510</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6651 rel="external nofollow noreferrer" target=_blank>#6651</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Fixed parsing of <code class=syntax>AggregateFunction</code> values embedded in query. <a href=https://github.com/ClickHouse/ClickHouse/issues/6575 rel="external nofollow noreferrer" target=_blank>#6575</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6773 rel="external nofollow noreferrer" target=_blank>#6773</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Fixed wrong behaviour of <code class=syntax>trim</code> functions family. <a href=https://github.com/ClickHouse/ClickHouse/pull/6647 rel="external nofollow noreferrer" target=_blank>#6647</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-13-4-32-2019-09-10>ClickHouse Release 19.13.4.32, 2019-09-10<a class=headerlink href=#clickhouse-release-19-13-4-32-2019-09-10 title="Permanent link"> </a></h3> <h4 id=bug-fix-11>Bug Fix<a class=headerlink href=#bug-fix-11 title="Permanent link"> </a></h4> <ul> <li>This release also contains all bug security fixes from 19.11.9.52 and 19.11.10.54.</li> <li>Fixed data race in <code class=syntax>system.parts</code> table and <code class=syntax>ALTER</code> query. <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer" target=_blank>#6245</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer" target=_blank>#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed mismatched header in streams happened in case of reading from empty distributed table with sample and prewhere. <a href=https://github.com/ClickHouse/ClickHouse/issues/6167 rel="external nofollow noreferrer" target=_blank>#6167</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>Lixiang Qian</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6823 rel="external nofollow noreferrer" target=_blank>#6823</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fixed crash when using <code class=syntax>IN</code> clause with a subquery with a tuple. <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer" target=_blank>#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer" target=_blank>#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fix case with same column names in <code class=syntax>GLOBAL JOIN ON</code> section. <a href=https://github.com/ClickHouse/ClickHouse/pull/6181 rel="external nofollow noreferrer" target=_blank>#6181</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix crash when casting types to <code class=syntax>Decimal</code> that do not support it. Throw exception instead. <a href=https://github.com/ClickHouse/ClickHouse/pull/6297 rel="external nofollow noreferrer" target=_blank>#6297</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed crash in <code class=syntax>extractAll()</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/6644 rel="external nofollow noreferrer" target=_blank>#6644</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Query transformation for <code class=syntax>MySQL</code>, <code class=syntax>ODBC</code>, <code class=syntax>JDBC</code> table functions now works properly for <code class=syntax>SELECT WHERE</code> queries with multiple <code class=syntax>AND</code> expressions. <a href=https://github.com/ClickHouse/ClickHouse/issues/6381 rel="external nofollow noreferrer" target=_blank>#6381</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6676 rel="external nofollow noreferrer" target=_blank>#6676</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Added previous declaration checks for MySQL 8 integration. <a href=https://github.com/ClickHouse/ClickHouse/pull/6569 rel="external nofollow noreferrer" target=_blank>#6569</a> (<a href=https://github.com/rafaeldtinoco rel="external nofollow noreferrer" target=_blank>Rafael David Tinoco</a>)</li> </ul> <h4 id=security-fix-1>Security Fix<a class=headerlink href=#security-fix-1 title="Permanent link"> </a></h4> <ul> <li>Fix two vulnerabilities in codecs in decompression phase (malicious user can fabricate compressed data that will lead to buffer overflow in decompression). <a href=https://github.com/ClickHouse/ClickHouse/pull/6670 rel="external nofollow noreferrer" target=_blank>#6670</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h3 id=clickhouse-release-19-13-3-26-2019-08-22>ClickHouse Release 19.13.3.26, 2019-08-22<a class=headerlink href=#clickhouse-release-19-13-3-26-2019-08-22 title="Permanent link"> </a></h3> <h4 id=bug-fix-12>Bug Fix<a class=headerlink href=#bug-fix-12 title="Permanent link"> </a></h4> <ul> <li>Fix <code class=syntax>ALTER TABLE ... UPDATE</code> query for tables with <code class=syntax>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer" target=_blank>#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix NPE when using IN clause with a subquery with a tuple. <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer" target=_blank>#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer" target=_blank>#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer" target=_blank>#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer" target=_blank>#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed issue with parsing CSV <a href=https://github.com/ClickHouse/ClickHouse/issues/6426 rel="external nofollow noreferrer" target=_blank>#6426</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6559 rel="external nofollow noreferrer" target=_blank>#6559</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed data race in system.parts table and ALTER query. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer" target=_blank>#6245</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer" target=_blank>#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code class=syntax>0x14c0</code> that may happed due to concurrent <code class=syntax>DROP TABLE</code> and <code class=syntax>SELECT</code> from <code class=syntax>system.parts</code> or <code class=syntax>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code class=syntax>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer" target=_blank>#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed possible data loss after <code class=syntax>ALTER DELETE</code> query on table with skipping index. <a href=https://github.com/ClickHouse/ClickHouse/issues/6224 rel="external nofollow noreferrer" target=_blank>#6224</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6282 rel="external nofollow noreferrer" target=_blank>#6282</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> </ul> <h4 id=security-fix-2>Security Fix<a class=headerlink href=#security-fix-2 title="Permanent link"> </a></h4> <ul> <li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse run, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href=https://github.com/ClickHouse/ClickHouse/pull/6247 rel="external nofollow noreferrer" target=_blank>#6247</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-13-2-19-2019-08-14>ClickHouse Release 19.13.2.19, 2019-08-14<a class=headerlink href=#clickhouse-release-19-13-2-19-2019-08-14 title="Permanent link"> </a></h3> <h4 id=new-feature-5>New Feature<a class=headerlink href=#new-feature-5 title="Permanent link"> </a></h4> <ul> <li>Sampling profiler on query level. <a href=https://gist.github.com/alexey-milovidov/92758583dd41c24c360fdb8d6a4da194 rel="external nofollow noreferrer" target=_blank>Example</a>. <a href=https://github.com/ClickHouse/ClickHouse/issues/4247 rel="external nofollow noreferrer" target=_blank>#4247</a> (<a href=https://github.com/laplab rel="external nofollow noreferrer" target=_blank>laplab</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6124 rel="external nofollow noreferrer" target=_blank>#6124</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6250 rel="external nofollow noreferrer" target=_blank>#6250</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6283 rel="external nofollow noreferrer" target=_blank>#6283</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6386 rel="external nofollow noreferrer" target=_blank>#6386</a></li> <li>Allow to specify a list of columns with <code class=syntax>COLUMNS('regexp')</code> expression that works like a more sophisticated variant of <code class=syntax>*</code> asterisk. <a href=https://github.com/ClickHouse/ClickHouse/pull/5951 rel="external nofollow noreferrer" target=_blank>#5951</a> (<a href=https://github.com/mfridental rel="external nofollow noreferrer" target=_blank>mfridental</a>), (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>CREATE TABLE AS table_function()</code> is now possible <a href=https://github.com/ClickHouse/ClickHouse/pull/6057 rel="external nofollow noreferrer" target=_blank>#6057</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Adam optimizer for stochastic gradient descent is used by default in <code class=syntax>stochasticLinearRegression()</code> and <code class=syntax>stochasticLogisticRegression()</code> aggregate functions, because it shows good quality without almost any tuning. <a href=https://github.com/ClickHouse/ClickHouse/pull/6000 rel="external nofollow noreferrer" target=_blank>#6000</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li> <li>Added functions for working with the сustom week number <a href=https://github.com/ClickHouse/ClickHouse/pull/5212 rel="external nofollow noreferrer" target=_blank>#5212</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>Andy Yang</a>)</li> <li><code class=syntax>RENAME</code> queries now work with all storages. <a href=https://github.com/ClickHouse/ClickHouse/pull/5953 rel="external nofollow noreferrer" target=_blank>#5953</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Now client receive logs from server with any desired level by setting <code class=syntax>send_logs_level</code> regardless to the log level specified in server settings. <a href=https://github.com/ClickHouse/ClickHouse/pull/5964 rel="external nofollow noreferrer" target=_blank>#5964</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>)</li> </ul> <h4 id=backward-incompatible-change-4>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-4 title="Permanent link"> </a></h4> <ul> <li>The setting <code class=syntax>input_format_defaults_for_omitted_fields</code> is enabled by default. Inserts in Distributed tables need this setting to be the same on cluster (you need to set it before rolling update). It enables calculation of complex default expressions for omitted fields in <code class=syntax>JSONEachRow</code> and <code class=syntax>CSV*</code> formats. It should be the expected behavior but may lead to negligible performance difference. <a href=https://github.com/ClickHouse/ClickHouse/pull/6043 rel="external nofollow noreferrer" target=_blank>#6043</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>), <a href=https://github.com/ClickHouse/ClickHouse/pull/5625 rel="external nofollow noreferrer" target=_blank>#5625</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> </ul> <h4 id=experimental-features>Experimental Features<a class=headerlink href=#experimental-features title="Permanent link"> </a></h4> <ul> <li>New query processing pipeline. Use <code class=syntax>experimental_use_processors=1</code> option to enable it. Use for your own trouble. <a href=https://github.com/ClickHouse/ClickHouse/pull/4914 rel="external nofollow noreferrer" target=_blank>#4914</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> </ul> <h4 id=bug-fix-13>Bug Fix<a class=headerlink href=#bug-fix-13 title="Permanent link"> </a></h4> <ul> <li>Kafka integration has been fixed in this version.</li> <li>Fixed <code class=syntax>DoubleDelta</code> encoding of <code class=syntax>Int64</code> for large <code class=syntax>DoubleDelta</code> values, improved <code class=syntax>DoubleDelta</code> encoding for random data for <code class=syntax>Int32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5998 rel="external nofollow noreferrer" target=_blank>#5998</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Fixed overestimation of <code class=syntax>max_rows_to_read</code> if the setting <code class=syntax>merge_tree_uniform_read_distribution</code> is set to 0. <a href=https://github.com/ClickHouse/ClickHouse/pull/6019 rel="external nofollow noreferrer" target=_blank>#6019</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=improvement-4>Improvement<a class=headerlink href=#improvement-4 title="Permanent link"> </a></h4> <ul> <li>Throws an exception if <code class=syntax>config.d</code> file doesn’t have the corresponding root element as the config file <a href=https://github.com/ClickHouse/ClickHouse/pull/6123 rel="external nofollow noreferrer" target=_blank>#6123</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> </ul> <h4 id=performance-improvement-3>Performance Improvement<a class=headerlink href=#performance-improvement-3 title="Permanent link"> </a></h4> <ul> <li>Optimize <code class=syntax>count()</code>. Now it uses the smallest column (if possible). <a href=https://github.com/ClickHouse/ClickHouse/pull/6028 rel="external nofollow noreferrer" target=_blank>#6028</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-5>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-5 title="Permanent link"> </a></h4> <ul> <li>Report memory usage in performance tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/5899 rel="external nofollow noreferrer" target=_blank>#5899</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Fix build with external <code class=syntax>libcxx</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/6010 rel="external nofollow noreferrer" target=_blank>#6010</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix shared build with <code class=syntax>rdkafka</code> library <a href=https://github.com/ClickHouse/ClickHouse/pull/6101 rel="external nofollow noreferrer" target=_blank>#6101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h2 id=clickhouse-release-19-11>ClickHouse Release 19.11<a class=headerlink href=#clickhouse-release-19-11 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-11-13-74-2019-11-01>ClickHouse Release 19.11.13.74, 2019-11-01<a class=headerlink href=#clickhouse-release-19-11-13-74-2019-11-01 title="Permanent link"> </a></h3> <h4 id=bug-fix-14>Bug Fix<a class=headerlink href=#bug-fix-14 title="Permanent link"> </a></h4> <ul> <li>Fixed rare crash in <code class=syntax>ALTER MODIFY COLUMN</code> and vertical merge when one of merged/altered parts is empty (0 rows). <a href=https://github.com/ClickHouse/ClickHouse/pull/6780 rel="external nofollow noreferrer" target=_blank>#6780</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Manual update of <code class=syntax>SIMDJSON</code>. This fixes possible flooding of stderr files with bogus json diagnostic messages. <a href=https://github.com/ClickHouse/ClickHouse/pull/7548 rel="external nofollow noreferrer" target=_blank>#7548</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander Kazakov</a>)</li> <li>Fixed bug with <code class=syntax>mrk</code> file extension for mutations (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> </ul> <h3 id=clickhouse-release-19-11-12-69-2019-10-02>ClickHouse Release 19.11.12.69, 2019-10-02<a class=headerlink href=#clickhouse-release-19-11-12-69-2019-10-02 title="Permanent link"> </a></h3> <h4 id=bug-fix-15>Bug Fix<a class=headerlink href=#bug-fix-15 title="Permanent link"> </a></h4> <ul> <li>Fixed performance degradation of index analysis on complex keys on large tables. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6924 rel="external nofollow noreferrer" target=_blank>#6924</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7075 rel="external nofollow noreferrer" target=_blank>#7075</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Avoid rare SIGSEGV while sending data in tables with Distributed engine (<code class=syntax>Failed to send batch: file with index XXXXX is absent</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7032 rel="external nofollow noreferrer" target=_blank>#7032</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Fix <code class=syntax>Unknown identifier</code> with multiple joins. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5254 rel="external nofollow noreferrer" target=_blank>#5254</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7022 rel="external nofollow noreferrer" target=_blank>#7022</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h3 id=clickhouse-release-19-11-11-57-2019-09-13>ClickHouse Release 19.11.11.57, 2019-09-13<a class=headerlink href=#clickhouse-release-19-11-11-57-2019-09-13 title="Permanent link"> </a></h3> <ul> <li>Fix logical error causing segfaults when selecting from Kafka empty topic. <a href=https://github.com/ClickHouse/ClickHouse/issues/6902 rel="external nofollow noreferrer" target=_blank>#6902</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6909 rel="external nofollow noreferrer" target=_blank>#6909</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix for function <code class=syntax>АrrayEnumerateUniqRanked</code> with empty arrays in params. <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer" target=_blank>#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h3 id=clickhouse-release-19-11-10-54-2019-09-10>ClickHouse Release 19.11.10.54, 2019-09-10<a class=headerlink href=#clickhouse-release-19-11-10-54-2019-09-10 title="Permanent link"> </a></h3> <h4 id=bug-fix-16>Bug Fix<a class=headerlink href=#bug-fix-16 title="Permanent link"> </a></h4> <ul> <li>Do store offsets for Kafka messages manually to be able to commit them all at once for all partitions. Fixes potential duplication in “one consumer - many partitions” scenario. <a href=https://github.com/ClickHouse/ClickHouse/pull/6872 rel="external nofollow noreferrer" target=_blank>#6872</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h3 id=clickhouse-release-19-11-9-52-2019-09-6>ClickHouse Release 19.11.9.52, 2019-09-6<a class=headerlink href=#clickhouse-release-19-11-9-52-2019-09-6 title="Permanent link"> </a></h3> <ul> <li>Improve error handling in cache dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/6737 rel="external nofollow noreferrer" target=_blank>#6737</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fixed bug in function <code class=syntax>arrayEnumerateUniqRanked</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6779 rel="external nofollow noreferrer" target=_blank>#6779</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix <code class=syntax>JSONExtract</code> function while extracting a <code class=syntax>Tuple</code> from JSON. <a href=https://github.com/ClickHouse/ClickHouse/pull/6718 rel="external nofollow noreferrer" target=_blank>#6718</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fixed possible data loss after <code class=syntax>ALTER DELETE</code> query on table with skipping index. <a href=https://github.com/ClickHouse/ClickHouse/issues/6224 rel="external nofollow noreferrer" target=_blank>#6224</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6282 rel="external nofollow noreferrer" target=_blank>#6282</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Fixed performance test. <a href=https://github.com/ClickHouse/ClickHouse/pull/6392 rel="external nofollow noreferrer" target=_blank>#6392</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Parquet: Fix reading boolean columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/6579 rel="external nofollow noreferrer" target=_blank>#6579</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed wrong behaviour of <code class=syntax>nullIf</code> function for constant arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/6518 rel="external nofollow noreferrer" target=_blank>#6518</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6580 rel="external nofollow noreferrer" target=_blank>#6580</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix Kafka messages duplication problem on normal server restart. <a href=https://github.com/ClickHouse/ClickHouse/pull/6597 rel="external nofollow noreferrer" target=_blank>#6597</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixed an issue when long <code class=syntax>ALTER UPDATE</code> or <code class=syntax>ALTER DELETE</code> may prevent regular merges to run. Prevent mutations from executing if there is no enough free threads available. <a href=https://github.com/ClickHouse/ClickHouse/issues/6502 rel="external nofollow noreferrer" target=_blank>#6502</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6617 rel="external nofollow noreferrer" target=_blank>#6617</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed error with processing “timezone” in server configuration file. <a href=https://github.com/ClickHouse/ClickHouse/pull/6709 rel="external nofollow noreferrer" target=_blank>#6709</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix kafka tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/6805 rel="external nofollow noreferrer" target=_blank>#6805</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h4 id=security-fix-3>Security Fix<a class=headerlink href=#security-fix-3 title="Permanent link"> </a></h4> <ul> <li>If the attacker has write access to ZooKeeper and is able to run custom server available from the network where ClickHouse runs, it can create custom-built malicious server that will act as ClickHouse replica and register it in ZooKeeper. When another replica will fetch data part from malicious replica, it can force clickhouse-server to write to arbitrary path on filesystem. Found by Eldar Zaitov, information security team at Yandex. <a href=https://github.com/ClickHouse/ClickHouse/pull/6247 rel="external nofollow noreferrer" target=_blank>#6247</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-11-8-46-2019-08-22>ClickHouse Release 19.11.8.46, 2019-08-22<a class=headerlink href=#clickhouse-release-19-11-8-46-2019-08-22 title="Permanent link"> </a></h3> <h4 id=bug-fix-17>Bug Fix<a class=headerlink href=#bug-fix-17 title="Permanent link"> </a></h4> <ul> <li>Fix <code class=syntax>ALTER TABLE ... UPDATE</code> query for tables with <code class=syntax>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer" target=_blank>#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix NPE when using IN clause with a subquery with a tuple. <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer" target=_blank>#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer" target=_blank>#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed an issue that if a stale replica becomes alive, it may still have data parts that were removed by DROP PARTITION. <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer" target=_blank>#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer" target=_blank>#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed issue with parsing CSV <a href=https://github.com/ClickHouse/ClickHouse/issues/6426 rel="external nofollow noreferrer" target=_blank>#6426</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6559 rel="external nofollow noreferrer" target=_blank>#6559</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li> <li>Fixed data race in system.parts table and ALTER query. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer" target=_blank>#6245</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer" target=_blank>#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed wrong code in mutations that may lead to memory corruption. Fixed segfault with read of address <code class=syntax>0x14c0</code> that may happed due to concurrent <code class=syntax>DROP TABLE</code> and <code class=syntax>SELECT</code> from <code class=syntax>system.parts</code> or <code class=syntax>system.parts_columns</code>. Fixed race condition in preparation of mutation queries. Fixed deadlock caused by <code class=syntax>OPTIMIZE</code> of Replicated tables and concurrent modification operations like ALTERs. <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer" target=_blank>#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-11-7-40-2019-08-14>ClickHouse Release 19.11.7.40, 2019-08-14<a class=headerlink href=#clickhouse-release-19-11-7-40-2019-08-14 title="Permanent link"> </a></h3> <h4 id=bug-fix-18>Bug Fix<a class=headerlink href=#bug-fix-18 title="Permanent link"> </a></h4> <ul> <li>Kafka integration has been fixed in this version.</li> <li>Fix segfault when using <code class=syntax>arrayReduce</code> for constant arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/6326 rel="external nofollow noreferrer" target=_blank>#6326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed <code class=syntax>toFloat()</code> monotonicity. <a href=https://github.com/ClickHouse/ClickHouse/pull/6374 rel="external nofollow noreferrer" target=_blank>#6374</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Fix segfault with enabled <code class=syntax>optimize_skip_unused_shards</code> and missing sharding key. <a href=https://github.com/ClickHouse/ClickHouse/pull/6384 rel="external nofollow noreferrer" target=_blank>#6384</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>CurtizJ</a>)</li> <li>Fixed logic of <code class=syntax>arrayEnumerateUniqRanked</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/6423 rel="external nofollow noreferrer" target=_blank>#6423</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Removed extra verbose logging from MySQL handler. <a href=https://github.com/ClickHouse/ClickHouse/pull/6389 rel="external nofollow noreferrer" target=_blank>#6389</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix wrong behavior and possible segfaults in <code class=syntax>topK</code> and <code class=syntax>topKWeighted</code> aggregated functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/6404 rel="external nofollow noreferrer" target=_blank>#6404</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>CurtizJ</a>)</li> <li>Do not expose virtual columns in <code class=syntax>system.columns</code> table. This is required for backward compatibility. <a href=https://github.com/ClickHouse/ClickHouse/pull/6406 rel="external nofollow noreferrer" target=_blank>#6406</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix bug with memory allocation for string fields in complex key cache dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/6447 rel="external nofollow noreferrer" target=_blank>#6447</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix bug with enabling adaptive granularity when creating new replica for <code class=syntax>Replicated*MergeTree</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/6452 rel="external nofollow noreferrer" target=_blank>#6452</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix infinite loop when reading Kafka messages. <a href=https://github.com/ClickHouse/ClickHouse/pull/6354 rel="external nofollow noreferrer" target=_blank>#6354</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>abyss7</a>)</li> <li>Fixed the possibility of a fabricated query to cause server crash due to stack overflow in SQL parser and possibility of stack overflow in <code class=syntax>Merge</code> and <code class=syntax>Distributed</code> tables <a href=https://github.com/ClickHouse/ClickHouse/pull/6433 rel="external nofollow noreferrer" target=_blank>#6433</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed Gorilla encoding error on small sequences. <a href=https://github.com/ClickHouse/ClickHouse/pull/6444 rel="external nofollow noreferrer" target=_blank>#6444</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Enmk</a>)</li> </ul> <h4 id=improvement-5>Improvement<a class=headerlink href=#improvement-5 title="Permanent link"> </a></h4> <ul> <li>Allow user to override <code class=syntax>poll_interval</code> and <code class=syntax>idle_connection_timeout</code> settings on connection. <a href=https://github.com/ClickHouse/ClickHouse/pull/6230 rel="external nofollow noreferrer" target=_blank>#6230</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-11-5-28-2019-08-05>ClickHouse Release 19.11.5.28, 2019-08-05<a class=headerlink href=#clickhouse-release-19-11-5-28-2019-08-05 title="Permanent link"> </a></h3> <h4 id=bug-fix-19>Bug Fix<a class=headerlink href=#bug-fix-19 title="Permanent link"> </a></h4> <ul> <li>Fixed the possibility of hanging queries when server is overloaded. <a href=https://github.com/ClickHouse/ClickHouse/pull/6301 rel="external nofollow noreferrer" target=_blank>#6301</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix FPE in yandexConsistentHash function. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6304 rel="external nofollow noreferrer" target=_blank>#6304</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer" target=_blank>#6126</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed bug in conversion of <code class=syntax>LowCardinality</code> types in <code class=syntax>AggregateFunctionFactory</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6257 rel="external nofollow noreferrer" target=_blank>#6257</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6281 rel="external nofollow noreferrer" target=_blank>#6281</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix parsing of <code class=syntax>bool</code> settings from <code class=syntax>true</code> and <code class=syntax>false</code> strings in configuration files. <a href=https://github.com/ClickHouse/ClickHouse/pull/6278 rel="external nofollow noreferrer" target=_blank>#6278</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix rare bug with incompatible stream headers in queries to <code class=syntax>Distributed</code> table over <code class=syntax>MergeTree</code> table when part of <code class=syntax>WHERE</code> moves to <code class=syntax>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6236 rel="external nofollow noreferrer" target=_blank>#6236</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed overflow in integer division of signed type to unsigned type. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6214 rel="external nofollow noreferrer" target=_blank>#6214</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6233 rel="external nofollow noreferrer" target=_blank>#6233</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=backward-incompatible-change-5>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-5 title="Permanent link"> </a></h4> <ul> <li><code class=syntax>Kafka</code> still broken.</li> </ul> <h3 id=clickhouse-release-19-11-4-24-2019-08-01>ClickHouse Release 19.11.4.24, 2019-08-01<a class=headerlink href=#clickhouse-release-19-11-4-24-2019-08-01 title="Permanent link"> </a></h3> <h4 id=bug-fix-20>Bug Fix<a class=headerlink href=#bug-fix-20 title="Permanent link"> </a></h4> <ul> <li>Fix bug with writing secondary indices marks with adaptive granularity. <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer" target=_blank>#6126</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix <code class=syntax>WITH ROLLUP</code> and <code class=syntax>WITH CUBE</code> modifiers of <code class=syntax>GROUP BY</code> with two-level aggregation. <a href=https://github.com/ClickHouse/ClickHouse/pull/6225 rel="external nofollow noreferrer" target=_blank>#6225</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fixed hang in <code class=syntax>JSONExtractRaw</code> function. Fixed <a href=https://github.com/ClickHouse/ClickHouse/issues/6195 rel="external nofollow noreferrer" target=_blank>#6195</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6198 rel="external nofollow noreferrer" target=_blank>#6198</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix segfault in ExternalLoader::reloadOutdated(). <a href=https://github.com/ClickHouse/ClickHouse/pull/6082 rel="external nofollow noreferrer" target=_blank>#6082</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fixed the case when server may close listening sockets but not shutdown and continue serving remaining queries. You may end up with two running clickhouse-server processes. Sometimes, the server may return an error <code class=syntax>bad_function_call</code> for remaining queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/6231 rel="external nofollow noreferrer" target=_blank>#6231</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed useless and incorrect condition on update field for initial loading of external dictionaries via ODBC, MySQL, ClickHouse and HTTP. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/6069 rel="external nofollow noreferrer" target=_blank>#6069</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6083 rel="external nofollow noreferrer" target=_blank>#6083</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed irrelevant exception in cast of <code class=syntax>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn’t contain Nulls (e.g. in query like <code class=syntax>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6094 rel="external nofollow noreferrer" target=_blank>#6094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6119 rel="external nofollow noreferrer" target=_blank>#6119</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix non-deterministic result of “uniq” aggregate function in extreme rare cases. The bug was present in all ClickHouse versions. <a href=https://github.com/ClickHouse/ClickHouse/pull/6058 rel="external nofollow noreferrer" target=_blank>#6058</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Segfault when we set a little bit too high CIDR on the function <code class=syntax>IPv6CIDRToRange</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6068 rel="external nofollow noreferrer" target=_blank>#6068</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Fixed small memory leak when server throw many exceptions from many different contexts. <a href=https://github.com/ClickHouse/ClickHouse/pull/6144 rel="external nofollow noreferrer" target=_blank>#6144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix the situation when consumer got paused before subscription and not resumed afterwards. <a href=https://github.com/ClickHouse/ClickHouse/pull/6075 rel="external nofollow noreferrer" target=_blank>#6075</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>) Note that Kafka is broken in this version.</li> <li>Clearing the Kafka data buffer from the previous read operation that was completed with an error <a href=https://github.com/ClickHouse/ClickHouse/pull/6026 rel="external nofollow noreferrer" target=_blank>#6026</a> (<a href=https://github.com/bopohaa rel="external nofollow noreferrer" target=_blank>Nikolay</a>) Note that Kafka is broken in this version.</li> <li>Since <code class=syntax>StorageMergeTree::background_task_handle</code> is initialized in <code class=syntax>startup()</code> the <code class=syntax>MergeTreeBlockOutputStream::write()</code> may try to use it before initialization. Just check if it is initialized. <a href=https://github.com/ClickHouse/ClickHouse/pull/6080 rel="external nofollow noreferrer" target=_blank>#6080</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-6>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-6 title="Permanent link"> </a></h4> <ul> <li>Added official <code class=syntax>rpm</code> packages. <a href=https://github.com/ClickHouse/ClickHouse/pull/5740 rel="external nofollow noreferrer" target=_blank>#5740</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add an ability to build <code class=syntax>.rpm</code> and <code class=syntax>.tgz</code> packages with <code class=syntax>packager</code> script. <a href=https://github.com/ClickHouse/ClickHouse/pull/5769 rel="external nofollow noreferrer" target=_blank>#5769</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixes for “Arcadia” build system. <a href=https://github.com/ClickHouse/ClickHouse/pull/6223 rel="external nofollow noreferrer" target=_blank>#6223</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=backward-incompatible-change-6>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-6 title="Permanent link"> </a></h4> <ul> <li><code class=syntax>Kafka</code> is broken in this version.</li> </ul> <h3 id=clickhouse-release-19-11-3-11-2019-07-18>ClickHouse Release 19.11.3.11, 2019-07-18<a class=headerlink href=#clickhouse-release-19-11-3-11-2019-07-18 title="Permanent link"> </a></h3> <h4 id=new-feature-6>New Feature<a class=headerlink href=#new-feature-6 title="Permanent link"> </a></h4> <ul> <li>Added support for prepared statements. <a href=https://github.com/ClickHouse/ClickHouse/pull/5331/ rel="external nofollow noreferrer" target=_blank>#5331</a> (<a href=https://github.com/sanych73 rel="external nofollow noreferrer" target=_blank>Alexander</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5630 rel="external nofollow noreferrer" target=_blank>#5630</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>DoubleDelta</code> and <code class=syntax>Gorilla</code> column codecs <a href=https://github.com/ClickHouse/ClickHouse/pull/5600 rel="external nofollow noreferrer" target=_blank>#5600</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Added <code class=syntax>os_thread_priority</code> setting that allows to control the “nice” value of query processing threads that is used by OS to adjust dynamic scheduling priority. It requires <code class=syntax>CAP_SYS_NICE</code> capabilities to work. This implements <a href=https://github.com/ClickHouse/ClickHouse/issues/5858 rel="external nofollow noreferrer" target=_blank>#5858</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5909 rel="external nofollow noreferrer" target=_blank>#5909</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Implement <code class=syntax>_topic</code>, <code class=syntax>_offset</code>, <code class=syntax>_key</code> columns for Kafka engine <a href=https://github.com/ClickHouse/ClickHouse/pull/5382 rel="external nofollow noreferrer" target=_blank>#5382</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>) Note that Kafka is broken in this version.</li> <li>Add aggregate function combinator <code class=syntax>-Resample</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5590 rel="external nofollow noreferrer" target=_blank>#5590</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Aggregate functions <code class=syntax>groupArrayMovingSum(win_size)(x)</code> and <code class=syntax>groupArrayMovingAvg(win_size)(x)</code>, which calculate moving sum/avg with or without window-size limitation. <a href=https://github.com/ClickHouse/ClickHouse/pull/5595 rel="external nofollow noreferrer" target=_blank>#5595</a> (<a href=https://github.com/inv2004 rel="external nofollow noreferrer" target=_blank>inv2004</a>)</li> <li>Add synonim <code class=syntax>arrayFlatten</code> \&lt;-&gt; <code class=syntax>flatten</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5764 rel="external nofollow noreferrer" target=_blank>#5764</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Intergate H3 function <code class=syntax>geoToH3</code> from Uber. <a href=https://github.com/ClickHouse/ClickHouse/pull/4724 rel="external nofollow noreferrer" target=_blank>#4724</a> (<a href=https://github.com/BHYCHIK rel="external nofollow noreferrer" target=_blank>Remen Ivan</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5805 rel="external nofollow noreferrer" target=_blank>#5805</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=bug-fix-21>Bug Fix<a class=headerlink href=#bug-fix-21 title="Permanent link"> </a></h4> <ul> <li>Implement DNS cache with asynchronous update. Separate thread resolves all hosts and updates DNS cache with period (setting <code class=syntax>dns_cache_update_period</code>). It should help, when ip of hosts changes frequently. <a href=https://github.com/ClickHouse/ClickHouse/pull/5857 rel="external nofollow noreferrer" target=_blank>#5857</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix segfault in <code class=syntax>Delta</code> codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href=https://github.com/ClickHouse/ClickHouse/pull/5786 rel="external nofollow noreferrer" target=_blank>#5786</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix segfault in TTL merge with non-physical columns in block. <a href=https://github.com/ClickHouse/ClickHouse/pull/5819 rel="external nofollow noreferrer" target=_blank>#5819</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix rare bug in checking of part with <code class=syntax>LowCardinality</code> column. Previously <code class=syntax>checkDataPart</code> always fails for part with <code class=syntax>LowCardinality</code> column. <a href=https://github.com/ClickHouse/ClickHouse/pull/5832 rel="external nofollow noreferrer" target=_blank>#5832</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Avoid hanging connections when server thread pool is full. It is important for connections from <code class=syntax>remote</code> table function or connections to a shard without replicas when there is long connection timeout. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5878 rel="external nofollow noreferrer" target=_blank>#5878</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5881 rel="external nofollow noreferrer" target=_blank>#5881</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Support for constant arguments to <code class=syntax>evalMLModel</code> function. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5817 rel="external nofollow noreferrer" target=_blank>#5817</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5820 rel="external nofollow noreferrer" target=_blank>#5820</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed the issue when ClickHouse determines default time zone as <code class=syntax>UCT</code> instead of <code class=syntax>UTC</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5804 rel="external nofollow noreferrer" target=_blank>#5804</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5828 rel="external nofollow noreferrer" target=_blank>#5828</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed buffer underflow in <code class=syntax>visitParamExtractRaw</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5901 rel="external nofollow noreferrer" target=_blank>#5901</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5902 rel="external nofollow noreferrer" target=_blank>#5902</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Now distributed <code class=syntax>DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER</code> queries will be executed directly on leader replica. <a href=https://github.com/ClickHouse/ClickHouse/pull/5757 rel="external nofollow noreferrer" target=_blank>#5757</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix <code class=syntax>coalesce</code> for <code class=syntax>ColumnConst</code> with <code class=syntax>ColumnNullable</code> + related changes. <a href=https://github.com/ClickHouse/ClickHouse/pull/5755 rel="external nofollow noreferrer" target=_blank>#5755</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix the <code class=syntax>ReadBufferFromKafkaConsumer</code> so that it keeps reading new messages after <code class=syntax>commit()</code> even if it was stalled before <a href=https://github.com/ClickHouse/ClickHouse/pull/5852 rel="external nofollow noreferrer" target=_blank>#5852</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix <code class=syntax>FULL</code> and <code class=syntax>RIGHT</code> JOIN results when joining on <code class=syntax>Nullable</code> keys in right table. <a href=https://github.com/ClickHouse/ClickHouse/pull/5859 rel="external nofollow noreferrer" target=_blank>#5859</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Possible fix of infinite sleeping of low-priority queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/5842 rel="external nofollow noreferrer" target=_blank>#5842</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix race condition, which cause that some queries may not appear in query_log after <code class=syntax>SYSTEM FLUSH LOGS</code> query. <a href=https://github.com/ClickHouse/ClickHouse/issues/5456 rel="external nofollow noreferrer" target=_blank>#5456</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5685 rel="external nofollow noreferrer" target=_blank>#5685</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fixed <code class=syntax>heap-use-after-free</code> ASan warning in ClusterCopier caused by watch which try to use already removed copier object. <a href=https://github.com/ClickHouse/ClickHouse/pull/5871 rel="external nofollow noreferrer" target=_blank>#5871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fixed wrong <code class=syntax>StringRef</code> pointer returned by some implementations of <code class=syntax>IColumn::deserializeAndInsertFromArena</code>. This bug affected only unit-tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/5973 rel="external nofollow noreferrer" target=_blank>#5973</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Prevent source and intermediate array join columns of masking same name columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/5941 rel="external nofollow noreferrer" target=_blank>#5941</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix insert and select query to MySQL engine with MySQL style identifier quoting. <a href=https://github.com/ClickHouse/ClickHouse/pull/5704 rel="external nofollow noreferrer" target=_blank>#5704</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Now <code class=syntax>CHECK TABLE</code> query can work with MergeTree engine family. It returns check status and message if any for each part (or file in case of simplier engines). Also, fix bug in fetch of a broken part. <a href=https://github.com/ClickHouse/ClickHouse/pull/5865 rel="external nofollow noreferrer" target=_blank>#5865</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix SPLIT_SHARED_LIBRARIES runtime <a href=https://github.com/ClickHouse/ClickHouse/pull/5793 rel="external nofollow noreferrer" target=_blank>#5793</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Fixed time zone initialization when <code class=syntax>/etc/localtime</code> is a relative symlink like <code class=syntax>../usr/share/zoneinfo/Europe/Moscow</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5922 rel="external nofollow noreferrer" target=_blank>#5922</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>clickhouse-copier: Fix use-after free on shutdown <a href=https://github.com/ClickHouse/ClickHouse/pull/5752 rel="external nofollow noreferrer" target=_blank>#5752</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Updated <code class=syntax>simdjson</code>. Fixed the issue that some invalid JSONs with zero bytes successfully parse. <a href=https://github.com/ClickHouse/ClickHouse/pull/5938 rel="external nofollow noreferrer" target=_blank>#5938</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix shutdown of SystemLogs <a href=https://github.com/ClickHouse/ClickHouse/pull/5802 rel="external nofollow noreferrer" target=_blank>#5802</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix hanging when condition in invalidate_query depends on a dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/6011 rel="external nofollow noreferrer" target=_blank>#6011</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> </ul> <h4 id=improvement-6>Improvement<a class=headerlink href=#improvement-6 title="Permanent link"> </a></h4> <ul> <li>Allow unresolvable addresses in cluster configuration. They will be considered unavailable and tried to resolve at every connection attempt. This is especially useful for Kubernetes. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5714 rel="external nofollow noreferrer" target=_blank>#5714</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5924 rel="external nofollow noreferrer" target=_blank>#5924</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Close idle TCP connections (with one hour timeout by default). This is especially important for large clusters with multiple distributed tables on every server, because every server can possibly keep a connection pool to every other server, and after peak query concurrency, connections will stall. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5879 rel="external nofollow noreferrer" target=_blank>#5879</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5880 rel="external nofollow noreferrer" target=_blank>#5880</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Better quality of <code class=syntax>topK</code> function. Changed the SavingSpace set behavior to remove the last element if the new element have a bigger weight. <a href=https://github.com/ClickHouse/ClickHouse/issues/5833 rel="external nofollow noreferrer" target=_blank>#5833</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5850 rel="external nofollow noreferrer" target=_blank>#5850</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>URL functions to work with domains now can work for incomplete URLs without scheme <a href=https://github.com/ClickHouse/ClickHouse/pull/5725 rel="external nofollow noreferrer" target=_blank>#5725</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Checksums added to the <code class=syntax>system.parts_columns</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/5874 rel="external nofollow noreferrer" target=_blank>#5874</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>Nikita Mikhaylov</a>)</li> <li>Added <code class=syntax>Enum</code> data type as a synonim for <code class=syntax>Enum8</code> or <code class=syntax>Enum16</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5886 rel="external nofollow noreferrer" target=_blank>#5886</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Full bit transpose variant for <code class=syntax>T64</code> codec. Could lead to better compression with <code class=syntax>zstd</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5742 rel="external nofollow noreferrer" target=_blank>#5742</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Condition on <code class=syntax>startsWith</code> function now can uses primary key. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5310 rel="external nofollow noreferrer" target=_blank>#5310</a> and <a href=https://github.com/ClickHouse/ClickHouse/issues/5882 rel="external nofollow noreferrer" target=_blank>#5882</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5919 rel="external nofollow noreferrer" target=_blank>#5919</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li> <li>Allow to use <code class=syntax>clickhouse-copier</code> with cross-replication cluster topology by permitting empty database name. <a href=https://github.com/ClickHouse/ClickHouse/pull/5745 rel="external nofollow noreferrer" target=_blank>#5745</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>nvartolomei</a>)</li> <li>Use <code class=syntax>UTC</code> as default timezone on a system without <code class=syntax>tzdata</code> (e.g. bare Docker container). Before this patch, error message <code class=syntax>Could not determine local time zone</code> was printed and server or client refused to start. <a href=https://github.com/ClickHouse/ClickHouse/pull/5827 rel="external nofollow noreferrer" target=_blank>#5827</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Returned back support for floating point argument in function <code class=syntax>quantileTiming</code> for backward compatibility. <a href=https://github.com/ClickHouse/ClickHouse/pull/5911 rel="external nofollow noreferrer" target=_blank>#5911</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Show which table is missing column in error messages. <a href=https://github.com/ClickHouse/ClickHouse/pull/5768 rel="external nofollow noreferrer" target=_blank>#5768</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Disallow run query with same query_id by various users <a href=https://github.com/ClickHouse/ClickHouse/pull/5430 rel="external nofollow noreferrer" target=_blank>#5430</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>More robust code for sending metrics to Graphite. It will work even during long multiple <code class=syntax>RENAME TABLE</code> operation. <a href=https://github.com/ClickHouse/ClickHouse/pull/5875 rel="external nofollow noreferrer" target=_blank>#5875</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>More informative error messages will be displayed when ThreadPool cannot schedule a task for execution. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5305 rel="external nofollow noreferrer" target=_blank>#5305</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5801 rel="external nofollow noreferrer" target=_blank>#5801</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Inverting ngramSearch to be more intuitive <a href=https://github.com/ClickHouse/ClickHouse/pull/5807 rel="external nofollow noreferrer" target=_blank>#5807</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Add user parsing in HDFS engine builder <a href=https://github.com/ClickHouse/ClickHouse/pull/5946 rel="external nofollow noreferrer" target=_blank>#5946</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer" target=_blank>akonyaev90</a>)</li> <li>Update default value of <code class=syntax>max_ast_elements parameter</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5933 rel="external nofollow noreferrer" target=_blank>#5933</a> (<a href=https://github.com/izebit rel="external nofollow noreferrer" target=_blank>Artem Konovalov</a>)</li> <li>Added a notion of obsolete settings. The obsolete setting <code class=syntax>allow_experimental_low_cardinality_type</code> can be used with no effect. <a href=https://github.com/ClickHouse/ClickHouse/commit/0f15c01c6802f7ce1a1494c12c846be8c98944cd rel="external nofollow noreferrer" target=_blank>0f15c01c6802f7ce1a1494c12c846be8c98944cd</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>Alexey Milovidov</a></li> </ul> <h4 id=performance-improvement-4>Performance Improvement<a class=headerlink href=#performance-improvement-4 title="Permanent link"> </a></h4> <ul> <li>Increase number of streams to SELECT from Merge table for more uniform distribution of threads. Added setting <code class=syntax>max_streams_multiplier_for_merge_tables</code>. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5797 rel="external nofollow noreferrer" target=_blank>#5797</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5915 rel="external nofollow noreferrer" target=_blank>#5915</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-7>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-7 title="Permanent link"> </a></h4> <ul> <li>Add a backward compatibility test for client-server interaction with different versions of clickhouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/5868 rel="external nofollow noreferrer" target=_blank>#5868</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Test coverage information in every commit and pull request. <a href=https://github.com/ClickHouse/ClickHouse/pull/5896 rel="external nofollow noreferrer" target=_blank>#5896</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Cooperate with address sanitizer to support our custom allocators (<code class=syntax>Arena</code> and <code class=syntax>ArenaWithFreeLists</code>) for better debugging of “use-after-free” errors. <a href=https://github.com/ClickHouse/ClickHouse/pull/5728 rel="external nofollow noreferrer" target=_blank>#5728</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Switch to <a href=https://github.com/llvm-mirror/libunwind rel="external nofollow noreferrer" target=_blank>LLVM libunwind implementation</a> for C++ exception handling and for stack traces printing <a href=https://github.com/ClickHouse/ClickHouse/pull/4828 rel="external nofollow noreferrer" target=_blank>#4828</a> (<a href=https://github.com/laplab rel="external nofollow noreferrer" target=_blank>Nikita Lapkov</a>)</li> <li>Add two more warnings from -Weverything <a href=https://github.com/ClickHouse/ClickHouse/pull/5923 rel="external nofollow noreferrer" target=_blank>#5923</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Allow to build ClickHouse with Memory Sanitizer. <a href=https://github.com/ClickHouse/ClickHouse/pull/3949 rel="external nofollow noreferrer" target=_blank>#3949</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed ubsan report about <code class=syntax>bitTest</code> function in fuzz test. <a href=https://github.com/ClickHouse/ClickHouse/pull/5943 rel="external nofollow noreferrer" target=_blank>#5943</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Docker: added possibility to init a ClickHouse instance which requires authentication. <a href=https://github.com/ClickHouse/ClickHouse/pull/5727 rel="external nofollow noreferrer" target=_blank>#5727</a> (<a href=https://github.com/shurshun rel="external nofollow noreferrer" target=_blank>Korviakov Andrey</a>)</li> <li>Update librdkafka to version 1.1.0 <a href=https://github.com/ClickHouse/ClickHouse/pull/5872 rel="external nofollow noreferrer" target=_blank>#5872</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Add global timeout for integration tests and disable some of them in tests code. <a href=https://github.com/ClickHouse/ClickHouse/pull/5741 rel="external nofollow noreferrer" target=_blank>#5741</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix some ThreadSanitizer failures. <a href=https://github.com/ClickHouse/ClickHouse/pull/5854 rel="external nofollow noreferrer" target=_blank>#5854</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>The <code class=syntax>--no-undefined</code> option forces the linker to check all external names for existence while linking. It’s very useful to track real dependencies between libraries in the split build mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/5855 rel="external nofollow noreferrer" target=_blank>#5855</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Added performance test for <a href=https://github.com/ClickHouse/ClickHouse/issues/5797 rel="external nofollow noreferrer" target=_blank>#5797</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5914 rel="external nofollow noreferrer" target=_blank>#5914</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed compatibility with gcc-7. <a href=https://github.com/ClickHouse/ClickHouse/pull/5840 rel="external nofollow noreferrer" target=_blank>#5840</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added support for gcc-9. This fixes <a href=https://github.com/ClickHouse/ClickHouse/issues/5717 rel="external nofollow noreferrer" target=_blank>#5717</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5774 rel="external nofollow noreferrer" target=_blank>#5774</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed error when libunwind can be linked incorrectly. <a href=https://github.com/ClickHouse/ClickHouse/pull/5948 rel="external nofollow noreferrer" target=_blank>#5948</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed a few warnings found by PVS-Studio. <a href=https://github.com/ClickHouse/ClickHouse/pull/5921 rel="external nofollow noreferrer" target=_blank>#5921</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added initial support for <code class=syntax>clang-tidy</code> static analyzer. <a href=https://github.com/ClickHouse/ClickHouse/pull/5806 rel="external nofollow noreferrer" target=_blank>#5806</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Convert BSD/Linux endian macros( ‘be64toh’ and ‘htobe64’) to the Mac OS X equivalents <a href=https://github.com/ClickHouse/ClickHouse/pull/5785 rel="external nofollow noreferrer" target=_blank>#5785</a> (<a href=https://github.com/fredchenbj rel="external nofollow noreferrer" target=_blank>Fu Chen</a>)</li> <li>Improved integration tests guide. <a href=https://github.com/ClickHouse/ClickHouse/pull/5796 rel="external nofollow noreferrer" target=_blank>#5796</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Fixing build at macosx + gcc9 <a href=https://github.com/ClickHouse/ClickHouse/pull/5822 rel="external nofollow noreferrer" target=_blank>#5822</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Fix a hard-to-spot typo: aggreAGte -&gt; aggregate. <a href=https://github.com/ClickHouse/ClickHouse/pull/5753 rel="external nofollow noreferrer" target=_blank>#5753</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Fix freebsd build <a href=https://github.com/ClickHouse/ClickHouse/pull/5760 rel="external nofollow noreferrer" target=_blank>#5760</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Add link to experimental YouTube channel to website <a href=https://github.com/ClickHouse/ClickHouse/pull/5845 rel="external nofollow noreferrer" target=_blank>#5845</a> (<a href=https://github.com/blinkov rel="external nofollow noreferrer" target=_blank>Ivan Blinkov</a>)</li> <li>CMake: add option for coverage flags: WITH_COVERAGE <a href=https://github.com/ClickHouse/ClickHouse/pull/5776 rel="external nofollow noreferrer" target=_blank>#5776</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix initial size of some inline PODArray’s. <a href=https://github.com/ClickHouse/ClickHouse/pull/5787 rel="external nofollow noreferrer" target=_blank>#5787</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>clickhouse-server.postinst: fix os detection for centos 6 <a href=https://github.com/ClickHouse/ClickHouse/pull/5788 rel="external nofollow noreferrer" target=_blank>#5788</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Added Arch linux package generation. <a href=https://github.com/ClickHouse/ClickHouse/pull/5719 rel="external nofollow noreferrer" target=_blank>#5719</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li> <li>Split Common/config.h by libs (dbms) <a href=https://github.com/ClickHouse/ClickHouse/pull/5715 rel="external nofollow noreferrer" target=_blank>#5715</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixes for “Arcadia” build platform <a href=https://github.com/ClickHouse/ClickHouse/pull/5795 rel="external nofollow noreferrer" target=_blank>#5795</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixes for unconventional build (gcc9, no submodules) <a href=https://github.com/ClickHouse/ClickHouse/pull/5792 rel="external nofollow noreferrer" target=_blank>#5792</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Require explicit type in unalignedStore because it was proven to be bug-prone <a href=https://github.com/ClickHouse/ClickHouse/pull/5791 rel="external nofollow noreferrer" target=_blank>#5791</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Fixes MacOS build <a href=https://github.com/ClickHouse/ClickHouse/pull/5830 rel="external nofollow noreferrer" target=_blank>#5830</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Performance test concerning the new JIT feature with bigger dataset, as requested here <a href=https://github.com/ClickHouse/ClickHouse/issues/5263 rel="external nofollow noreferrer" target=_blank>#5263</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5887 rel="external nofollow noreferrer" target=_blank>#5887</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Run stateful tests in stress test <a href=https://github.com/ClickHouse/ClickHouse/commit/12693e568722f11e19859742f56428455501fd2a rel="external nofollow noreferrer" target=_blank>12693e568722f11e19859742f56428455501fd2a</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> </ul> <h4 id=backward-incompatible-change-7>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-7 title="Permanent link"> </a></h4> <ul> <li><code class=syntax>Kafka</code> is broken in this version.</li> <li>Enable <code class=syntax>adaptive_index_granularity</code> = 10MB by default for new <code class=syntax>MergeTree</code> tables. If you created new MergeTree tables on version 19.11+, downgrade to versions prior to 19.6 will be impossible. <a href=https://github.com/ClickHouse/ClickHouse/pull/5628 rel="external nofollow noreferrer" target=_blank>#5628</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Removed obsolete undocumented embedded dictionaries that were used by Yandex.Metrica. The functions <code class=syntax>OSIn</code>, <code class=syntax>SEIn</code>, <code class=syntax>OSToRoot</code>, <code class=syntax>SEToRoot</code>, <code class=syntax>OSHierarchy</code>, <code class=syntax>SEHierarchy</code> are no longer available. If you are using these functions, write email to <a href=mailto:clickhouse-feedback@yandex-team.com>clickhouse-feedback@yandex-team.com</a>. Note: at the last moment we decided to keep these functions for a while. <a href=https://github.com/ClickHouse/ClickHouse/pull/5780 rel="external nofollow noreferrer" target=_blank>#5780</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h2 id=clickhouse-release-19-10>ClickHouse Release 19.10<a class=headerlink href=#clickhouse-release-19-10 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-10-1-5-2019-07-12>ClickHouse Release 19.10.1.5, 2019-07-12<a class=headerlink href=#clickhouse-release-19-10-1-5-2019-07-12 title="Permanent link"> </a></h3> <h4 id=new-feature-7>New Feature<a class=headerlink href=#new-feature-7 title="Permanent link"> </a></h4> <ul> <li>Add new column codec: <code class=syntax>T64</code>. Made for (U)IntX/EnumX/Data(Time)/DecimalX columns. It should be good for columns with constant or small range values. Codec itself allows enlarge or shrink data type without re-compression. <a href=https://github.com/ClickHouse/ClickHouse/pull/5557 rel="external nofollow noreferrer" target=_blank>#5557</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Add database engine <code class=syntax>MySQL</code> that allow to view all the tables in remote MySQL server <a href=https://github.com/ClickHouse/ClickHouse/pull/5599 rel="external nofollow noreferrer" target=_blank>#5599</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li><code class=syntax>bitmapContains</code> implementation. It’s 2x faster than <code class=syntax>bitmapHasAny</code> if the second bitmap contains one element. <a href=https://github.com/ClickHouse/ClickHouse/pull/5535 rel="external nofollow noreferrer" target=_blank>#5535</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Support for <code class=syntax>crc32</code> function (with behaviour exactly as in MySQL or PHP). Do not use it if you need a hash function. <a href=https://github.com/ClickHouse/ClickHouse/pull/5661 rel="external nofollow noreferrer" target=_blank>#5661</a> (<a href=https://github.com/BHYCHIK rel="external nofollow noreferrer" target=_blank>Remen Ivan</a>)</li> <li>Implemented <code class=syntax>SYSTEM START/STOP DISTRIBUTED SENDS</code> queries to control asynchronous inserts into <code class=syntax>Distributed</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/4935 rel="external nofollow noreferrer" target=_blank>#4935</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> </ul> <h4 id=bug-fix-22>Bug Fix<a class=headerlink href=#bug-fix-22 title="Permanent link"> </a></h4> <ul> <li>Ignore query execution limits and max parts size for merge limits while executing mutations. <a href=https://github.com/ClickHouse/ClickHouse/pull/5659 rel="external nofollow noreferrer" target=_blank>#5659</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix bug which may lead to deduplication of normal blocks (extremely rare) and insertion of duplicate blocks (more often). <a href=https://github.com/ClickHouse/ClickHouse/pull/5549 rel="external nofollow noreferrer" target=_blank>#5549</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix of function <code class=syntax>arrayEnumerateUniqRanked</code> for arguments with empty arrays <a href=https://github.com/ClickHouse/ClickHouse/pull/5559 rel="external nofollow noreferrer" target=_blank>#5559</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Don’t subscribe to Kafka topics without intent to poll any messages. <a href=https://github.com/ClickHouse/ClickHouse/pull/5698 rel="external nofollow noreferrer" target=_blank>#5698</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Make setting <code class=syntax>join_use_nulls</code> get no effect for types that cannot be inside Nullable <a href=https://github.com/ClickHouse/ClickHouse/pull/5700 rel="external nofollow noreferrer" target=_blank>#5700</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Fixed <code class=syntax>Incorrect size of index granularity</code> errors <a href=https://github.com/ClickHouse/ClickHouse/pull/5720 rel="external nofollow noreferrer" target=_blank>#5720</a> (<a href=https://github.com/coraxster rel="external nofollow noreferrer" target=_blank>coraxster</a>)</li> <li>Fix Float to Decimal convert overflow <a href=https://github.com/ClickHouse/ClickHouse/pull/5607 rel="external nofollow noreferrer" target=_blank>#5607</a> (<a href=https://github.com/coraxster rel="external nofollow noreferrer" target=_blank>coraxster</a>)</li> <li>Flush buffer when <code class=syntax>WriteBufferFromHDFS</code>’s destructor is called. This fixes writing into <code class=syntax>HDFS</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5684 rel="external nofollow noreferrer" target=_blank>#5684</a> (<a href=https://github.com/eejoin rel="external nofollow noreferrer" target=_blank>Xindong Peng</a>)</li> </ul> <h4 id=improvement-7>Improvement<a class=headerlink href=#improvement-7 title="Permanent link"> </a></h4> <ul> <li>Treat empty cells in <code class=syntax>CSV</code> as default values when the setting <code class=syntax>input_format_defaults_for_omitted_fields</code> is enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/5625 rel="external nofollow noreferrer" target=_blank>#5625</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Non-blocking loading of external dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/5567 rel="external nofollow noreferrer" target=_blank>#5567</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Network timeouts can be dynamically changed for already established connections according to the settings. <a href=https://github.com/ClickHouse/ClickHouse/pull/4558 rel="external nofollow noreferrer" target=_blank>#4558</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer" target=_blank>Konstantin Podshumok</a>)</li> <li>Using “public_suffix_list” for functions <code class=syntax>firstSignificantSubdomain</code>, <code class=syntax>cutToFirstSignificantSubdomain</code>. It’s using a perfect hash table generated by <code class=syntax>gperf</code> with a list generated from the file: <a href=https://publicsuffix.org/list/public_suffix_list.dat target=_blank>https://publicsuffix.org/list/public_suffix_list.dat</a>. (for example, now we recognize the domain <code class=syntax>ac.uk</code> as non-significant). <a href=https://github.com/ClickHouse/ClickHouse/pull/5030 rel="external nofollow noreferrer" target=_blank>#5030</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Adopted <code class=syntax>IPv6</code> data type in system tables; unified client info columns in <code class=syntax>system.processes</code> and <code class=syntax>system.query_log</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5640 rel="external nofollow noreferrer" target=_blank>#5640</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Using sessions for connections with MySQL compatibility protocol. #5476 <a href=https://github.com/ClickHouse/ClickHouse/pull/5646 rel="external nofollow noreferrer" target=_blank>#5646</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Support more <code class=syntax>ALTER</code> queries <code class=syntax>ON CLUSTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5593 rel="external nofollow noreferrer" target=_blank>#5593</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5613 rel="external nofollow noreferrer" target=_blank>#5613</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Support <code class=syntax>&lt;logger&gt;</code> section in <code class=syntax>clickhouse-local</code> config file. <a href=https://github.com/ClickHouse/ClickHouse/pull/5540 rel="external nofollow noreferrer" target=_blank>#5540</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Allow run query with <code class=syntax>remote</code> table function in <code class=syntax>clickhouse-local</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5627 rel="external nofollow noreferrer" target=_blank>#5627</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=performance-improvement-5>Performance Improvement<a class=headerlink href=#performance-improvement-5 title="Permanent link"> </a></h4> <ul> <li>Add the possibility to write the final mark at the end of MergeTree columns. It allows to avoid useless reads for keys that are out of table data range. It is enabled only if adaptive index granularity is in use. <a href=https://github.com/ClickHouse/ClickHouse/pull/5624 rel="external nofollow noreferrer" target=_blank>#5624</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Improved performance of MergeTree tables on very slow filesystems by reducing number of <code class=syntax>stat</code> syscalls. <a href=https://github.com/ClickHouse/ClickHouse/pull/5648 rel="external nofollow noreferrer" target=_blank>#5648</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed performance degradation in reading from MergeTree tables that was introduced in version 19.6. Fixes #5631. <a href=https://github.com/ClickHouse/ClickHouse/pull/5633 rel="external nofollow noreferrer" target=_blank>#5633</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-8>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-8 title="Permanent link"> </a></h4> <ul> <li>Implemented <code class=syntax>TestKeeper</code> as an implementation of ZooKeeper interface used for testing <a href=https://github.com/ClickHouse/ClickHouse/pull/5643 rel="external nofollow noreferrer" target=_blank>#5643</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>) (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>levushkin aleksej</a>)</li> <li>From now on <code class=syntax>.sql</code> tests can be run isolated by server, in parallel, with random database. It allows to run them faster, add new tests with custom server configurations, and be sure that different tests doesn’t affect each other. <a href=https://github.com/ClickHouse/ClickHouse/pull/5554 rel="external nofollow noreferrer" target=_blank>#5554</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Remove <code class=syntax>&lt;name&gt;</code> and <code class=syntax>&lt;metrics&gt;</code> from performance tests <a href=https://github.com/ClickHouse/ClickHouse/pull/5672 rel="external nofollow noreferrer" target=_blank>#5672</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Fixed “select_format” performance test for <code class=syntax>Pretty</code> formats <a href=https://github.com/ClickHouse/ClickHouse/pull/5642 rel="external nofollow noreferrer" target=_blank>#5642</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h2 id=clickhouse-release-19-9>ClickHouse Release 19.9<a class=headerlink href=#clickhouse-release-19-9 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-9-3-31-2019-07-05>ClickHouse Release 19.9.3.31, 2019-07-05<a class=headerlink href=#clickhouse-release-19-9-3-31-2019-07-05 title="Permanent link"> </a></h3> <h4 id=bug-fix-23>Bug Fix<a class=headerlink href=#bug-fix-23 title="Permanent link"> </a></h4> <ul> <li>Fix segfault in Delta codec which affects columns with values less than 32 bits size. The bug led to random memory corruption. <a href=https://github.com/ClickHouse/ClickHouse/pull/5786 rel="external nofollow noreferrer" target=_blank>#5786</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix rare bug in checking of part with LowCardinality column. <a href=https://github.com/ClickHouse/ClickHouse/pull/5832 rel="external nofollow noreferrer" target=_blank>#5832</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix segfault in TTL merge with non-physical columns in block. <a href=https://github.com/ClickHouse/ClickHouse/pull/5819 rel="external nofollow noreferrer" target=_blank>#5819</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix potential infinite sleeping of low-priority queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/5842 rel="external nofollow noreferrer" target=_blank>#5842</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix how ClickHouse determines default time zone as UCT instead of UTC. <a href=https://github.com/ClickHouse/ClickHouse/pull/5828 rel="external nofollow noreferrer" target=_blank>#5828</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix bug about executing distributed DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER queries on follower replica before leader replica. Now they will be executed directly on leader replica. <a href=https://github.com/ClickHouse/ClickHouse/pull/5757 rel="external nofollow noreferrer" target=_blank>#5757</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix race condition, which cause that some queries may not appear in query_log instantly after SYSTEM FLUSH LOGS query. <a href=https://github.com/ClickHouse/ClickHouse/pull/5685 rel="external nofollow noreferrer" target=_blank>#5685</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Added missing support for constant arguments to <code class=syntax>evalMLModel</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/5820 rel="external nofollow noreferrer" target=_blank>#5820</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-9-2-4-2019-06-24>ClickHouse Release 19.9.2.4, 2019-06-24<a class=headerlink href=#clickhouse-release-19-9-2-4-2019-06-24 title="Permanent link"> </a></h3> <h4 id=new-feature-8>New Feature<a class=headerlink href=#new-feature-8 title="Permanent link"> </a></h4> <ul> <li>Print information about frozen parts in <code class=syntax>system.parts</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/5471 rel="external nofollow noreferrer" target=_blank>#5471</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Ask client password on clickhouse-client start on tty if not set in arguments <a href=https://github.com/ClickHouse/ClickHouse/pull/5092 rel="external nofollow noreferrer" target=_blank>#5092</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Implement <code class=syntax>dictGet</code> and <code class=syntax>dictGetOrDefault</code> functions for Decimal types. <a href=https://github.com/ClickHouse/ClickHouse/pull/5394 rel="external nofollow noreferrer" target=_blank>#5394</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=improvement-8>Improvement<a class=headerlink href=#improvement-8 title="Permanent link"> </a></h4> <ul> <li>Debian init: Add service stop timeout <a href=https://github.com/ClickHouse/ClickHouse/pull/5522 rel="external nofollow noreferrer" target=_blank>#5522</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Add setting forbidden by default to create table with suspicious types for LowCardinality <a href=https://github.com/ClickHouse/ClickHouse/pull/5448 rel="external nofollow noreferrer" target=_blank>#5448</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Regression functions return model weights when not used as State in function <code class=syntax>evalMLMethod</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5411 rel="external nofollow noreferrer" target=_blank>#5411</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li> <li>Rename and improve regression methods. <a href=https://github.com/ClickHouse/ClickHouse/pull/5492 rel="external nofollow noreferrer" target=_blank>#5492</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li> <li>Clearer interfaces of string searchers. <a href=https://github.com/ClickHouse/ClickHouse/pull/5586 rel="external nofollow noreferrer" target=_blank>#5586</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> </ul> <h4 id=bug-fix-24>Bug Fix<a class=headerlink href=#bug-fix-24 title="Permanent link"> </a></h4> <ul> <li>Fix potential data loss in Kafka <a href=https://github.com/ClickHouse/ClickHouse/pull/5445 rel="external nofollow noreferrer" target=_blank>#5445</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix potential infinite loop in <code class=syntax>PrettySpace</code> format when called with zero columns <a href=https://github.com/ClickHouse/ClickHouse/pull/5560 rel="external nofollow noreferrer" target=_blank>#5560</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Fixed UInt32 overflow bug in linear models. Allow eval ML model for non-const model argument. <a href=https://github.com/ClickHouse/ClickHouse/pull/5516 rel="external nofollow noreferrer" target=_blank>#5516</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li><code class=syntax>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> should not raise an exception if provided index does not exist <a href=https://github.com/ClickHouse/ClickHouse/pull/5524 rel="external nofollow noreferrer" target=_blank>#5524</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>Gleb Novikov</a>)</li> <li>Fix segfault with <code class=syntax>bitmapHasAny</code> in scalar subquery <a href=https://github.com/ClickHouse/ClickHouse/pull/5528 rel="external nofollow noreferrer" target=_blank>#5528</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Fixed error when replication connection pool doesn’t retry to resolve host, even when DNS cache was dropped. <a href=https://github.com/ClickHouse/ClickHouse/pull/5534 rel="external nofollow noreferrer" target=_blank>#5534</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>ALTER ... MODIFY TTL</code> on ReplicatedMergeTree. <a href=https://github.com/ClickHouse/ClickHouse/pull/5539 rel="external nofollow noreferrer" target=_blank>#5539</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Fix INSERT into Distributed table with MATERIALIZED column <a href=https://github.com/ClickHouse/ClickHouse/pull/5429 rel="external nofollow noreferrer" target=_blank>#5429</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Fix bad alloc when truncate Join storage <a href=https://github.com/ClickHouse/ClickHouse/pull/5437 rel="external nofollow noreferrer" target=_blank>#5437</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li> <li>In recent versions of package tzdata some of files are symlinks now. The current mechanism for detecting default timezone gets broken and gives wrong names for some timezones. Now at least we force the timezone name to the contents of TZ if provided. <a href=https://github.com/ClickHouse/ClickHouse/pull/5443 rel="external nofollow noreferrer" target=_blank>#5443</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fix some extremely rare cases with MultiVolnitsky searcher when the constant needles in sum are at least 16KB long. The algorithm missed or overwrote the previous results which can lead to the incorrect result of <code class=syntax>multiSearchAny</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5588 rel="external nofollow noreferrer" target=_blank>#5588</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Fix the issue when settings for ExternalData requests couldn’t use ClickHouse settings. Also, for now, settings <code class=syntax>date_time_input_format</code> and <code class=syntax>low_cardinality_allow_in_native_format</code> cannot be used because of the ambiguity of names (in external data it can be interpreted as table format and in the query it can be a setting). <a href=https://github.com/ClickHouse/ClickHouse/pull/5455 rel="external nofollow noreferrer" target=_blank>#5455</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/5520 rel="external nofollow noreferrer" target=_blank>#5520</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Remove debug logging from MySQL protocol <a href=https://github.com/ClickHouse/ClickHouse/pull/5478 rel="external nofollow noreferrer" target=_blank>#5478</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Skip ZNONODE during DDL query processing <a href=https://github.com/ClickHouse/ClickHouse/pull/5489 rel="external nofollow noreferrer" target=_blank>#5489</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Fix mix <code class=syntax>UNION ALL</code> result column type. There were cases with inconsistent data and column types of resulting columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/5503 rel="external nofollow noreferrer" target=_blank>#5503</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Throw an exception on wrong integers in <code class=syntax>dictGetT</code> functions instead of crash. <a href=https://github.com/ClickHouse/ClickHouse/pull/5446 rel="external nofollow noreferrer" target=_blank>#5446</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix wrong element_count and load_factor for hashed dictionary in <code class=syntax>system.dictionaries</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/5440 rel="external nofollow noreferrer" target=_blank>#5440</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-9>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-9 title="Permanent link"> </a></h4> <ul> <li>Fixed build without <code class=syntax>Brotli</code> HTTP compression support (<code class=syntax>ENABLE_BROTLI=OFF</code> cmake variable). <a href=https://github.com/ClickHouse/ClickHouse/pull/5521 rel="external nofollow noreferrer" target=_blank>#5521</a> (<a href=https://github.com/citrin rel="external nofollow noreferrer" target=_blank>Anton Yuzhaninov</a>)</li> <li>Include roaring.h as roaring/roaring.h <a href=https://github.com/ClickHouse/ClickHouse/pull/5523 rel="external nofollow noreferrer" target=_blank>#5523</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Orivej Desh</a>)</li> <li>Fix gcc9 warnings in hyperscan (#line directive is evil!) <a href=https://github.com/ClickHouse/ClickHouse/pull/5546 rel="external nofollow noreferrer" target=_blank>#5546</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Fix all warnings when compiling with gcc-9. Fix some contrib issues. Fix gcc9 ICE and submit it to bugzilla. <a href=https://github.com/ClickHouse/ClickHouse/pull/5498 rel="external nofollow noreferrer" target=_blank>#5498</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Fixed linking with lld <a href=https://github.com/ClickHouse/ClickHouse/pull/5477 rel="external nofollow noreferrer" target=_blank>#5477</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Remove unused specializations in dictionaries <a href=https://github.com/ClickHouse/ClickHouse/pull/5452 rel="external nofollow noreferrer" target=_blank>#5452</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Improvement performance tests for formatting and parsing tables for different types of files <a href=https://github.com/ClickHouse/ClickHouse/pull/5497 rel="external nofollow noreferrer" target=_blank>#5497</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> <li>Fixes for parallel test run <a href=https://github.com/ClickHouse/ClickHouse/pull/5506 rel="external nofollow noreferrer" target=_blank>#5506</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Docker: use configs from clickhouse-test <a href=https://github.com/ClickHouse/ClickHouse/pull/5531 rel="external nofollow noreferrer" target=_blank>#5531</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix compile for FreeBSD <a href=https://github.com/ClickHouse/ClickHouse/pull/5447 rel="external nofollow noreferrer" target=_blank>#5447</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Upgrade boost to 1.70 <a href=https://github.com/ClickHouse/ClickHouse/pull/5570 rel="external nofollow noreferrer" target=_blank>#5570</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix build clickhouse as submodule <a href=https://github.com/ClickHouse/ClickHouse/pull/5574 rel="external nofollow noreferrer" target=_blank>#5574</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Improve JSONExtract performance tests <a href=https://github.com/ClickHouse/ClickHouse/pull/5444 rel="external nofollow noreferrer" target=_blank>#5444</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> </ul> <h2 id=clickhouse-release-19-8>ClickHouse Release 19.8<a class=headerlink href=#clickhouse-release-19-8 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-8-3-8-2019-06-11>ClickHouse Release 19.8.3.8, 2019-06-11<a class=headerlink href=#clickhouse-release-19-8-3-8-2019-06-11 title="Permanent link"> </a></h3> <h4 id=new-features>New Features<a class=headerlink href=#new-features title="Permanent link"> </a></h4> <ul> <li>Added functions to work with JSON <a href=https://github.com/ClickHouse/ClickHouse/pull/4686 rel="external nofollow noreferrer" target=_blank>#4686</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5124 rel="external nofollow noreferrer" target=_blank>#5124</a>. (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Add a function basename, with a similar behaviour to a basename function, which exists in a lot of languages (<code class=syntax>os.path.basename</code> in python, <code class=syntax>basename</code> in PHP, etc…). Work with both an UNIX-like path or a Windows path. <a href=https://github.com/ClickHouse/ClickHouse/pull/5136 rel="external nofollow noreferrer" target=_blank>#5136</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Added <code class=syntax>LIMIT n, m BY</code> or <code class=syntax>LIMIT m OFFSET n BY</code> syntax to set offset of n for LIMIT BY clause. <a href=https://github.com/ClickHouse/ClickHouse/pull/5138 rel="external nofollow noreferrer" target=_blank>#5138</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Added new data type <code class=syntax>SimpleAggregateFunction</code>, which allows to have columns with light aggregation in an <code class=syntax>AggregatingMergeTree</code>. This can only be used with simple functions like <code class=syntax>any</code>, <code class=syntax>anyLast</code>, <code class=syntax>sum</code>, <code class=syntax>min</code>, <code class=syntax>max</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4629 rel="external nofollow noreferrer" target=_blank>#4629</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li> <li>Added support for non-constant arguments in function <code class=syntax>ngramDistance</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5198 rel="external nofollow noreferrer" target=_blank>#5198</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Added functions <code class=syntax>skewPop</code>, <code class=syntax>skewSamp</code>, <code class=syntax>kurtPop</code> and <code class=syntax>kurtSamp</code> to compute for sequence skewness, sample skewness, kurtosis and sample kurtosis respectively. <a href=https://github.com/ClickHouse/ClickHouse/pull/5200 rel="external nofollow noreferrer" target=_blank>#5200</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Support rename operation for <code class=syntax>MaterializeView</code> storage. <a href=https://github.com/ClickHouse/ClickHouse/pull/5209 rel="external nofollow noreferrer" target=_blank>#5209</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Added server which allows connecting to ClickHouse using MySQL client. <a href=https://github.com/ClickHouse/ClickHouse/pull/4715 rel="external nofollow noreferrer" target=_blank>#4715</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Add <code class=syntax>toDecimal*OrZero</code> and <code class=syntax>toDecimal*OrNull</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/5291 rel="external nofollow noreferrer" target=_blank>#5291</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Support Decimal types in functions: <code class=syntax>quantile</code>, <code class=syntax>quantiles</code>, <code class=syntax>median</code>, <code class=syntax>quantileExactWeighted</code>, <code class=syntax>quantilesExactWeighted</code>, medianExactWeighted. <a href=https://github.com/ClickHouse/ClickHouse/pull/5304 rel="external nofollow noreferrer" target=_blank>#5304</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Added <code class=syntax>toValidUTF8</code> function, which replaces all invalid UTF-8 characters by replacement character � (U+FFFD). <a href=https://github.com/ClickHouse/ClickHouse/pull/5322 rel="external nofollow noreferrer" target=_blank>#5322</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Added <code class=syntax>format</code> function. Formatting constant pattern (simplified Python format pattern) with the strings listed in the arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/5330 rel="external nofollow noreferrer" target=_blank>#5330</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Added <code class=syntax>system.detached_parts</code> table containing information about detached parts of <code class=syntax>MergeTree</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/5353 rel="external nofollow noreferrer" target=_blank>#5353</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li> <li>Added <code class=syntax>ngramSearch</code> function to calculate the non-symmetric difference between needle and haystack. <a href=https://github.com/ClickHouse/ClickHouse/pull/5418 rel="external nofollow noreferrer" target=_blank>#5418</a><a href=https://github.com/ClickHouse/ClickHouse/pull/5422 rel="external nofollow noreferrer" target=_blank>#5422</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Implementation of basic machine learning methods (stochastic linear regression and logistic regression) using aggregate functions interface. Has different strategies for updating model weights (simple gradient descent, momentum method, Nesterov method). Also supports mini-batches of custom size. <a href=https://github.com/ClickHouse/ClickHouse/pull/4943 rel="external nofollow noreferrer" target=_blank>#4943</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li> <li>Implementation of <code class=syntax>geohashEncode</code> and <code class=syntax>geohashDecode</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/5003 rel="external nofollow noreferrer" target=_blank>#5003</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Added aggregate function <code class=syntax>timeSeriesGroupSum</code>, which can aggregate different time series that sample timestamp not alignment. It will use linear interpolation between two sample timestamp and then sum time-series together. Added aggregate function <code class=syntax>timeSeriesGroupRateSum</code>, which calculates the rate of time-series and then sum rates together. <a href=https://github.com/ClickHouse/ClickHouse/pull/4542 rel="external nofollow noreferrer" target=_blank>#4542</a> (<a href=https://github.com/LiuYangkuan rel="external nofollow noreferrer" target=_blank>Yangkuan Liu</a>)</li> <li>Added functions <code class=syntax>IPv4CIDRtoIPv4Range</code> and <code class=syntax>IPv6CIDRtoIPv6Range</code> to calculate the lower and higher bounds for an IP in the subnet using a CIDR. <a href=https://github.com/ClickHouse/ClickHouse/pull/5095 rel="external nofollow noreferrer" target=_blank>#5095</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> <li>Add a X-ClickHouse-Summary header when we send a query using HTTP with enabled setting <code class=syntax>send_progress_in_http_headers</code>. Return the usual information of X-ClickHouse-Progress, with additional information like how many rows and bytes were inserted in the query. <a href=https://github.com/ClickHouse/ClickHouse/pull/5116 rel="external nofollow noreferrer" target=_blank>#5116</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume Tassery</a>)</li> </ul> <h4 id=improvements>Improvements<a class=headerlink href=#improvements title="Permanent link"> </a></h4> <ul> <li>Added <code class=syntax>max_parts_in_total</code> setting for MergeTree family of tables (default: 100 000) that prevents unsafe specification of partition key #5166. <a href=https://github.com/ClickHouse/ClickHouse/pull/5171 rel="external nofollow noreferrer" target=_blank>#5171</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>clickhouse-obfuscator</code>: derive seed for individual columns by combining initial seed with column name, not column position. This is intended to transform datasets with multiple related tables, so that tables will remain JOINable after transformation. <a href=https://github.com/ClickHouse/ClickHouse/pull/5178 rel="external nofollow noreferrer" target=_blank>#5178</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added functions <code class=syntax>JSONExtractRaw</code>, <code class=syntax>JSONExtractKeyAndValues</code>. Renamed functions <code class=syntax>jsonExtract&lt;type&gt;</code> to <code class=syntax>JSONExtract&lt;type&gt;</code>. When something goes wrong these functions return the correspondent values, not <code class=syntax>NULL</code>. Modified function <code class=syntax>JSONExtract</code>, now it gets the return type from its last parameter and doesn’t inject nullables. Implemented fallback to RapidJSON in case AVX2 instructions are not available. Simdjson library updated to a new version. <a href=https://github.com/ClickHouse/ClickHouse/pull/5235 rel="external nofollow noreferrer" target=_blank>#5235</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Now <code class=syntax>if</code> and <code class=syntax>multiIf</code> functions don’t rely on the condition’s <code class=syntax>Nullable</code>, but rely on the branches for sql compatibility. <a href=https://github.com/ClickHouse/ClickHouse/pull/5238 rel="external nofollow noreferrer" target=_blank>#5238</a> (<a href=https://github.com/janplus rel="external nofollow noreferrer" target=_blank>Jian Wu</a>)</li> <li><code class=syntax>In</code> predicate now generates <code class=syntax>Null</code> result from <code class=syntax>Null</code> input like the <code class=syntax>Equal</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/5152 rel="external nofollow noreferrer" target=_blank>#5152</a> (<a href=https://github.com/janplus rel="external nofollow noreferrer" target=_blank>Jian Wu</a>)</li> <li>Check the time limit every (flush_interval / poll_timeout) number of rows from Kafka. This allows to break the reading from Kafka consumer more frequently and to check the time limits for the top-level streams <a href=https://github.com/ClickHouse/ClickHouse/pull/5249 rel="external nofollow noreferrer" target=_blank>#5249</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Link rdkafka with bundled SASL. It should allow to use SASL SCRAM authentication <a href=https://github.com/ClickHouse/ClickHouse/pull/5253 rel="external nofollow noreferrer" target=_blank>#5253</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Batched version of RowRefList for ALL JOINS. <a href=https://github.com/ClickHouse/ClickHouse/pull/5267 rel="external nofollow noreferrer" target=_blank>#5267</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>clickhouse-server: more informative listen error messages. <a href=https://github.com/ClickHouse/ClickHouse/pull/5268 rel="external nofollow noreferrer" target=_blank>#5268</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Support dictionaries in clickhouse-copier for functions in <code class=syntax>&lt;sharding_key&gt;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5270 rel="external nofollow noreferrer" target=_blank>#5270</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Add new setting <code class=syntax>kafka_commit_every_batch</code> to regulate Kafka committing policy.<br> It allows to set commit mode: after every batch of messages is handled, or after the whole block is written to the storage. It’s a trade-off between losing some messages or reading them twice in some extreme situations. <a href=https://github.com/ClickHouse/ClickHouse/pull/5308 rel="external nofollow noreferrer" target=_blank>#5308</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Make <code class=syntax>windowFunnel</code> support other Unsigned Integer Types. <a href=https://github.com/ClickHouse/ClickHouse/pull/5320 rel="external nofollow noreferrer" target=_blank>#5320</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Allow to shadow virtual column <code class=syntax>_table</code> in Merge engine. <a href=https://github.com/ClickHouse/ClickHouse/pull/5325 rel="external nofollow noreferrer" target=_blank>#5325</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Make <code class=syntax>sequenceMatch</code> aggregate functions support other unsigned Integer types <a href=https://github.com/ClickHouse/ClickHouse/pull/5339 rel="external nofollow noreferrer" target=_blank>#5339</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Better error messages if checksum mismatch is most likely caused by hardware failures. <a href=https://github.com/ClickHouse/ClickHouse/pull/5355 rel="external nofollow noreferrer" target=_blank>#5355</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Check that underlying tables support sampling for <code class=syntax>StorageMerge</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5366 rel="external nofollow noreferrer" target=_blank>#5366</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Сlose MySQL connections after their usage in external dictionaries. It is related to issue #893. <a href=https://github.com/ClickHouse/ClickHouse/pull/5395 rel="external nofollow noreferrer" target=_blank>#5395</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer" target=_blank>Clément Rodriguez</a>)</li> <li>Improvements of MySQL Wire Protocol. Changed name of format to MySQLWire. Using RAII for calling RSA_free. Disabling SSL if context cannot be created. <a href=https://github.com/ClickHouse/ClickHouse/pull/5419 rel="external nofollow noreferrer" target=_blank>#5419</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>clickhouse-client: allow to run with unaccessable history file (read-only, no disk space, file is directory, …). <a href=https://github.com/ClickHouse/ClickHouse/pull/5431 rel="external nofollow noreferrer" target=_blank>#5431</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Respect query settings in asynchronous INSERTs into Distributed tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/4936 rel="external nofollow noreferrer" target=_blank>#4936</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li> <li>Renamed functions <code class=syntax>leastSqr</code> to <code class=syntax>simpleLinearRegression</code>, <code class=syntax>LinearRegression</code> to <code class=syntax>linearRegression</code>, <code class=syntax>LogisticRegression</code> to <code class=syntax>logisticRegression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5391 rel="external nofollow noreferrer" target=_blank>#5391</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> </ul> <h4 id=performance-improvements>Performance Improvements<a class=headerlink href=#performance-improvements title="Permanent link"> </a></h4> <ul> <li>Parallelize processing of parts of non-replicated MergeTree tables in ALTER MODIFY query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4639 rel="external nofollow noreferrer" target=_blank>#4639</a> (<a href=https://github.com/IvanKush rel="external nofollow noreferrer" target=_blank>Ivan Kush</a>)</li> <li>Optimizations in regular expressions extraction. <a href=https://github.com/ClickHouse/ClickHouse/pull/5193 rel="external nofollow noreferrer" target=_blank>#5193</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5191 rel="external nofollow noreferrer" target=_blank>#5191</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Do not add right join key column to join result if it’s used only in join on section. <a href=https://github.com/ClickHouse/ClickHouse/pull/5260 rel="external nofollow noreferrer" target=_blank>#5260</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Freeze the Kafka buffer after first empty response. It avoids multiple invokations of <code class=syntax>ReadBuffer::next()</code> for empty result in some row-parsing streams. <a href=https://github.com/ClickHouse/ClickHouse/pull/5283 rel="external nofollow noreferrer" target=_blank>#5283</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li><code class=syntax>concat</code> function optimization for multiple arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/5357 rel="external nofollow noreferrer" target=_blank>#5357</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Query optimisation. Allow push down IN statement while rewriting commа/cross join into inner one. <a href=https://github.com/ClickHouse/ClickHouse/pull/5396 rel="external nofollow noreferrer" target=_blank>#5396</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Upgrade our LZ4 implementation with reference one to have faster decompression. <a href=https://github.com/ClickHouse/ClickHouse/pull/5070 rel="external nofollow noreferrer" target=_blank>#5070</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Implemented MSD radix sort (based on kxsort), and partial sorting. <a href=https://github.com/ClickHouse/ClickHouse/pull/5129 rel="external nofollow noreferrer" target=_blank>#5129</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>)</li> </ul> <h4 id=bug-fixes>Bug Fixes<a class=headerlink href=#bug-fixes title="Permanent link"> </a></h4> <ul> <li>Fix push require columns with join <a href=https://github.com/ClickHouse/ClickHouse/pull/5192 rel="external nofollow noreferrer" target=_blank>#5192</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fixed bug, when ClickHouse is run by systemd, the command <code class=syntax>sudo service clickhouse-server forcerestart</code> was not working as expected. <a href=https://github.com/ClickHouse/ClickHouse/pull/5204 rel="external nofollow noreferrer" target=_blank>#5204</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix http error codes in DataPartsExchange (interserver http server on 9009 port always returned code 200, even on errors). <a href=https://github.com/ClickHouse/ClickHouse/pull/5216 rel="external nofollow noreferrer" target=_blank>#5216</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix SimpleAggregateFunction for String longer than MAX_SMALL_STRING_SIZE <a href=https://github.com/ClickHouse/ClickHouse/pull/5311 rel="external nofollow noreferrer" target=_blank>#5311</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Fix error for <code class=syntax>Decimal</code> to <code class=syntax>Nullable(Decimal)</code> conversion in IN. Support other Decimal to Decimal conversions (including different scales). <a href=https://github.com/ClickHouse/ClickHouse/pull/5350 rel="external nofollow noreferrer" target=_blank>#5350</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed FPU clobbering in simdjson library that lead to wrong calculation of <code class=syntax>uniqHLL</code> and <code class=syntax>uniqCombined</code> aggregate function and math functions such as <code class=syntax>log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5354 rel="external nofollow noreferrer" target=_blank>#5354</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed handling mixed const/nonconst cases in JSON functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/5435 rel="external nofollow noreferrer" target=_blank>#5435</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fix <code class=syntax>retention</code> function. Now all conditions that satisfy in a row of data are added to the data state. <a href=https://github.com/ClickHouse/ClickHouse/pull/5119 rel="external nofollow noreferrer" target=_blank>#5119</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li> <li>Fix result type for <code class=syntax>quantileExact</code> with Decimals. <a href=https://github.com/ClickHouse/ClickHouse/pull/5304 rel="external nofollow noreferrer" target=_blank>#5304</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=documentation>Documentation<a class=headerlink href=#documentation title="Permanent link"> </a></h4> <ul> <li>Translate documentation for <code class=syntax>CollapsingMergeTree</code> to chinese. <a href=https://github.com/ClickHouse/ClickHouse/pull/5168 rel="external nofollow noreferrer" target=_blank>#5168</a> (<a href=https://github.com/AlexZFX rel="external nofollow noreferrer" target=_blank>张风啸</a>)</li> <li>Translate some documentation about table engines to chinese.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5134 rel="external nofollow noreferrer" target=_blank>#5134</a><br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5328 rel="external nofollow noreferrer" target=_blank>#5328</a><br> (<a href=https://github.com/neverlee rel="external nofollow noreferrer" target=_blank>never lee</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements>Build/Testing/Packaging Improvements<a class=headerlink href=#buildtestingpackaging-improvements title="Permanent link"> </a></h4> <ul> <li>Fix some sanitizer reports that show probable use-after-free.<a href=https://github.com/ClickHouse/ClickHouse/pull/5139 rel="external nofollow noreferrer" target=_blank>#5139</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5143 rel="external nofollow noreferrer" target=_blank>#5143</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5393 rel="external nofollow noreferrer" target=_blank>#5393</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Move performance tests out of separate directories for convenience. <a href=https://github.com/ClickHouse/ClickHouse/pull/5158 rel="external nofollow noreferrer" target=_blank>#5158</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix incorrect performance tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/5255 rel="external nofollow noreferrer" target=_blank>#5255</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Added a tool to calculate checksums caused by bit flips to debug hardware issues. <a href=https://github.com/ClickHouse/ClickHouse/pull/5334 rel="external nofollow noreferrer" target=_blank>#5334</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Make runner script more usable. <a href=https://github.com/ClickHouse/ClickHouse/pull/5340 rel="external nofollow noreferrer" target=_blank>#5340</a><a href=https://github.com/ClickHouse/ClickHouse/pull/5360 rel="external nofollow noreferrer" target=_blank>#5360</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Add small instruction how to write performance tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/5408 rel="external nofollow noreferrer" target=_blank>#5408</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add ability to make substitutions in create, fill and drop query in performance tests <a href=https://github.com/ClickHouse/ClickHouse/pull/5367 rel="external nofollow noreferrer" target=_blank>#5367</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li> </ul> <h2 id=clickhouse-release-19-7>ClickHouse Release 19.7<a class=headerlink href=#clickhouse-release-19-7 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-7-5-29-2019-07-05>ClickHouse Release 19.7.5.29, 2019-07-05<a class=headerlink href=#clickhouse-release-19-7-5-29-2019-07-05 title="Permanent link"> </a></h3> <h4 id=bug-fix-25>Bug Fix<a class=headerlink href=#bug-fix-25 title="Permanent link"> </a></h4> <ul> <li>Fix performance regression in some queries with JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/5192 rel="external nofollow noreferrer" target=_blank>#5192</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> </ul> <h3 id=clickhouse-release-19-7-5-27-2019-06-09>ClickHouse Release 19.7.5.27, 2019-06-09<a class=headerlink href=#clickhouse-release-19-7-5-27-2019-06-09 title="Permanent link"> </a></h3> <h4 id=new-features-1>New Features<a class=headerlink href=#new-features-1 title="Permanent link"> </a></h4> <ul> <li>Added bitmap related functions <code class=syntax>bitmapHasAny</code> and <code class=syntax>bitmapHasAll</code> analogous to <code class=syntax>hasAny</code> and <code class=syntax>hasAll</code> functions for arrays. <a href=https://github.com/ClickHouse/ClickHouse/pull/5279 rel="external nofollow noreferrer" target=_blank>#5279</a> (<a href=https://github.com/svladykin rel="external nofollow noreferrer" target=_blank>Sergi Vladykin</a>)</li> </ul> <h4 id=bug-fixes-1>Bug Fixes<a class=headerlink href=#bug-fixes-1 title="Permanent link"> </a></h4> <ul> <li>Fix segfault on <code class=syntax>minmax</code> INDEX with Null value. <a href=https://github.com/ClickHouse/ClickHouse/pull/5246 rel="external nofollow noreferrer" target=_blank>#5246</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Mark all input columns in LIMIT BY as required output. It fixes ‘Not found column’ error in some distributed queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/5407 rel="external nofollow noreferrer" target=_blank>#5407</a> (<a href=https://github.com/kvap rel="external nofollow noreferrer" target=_blank>Constantin S. Pan</a>)</li> <li>Fix “Column ‘0’ already exists” error in <code class=syntax>SELECT .. PREWHERE</code> on column with DEFAULT <a href=https://github.com/ClickHouse/ClickHouse/pull/5397 rel="external nofollow noreferrer" target=_blank>#5397</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix <code class=syntax>ALTER MODIFY TTL</code> query on <code class=syntax>ReplicatedMergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5539/commits rel="external nofollow noreferrer" target=_blank>#5539</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Don’t crash the server when Kafka consumers have failed to start. <a href=https://github.com/ClickHouse/ClickHouse/pull/5285 rel="external nofollow noreferrer" target=_blank>#5285</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixed bitmap functions produce wrong result. <a href=https://github.com/ClickHouse/ClickHouse/pull/5359 rel="external nofollow noreferrer" target=_blank>#5359</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>Andy Yang</a>)</li> <li>Fix element_count for hashed dictionary (do not include duplicates) <a href=https://github.com/ClickHouse/ClickHouse/pull/5440 rel="external nofollow noreferrer" target=_blank>#5440</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Use contents of environment variable TZ as the name for timezone. It helps to correctly detect default timezone in some cases.<a href=https://github.com/ClickHouse/ClickHouse/pull/5443 rel="external nofollow noreferrer" target=_blank>#5443</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Do not try to convert integers in <code class=syntax>dictGetT</code> functions, because it doesn’t work correctly. Throw an exception instead. <a href=https://github.com/ClickHouse/ClickHouse/pull/5446 rel="external nofollow noreferrer" target=_blank>#5446</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix settings in ExternalData HTTP request. <a href=https://github.com/ClickHouse/ClickHouse/pull/5455 rel="external nofollow noreferrer" target=_blank>#5455</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> Kutenin</a>)</li> <li>Fix bug when parts were removed only from FS without dropping them from Zookeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/5520 rel="external nofollow noreferrer" target=_blank>#5520</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix segmentation fault in <code class=syntax>bitmapHasAny</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/5528 rel="external nofollow noreferrer" target=_blank>#5528</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>Zhichang Yu</a>)</li> <li>Fixed error when replication connection pool doesn’t retry to resolve host, even when DNS cache was dropped. <a href=https://github.com/ClickHouse/ClickHouse/pull/5534 rel="external nofollow noreferrer" target=_blank>#5534</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>DROP INDEX IF EXISTS</code> query. Now <code class=syntax>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> query doesn’t raise an exception if provided index does not exist. <a href=https://github.com/ClickHouse/ClickHouse/pull/5524 rel="external nofollow noreferrer" target=_blank>#5524</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>Gleb Novikov</a>)</li> <li>Fix union all supertype column. There were cases with inconsistent data and column types of resulting columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/5503 rel="external nofollow noreferrer" target=_blank>#5503</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Skip ZNONODE during DDL query processing. Before if another node removes the znode in task queue, the one that<br> did not process it, but already get list of children, will terminate the DDLWorker thread. <a href=https://github.com/ClickHouse/ClickHouse/pull/5489 rel="external nofollow noreferrer" target=_blank>#5489</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> <li>Fix INSERT into Distributed() table with MATERIALIZED column. <a href=https://github.com/ClickHouse/ClickHouse/pull/5429 rel="external nofollow noreferrer" target=_blank>#5429</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li> </ul> <h3 id=clickhouse-release-19-7-3-9-2019-05-30>ClickHouse Release 19.7.3.9, 2019-05-30<a class=headerlink href=#clickhouse-release-19-7-3-9-2019-05-30 title="Permanent link"> </a></h3> <h4 id=new-features-2>New Features<a class=headerlink href=#new-features-2 title="Permanent link"> </a></h4> <ul> <li>Allow to limit the range of a setting that can be specified by user.<br> These constraints can be set up in user settings profile.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/4931 rel="external nofollow noreferrer" target=_blank>#4931</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly<br> Baranov</a>)</li> <li>Add a second version of the function <code class=syntax>groupUniqArray</code> with an optional<br> <code class=syntax>max_size</code> parameter that limits the size of the resulting array. This<br> behavior is similar to <code class=syntax>groupArray(max_size)(x)</code> function.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5026 rel="external nofollow noreferrer" target=_blank>#5026</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>Guillaume<br> Tassery</a>)</li> <li>For TSVWithNames/CSVWithNames input file formats, column order can now be<br> determined from file header. This is controlled by<br> <code class=syntax>input_format_with_names_use_header</code> parameter.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5081 rel="external nofollow noreferrer" target=_blank>#5081</a><br> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>Alexander</a>)</li> </ul> <h4 id=bug-fixes-2>Bug Fixes<a class=headerlink href=#bug-fixes-2 title="Permanent link"> </a></h4> <ul> <li>Crash with uncompressed_cache + JOIN during merge (#5197)<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5133 rel="external nofollow noreferrer" target=_blank>#5133</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> Kutenin</a>)</li> <li>Segmentation fault on a clickhouse-client query to system tables. #5066<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5127 rel="external nofollow noreferrer" target=_blank>#5127</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Data loss on heavy load via KafkaEngine (#4736)<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5080 rel="external nofollow noreferrer" target=_blank>#5080</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer" target=_blank>#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=performance-improvements-1>Performance Improvements<a class=headerlink href=#performance-improvements-1 title="Permanent link"> </a></h4> <ul> <li>Use radix sort for sorting by single numeric column in <code class=syntax>ORDER BY</code> without<br> <code class=syntax>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5106 rel="external nofollow noreferrer" target=_blank>#5106</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/4439 rel="external nofollow noreferrer" target=_blank>#4439</a><br> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>,<br> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=documentation-1>Documentation<a class=headerlink href=#documentation-1 title="Permanent link"> </a></h4> <ul> <li>Translate documentation for some table engines to Chinese.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5107 rel="external nofollow noreferrer" target=_blank>#5107</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5094 rel="external nofollow noreferrer" target=_blank>#5094</a>,<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5087 rel="external nofollow noreferrer" target=_blank>#5087</a><br> (<a href=https://github.com/AlexZFX rel="external nofollow noreferrer" target=_blank>张风啸</a>),<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5068 rel="external nofollow noreferrer" target=_blank>#5068</a> (<a href=https://github.com/neverlee rel="external nofollow noreferrer" target=_blank>never<br> lee</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-1>Build/Testing/Packaging Improvements<a class=headerlink href=#buildtestingpackaging-improvements-1 title="Permanent link"> </a></h4> <ul> <li>Print UTF-8 characters properly in <code class=syntax>clickhouse-test</code>.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5084 rel="external nofollow noreferrer" target=_blank>#5084</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add command line parameter for clickhouse-client to always load suggestion<br> data. <a href=https://github.com/ClickHouse/ClickHouse/pull/5102 rel="external nofollow noreferrer" target=_blank>#5102</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Resolve some of PVS-Studio warnings.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5082 rel="external nofollow noreferrer" target=_blank>#5082</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Update LZ4 <a href=https://github.com/ClickHouse/ClickHouse/pull/5040 rel="external nofollow noreferrer" target=_blank>#5040</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> Kutenin</a>)</li> <li>Add gperf to build requirements for upcoming pull request #5030.<br> <a href=https://github.com/ClickHouse/ClickHouse/pull/5110 rel="external nofollow noreferrer" target=_blank>#5110</a><br> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h2 id=clickhouse-release-19-6>ClickHouse Release 19.6<a class=headerlink href=#clickhouse-release-19-6 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-6-3-18-2019-06-13>ClickHouse Release 19.6.3.18, 2019-06-13<a class=headerlink href=#clickhouse-release-19-6-3-18-2019-06-13 title="Permanent link"> </a></h3> <h4 id=bug-fixes-3>Bug Fixes<a class=headerlink href=#bug-fixes-3 title="Permanent link"> </a></h4> <ul> <li>Fixed IN condition pushdown for queries from table functions <code class=syntax>mysql</code> and <code class=syntax>odbc</code> and corresponding table engines. This fixes #3540 and #2384. <a href=https://github.com/ClickHouse/ClickHouse/pull/5313 rel="external nofollow noreferrer" target=_blank>#5313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix deadlock in Zookeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/5297 rel="external nofollow noreferrer" target=_blank>#5297</a> (<a href=https://github.com/github1youlc rel="external nofollow noreferrer" target=_blank>github1youlc</a>)</li> <li>Allow quoted decimals in CSV. <a href=https://github.com/ClickHouse/ClickHouse/pull/5284 rel="external nofollow noreferrer" target=_blank>#5284</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a></li> <li>Disallow conversion from float Inf/NaN into Decimals (throw exception). <a href=https://github.com/ClickHouse/ClickHouse/pull/5282 rel="external nofollow noreferrer" target=_blank>#5282</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix data race in rename query. <a href=https://github.com/ClickHouse/ClickHouse/pull/5247 rel="external nofollow noreferrer" target=_blank>#5247</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Temporarily disable LFAlloc. Usage of LFAlloc might lead to a lot of MAP_FAILED in allocating UncompressedCache and in a result to crashes of queries at high loaded servers. <a href=https://github.com/ClickHouse/ClickHouse/commit/cfdba938ce22f16efeec504f7f90206a515b1280 rel="external nofollow noreferrer" target=_blank>cfdba93</a>(<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> </ul> <h3 id=clickhouse-release-19-6-2-11-2019-05-13>ClickHouse Release 19.6.2.11, 2019-05-13<a class=headerlink href=#clickhouse-release-19-6-2-11-2019-05-13 title="Permanent link"> </a></h3> <h4 id=new-features-3>New Features<a class=headerlink href=#new-features-3 title="Permanent link"> </a></h4> <ul> <li>TTL expressions for columns and tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/4212 rel="external nofollow noreferrer" target=_blank>#4212</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>Anton Popov</a>)</li> <li>Added support for <code class=syntax>brotli</code> compression for HTTP responses (Accept-Encoding: br) <a href=https://github.com/ClickHouse/ClickHouse/pull/4388 rel="external nofollow noreferrer" target=_blank>#4388</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>Mikhail</a>)</li> <li>Added new function <code class=syntax>isValidUTF8</code> for checking whether a set of bytes is correctly utf-8 encoded. <a href=https://github.com/ClickHouse/ClickHouse/pull/4934 rel="external nofollow noreferrer" target=_blank>#4934</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Add new load balancing policy <code class=syntax>first_or_random</code> which sends queries to the first specified host and if it’s inaccessible send queries to random hosts of shard. Useful for cross-replication topology setups. <a href=https://github.com/ClickHouse/ClickHouse/pull/5012 rel="external nofollow noreferrer" target=_blank>#5012</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>nvartolomei</a>)</li> </ul> <h4 id=experimental-features-1>Experimental Features<a class=headerlink href=#experimental-features-1 title="Permanent link"> </a></h4> <ul> <li>Add setting <code class=syntax>index_granularity_bytes</code> (adaptive index granularity) for MergeTree* tables family. <a href=https://github.com/ClickHouse/ClickHouse/pull/4826 rel="external nofollow noreferrer" target=_blank>#4826</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> </ul> <h4 id=improvements-1>Improvements<a class=headerlink href=#improvements-1 title="Permanent link"> </a></h4> <ul> <li>Added support for non-constant and negative size and length arguments for function <code class=syntax>substringUTF8</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4989 rel="external nofollow noreferrer" target=_blank>#4989</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Disable push-down to right table in left join, left table in right join, and both tables in full join. This fixes wrong JOIN results in some cases. <a href=https://github.com/ClickHouse/ClickHouse/pull/4846 rel="external nofollow noreferrer" target=_blank>#4846</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li><code class=syntax>clickhouse-copier</code>: auto upload task configuration from <code class=syntax>--task-file</code> option <a href=https://github.com/ClickHouse/ClickHouse/pull/4876 rel="external nofollow noreferrer" target=_blank>#4876</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Added typos handler for storage factory and table functions factory. <a href=https://github.com/ClickHouse/ClickHouse/pull/4891 rel="external nofollow noreferrer" target=_blank>#4891</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Support asterisks and qualified asterisks for multiple joins without subqueries <a href=https://github.com/ClickHouse/ClickHouse/pull/4898 rel="external nofollow noreferrer" target=_blank>#4898</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Make missing column error message more user friendly. <a href=https://github.com/ClickHouse/ClickHouse/pull/4915 rel="external nofollow noreferrer" target=_blank>#4915</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=performance-improvements-2>Performance Improvements<a class=headerlink href=#performance-improvements-2 title="Permanent link"> </a></h4> <ul> <li>Significant speedup of ASOF JOIN <a href=https://github.com/ClickHouse/ClickHouse/pull/4924 rel="external nofollow noreferrer" target=_blank>#4924</a> (<a href=https://github.com/Gladdy rel="external nofollow noreferrer" target=_blank>Martijn Bakker</a>)</li> </ul> <h4 id=backward-incompatible-changes>Backward Incompatible Changes<a class=headerlink href=#backward-incompatible-changes title="Permanent link"> </a></h4> <ul> <li>HTTP header <code class=syntax>Query-Id</code> was renamed to <code class=syntax>X-ClickHouse-Query-Id</code> for consistency. <a href=https://github.com/ClickHouse/ClickHouse/pull/4972 rel="external nofollow noreferrer" target=_blank>#4972</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>Mikhail</a>)</li> </ul> <h4 id=bug-fixes-4>Bug Fixes<a class=headerlink href=#bug-fixes-4 title="Permanent link"> </a></h4> <ul> <li>Fixed potential null pointer dereference in <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4900 rel="external nofollow noreferrer" target=_blank>#4900</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed error on query with JOIN + ARRAY JOIN <a href=https://github.com/ClickHouse/ClickHouse/pull/4938 rel="external nofollow noreferrer" target=_blank>#4938</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed hanging on start of the server when a dictionary depends on another dictionary via a database with engine=Dictionary. <a href=https://github.com/ClickHouse/ClickHouse/pull/4962 rel="external nofollow noreferrer" target=_blank>#4962</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Partially fix distributed_product_mode = local. It’s possible to allow columns of local tables in where/having/order by/… via table aliases. Throw exception if table does not have alias. There’s not possible to access to the columns without table aliases yet. <a href=https://github.com/ClickHouse/ClickHouse/pull/4986 rel="external nofollow noreferrer" target=_blank>#4986</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix potentially wrong result for <code class=syntax>SELECT DISTINCT</code> with <code class=syntax>JOIN</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5001 rel="external nofollow noreferrer" target=_blank>#5001</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer" target=_blank>#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-2>Build/Testing/Packaging Improvements<a class=headerlink href=#buildtestingpackaging-improvements-2 title="Permanent link"> </a></h4> <ul> <li>Fixed test failures when running clickhouse-server on different host <a href=https://github.com/ClickHouse/ClickHouse/pull/4713 rel="external nofollow noreferrer" target=_blank>#4713</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>clickhouse-test: Disable color control sequences in non tty environment. <a href=https://github.com/ClickHouse/ClickHouse/pull/4937 rel="external nofollow noreferrer" target=_blank>#4937</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>clickhouse-test: Allow use any test database (remove <code class=syntax>test.</code> qualification where it possible) <a href=https://github.com/ClickHouse/ClickHouse/pull/5008 rel="external nofollow noreferrer" target=_blank>#5008</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix ubsan errors <a href=https://github.com/ClickHouse/ClickHouse/pull/5037 rel="external nofollow noreferrer" target=_blank>#5037</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Yandex LFAlloc was added to ClickHouse to allocate MarkCache and UncompressedCache data in different ways to catch segfaults more reliable <a href=https://github.com/ClickHouse/ClickHouse/pull/4995 rel="external nofollow noreferrer" target=_blank>#4995</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Python util to help with backports and changelogs. <a href=https://github.com/ClickHouse/ClickHouse/pull/4949 rel="external nofollow noreferrer" target=_blank>#4949</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h2 id=clickhouse-release-19-5>ClickHouse Release 19.5<a class=headerlink href=#clickhouse-release-19-5 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-5-4-22-2019-05-13>ClickHouse Release 19.5.4.22, 2019-05-13<a class=headerlink href=#clickhouse-release-19-5-4-22-2019-05-13 title="Permanent link"> </a></h3> <h4 id=bug-fixes-5>Bug Fixes<a class=headerlink href=#bug-fixes-5 title="Permanent link"> </a></h4> <ul> <li>Fixed possible crash in bitmap* functions <a href=https://github.com/ClickHouse/ClickHouse/pull/5220 rel="external nofollow noreferrer" target=_blank>#5220</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5228 rel="external nofollow noreferrer" target=_blank>#5228</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>Andy Yang</a>)</li> <li>Fixed very rare data race condition that could happen when executing a query with UNION ALL involving at least two SELECTs from system.columns, system.tables, system.parts, system.parts_tables or tables of Merge family and performing ALTER of columns of the related tables concurrently. <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer" target=_blank>#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed error <code class=syntax>Set for IN is not created yet in case of using single LowCardinality column in the left part of IN</code>. This error happened if LowCardinality column was the part of primary key. #5031 <a href=https://github.com/ClickHouse/ClickHouse/pull/5154 rel="external nofollow noreferrer" target=_blank>#5154</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Modification of retention function: If a row satisfies both the first and NTH condition, only the first satisfied condition is added to the data state. Now all conditions that satisfy in a row of data are added to the data state. <a href=https://github.com/ClickHouse/ClickHouse/pull/5119 rel="external nofollow noreferrer" target=_blank>#5119</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li> </ul> <h3 id=clickhouse-release-19-5-3-8-2019-04-18>ClickHouse Release 19.5.3.8, 2019-04-18<a class=headerlink href=#clickhouse-release-19-5-3-8-2019-04-18 title="Permanent link"> </a></h3> <h4 id=bug-fixes-6>Bug Fixes<a class=headerlink href=#bug-fixes-6 title="Permanent link"> </a></h4> <ul> <li>Fixed type of setting <code class=syntax>max_partitions_per_insert_block</code> from boolean to UInt64. <a href=https://github.com/ClickHouse/ClickHouse/pull/5028 rel="external nofollow noreferrer" target=_blank>#5028</a> (<a href=https://github.com/mhsekhavat rel="external nofollow noreferrer" target=_blank>Mohammad Hossein Sekhavat</a>)</li> </ul> <h3 id=clickhouse-release-19-5-2-6-2019-04-15>ClickHouse Release 19.5.2.6, 2019-04-15<a class=headerlink href=#clickhouse-release-19-5-2-6-2019-04-15 title="Permanent link"> </a></h3> <h4 id=new-features-4>New Features<a class=headerlink href=#new-features-4 title="Permanent link"> </a></h4> <ul> <li><a href=https://github.com/intel/hyperscan rel="external nofollow noreferrer" target=_blank>Hyperscan</a> multiple regular expression matching was added (functions <code class=syntax>multiMatchAny</code>, <code class=syntax>multiMatchAnyIndex</code>, <code class=syntax>multiFuzzyMatchAny</code>, <code class=syntax>multiFuzzyMatchAnyIndex</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer" target=_blank>#4780</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/4841 rel="external nofollow noreferrer" target=_blank>#4841</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li><code class=syntax>multiSearchFirstPosition</code> function was added. <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer" target=_blank>#4780</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Implement the predefined expression filter per row for tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/4792 rel="external nofollow noreferrer" target=_blank>#4792</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>A new type of data skipping indices based on bloom filters (can be used for <code class=syntax>equal</code>, <code class=syntax>in</code> and <code class=syntax>like</code> functions). <a href=https://github.com/ClickHouse/ClickHouse/pull/4499 rel="external nofollow noreferrer" target=_blank>#4499</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Added <code class=syntax>ASOF JOIN</code> which allows to run queries that join to the most recent value known. <a href=https://github.com/ClickHouse/ClickHouse/pull/4774 rel="external nofollow noreferrer" target=_blank>#4774</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4867 rel="external nofollow noreferrer" target=_blank>#4867</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4863 rel="external nofollow noreferrer" target=_blank>#4863</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4875 rel="external nofollow noreferrer" target=_blank>#4875</a> (<a href=https://github.com/Gladdy rel="external nofollow noreferrer" target=_blank>Martijn Bakker</a>, <a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Rewrite multiple <code class=syntax>COMMA JOIN</code> to <code class=syntax>CROSS JOIN</code>. Then rewrite them to <code class=syntax>INNER JOIN</code> if possible. <a href=https://github.com/ClickHouse/ClickHouse/pull/4661 rel="external nofollow noreferrer" target=_blank>#4661</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=improvement-9>Improvement<a class=headerlink href=#improvement-9 title="Permanent link"> </a></h4> <ul> <li><code class=syntax>topK</code> and <code class=syntax>topKWeighted</code> now supports custom <code class=syntax>loadFactor</code> (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/4252 rel="external nofollow noreferrer" target=_blank>#4252</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4634 rel="external nofollow noreferrer" target=_blank>#4634</a> (<a href=https://github.com/kirillDanshin rel="external nofollow noreferrer" target=_blank>Kirill Danshin</a>)</li> <li>Allow to use <code class=syntax>parallel_replicas_count &gt; 1</code> even for tables without sampling (the setting is simply ignored for them). In previous versions it was lead to exception. <a href=https://github.com/ClickHouse/ClickHouse/pull/4637 rel="external nofollow noreferrer" target=_blank>#4637</a> (<a href=https://github.com/digitalist rel="external nofollow noreferrer" target=_blank>Alexey Elymanov</a>)</li> <li>Support for <code class=syntax>CREATE OR REPLACE VIEW</code>. Allow to create a view or set a new definition in a single statement. <a href=https://github.com/ClickHouse/ClickHouse/pull/4654 rel="external nofollow noreferrer" target=_blank>#4654</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li> <li><code class=syntax>Buffer</code> table engine now supports <code class=syntax>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4671 rel="external nofollow noreferrer" target=_blank>#4671</a> (<a href=https://github.com/LiuYangkuan rel="external nofollow noreferrer" target=_blank>Yangkuan Liu</a>)</li> <li>Add ability to start replicated table without metadata in zookeeper in <code class=syntax>readonly</code> mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/4691 rel="external nofollow noreferrer" target=_blank>#4691</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed flicker of progress bar in clickhouse-client. The issue was most noticeable when using <code class=syntax>FORMAT Null</code> with streaming queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/4811 rel="external nofollow noreferrer" target=_blank>#4811</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Allow to disable functions with <code class=syntax>hyperscan</code> library on per user basis to limit potentially excessive and uncontrolled resource usage. <a href=https://github.com/ClickHouse/ClickHouse/pull/4816 rel="external nofollow noreferrer" target=_blank>#4816</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add version number logging in all errors. <a href=https://github.com/ClickHouse/ClickHouse/pull/4824 rel="external nofollow noreferrer" target=_blank>#4824</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Added restriction to the <code class=syntax>multiMatch</code> functions which requires string size to fit into <code class=syntax>unsigned int</code>. Also added the number of arguments limit to the <code class=syntax>multiSearch</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/4834 rel="external nofollow noreferrer" target=_blank>#4834</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Improved usage of scratch space and error handling in Hyperscan. <a href=https://github.com/ClickHouse/ClickHouse/pull/4866 rel="external nofollow noreferrer" target=_blank>#4866</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Fill <code class=syntax>system.graphite_detentions</code> from a table config of <code class=syntax>*GraphiteMergeTree</code> engine tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/4584 rel="external nofollow noreferrer" target=_blank>#4584</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li> <li>Rename <code class=syntax>trigramDistance</code> function to <code class=syntax>ngramDistance</code> and add more functions with <code class=syntax>CaseInsensitive</code> and <code class=syntax>UTF</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4602 rel="external nofollow noreferrer" target=_blank>#4602</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Improved data skipping indices calculation. <a href=https://github.com/ClickHouse/ClickHouse/pull/4640 rel="external nofollow noreferrer" target=_blank>#4640</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Keep ordinary, <code class=syntax>DEFAULT</code>, <code class=syntax>MATERIALIZED</code> and <code class=syntax>ALIAS</code> columns in a single list (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/2867 rel="external nofollow noreferrer" target=_blank>#2867</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4707 rel="external nofollow noreferrer" target=_blank>#4707</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> </ul> <h4 id=bug-fix-26>Bug Fix<a class=headerlink href=#bug-fix-26 title="Permanent link"> </a></h4> <ul> <li>Avoid <code class=syntax>std::terminate</code> in case of memory allocation failure. Now <code class=syntax>std::bad_alloc</code> exception is thrown as expected. <a href=https://github.com/ClickHouse/ClickHouse/pull/4665 rel="external nofollow noreferrer" target=_blank>#4665</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixes capnproto reading from buffer. Sometimes files wasn’t loaded successfully by HTTP. <a href=https://github.com/ClickHouse/ClickHouse/pull/4674 rel="external nofollow noreferrer" target=_blank>#4674</a> (<a href=https://github.com/smirnov-vs rel="external nofollow noreferrer" target=_blank>Vladislav</a>)</li> <li>Fix error <code class=syntax>Unknown log entry type: 0</code> after <code class=syntax>OPTIMIZE TABLE FINAL</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4683 rel="external nofollow noreferrer" target=_blank>#4683</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Wrong arguments to <code class=syntax>hasAny</code> or <code class=syntax>hasAll</code> functions may lead to segfault. <a href=https://github.com/ClickHouse/ClickHouse/pull/4698 rel="external nofollow noreferrer" target=_blank>#4698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Deadlock may happen while executing <code class=syntax>DROP DATABASE dictionary</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4701 rel="external nofollow noreferrer" target=_blank>#4701</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix undefined behavior in <code class=syntax>median</code> and <code class=syntax>quantile</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/4702 rel="external nofollow noreferrer" target=_blank>#4702</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Fix compression level detection when <code class=syntax>network_compression_method</code> in lowercase. Broken in v19.1. <a href=https://github.com/ClickHouse/ClickHouse/pull/4706 rel="external nofollow noreferrer" target=_blank>#4706</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed ignorance of <code class=syntax>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/4658 rel="external nofollow noreferrer" target=_blank>#4658</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4718 rel="external nofollow noreferrer" target=_blank>#4718</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix <code class=syntax>histogram</code> function behaviour with <code class=syntax>Distributed</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/4741 rel="external nofollow noreferrer" target=_blank>#4741</a> (<a href=https://github.com/olegkv rel="external nofollow noreferrer" target=_blank>olegkv</a>)</li> <li>Fixed tsan report <code class=syntax>destroy of a locked mutex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4742 rel="external nofollow noreferrer" target=_blank>#4742</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/4758 rel="external nofollow noreferrer" target=_blank>#4758</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix recheck parts in <code class=syntax>ReplicatedMergeTreeAlterThread</code> in case of error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4772 rel="external nofollow noreferrer" target=_blank>#4772</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href=https://github.com/ClickHouse/ClickHouse/pull/4776 rel="external nofollow noreferrer" target=_blank>#4776</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Always backquote column names in metadata. Otherwise it’s impossible to create a table with column named <code class=syntax>index</code> (server won’t restart due to malformed <code class=syntax>ATTACH</code> query in metadata). <a href=https://github.com/ClickHouse/ClickHouse/pull/4782 rel="external nofollow noreferrer" target=_blank>#4782</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix crash in <code class=syntax>ALTER ... MODIFY ORDER BY</code> on <code class=syntax>Distributed</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/4790 rel="external nofollow noreferrer" target=_blank>#4790</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li> <li>Fix segfault in <code class=syntax>JOIN ON</code> with enabled <code class=syntax>enable_optimize_predicate_expression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4794 rel="external nofollow noreferrer" target=_blank>#4794</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href=https://github.com/ClickHouse/ClickHouse/pull/4808 rel="external nofollow noreferrer" target=_blank>#4808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fix crash of <code class=syntax>JOIN</code> on not-nullable vs nullable column. Fix <code class=syntax>NULLs</code> in right keys in <code class=syntax>ANY JOIN</code> + <code class=syntax>join_use_nulls</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4815 rel="external nofollow noreferrer" target=_blank>#4815</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix segmentation fault in <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed race condition in <code class=syntax>SELECT</code> from <code class=syntax>system.tables</code> if the table is renamed or altered concurrently. <a href=https://github.com/ClickHouse/ClickHouse/pull/4836 rel="external nofollow noreferrer" target=_blank>#4836</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed data race when fetching data part that is already obsolete. <a href=https://github.com/ClickHouse/ClickHouse/pull/4839 rel="external nofollow noreferrer" target=_blank>#4839</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed rare data race that can happen during <code class=syntax>RENAME</code> table of MergeTree family. <a href=https://github.com/ClickHouse/ClickHouse/pull/4844 rel="external nofollow noreferrer" target=_blank>#4844</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed segmentation fault in function <code class=syntax>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/4847 rel="external nofollow noreferrer" target=_blank>#4847</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>Lixiang Qian</a>)</li> <li>Fixed reading from <code class=syntax>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix crash in <code class=syntax>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer" target=_blank>#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix <code class=syntax>No message received</code> exception while fetching parts between replicas. <a href=https://github.com/ClickHouse/ClickHouse/pull/4856 rel="external nofollow noreferrer" target=_blank>#4856</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href=https://github.com/ClickHouse/ClickHouse/pull/4871 rel="external nofollow noreferrer" target=_blank>#4871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix a race condition during concurrent <code class=syntax>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/3421 rel="external nofollow noreferrer" target=_blank>#3421</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4592 rel="external nofollow noreferrer" target=_blank>#4592</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Fix incorrect result in <code class=syntax>FULL/RIGHT JOIN</code> with const column. <a href=https://github.com/ClickHouse/ClickHouse/pull/4723 rel="external nofollow noreferrer" target=_blank>#4723</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix duplicates in <code class=syntax>GLOBAL JOIN</code> with asterisk. <a href=https://github.com/ClickHouse/ClickHouse/pull/4705 rel="external nofollow noreferrer" target=_blank>#4705</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix parameter deduction in <code class=syntax>ALTER MODIFY</code> of column <code class=syntax>CODEC</code> when column type is not specified. <a href=https://github.com/ClickHouse/ClickHouse/pull/4883 rel="external nofollow noreferrer" target=_blank>#4883</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Functions <code class=syntax>cutQueryStringAndFragment()</code> and <code class=syntax>queryStringAndFragment()</code> now works correctly when <code class=syntax>URL</code> contains a fragment and no query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4894 rel="external nofollow noreferrer" target=_blank>#4894</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fix rare bug when setting <code class=syntax>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href=https://github.com/ClickHouse/ClickHouse/pull/4897 rel="external nofollow noreferrer" target=_blank>#4897</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix wrong argument types for aggregate functions with <code class=syntax>LowCardinality</code> arguments (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/4919 rel="external nofollow noreferrer" target=_blank>#4919</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4922 rel="external nofollow noreferrer" target=_blank>#4922</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix wrong name qualification in <code class=syntax>GLOBAL JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4969 rel="external nofollow noreferrer" target=_blank>#4969</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix function <code class=syntax>toISOWeek</code> result for year 1970. <a href=https://github.com/ClickHouse/ClickHouse/pull/4988 rel="external nofollow noreferrer" target=_blank>#4988</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix <code class=syntax>DROP</code>, <code class=syntax>TRUNCATE</code> and <code class=syntax>OPTIMIZE</code> queries duplication, when executed on <code class=syntax>ON CLUSTER</code> for <code class=syntax>ReplicatedMergeTree*</code> tables family. <a href=https://github.com/ClickHouse/ClickHouse/pull/4991 rel="external nofollow noreferrer" target=_blank>#4991</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> </ul> <h4 id=backward-incompatible-change-8>Backward Incompatible Change<a class=headerlink href=#backward-incompatible-change-8 title="Permanent link"> </a></h4> <ul> <li>Rename setting <code class=syntax>insert_sample_with_metadata</code> to setting <code class=syntax>input_format_defaults_for_omitted_fields</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4771 rel="external nofollow noreferrer" target=_blank>#4771</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Added setting <code class=syntax>max_partitions_per_insert_block</code> (with value 100 by default). If inserted block contains larger number of partitions, an exception is thrown. Set it to 0 if you want to remove the limit (not recommended). <a href=https://github.com/ClickHouse/ClickHouse/pull/4845 rel="external nofollow noreferrer" target=_blank>#4845</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Multi-search functions were renamed (<code class=syntax>multiPosition</code> to <code class=syntax>multiSearchAllPositions</code>, <code class=syntax>multiSearch</code> to <code class=syntax>multiSearchAny</code>, <code class=syntax>firstMatch</code> to <code class=syntax>multiSearchFirstIndex</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer" target=_blank>#4780</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> </ul> <h4 id=performance-improvement-6>Performance Improvement<a class=headerlink href=#performance-improvement-6 title="Permanent link"> </a></h4> <ul> <li>Optimize Volnitsky searcher by inlining, giving about 5-10% search improvement for queries with many needles or many similar bigrams. <a href=https://github.com/ClickHouse/ClickHouse/pull/4862 rel="external nofollow noreferrer" target=_blank>#4862</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Fix performance issue when setting <code class=syntax>use_uncompressed_cache</code> is greater than zero, which appeared when all read data contained in cache. <a href=https://github.com/ClickHouse/ClickHouse/pull/4913 rel="external nofollow noreferrer" target=_blank>#4913</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-10>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-10 title="Permanent link"> </a></h4> <ul> <li>Hardening debug build: more granular memory mappings and ASLR; add memory protection for mark cache and index. This allows to find more memory stomping bugs in case when ASan and MSan cannot do it. <a href=https://github.com/ClickHouse/ClickHouse/pull/4632 rel="external nofollow noreferrer" target=_blank>#4632</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add support for cmake variables <code class=syntax>ENABLE_PROTOBUF</code>, <code class=syntax>ENABLE_PARQUET</code> and <code class=syntax>ENABLE_BROTLI</code> which allows to enable/disable the above features (same as we can do for librdkafka, mysql, etc). <a href=https://github.com/ClickHouse/ClickHouse/pull/4669 rel="external nofollow noreferrer" target=_blank>#4669</a> (<a href=https://github.com/silviucpp rel="external nofollow noreferrer" target=_blank>Silviu Caragea</a>)</li> <li>Add ability to print process list and stacktraces of all threads if some queries are hung after test run. <a href=https://github.com/ClickHouse/ClickHouse/pull/4675 rel="external nofollow noreferrer" target=_blank>#4675</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add retries on <code class=syntax>Connection loss</code> error in <code class=syntax>clickhouse-test</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4682 rel="external nofollow noreferrer" target=_blank>#4682</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add freebsd build with vagrant and build with thread sanitizer to packager script. <a href=https://github.com/ClickHouse/ClickHouse/pull/4712 rel="external nofollow noreferrer" target=_blank>#4712</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4748 rel="external nofollow noreferrer" target=_blank>#4748</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Now user asked for password for user <code class=syntax>'default'</code> during installation. <a href=https://github.com/ClickHouse/ClickHouse/pull/4725 rel="external nofollow noreferrer" target=_blank>#4725</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Suppress warning in <code class=syntax>rdkafka</code> library. <a href=https://github.com/ClickHouse/ClickHouse/pull/4740 rel="external nofollow noreferrer" target=_blank>#4740</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Allow ability to build without ssl. <a href=https://github.com/ClickHouse/ClickHouse/pull/4750 rel="external nofollow noreferrer" target=_blank>#4750</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Add a way to launch clickhouse-server image from a custom user. <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer" target=_blank>#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li> <li>Upgrade contrib boost to 1.69. <a href=https://github.com/ClickHouse/ClickHouse/pull/4793 rel="external nofollow noreferrer" target=_blank>#4793</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Disable usage of <code class=syntax>mremap</code> when compiled with Thread Sanitizer. Surprisingly enough, TSan does not intercept <code class=syntax>mremap</code> (though it does intercept <code class=syntax>mmap</code>, <code class=syntax>munmap</code>) that leads to false positives. Fixed TSan report in stateful tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/4859 rel="external nofollow noreferrer" target=_blank>#4859</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add test checking using format schema via HTTP interface. <a href=https://github.com/ClickHouse/ClickHouse/pull/4864 rel="external nofollow noreferrer" target=_blank>#4864</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> </ul> <h2 id=clickhouse-release-19-4>ClickHouse Release 19.4<a class=headerlink href=#clickhouse-release-19-4 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-4-4-33-2019-04-17>ClickHouse Release 19.4.4.33, 2019-04-17<a class=headerlink href=#clickhouse-release-19-4-4-33-2019-04-17 title="Permanent link"> </a></h3> <h4 id=bug-fixes-7>Bug Fixes<a class=headerlink href=#bug-fixes-7 title="Permanent link"> </a></h4> <ul> <li>Avoid <code class=syntax>std::terminate</code> in case of memory allocation failure. Now <code class=syntax>std::bad_alloc</code> exception is thrown as expected. <a href=https://github.com/ClickHouse/ClickHouse/pull/4665 rel="external nofollow noreferrer" target=_blank>#4665</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixes capnproto reading from buffer. Sometimes files wasn’t loaded successfully by HTTP. <a href=https://github.com/ClickHouse/ClickHouse/pull/4674 rel="external nofollow noreferrer" target=_blank>#4674</a> (<a href=https://github.com/smirnov-vs rel="external nofollow noreferrer" target=_blank>Vladislav</a>)</li> <li>Fix error <code class=syntax>Unknown log entry type: 0</code> after <code class=syntax>OPTIMIZE TABLE FINAL</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4683 rel="external nofollow noreferrer" target=_blank>#4683</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Wrong arguments to <code class=syntax>hasAny</code> or <code class=syntax>hasAll</code> functions may lead to segfault. <a href=https://github.com/ClickHouse/ClickHouse/pull/4698 rel="external nofollow noreferrer" target=_blank>#4698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Deadlock may happen while executing <code class=syntax>DROP DATABASE dictionary</code> query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4701 rel="external nofollow noreferrer" target=_blank>#4701</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix undefined behavior in <code class=syntax>median</code> and <code class=syntax>quantile</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/4702 rel="external nofollow noreferrer" target=_blank>#4702</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> <li>Fix compression level detection when <code class=syntax>network_compression_method</code> in lowercase. Broken in v19.1. <a href=https://github.com/ClickHouse/ClickHouse/pull/4706 rel="external nofollow noreferrer" target=_blank>#4706</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed ignorance of <code class=syntax>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> setting (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/4658 rel="external nofollow noreferrer" target=_blank>#4658</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4718 rel="external nofollow noreferrer" target=_blank>#4718</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fix <code class=syntax>histogram</code> function behaviour with <code class=syntax>Distributed</code> tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/4741 rel="external nofollow noreferrer" target=_blank>#4741</a> (<a href=https://github.com/olegkv rel="external nofollow noreferrer" target=_blank>olegkv</a>)</li> <li>Fixed tsan report <code class=syntax>destroy of a locked mutex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4742 rel="external nofollow noreferrer" target=_blank>#4742</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed TSan report on shutdown due to race condition in system logs usage. Fixed potential use-after-free on shutdown when part_log is enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/4758 rel="external nofollow noreferrer" target=_blank>#4758</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix recheck parts in <code class=syntax>ReplicatedMergeTreeAlterThread</code> in case of error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4772 rel="external nofollow noreferrer" target=_blank>#4772</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Arithmetic operations on intermediate aggregate function states were not working for constant arguments (such as subquery results). <a href=https://github.com/ClickHouse/ClickHouse/pull/4776 rel="external nofollow noreferrer" target=_blank>#4776</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Always backquote column names in metadata. Otherwise it’s impossible to create a table with column named <code class=syntax>index</code> (server won’t restart due to malformed <code class=syntax>ATTACH</code> query in metadata). <a href=https://github.com/ClickHouse/ClickHouse/pull/4782 rel="external nofollow noreferrer" target=_blank>#4782</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix crash in <code class=syntax>ALTER ... MODIFY ORDER BY</code> on <code class=syntax>Distributed</code> table. <a href=https://github.com/ClickHouse/ClickHouse/pull/4790 rel="external nofollow noreferrer" target=_blank>#4790</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li> <li>Fix segfault in <code class=syntax>JOIN ON</code> with enabled <code class=syntax>enable_optimize_predicate_expression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4794 rel="external nofollow noreferrer" target=_blank>#4794</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fix bug with adding an extraneous row after consuming a protobuf message from Kafka. <a href=https://github.com/ClickHouse/ClickHouse/pull/4808 rel="external nofollow noreferrer" target=_blank>#4808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fix segmentation fault in <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed race condition in <code class=syntax>SELECT</code> from <code class=syntax>system.tables</code> if the table is renamed or altered concurrently. <a href=https://github.com/ClickHouse/ClickHouse/pull/4836 rel="external nofollow noreferrer" target=_blank>#4836</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed data race when fetching data part that is already obsolete. <a href=https://github.com/ClickHouse/ClickHouse/pull/4839 rel="external nofollow noreferrer" target=_blank>#4839</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed rare data race that can happen during <code class=syntax>RENAME</code> table of MergeTree family. <a href=https://github.com/ClickHouse/ClickHouse/pull/4844 rel="external nofollow noreferrer" target=_blank>#4844</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed segmentation fault in function <code class=syntax>arrayIntersect</code>. Segmentation fault could happen if function was called with mixed constant and ordinary arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/4847 rel="external nofollow noreferrer" target=_blank>#4847</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>Lixiang Qian</a>)</li> <li>Fixed reading from <code class=syntax>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix <code class=syntax>No message received</code> exception while fetching parts between replicas. <a href=https://github.com/ClickHouse/ClickHouse/pull/4856 rel="external nofollow noreferrer" target=_blank>#4856</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>arrayIntersect</code> function wrong result in case of several repeated values in single array. <a href=https://github.com/ClickHouse/ClickHouse/pull/4871 rel="external nofollow noreferrer" target=_blank>#4871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix a race condition during concurrent <code class=syntax>ALTER COLUMN</code> queries that could lead to a server crash (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/3421 rel="external nofollow noreferrer" target=_blank>#3421</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4592 rel="external nofollow noreferrer" target=_blank>#4592</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Fix parameter deduction in <code class=syntax>ALTER MODIFY</code> of column <code class=syntax>CODEC</code> when column type is not specified. <a href=https://github.com/ClickHouse/ClickHouse/pull/4883 rel="external nofollow noreferrer" target=_blank>#4883</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Functions <code class=syntax>cutQueryStringAndFragment()</code> and <code class=syntax>queryStringAndFragment()</code> now works correctly when <code class=syntax>URL</code> contains a fragment and no query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4894 rel="external nofollow noreferrer" target=_blank>#4894</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Fix rare bug when setting <code class=syntax>min_bytes_to_use_direct_io</code> is greater than zero, which occures when thread have to seek backward in column file. <a href=https://github.com/ClickHouse/ClickHouse/pull/4897 rel="external nofollow noreferrer" target=_blank>#4897</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix wrong argument types for aggregate functions with <code class=syntax>LowCardinality</code> arguments (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/4919 rel="external nofollow noreferrer" target=_blank>#4919</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4922 rel="external nofollow noreferrer" target=_blank>#4922</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fix function <code class=syntax>toISOWeek</code> result for year 1970. <a href=https://github.com/ClickHouse/ClickHouse/pull/4988 rel="external nofollow noreferrer" target=_blank>#4988</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix <code class=syntax>DROP</code>, <code class=syntax>TRUNCATE</code> and <code class=syntax>OPTIMIZE</code> queries duplication, when executed on <code class=syntax>ON CLUSTER</code> for <code class=syntax>ReplicatedMergeTree*</code> tables family. <a href=https://github.com/ClickHouse/ClickHouse/pull/4991 rel="external nofollow noreferrer" target=_blank>#4991</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> </ul> <h4 id=improvements-2>Improvements<a class=headerlink href=#improvements-2 title="Permanent link"> </a></h4> <ul> <li>Keep ordinary, <code class=syntax>DEFAULT</code>, <code class=syntax>MATERIALIZED</code> and <code class=syntax>ALIAS</code> columns in a single list (fixes issue <a href=https://github.com/ClickHouse/ClickHouse/issues/2867 rel="external nofollow noreferrer" target=_blank>#2867</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4707 rel="external nofollow noreferrer" target=_blank>#4707</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> </ul> <h3 id=clickhouse-release-19-4-3-11-2019-04-02>ClickHouse Release 19.4.3.11, 2019-04-02<a class=headerlink href=#clickhouse-release-19-4-3-11-2019-04-02 title="Permanent link"> </a></h3> <h4 id=bug-fixes-8>Bug Fixes<a class=headerlink href=#bug-fixes-8 title="Permanent link"> </a></h4> <ul> <li>Fix crash in <code class=syntax>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer" target=_blank>#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix segmentation fault in <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-11>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-11 title="Permanent link"> </a></h4> <ul> <li>Add a way to launch clickhouse-server image from a custom user. <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer" target=_blank>#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li> </ul> <h3 id=clickhouse-release-19-4-2-7-2019-03-30>ClickHouse Release 19.4.2.7, 2019-03-30<a class=headerlink href=#clickhouse-release-19-4-2-7-2019-03-30 title="Permanent link"> </a></h3> <h4 id=bug-fixes-9>Bug Fixes<a class=headerlink href=#bug-fixes-9 title="Permanent link"> </a></h4> <ul> <li>Fixed reading from <code class=syntax>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> </ul> <h3 id=clickhouse-release-19-4-1-3-2019-03-19>ClickHouse Release 19.4.1.3, 2019-03-19<a class=headerlink href=#clickhouse-release-19-4-1-3-2019-03-19 title="Permanent link"> </a></h3> <h4 id=bug-fixes-10>Bug Fixes<a class=headerlink href=#bug-fixes-10 title="Permanent link"> </a></h4> <ul> <li>Fixed remote queries which contain both <code class=syntax>LIMIT BY</code> and <code class=syntax>LIMIT</code>. Previously, if <code class=syntax>LIMIT BY</code> and <code class=syntax>LIMIT</code> were used for remote query, <code class=syntax>LIMIT</code> could happen before <code class=syntax>LIMIT BY</code>, which led to too filtered result. <a href=https://github.com/ClickHouse/ClickHouse/pull/4708 rel="external nofollow noreferrer" target=_blank>#4708</a> (<a href=https://github.com/kvap rel="external nofollow noreferrer" target=_blank>Constantin S. Pan</a>)</li> </ul> <h3 id=clickhouse-release-19-4-0-49-2019-03-09>ClickHouse Release 19.4.0.49, 2019-03-09<a class=headerlink href=#clickhouse-release-19-4-0-49-2019-03-09 title="Permanent link"> </a></h3> <h4 id=new-features-5>New Features<a class=headerlink href=#new-features-5 title="Permanent link"> </a></h4> <ul> <li>Added full support for <code class=syntax>Protobuf</code> format (input and output, nested data structures). <a href=https://github.com/ClickHouse/ClickHouse/pull/4174 rel="external nofollow noreferrer" target=_blank>#4174</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4493 rel="external nofollow noreferrer" target=_blank>#4493</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Added bitmap functions with Roaring Bitmaps. <a href=https://github.com/ClickHouse/ClickHouse/pull/4207 rel="external nofollow noreferrer" target=_blank>#4207</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>Andy Yang</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/4568 rel="external nofollow noreferrer" target=_blank>#4568</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Parquet format support. <a href=https://github.com/ClickHouse/ClickHouse/pull/4448 rel="external nofollow noreferrer" target=_blank>#4448</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>N-gram distance was added for fuzzy string comparison. It is similar to q-gram metrics in R language. <a href=https://github.com/ClickHouse/ClickHouse/pull/4466 rel="external nofollow noreferrer" target=_blank>#4466</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Combine rules for graphite rollup from dedicated aggregation and retention patterns. <a href=https://github.com/ClickHouse/ClickHouse/pull/4426 rel="external nofollow noreferrer" target=_blank>#4426</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li> <li>Added <code class=syntax>max_execution_speed</code> and <code class=syntax>max_execution_speed_bytes</code> to limit resource usage. Added <code class=syntax>min_execution_speed_bytes</code> setting to complement the <code class=syntax>min_execution_speed</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4430 rel="external nofollow noreferrer" target=_blank>#4430</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Implemented function <code class=syntax>flatten</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4555 rel="external nofollow noreferrer" target=_blank>#4555</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4409 rel="external nofollow noreferrer" target=_blank>#4409</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>, <a href=https://github.com/kzon rel="external nofollow noreferrer" target=_blank>kzon</a>)</li> <li>Added functions <code class=syntax>arrayEnumerateDenseRanked</code> and <code class=syntax>arrayEnumerateUniqRanked</code> (it’s like <code class=syntax>arrayEnumerateUniq</code> but allows to fine tune array depth to look inside multidimensional arrays). <a href=https://github.com/ClickHouse/ClickHouse/pull/4475 rel="external nofollow noreferrer" target=_blank>#4475</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/4601 rel="external nofollow noreferrer" target=_blank>#4601</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Multiple JOINS with some restrictions: no asterisks, no complex aliases in ON/WHERE/GROUP BY/… <a href=https://github.com/ClickHouse/ClickHouse/pull/4462 rel="external nofollow noreferrer" target=_blank>#4462</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=bug-fixes-11>Bug Fixes<a class=headerlink href=#bug-fixes-11 title="Permanent link"> </a></h4> <ul> <li>This release also contains all bug fixes from 19.3 and 19.1.</li> <li>Fixed bug in data skipping indices: order of granules after INSERT was incorrect. <a href=https://github.com/ClickHouse/ClickHouse/pull/4407 rel="external nofollow noreferrer" target=_blank>#4407</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Fixed <code class=syntax>set</code> index for <code class=syntax>Nullable</code> and <code class=syntax>LowCardinality</code> columns. Before it, <code class=syntax>set</code> index with <code class=syntax>Nullable</code> or <code class=syntax>LowCardinality</code> column led to error <code class=syntax>Data type must be deserialized with multiple streams</code> while selecting. <a href=https://github.com/ClickHouse/ClickHouse/pull/4594 rel="external nofollow noreferrer" target=_blank>#4594</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Correctly set update_time on full <code class=syntax>executable</code> dictionary update. <a href=https://github.com/ClickHouse/ClickHouse/pull/4551 rel="external nofollow noreferrer" target=_blank>#4551</a> (<a href=https://github.com/temoon rel="external nofollow noreferrer" target=_blank>Tema Novikov</a>)</li> <li>Fix broken progress bar in 19.3. <a href=https://github.com/ClickHouse/ClickHouse/pull/4627 rel="external nofollow noreferrer" target=_blank>#4627</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Fixed inconsistent values of MemoryTracker when memory region was shrinked, in certain cases. <a href=https://github.com/ClickHouse/ClickHouse/pull/4619 rel="external nofollow noreferrer" target=_blank>#4619</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed undefined behaviour in ThreadPool. <a href=https://github.com/ClickHouse/ClickHouse/pull/4612 rel="external nofollow noreferrer" target=_blank>#4612</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed a very rare crash with the message <code class=syntax>mutex lock failed: Invalid argument</code> that could happen when a MergeTree table was dropped concurrently with a SELECT. <a href=https://github.com/ClickHouse/ClickHouse/pull/4608 rel="external nofollow noreferrer" target=_blank>#4608</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>ODBC driver compatibility with <code class=syntax>LowCardinality</code> data type. <a href=https://github.com/ClickHouse/ClickHouse/pull/4381 rel="external nofollow noreferrer" target=_blank>#4381</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>FreeBSD: Fixup for <code class=syntax>AIOcontextPool: Found io_event with unknown id 0</code> error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4438 rel="external nofollow noreferrer" target=_blank>#4438</a> (<a href=https://github.com/urgordeadbeef rel="external nofollow noreferrer" target=_blank>urgordeadbeef</a>)</li> <li><code class=syntax>system.part_log</code> table was created regardless to configuration. <a href=https://github.com/ClickHouse/ClickHouse/pull/4483 rel="external nofollow noreferrer" target=_blank>#4483</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix undefined behaviour in <code class=syntax>dictIsIn</code> function for cache dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/4515 rel="external nofollow noreferrer" target=_blank>#4515</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed a deadlock when a SELECT query locks the same table multiple times (e.g. from different threads or when executing multiple subqueries) and there is a concurrent DDL query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4535 rel="external nofollow noreferrer" target=_blank>#4535</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Disable compile_expressions by default until we get own <code class=syntax>llvm</code> contrib and can test it with <code class=syntax>clang</code> and <code class=syntax>asan</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4579 rel="external nofollow noreferrer" target=_blank>#4579</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Prevent <code class=syntax>std::terminate</code> when <code class=syntax>invalidate_query</code> for <code class=syntax>clickhouse</code> external dictionary source has returned wrong resultset (empty or more than one row or more than one column). Fixed issue when the <code class=syntax>invalidate_query</code> was performed every five seconds regardless to the <code class=syntax>lifetime</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4583 rel="external nofollow noreferrer" target=_blank>#4583</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Avoid deadlock when the <code class=syntax>invalidate_query</code> for a dictionary with <code class=syntax>clickhouse</code> source was involving <code class=syntax>system.dictionaries</code> table or <code class=syntax>Dictionaries</code> database (rare case). <a href=https://github.com/ClickHouse/ClickHouse/pull/4599 rel="external nofollow noreferrer" target=_blank>#4599</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixes for CROSS JOIN with empty WHERE. <a href=https://github.com/ClickHouse/ClickHouse/pull/4598 rel="external nofollow noreferrer" target=_blank>#4598</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed segfault in function “replicate” when constant argument is passed. <a href=https://github.com/ClickHouse/ClickHouse/pull/4603 rel="external nofollow noreferrer" target=_blank>#4603</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix lambda function with predicate optimizer. <a href=https://github.com/ClickHouse/ClickHouse/pull/4408 rel="external nofollow noreferrer" target=_blank>#4408</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Multiple JOINs multiple fixes. <a href=https://github.com/ClickHouse/ClickHouse/pull/4595 rel="external nofollow noreferrer" target=_blank>#4595</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=improvements-3>Improvements<a class=headerlink href=#improvements-3 title="Permanent link"> </a></h4> <ul> <li>Support aliases in JOIN ON section for right table columns. <a href=https://github.com/ClickHouse/ClickHouse/pull/4412 rel="external nofollow noreferrer" target=_blank>#4412</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Result of multiple JOINs need correct result names to be used in subselects. Replace flat aliases with source names in result. <a href=https://github.com/ClickHouse/ClickHouse/pull/4474 rel="external nofollow noreferrer" target=_blank>#4474</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Improve push-down logic for joined statements. <a href=https://github.com/ClickHouse/ClickHouse/pull/4387 rel="external nofollow noreferrer" target=_blank>#4387</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h4 id=performance-improvements-3>Performance Improvements<a class=headerlink href=#performance-improvements-3 title="Permanent link"> </a></h4> <ul> <li>Improved heuristics of “move to PREWHERE” optimization. <a href=https://github.com/ClickHouse/ClickHouse/pull/4405 rel="external nofollow noreferrer" target=_blank>#4405</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Use proper lookup tables that uses HashTable’s API for 8-bit and 16-bit keys. <a href=https://github.com/ClickHouse/ClickHouse/pull/4536 rel="external nofollow noreferrer" target=_blank>#4536</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Improved performance of string comparison. <a href=https://github.com/ClickHouse/ClickHouse/pull/4564 rel="external nofollow noreferrer" target=_blank>#4564</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Cleanup distributed DDL queue in a separate thread so that it doesn’t slow down the main loop that processes distributed DDL tasks. <a href=https://github.com/ClickHouse/ClickHouse/pull/4502 rel="external nofollow noreferrer" target=_blank>#4502</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>When <code class=syntax>min_bytes_to_use_direct_io</code> is set to 1, not every file was opened with O_DIRECT mode because the data size to read was sometimes underestimated by the size of one compressed block. <a href=https://github.com/ClickHouse/ClickHouse/pull/4526 rel="external nofollow noreferrer" target=_blank>#4526</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-12>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-12 title="Permanent link"> </a></h4> <ul> <li>Added support for clang-9 <a href=https://github.com/ClickHouse/ClickHouse/pull/4604 rel="external nofollow noreferrer" target=_blank>#4604</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix wrong <code class=syntax>__asm__</code> instructions (again) <a href=https://github.com/ClickHouse/ClickHouse/pull/4621 rel="external nofollow noreferrer" target=_blank>#4621</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer" target=_blank>Konstantin Podshumok</a>)</li> <li>Add ability to specify settings for <code class=syntax>clickhouse-performance-test</code> from command line. <a href=https://github.com/ClickHouse/ClickHouse/pull/4437 rel="external nofollow noreferrer" target=_blank>#4437</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add dictionaries tests to integration tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/4477 rel="external nofollow noreferrer" target=_blank>#4477</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Added queries from the benchmark on the website to automated performance tests. <a href=https://github.com/ClickHouse/ClickHouse/pull/4496 rel="external nofollow noreferrer" target=_blank>#4496</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>xxhash.h</code> does not exist in external lz4 because it is an implementation detail and its symbols are namespaced with <code class=syntax>XXH_NAMESPACE</code> macro. When lz4 is external, xxHash has to be external too, and the dependents have to link to it. <a href=https://github.com/ClickHouse/ClickHouse/pull/4495 rel="external nofollow noreferrer" target=_blank>#4495</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Orivej Desh</a>)</li> <li>Fixed a case when <code class=syntax>quantileTiming</code> aggregate function can be called with negative or floating point argument (this fixes fuzz test with undefined behaviour sanitizer). <a href=https://github.com/ClickHouse/ClickHouse/pull/4506 rel="external nofollow noreferrer" target=_blank>#4506</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Spelling error correction. <a href=https://github.com/ClickHouse/ClickHouse/pull/4531 rel="external nofollow noreferrer" target=_blank>#4531</a> (<a href=https://github.com/sdk2 rel="external nofollow noreferrer" target=_blank>sdk2</a>)</li> <li>Fix compilation on Mac. <a href=https://github.com/ClickHouse/ClickHouse/pull/4371 rel="external nofollow noreferrer" target=_blank>#4371</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Build fixes for FreeBSD and various unusual build configurations. <a href=https://github.com/ClickHouse/ClickHouse/pull/4444 rel="external nofollow noreferrer" target=_blank>#4444</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h2 id=clickhouse-release-19-3>ClickHouse Release 19.3<a class=headerlink href=#clickhouse-release-19-3 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-3-9-1-2019-04-02>ClickHouse Release 19.3.9.1, 2019-04-02<a class=headerlink href=#clickhouse-release-19-3-9-1-2019-04-02 title="Permanent link"> </a></h3> <h4 id=bug-fixes-12>Bug Fixes<a class=headerlink href=#bug-fixes-12 title="Permanent link"> </a></h4> <ul> <li>Fix crash in <code class=syntax>FULL/RIGHT JOIN</code> when we joining on nullable vs not nullable. <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer" target=_blank>#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fix segmentation fault in <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed reading from <code class=syntax>Array(LowCardinality)</code> column in rare case when column contained a long sequence of empty arrays. <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvement-13>Build/Testing/Packaging Improvement<a class=headerlink href=#buildtestingpackaging-improvement-13 title="Permanent link"> </a></h4> <ul> <li>Add a way to launch clickhouse-server image from a custom user <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer" target=_blank>#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li> </ul> <h3 id=clickhouse-release-19-3-7-2019-03-12>ClickHouse Release 19.3.7, 2019-03-12<a class=headerlink href=#clickhouse-release-19-3-7-2019-03-12 title="Permanent link"> </a></h3> <h4 id=bug-fixes-13>Bug Fixes<a class=headerlink href=#bug-fixes-13 title="Permanent link"> </a></h4> <ul> <li>Fixed error in #3920. This error manifests itself as random cache corruption (messages <code class=syntax>Unknown codec family code</code>, <code class=syntax>Cannot seek through file</code>) and segfaults. This bug first appeared in version 19.1 and is present in versions up to 19.1.10 and 19.3.6. <a href=https://github.com/ClickHouse/ClickHouse/pull/4623 rel="external nofollow noreferrer" target=_blank>#4623</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-3-6-2019-03-02>ClickHouse Release 19.3.6, 2019-03-02<a class=headerlink href=#clickhouse-release-19-3-6-2019-03-02 title="Permanent link"> </a></h3> <h4 id=bug-fixes-14>Bug Fixes<a class=headerlink href=#bug-fixes-14 title="Permanent link"> </a></h4> <ul> <li>When there are more than 1000 threads in a thread pool, <code class=syntax>std::terminate</code> may happen on thread exit. <a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4485 rel="external nofollow noreferrer" target=_blank>#4485</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4505 rel="external nofollow noreferrer" target=_blank>#4505</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Now it’s possible to create <code class=syntax>ReplicatedMergeTree*</code> tables with comments on columns without defaults and tables with columns codecs without comments and defaults. Also fix comparison of codecs. <a href=https://github.com/ClickHouse/ClickHouse/pull/4523 rel="external nofollow noreferrer" target=_blank>#4523</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed crash on JOIN with array or tuple. <a href=https://github.com/ClickHouse/ClickHouse/pull/4552 rel="external nofollow noreferrer" target=_blank>#4552</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed crash in clickhouse-copier with the message <code class=syntax>ThreadStatus not created</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4540 rel="external nofollow noreferrer" target=_blank>#4540</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed hangup on server shutdown if distributed DDLs were used. <a href=https://github.com/ClickHouse/ClickHouse/pull/4472 rel="external nofollow noreferrer" target=_blank>#4472</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Incorrect column numbers were printed in error message about text format parsing for columns with number greater than 10. <a href=https://github.com/ClickHouse/ClickHouse/pull/4484 rel="external nofollow noreferrer" target=_blank>#4484</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-3>Build/Testing/Packaging Improvements<a class=headerlink href=#buildtestingpackaging-improvements-3 title="Permanent link"> </a></h4> <ul> <li>Fixed build with AVX enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/4527 rel="external nofollow noreferrer" target=_blank>#4527</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Enable extended accounting and IO accounting based on good known version instead of kernel under which it is compiled. <a href=https://github.com/ClickHouse/ClickHouse/pull/4541 rel="external nofollow noreferrer" target=_blank>#4541</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>nvartolomei</a>)</li> <li>Allow to skip setting of core_dump.size_limit, warning instead of throw if limit set fail. <a href=https://github.com/ClickHouse/ClickHouse/pull/4473 rel="external nofollow noreferrer" target=_blank>#4473</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Removed the <code class=syntax>inline</code> tags of <code class=syntax>void readBinary(...)</code> in <code class=syntax>Field.cpp</code>. Also merged redundant <code class=syntax>namespace DB</code> blocks. <a href=https://github.com/ClickHouse/ClickHouse/pull/4530 rel="external nofollow noreferrer" target=_blank>#4530</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li> </ul> <h3 id=clickhouse-release-19-3-5-2019-02-21>ClickHouse Release 19.3.5, 2019-02-21<a class=headerlink href=#clickhouse-release-19-3-5-2019-02-21 title="Permanent link"> </a></h3> <h4 id=bug-fixes-15>Bug Fixes<a class=headerlink href=#bug-fixes-15 title="Permanent link"> </a></h4> <ul> <li>Fixed bug with large http insert queries processing. <a href=https://github.com/ClickHouse/ClickHouse/pull/4454 rel="external nofollow noreferrer" target=_blank>#4454</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed backward incompatibility with old versions due to wrong implementation of <code class=syntax>send_logs_level</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/4445 rel="external nofollow noreferrer" target=_blank>#4445</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed backward incompatibility of table function <code class=syntax>remote</code> introduced with column comments. <a href=https://github.com/ClickHouse/ClickHouse/pull/4446 rel="external nofollow noreferrer" target=_blank>#4446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-3-4-2019-02-16>ClickHouse Release 19.3.4, 2019-02-16<a class=headerlink href=#clickhouse-release-19-3-4-2019-02-16 title="Permanent link"> </a></h3> <h4 id=improvements-4>Improvements<a class=headerlink href=#improvements-4 title="Permanent link"> </a></h4> <ul> <li>Table index size is not accounted for memory limits when doing <code class=syntax>ATTACH TABLE</code> query. Avoided the possibility that a table cannot be attached after being detached. <a href=https://github.com/ClickHouse/ClickHouse/pull/4396 rel="external nofollow noreferrer" target=_blank>#4396</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Slightly raised up the limit on max string and array size received from ZooKeeper. It allows to continue to work with increased size of <code class=syntax>CLIENT_JVMFLAGS=-Djute.maxbuffer=...</code> on ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/pull/4398 rel="external nofollow noreferrer" target=_blank>#4398</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Allow to repair abandoned replica even if it already has huge number of nodes in its queue. <a href=https://github.com/ClickHouse/ClickHouse/pull/4399 rel="external nofollow noreferrer" target=_blank>#4399</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Add one required argument to <code class=syntax>SET</code> index (max stored rows number). <a href=https://github.com/ClickHouse/ClickHouse/pull/4386 rel="external nofollow noreferrer" target=_blank>#4386</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> </ul> <h4 id=bug-fixes-16>Bug Fixes<a class=headerlink href=#bug-fixes-16 title="Permanent link"> </a></h4> <ul> <li>Fixed <code class=syntax>WITH ROLLUP</code> result for group by single <code class=syntax>LowCardinality</code> key. <a href=https://github.com/ClickHouse/ClickHouse/pull/4384 rel="external nofollow noreferrer" target=_blank>#4384</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Fixed bug in the set index (dropping a granule if it contains more than <code class=syntax>max_rows</code> rows). <a href=https://github.com/ClickHouse/ClickHouse/pull/4386 rel="external nofollow noreferrer" target=_blank>#4386</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>A lot of FreeBSD build fixes. <a href=https://github.com/ClickHouse/ClickHouse/pull/4397 rel="external nofollow noreferrer" target=_blank>#4397</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed aliases substitution in queries with subquery containing same alias (issue <a href=https://github.com/ClickHouse/ClickHouse/issues/4110 rel="external nofollow noreferrer" target=_blank>#4110</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4351 rel="external nofollow noreferrer" target=_blank>#4351</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-4>Build/Testing/Packaging Improvements<a class=headerlink href=#buildtestingpackaging-improvements-4 title="Permanent link"> </a></h4> <ul> <li>Add ability to run <code class=syntax>clickhouse-server</code> for stateless tests in docker image. <a href=https://github.com/ClickHouse/ClickHouse/pull/4347 rel="external nofollow noreferrer" target=_blank>#4347</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> </ul> <h3 id=clickhouse-release-19-3-3-2019-02-13>ClickHouse Release 19.3.3, 2019-02-13<a class=headerlink href=#clickhouse-release-19-3-3-2019-02-13 title="Permanent link"> </a></h3> <h4 id=new-features-6>New Features<a class=headerlink href=#new-features-6 title="Permanent link"> </a></h4> <ul> <li>Added the <code class=syntax>KILL MUTATION</code> statement that allows removing mutations that are for some reasons stuck. Added <code class=syntax>latest_failed_part</code>, <code class=syntax>latest_fail_time</code>, <code class=syntax>latest_fail_reason</code> fields to the <code class=syntax>system.mutations</code> table for easier troubleshooting. <a href=https://github.com/ClickHouse/ClickHouse/pull/4287 rel="external nofollow noreferrer" target=_blank>#4287</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Added aggregate function <code class=syntax>entropy</code> which computes Shannon entropy. <a href=https://github.com/ClickHouse/ClickHouse/pull/4238 rel="external nofollow noreferrer" target=_blank>#4238</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li> <li>Added ability to send queries <code class=syntax>INSERT INTO tbl VALUES (....</code> to server without splitting on <code class=syntax>query</code> and <code class=syntax>data</code> parts. <a href=https://github.com/ClickHouse/ClickHouse/pull/4301 rel="external nofollow noreferrer" target=_blank>#4301</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Generic implementation of <code class=syntax>arrayWithConstant</code> function was added. <a href=https://github.com/ClickHouse/ClickHouse/pull/4322 rel="external nofollow noreferrer" target=_blank>#4322</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Implemented <code class=syntax>NOT BETWEEN</code> comparison operator. <a href=https://github.com/ClickHouse/ClickHouse/pull/4228 rel="external nofollow noreferrer" target=_blank>#4228</a> (<a href=https://github.com/nezed rel="external nofollow noreferrer" target=_blank>Dmitry Naumov</a>)</li> <li>Implement <code class=syntax>sumMapFiltered</code> in order to be able to limit the number of keys for which values will be summed by <code class=syntax>sumMap</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4129 rel="external nofollow noreferrer" target=_blank>#4129</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li> <li>Added support of <code class=syntax>Nullable</code> types in <code class=syntax>mysql</code> table function. <a href=https://github.com/ClickHouse/ClickHouse/pull/4198 rel="external nofollow noreferrer" target=_blank>#4198</a> (<a href=https://github.com/edonin rel="external nofollow noreferrer" target=_blank>Emmanuel Donin de Rosière</a>)</li> <li>Support for arbitrary constant expressions in <code class=syntax>LIMIT</code> clause. <a href=https://github.com/ClickHouse/ClickHouse/pull/4246 rel="external nofollow noreferrer" target=_blank>#4246</a> (<a href=https://github.com/k3box rel="external nofollow noreferrer" target=_blank>k3box</a>)</li> <li>Added <code class=syntax>topKWeighted</code> aggregate function that takes additional argument with (unsigned integer) weight. <a href=https://github.com/ClickHouse/ClickHouse/pull/4245 rel="external nofollow noreferrer" target=_blank>#4245</a> (<a href=https://github.com/andrewgolman rel="external nofollow noreferrer" target=_blank>Andrew Golman</a>)</li> <li><code class=syntax>StorageJoin</code> now supports <code class=syntax>join_any_take_last_row</code> setting that allows overwriting existing values of the same key. <a href=https://github.com/ClickHouse/ClickHouse/pull/3973 rel="external nofollow noreferrer" target=_blank>#3973</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a></li> <li>Added function <code class=syntax>toStartOfInterval</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4304 rel="external nofollow noreferrer" target=_blank>#4304</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Added <code class=syntax>RowBinaryWithNamesAndTypes</code> format. <a href=https://github.com/ClickHouse/ClickHouse/pull/4200 rel="external nofollow noreferrer" target=_blank>#4200</a> (<a href=https://github.com/DarkWanderer rel="external nofollow noreferrer" target=_blank>Oleg V. Kozlyuk</a>)</li> <li>Added <code class=syntax>IPv4</code> and <code class=syntax>IPv6</code> data types. More effective implementations of <code class=syntax>IPv*</code> functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3669 rel="external nofollow noreferrer" target=_blank>#3669</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Vasily Nemkov</a>)</li> <li>Added function <code class=syntax>toStartOfTenMinutes()</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4298 rel="external nofollow noreferrer" target=_blank>#4298</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Added <code class=syntax>Protobuf</code> output format. <a href=https://github.com/ClickHouse/ClickHouse/pull/4005 rel="external nofollow noreferrer" target=_blank>#4005</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4158 rel="external nofollow noreferrer" target=_blank>#4158</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>Vitaly Baranov</a>)</li> <li>Added brotli support for HTTP interface for data import (INSERTs). <a href=https://github.com/ClickHouse/ClickHouse/pull/4235 rel="external nofollow noreferrer" target=_blank>#4235</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>Mikhail</a>)</li> <li>Added hints while user make typo in function name or type in command line client. <a href=https://github.com/ClickHouse/ClickHouse/pull/4239 rel="external nofollow noreferrer" target=_blank>#4239</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Added <code class=syntax>Query-Id</code> to Server’s HTTP Response header. <a href=https://github.com/ClickHouse/ClickHouse/pull/4231 rel="external nofollow noreferrer" target=_blank>#4231</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>Mikhail</a>)</li> </ul> <h4 id=experimental-features-2>Experimental Features<a class=headerlink href=#experimental-features-2 title="Permanent link"> </a></h4> <ul> <li>Added <code class=syntax>minmax</code> and <code class=syntax>set</code> data skipping indices for MergeTree table engines family. <a href=https://github.com/ClickHouse/ClickHouse/pull/4143 rel="external nofollow noreferrer" target=_blank>#4143</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li>Added conversion of <code class=syntax>CROSS JOIN</code> to <code class=syntax>INNER JOIN</code> if possible. <a href=https://github.com/ClickHouse/ClickHouse/pull/4221 rel="external nofollow noreferrer" target=_blank>#4221</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4266 rel="external nofollow noreferrer" target=_blank>#4266</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=bug-fixes-17>Bug Fixes<a class=headerlink href=#bug-fixes-17 title="Permanent link"> </a></h4> <ul> <li>Fixed <code class=syntax>Not found column</code> for duplicate columns in <code class=syntax>JOIN ON</code> section. <a href=https://github.com/ClickHouse/ClickHouse/pull/4279 rel="external nofollow noreferrer" target=_blank>#4279</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Make <code class=syntax>START REPLICATED SENDS</code> command start replicated sends. <a href=https://github.com/ClickHouse/ClickHouse/pull/4229 rel="external nofollow noreferrer" target=_blank>#4229</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>nvartolomei</a>)</li> <li>Fixed aggregate functions execution with <code class=syntax>Array(LowCardinality)</code> arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/4055 rel="external nofollow noreferrer" target=_blank>#4055</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Fixed wrong behaviour when doing <code class=syntax>INSERT ... SELECT ... FROM file(...)</code> query and file has <code class=syntax>CSVWithNames</code> or <code class=syntax>TSVWIthNames</code> format and the first data row is missing. <a href=https://github.com/ClickHouse/ClickHouse/pull/4297 rel="external nofollow noreferrer" target=_blank>#4297</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed crash on dictionary reload if dictionary not available. This bug was appeared in 19.1.6. <a href=https://github.com/ClickHouse/ClickHouse/pull/4188 rel="external nofollow noreferrer" target=_blank>#4188</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed <code class=syntax>ALL JOIN</code> with duplicates in right table. <a href=https://github.com/ClickHouse/ClickHouse/pull/4184 rel="external nofollow noreferrer" target=_blank>#4184</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed segmentation fault with <code class=syntax>use_uncompressed_cache=1</code> and exception with wrong uncompressed size. This bug was appeared in 19.1.6. <a href=https://github.com/ClickHouse/ClickHouse/pull/4186 rel="external nofollow noreferrer" target=_blank>#4186</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href=https://github.com/ClickHouse/ClickHouse/pull/4341 rel="external nofollow noreferrer" target=_blank>#4341</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed infinite loop when selecting from table function <code class=syntax>numbers(0)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4280 rel="external nofollow noreferrer" target=_blank>#4280</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Temporarily disable predicate optimization for <code class=syntax>ORDER BY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3890 rel="external nofollow noreferrer" target=_blank>#3890</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fixed <code class=syntax>Illegal instruction</code> error when using base64 functions on old CPUs. This error has been reproduced only when ClickHouse was compiled with gcc-8. <a href=https://github.com/ClickHouse/ClickHouse/pull/4275 rel="external nofollow noreferrer" target=_blank>#4275</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed <code class=syntax>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href=https://github.com/ClickHouse/ClickHouse/pull/4170 rel="external nofollow noreferrer" target=_blank>#4170</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed incorrect result when <code class=syntax>Date</code> and <code class=syntax>DateTime</code> arguments are used in branches of conditional operator (function <code class=syntax>if</code>). Added generic case for function <code class=syntax>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4243 rel="external nofollow noreferrer" target=_blank>#4243</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>ClickHouse dictionaries now load within <code class=syntax>clickhouse</code> process. <a href=https://github.com/ClickHouse/ClickHouse/pull/4166 rel="external nofollow noreferrer" target=_blank>#4166</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed deadlock when <code class=syntax>SELECT</code> from a table with <code class=syntax>File</code> engine was retried after <code class=syntax>No such file or directory</code> error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4161 rel="external nofollow noreferrer" target=_blank>#4161</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed race condition when selecting from <code class=syntax>system.tables</code> may give <code class=syntax>table doesn't exist</code> error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4313 rel="external nofollow noreferrer" target=_blank>#4313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/4317 rel="external nofollow noreferrer" target=_blank>#4317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed a bug when the execution of mutations containing <code class=syntax>IN</code> operators was producing incorrect results. <a href=https://github.com/ClickHouse/ClickHouse/pull/4099 rel="external nofollow noreferrer" target=_blank>#4099</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Fixed error: if there is a database with <code class=syntax>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href=https://github.com/ClickHouse/ClickHouse/pull/4255 rel="external nofollow noreferrer" target=_blank>#4255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed error when system logs are tried to create again at server shutdown. <a href=https://github.com/ClickHouse/ClickHouse/pull/4254 rel="external nofollow noreferrer" target=_blank>#4254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Correctly return the right type and properly handle locks in <code class=syntax>joinGet</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/4153 rel="external nofollow noreferrer" target=_blank>#4153</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Added <code class=syntax>sumMapWithOverflow</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/4151 rel="external nofollow noreferrer" target=_blank>#4151</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li> <li>Fixed segfault with <code class=syntax>allow_experimental_multiple_joins_emulation</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/52de2cd927f7b5257dd67e175f0a5560a48840d0 rel="external nofollow noreferrer" target=_blank>52de2c</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed bug with incorrect <code class=syntax>Date</code> and <code class=syntax>DateTime</code> comparison. <a href=https://github.com/ClickHouse/ClickHouse/pull/4237 rel="external nofollow noreferrer" target=_blank>#4237</a> (<a href=https://github.com/valexey rel="external nofollow noreferrer" target=_blank>valexey</a>)</li> <li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code class=syntax>quantile*Weighted</code> family of functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/4145 rel="external nofollow noreferrer" target=_blank>#4145</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed rare race condition when removing of old data parts can fail with <code class=syntax>File not found</code> error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4378 rel="external nofollow noreferrer" target=_blank>#4378</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href=https://github.com/ClickHouse/ClickHouse/pull/4343 rel="external nofollow noreferrer" target=_blank>#4343</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-5>Build/Testing/Packaging Improvements<a class=headerlink href=#buildtestingpackaging-improvements-5 title="Permanent link"> </a></h4> <ul> <li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href=https://github.com/ClickHouse/ClickHouse/pull/4205 rel="external nofollow noreferrer" target=_blank>#4205</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Various build fixes for FreeBSD. <a href=https://github.com/ClickHouse/ClickHouse/pull/4225 rel="external nofollow noreferrer" target=_blank>#4225</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Added ability to create, fill and drop tables in perftest. <a href=https://github.com/ClickHouse/ClickHouse/pull/4220 rel="external nofollow noreferrer" target=_blank>#4220</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Added a script to check for duplicate includes. <a href=https://github.com/ClickHouse/ClickHouse/pull/4326 rel="external nofollow noreferrer" target=_blank>#4326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added ability to run queries by index in performance test. <a href=https://github.com/ClickHouse/ClickHouse/pull/4264 rel="external nofollow noreferrer" target=_blank>#4264</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Package with debug symbols is suggested to be installed. <a href=https://github.com/ClickHouse/ClickHouse/pull/4274 rel="external nofollow noreferrer" target=_blank>#4274</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Refactoring of performance-test. Better logging and signals handling. <a href=https://github.com/ClickHouse/ClickHouse/pull/4171 rel="external nofollow noreferrer" target=_blank>#4171</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Added docs to anonymized Yandex.Metrika datasets. <a href=https://github.com/ClickHouse/ClickHouse/pull/4164 rel="external nofollow noreferrer" target=_blank>#4164</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Аdded tool for converting an old month-partitioned part to the custom-partitioned format. <a href=https://github.com/ClickHouse/ClickHouse/pull/4195 rel="external nofollow noreferrer" target=_blank>#4195</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Added docs about two datasets in s3. <a href=https://github.com/ClickHouse/ClickHouse/pull/4144 rel="external nofollow noreferrer" target=_blank>#4144</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Added script which creates changelog from pull requests description. <a href=https://github.com/ClickHouse/ClickHouse/pull/4169 rel="external nofollow noreferrer" target=_blank>#4169</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4173 rel="external nofollow noreferrer" target=_blank>#4173</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>) (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Added puppet module for ClickHouse. <a href=https://github.com/ClickHouse/ClickHouse/pull/4182 rel="external nofollow noreferrer" target=_blank>#4182</a> (<a href=https://github.com/MaxFedotov rel="external nofollow noreferrer" target=_blank>Maxim Fedotov</a>)</li> <li>Added docs for a group of undocumented functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/4168 rel="external nofollow noreferrer" target=_blank>#4168</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>ARM build fixes. <a href=https://github.com/ClickHouse/ClickHouse/pull/4210 rel="external nofollow noreferrer" target=_blank>#4210</a><a href=https://github.com/ClickHouse/ClickHouse/pull/4306 rel="external nofollow noreferrer" target=_blank>#4306</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4291 rel="external nofollow noreferrer" target=_blank>#4291</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Dictionary tests now able to run from <code class=syntax>ctest</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4189 rel="external nofollow noreferrer" target=_blank>#4189</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Now <code class=syntax>/etc/ssl</code> is used as default directory with SSL certificates. <a href=https://github.com/ClickHouse/ClickHouse/pull/4167 rel="external nofollow noreferrer" target=_blank>#4167</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added checking SSE and AVX instruction at start. <a href=https://github.com/ClickHouse/ClickHouse/pull/4234 rel="external nofollow noreferrer" target=_blank>#4234</a> (<a href=https://github.com/igron99 rel="external nofollow noreferrer" target=_blank>Igr</a>)</li> <li>Init script will wait server until start. <a href=https://github.com/ClickHouse/ClickHouse/pull/4281 rel="external nofollow noreferrer" target=_blank>#4281</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=backward-incompatible-changes-1>Backward Incompatible Changes<a class=headerlink href=#backward-incompatible-changes-1 title="Permanent link"> </a></h4> <ul> <li>Removed <code class=syntax>allow_experimental_low_cardinality_type</code> setting. <code class=syntax>LowCardinality</code> data types are production ready. <a href=https://github.com/ClickHouse/ClickHouse/pull/4323 rel="external nofollow noreferrer" target=_blank>#4323</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Reduce mark cache size and uncompressed cache size accordingly to available memory amount. <a href=https://github.com/ClickHouse/ClickHouse/pull/4240 rel="external nofollow noreferrer" target=_blank>#4240</a> (<a href=https://github.com/k-lopatin rel="external nofollow noreferrer" target=_blank>Lopatin Konstantin</a></li> <li>Added keyword <code class=syntax>INDEX</code> in <code class=syntax>CREATE TABLE</code> query. A column with name <code class=syntax>index</code> must be quoted with backticks or double quotes: <code class=syntax>`index`</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4143 rel="external nofollow noreferrer" target=_blank>#4143</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>Nikita Vasilev</a>)</li> <li><code class=syntax>sumMap</code> now promote result type instead of overflow. The old <code class=syntax>sumMap</code> behavior can be obtained by using <code class=syntax>sumMapWithOverflow</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/4151 rel="external nofollow noreferrer" target=_blank>#4151</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li> </ul> <h4 id=performance-improvements-4>Performance Improvements<a class=headerlink href=#performance-improvements-4 title="Permanent link"> </a></h4> <ul> <li><code class=syntax>std::sort</code> replaced by <code class=syntax>pdqsort</code> for queries without <code class=syntax>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4236 rel="external nofollow noreferrer" target=_blank>#4236</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>)</li> <li>Now server reuse threads from global thread pool. This affects performance in some corner cases. <a href=https://github.com/ClickHouse/ClickHouse/pull/4150 rel="external nofollow noreferrer" target=_blank>#4150</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=improvements-5>Improvements<a class=headerlink href=#improvements-5 title="Permanent link"> </a></h4> <ul> <li>Implemented AIO support for FreeBSD. <a href=https://github.com/ClickHouse/ClickHouse/pull/4305 rel="external nofollow noreferrer" target=_blank>#4305</a> (<a href=https://github.com/urgordeadbeef rel="external nofollow noreferrer" target=_blank>urgordeadbeef</a>)</li> <li><code class=syntax>SELECT * FROM a JOIN b USING a, b</code> now return <code class=syntax>a</code> and <code class=syntax>b</code> columns only from the left table. <a href=https://github.com/ClickHouse/ClickHouse/pull/4141 rel="external nofollow noreferrer" target=_blank>#4141</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Allow <code class=syntax>-C</code> option of client to work as <code class=syntax>-c</code> option. <a href=https://github.com/ClickHouse/ClickHouse/pull/4232 rel="external nofollow noreferrer" target=_blank>#4232</a> (<a href=https://github.com/syominsergey rel="external nofollow noreferrer" target=_blank>syominsergey</a>)</li> <li>Now option <code class=syntax>--password</code> used without value requires password from stdin. <a href=https://github.com/ClickHouse/ClickHouse/pull/4230 rel="external nofollow noreferrer" target=_blank>#4230</a> (<a href=https://github.com/bsd-conqueror rel="external nofollow noreferrer" target=_blank>BSD_Conqueror</a>)</li> <li>Added highlighting of unescaped metacharacters in string literals that contain <code class=syntax>LIKE</code> expressions or regexps. <a href=https://github.com/ClickHouse/ClickHouse/pull/4327 rel="external nofollow noreferrer" target=_blank>#4327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added cancelling of HTTP read only queries if client socket goes away. <a href=https://github.com/ClickHouse/ClickHouse/pull/4213 rel="external nofollow noreferrer" target=_blank>#4213</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>nvartolomei</a>)</li> <li>Now server reports progress to keep client connections alive. <a href=https://github.com/ClickHouse/ClickHouse/pull/4215 rel="external nofollow noreferrer" target=_blank>#4215</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Slightly better message with reason for OPTIMIZE query with <code class=syntax>optimize_throw_if_noop</code> setting enabled. <a href=https://github.com/ClickHouse/ClickHouse/pull/4294 rel="external nofollow noreferrer" target=_blank>#4294</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added support of <code class=syntax>--version</code> option for clickhouse server. <a href=https://github.com/ClickHouse/ClickHouse/pull/4251 rel="external nofollow noreferrer" target=_blank>#4251</a> (<a href=https://github.com/k-lopatin rel="external nofollow noreferrer" target=_blank>Lopatin Konstantin</a>)</li> <li>Added <code class=syntax>--help/-h</code> option to <code class=syntax>clickhouse-server</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4233 rel="external nofollow noreferrer" target=_blank>#4233</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>Yuriy Baranov</a>)</li> <li>Added support for scalar subqueries with aggregate function state result. <a href=https://github.com/ClickHouse/ClickHouse/pull/4348 rel="external nofollow noreferrer" target=_blank>#4348</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>Nikolai Kochetov</a>)</li> <li>Improved server shutdown time and ALTERs waiting time. <a href=https://github.com/ClickHouse/ClickHouse/pull/4372 rel="external nofollow noreferrer" target=_blank>#4372</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added info about the replicated_can_become_leader setting to system.replicas and add logging if the replica won’t try to become leader. <a href=https://github.com/ClickHouse/ClickHouse/pull/4379 rel="external nofollow noreferrer" target=_blank>#4379</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> </ul> <h2 id=clickhouse-release-19-1>ClickHouse Release 19.1<a class=headerlink href=#clickhouse-release-19-1 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-1-14-2019-03-14>ClickHouse Release 19.1.14, 2019-03-14<a class=headerlink href=#clickhouse-release-19-1-14-2019-03-14 title="Permanent link"> </a></h3> <ul> <li>Fixed error <code class=syntax>Column ... queried more than once</code> that may happen if the setting <code class=syntax>asterisk_left_columns_only</code> is set to 1 in case of using <code class=syntax>GLOBAL JOIN</code> with <code class=syntax>SELECT *</code> (rare case). The issue does not exist in 19.3 and newer. <a href=https://github.com/ClickHouse/ClickHouse/pull/4692/commits/6bac7d8d11a9b0d6de0b32b53c47eb2f6f8e7062 rel="external nofollow noreferrer" target=_blank>6bac7d8d</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h3 id=clickhouse-release-19-1-13-2019-03-12>ClickHouse Release 19.1.13, 2019-03-12<a class=headerlink href=#clickhouse-release-19-1-13-2019-03-12 title="Permanent link"> </a></h3> <p>This release contains exactly the same set of patches as 19.3.7.</p> <h3 id=clickhouse-release-19-1-10-2019-03-03>ClickHouse Release 19.1.10, 2019-03-03<a class=headerlink href=#clickhouse-release-19-1-10-2019-03-03 title="Permanent link"> </a></h3> <p>This release contains exactly the same set of patches as 19.3.6.</p> <h2 id=clickhouse-release-19-1-1>ClickHouse Release 19.1<a class=headerlink href=#clickhouse-release-19-1-1 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-1-9-2019-02-21>ClickHouse Release 19.1.9, 2019-02-21<a class=headerlink href=#clickhouse-release-19-1-9-2019-02-21 title="Permanent link"> </a></h3> <h4 id=bug-fixes-18>Bug Fixes<a class=headerlink href=#bug-fixes-18 title="Permanent link"> </a></h4> <ul> <li>Fixed backward incompatibility with old versions due to wrong implementation of <code class=syntax>send_logs_level</code> setting. <a href=https://github.com/ClickHouse/ClickHouse/pull/4445 rel="external nofollow noreferrer" target=_blank>#4445</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed backward incompatibility of table function <code class=syntax>remote</code> introduced with column comments. <a href=https://github.com/ClickHouse/ClickHouse/pull/4446 rel="external nofollow noreferrer" target=_blank>#4446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-1-8-2019-02-16>ClickHouse Release 19.1.8, 2019-02-16<a class=headerlink href=#clickhouse-release-19-1-8-2019-02-16 title="Permanent link"> </a></h3> <h4 id=bug-fixes-19>Bug Fixes<a class=headerlink href=#bug-fixes-19 title="Permanent link"> </a></h4> <ul> <li>Fix install package with missing /etc/clickhouse-server/config.xml. <a href=https://github.com/ClickHouse/ClickHouse/pull/4343 rel="external nofollow noreferrer" target=_blank>#4343</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h2 id=clickhouse-release-19-1-2>ClickHouse Release 19.1<a class=headerlink href=#clickhouse-release-19-1-2 title="Permanent link"> </a></h2> <h3 id=clickhouse-release-19-1-7-2019-02-15>ClickHouse Release 19.1.7, 2019-02-15<a class=headerlink href=#clickhouse-release-19-1-7-2019-02-15 title="Permanent link"> </a></h3> <h4 id=bug-fixes-20>Bug Fixes<a class=headerlink href=#bug-fixes-20 title="Permanent link"> </a></h4> <ul> <li>Correctly return the right type and properly handle locks in <code class=syntax>joinGet</code> function. <a href=https://github.com/ClickHouse/ClickHouse/pull/4153 rel="external nofollow noreferrer" target=_blank>#4153</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Fixed error when system logs are tried to create again at server shutdown. <a href=https://github.com/ClickHouse/ClickHouse/pull/4254 rel="external nofollow noreferrer" target=_blank>#4254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed error: if there is a database with <code class=syntax>Dictionary</code> engine, all dictionaries forced to load at server startup, and if there is a dictionary with ClickHouse source from localhost, the dictionary cannot load. <a href=https://github.com/ClickHouse/ClickHouse/pull/4255 rel="external nofollow noreferrer" target=_blank>#4255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed a bug when the execution of mutations containing <code class=syntax>IN</code> operators was producing incorrect results. <a href=https://github.com/ClickHouse/ClickHouse/pull/4099 rel="external nofollow noreferrer" target=_blank>#4099</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li><code class=syntax>clickhouse-client</code> can segfault on exit while loading data for command line suggestions if it was run in interactive mode. <a href=https://github.com/ClickHouse/ClickHouse/pull/4317 rel="external nofollow noreferrer" target=_blank>#4317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed race condition when selecting from <code class=syntax>system.tables</code> may give <code class=syntax>table doesn't exist</code> error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4313 rel="external nofollow noreferrer" target=_blank>#4313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed deadlock when <code class=syntax>SELECT</code> from a table with <code class=syntax>File</code> engine was retried after <code class=syntax>No such file or directory</code> error. <a href=https://github.com/ClickHouse/ClickHouse/pull/4161 rel="external nofollow noreferrer" target=_blank>#4161</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed an issue: local ClickHouse dictionaries are loaded via TCP, but should load within process. <a href=https://github.com/ClickHouse/ClickHouse/pull/4166 rel="external nofollow noreferrer" target=_blank>#4166</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed <code class=syntax>No message received</code> error when interacting with PostgreSQL ODBC Driver through TLS connection. Also fixes segfault when using MySQL ODBC Driver. <a href=https://github.com/ClickHouse/ClickHouse/pull/4170 rel="external nofollow noreferrer" target=_blank>#4170</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Temporarily disable predicate optimization for <code class=syntax>ORDER BY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3890 rel="external nofollow noreferrer" target=_blank>#3890</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fixed infinite loop when selecting from table function <code class=syntax>numbers(0)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4280 rel="external nofollow noreferrer" target=_blank>#4280</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed <code class=syntax>compile_expressions</code> bug with comparison of big (more than int16) dates. <a href=https://github.com/ClickHouse/ClickHouse/pull/4341 rel="external nofollow noreferrer" target=_blank>#4341</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed segmentation fault with <code class=syntax>uncompressed_cache=1</code> and exception with wrong uncompressed size. <a href=https://github.com/ClickHouse/ClickHouse/pull/4186 rel="external nofollow noreferrer" target=_blank>#4186</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed <code class=syntax>ALL JOIN</code> with duplicates in right table. <a href=https://github.com/ClickHouse/ClickHouse/pull/4184 rel="external nofollow noreferrer" target=_blank>#4184</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Fixed wrong behaviour when doing <code class=syntax>INSERT ... SELECT ... FROM file(...)</code> query and file has <code class=syntax>CSVWithNames</code> or <code class=syntax>TSVWIthNames</code> format and the first data row is missing. <a href=https://github.com/ClickHouse/ClickHouse/pull/4297 rel="external nofollow noreferrer" target=_blank>#4297</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed aggregate functions execution with <code class=syntax>Array(LowCardinality)</code> arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/4055 rel="external nofollow noreferrer" target=_blank>#4055</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Debian package: correct /etc/clickhouse-server/preprocessed link according to config. <a href=https://github.com/ClickHouse/ClickHouse/pull/4205 rel="external nofollow noreferrer" target=_blank>#4205</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed fuzz test under undefined behavior sanitizer: added parameter type check for <code class=syntax>quantile*Weighted</code> family of functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/4145 rel="external nofollow noreferrer" target=_blank>#4145</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Make <code class=syntax>START REPLICATED SENDS</code> command start replicated sends. <a href=https://github.com/ClickHouse/ClickHouse/pull/4229 rel="external nofollow noreferrer" target=_blank>#4229</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>nvartolomei</a>)</li> <li>Fixed <code class=syntax>Not found column</code> for duplicate columns in JOIN ON section. <a href=https://github.com/ClickHouse/ClickHouse/pull/4279 rel="external nofollow noreferrer" target=_blank>#4279</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Now <code class=syntax>/etc/ssl</code> is used as default directory with SSL certificates. <a href=https://github.com/ClickHouse/ClickHouse/pull/4167 rel="external nofollow noreferrer" target=_blank>#4167</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed crash on dictionary reload if dictionary not available. <a href=https://github.com/ClickHouse/ClickHouse/pull/4188 rel="external nofollow noreferrer" target=_blank>#4188</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Fixed bug with incorrect <code class=syntax>Date</code> and <code class=syntax>DateTime</code> comparison. <a href=https://github.com/ClickHouse/ClickHouse/pull/4237 rel="external nofollow noreferrer" target=_blank>#4237</a> (<a href=https://github.com/valexey rel="external nofollow noreferrer" target=_blank>valexey</a>)</li> <li>Fixed incorrect result when <code class=syntax>Date</code> and <code class=syntax>DateTime</code> arguments are used in branches of conditional operator (function <code class=syntax>if</code>). Added generic case for function <code class=syntax>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4243 rel="external nofollow noreferrer" target=_blank>#4243</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h3 id=clickhouse-release-19-1-6-2019-01-24>ClickHouse Release 19.1.6, 2019-01-24<a class=headerlink href=#clickhouse-release-19-1-6-2019-01-24 title="Permanent link"> </a></h3> <h4 id=new-features-7>New Features<a class=headerlink href=#new-features-7 title="Permanent link"> </a></h4> <ul> <li>Custom per column compression codecs for tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3899 rel="external nofollow noreferrer" target=_blank>#3899</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4111 rel="external nofollow noreferrer" target=_blank>#4111</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>, <a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>, <a href=https://github.com/Sindbag rel="external nofollow noreferrer" target=_blank>Anatoly</a>)</li> <li>Added compression codec <code class=syntax>Delta</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4052 rel="external nofollow noreferrer" target=_blank>#4052</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Allow to <code class=syntax>ALTER</code> compression codecs. <a href=https://github.com/ClickHouse/ClickHouse/pull/4054 rel="external nofollow noreferrer" target=_blank>#4054</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Added functions <code class=syntax>left</code>, <code class=syntax>right</code>, <code class=syntax>trim</code>, <code class=syntax>ltrim</code>, <code class=syntax>rtrim</code>, <code class=syntax>timestampadd</code>, <code class=syntax>timestampsub</code> for SQL standard compatibility. <a href=https://github.com/ClickHouse/ClickHouse/pull/3826 rel="external nofollow noreferrer" target=_blank>#3826</a> (<a href=https://github.com/blinkov rel="external nofollow noreferrer" target=_blank>Ivan Blinkov</a>)</li> <li>Support for write in <code class=syntax>HDFS</code> tables and <code class=syntax>hdfs</code> table function. <a href=https://github.com/ClickHouse/ClickHouse/pull/4084 rel="external nofollow noreferrer" target=_blank>#4084</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Added functions to search for multiple constant strings from big haystack: <code class=syntax>multiPosition</code>, <code class=syntax>multiSearch</code> ,<code class=syntax>firstMatch</code> also with <code class=syntax>-UTF8</code>, <code class=syntax>-CaseInsensitive</code>, and <code class=syntax>-CaseInsensitiveUTF8</code> variants. <a href=https://github.com/ClickHouse/ClickHouse/pull/4053 rel="external nofollow noreferrer" target=_blank>#4053</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Pruning of unused shards if <code class=syntax>SELECT</code> query filters by sharding key (setting <code class=syntax>optimize_skip_unused_shards</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/3851 rel="external nofollow noreferrer" target=_blank>#3851</a> (<a href=https://github.com/kanterov rel="external nofollow noreferrer" target=_blank>Gleb Kanterov</a>, <a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Allow <code class=syntax>Kafka</code> engine to ignore some number of parsing errors per block. <a href=https://github.com/ClickHouse/ClickHouse/pull/4094 rel="external nofollow noreferrer" target=_blank>#4094</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Added support for <code class=syntax>CatBoost</code> multiclass models evaluation. Function <code class=syntax>modelEvaluate</code> returns tuple with per-class raw predictions for multiclass models. <code class=syntax>libcatboostmodel.so</code> should be built with <a href=https://github.com/catboost/catboost/pull/607 rel="external nofollow noreferrer" target=_blank>#607</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3959 rel="external nofollow noreferrer" target=_blank>#3959</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Added functions <code class=syntax>filesystemAvailable</code>, <code class=syntax>filesystemFree</code>, <code class=syntax>filesystemCapacity</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4097 rel="external nofollow noreferrer" target=_blank>#4097</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li> <li>Added hashing functions <code class=syntax>xxHash64</code> and <code class=syntax>xxHash32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3905 rel="external nofollow noreferrer" target=_blank>#3905</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Added <code class=syntax>gccMurmurHash</code> hashing function (GCC flavoured Murmur hash) which uses the same hash seed as <a href=https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/functional_hash.h#L191 rel="external nofollow noreferrer" target=_blank>gcc</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4000 rel="external nofollow noreferrer" target=_blank>#4000</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li> <li>Added hashing functions <code class=syntax>javaHash</code>, <code class=syntax>hiveHash</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3811 rel="external nofollow noreferrer" target=_blank>#3811</a> (<a href=https://github.com/shangshujie365 rel="external nofollow noreferrer" target=_blank>shangshujie365</a>)</li> <li>Added table function <code class=syntax>remoteSecure</code>. Function works as <code class=syntax>remote</code>, but uses secure connection. <a href=https://github.com/ClickHouse/ClickHouse/pull/4088 rel="external nofollow noreferrer" target=_blank>#4088</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> </ul> <h4 id=experimental-features-3>Experimental Features<a class=headerlink href=#experimental-features-3 title="Permanent link"> </a></h4> <ul> <li>Added multiple JOINs emulation (<code class=syntax>allow_experimental_multiple_joins_emulation</code> setting). <a href=https://github.com/ClickHouse/ClickHouse/pull/3946 rel="external nofollow noreferrer" target=_blank>#3946</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> </ul> <h4 id=bug-fixes-21>Bug Fixes<a class=headerlink href=#bug-fixes-21 title="Permanent link"> </a></h4> <ul> <li>Make <code class=syntax>compiled_expression_cache_size</code> setting limited by default to lower memory consumption. <a href=https://github.com/ClickHouse/ClickHouse/pull/4041 rel="external nofollow noreferrer" target=_blank>#4041</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix a bug that led to hangups in threads that perform ALTERs of Replicated tables and in the thread that updates configuration from ZooKeeper. <a href=https://github.com/ClickHouse/ClickHouse/issues/2947 rel="external nofollow noreferrer" target=_blank>#2947</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3891 rel="external nofollow noreferrer" target=_blank>#3891</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3934 rel="external nofollow noreferrer" target=_blank>#3934</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Fixed a race condition when executing a distributed ALTER task. The race condition led to more than one replica trying to execute the task and all replicas except one failing with a ZooKeeper error. <a href=https://github.com/ClickHouse/ClickHouse/pull/3904 rel="external nofollow noreferrer" target=_blank>#3904</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Fix a bug when <code class=syntax>from_zk</code> config elements weren’t refreshed after a request to ZooKeeper timed out. <a href=https://github.com/ClickHouse/ClickHouse/issues/2947 rel="external nofollow noreferrer" target=_blank>#2947</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3947 rel="external nofollow noreferrer" target=_blank>#3947</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Fix bug with wrong prefix for IPv4 subnet masks. <a href=https://github.com/ClickHouse/ClickHouse/pull/3945 rel="external nofollow noreferrer" target=_blank>#3945</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed crash (<code class=syntax>std::terminate</code>) in rare cases when a new thread cannot be created due to exhausted resources. <a href=https://github.com/ClickHouse/ClickHouse/pull/3956 rel="external nofollow noreferrer" target=_blank>#3956</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix bug when in <code class=syntax>remote</code> table function execution when wrong restrictions were used for in <code class=syntax>getStructureOfRemoteTable</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4009 rel="external nofollow noreferrer" target=_blank>#4009</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fix a leak of netlink sockets. They were placed in a pool where they were never deleted and new sockets were created at the start of a new thread when all current sockets were in use. <a href=https://github.com/ClickHouse/ClickHouse/pull/4017 rel="external nofollow noreferrer" target=_blank>#4017</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Fix bug with closing <code class=syntax>/proc/self/fd</code> directory earlier than all fds were read from <code class=syntax>/proc</code> after forking <code class=syntax>odbc-bridge</code> subprocess. <a href=https://github.com/ClickHouse/ClickHouse/pull/4120 rel="external nofollow noreferrer" target=_blank>#4120</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed String to UInt monotonic conversion in case of usage String in primary key. <a href=https://github.com/ClickHouse/ClickHouse/pull/3870 rel="external nofollow noreferrer" target=_blank>#3870</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fixed error in calculation of integer conversion function monotonicity. <a href=https://github.com/ClickHouse/ClickHouse/pull/3921 rel="external nofollow noreferrer" target=_blank>#3921</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed segfault in <code class=syntax>arrayEnumerateUniq</code>, <code class=syntax>arrayEnumerateDense</code> functions in case of some invalid arguments. <a href=https://github.com/ClickHouse/ClickHouse/pull/3909 rel="external nofollow noreferrer" target=_blank>#3909</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fix UB in StorageMerge. <a href=https://github.com/ClickHouse/ClickHouse/pull/3910 rel="external nofollow noreferrer" target=_blank>#3910</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Fixed segfault in functions <code class=syntax>addDays</code>, <code class=syntax>subtractDays</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3913 rel="external nofollow noreferrer" target=_blank>#3913</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed error: functions <code class=syntax>round</code>, <code class=syntax>floor</code>, <code class=syntax>trunc</code>, <code class=syntax>ceil</code> may return bogus result when executed on integer argument and large negative scale. <a href=https://github.com/ClickHouse/ClickHouse/pull/3914 rel="external nofollow noreferrer" target=_blank>#3914</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed a bug induced by ‘kill query sync’ which leads to a core dump. <a href=https://github.com/ClickHouse/ClickHouse/pull/3916 rel="external nofollow noreferrer" target=_blank>#3916</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>muVulDeePecker</a>)</li> <li>Fix bug with long delay after empty replication queue. <a href=https://github.com/ClickHouse/ClickHouse/pull/3928 rel="external nofollow noreferrer" target=_blank>#3928</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3932 rel="external nofollow noreferrer" target=_blank>#3932</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Fixed excessive memory usage in case of inserting into table with <code class=syntax>LowCardinality</code> primary key. <a href=https://github.com/ClickHouse/ClickHouse/pull/3955 rel="external nofollow noreferrer" target=_blank>#3955</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Fixed <code class=syntax>LowCardinality</code> serialization for <code class=syntax>Native</code> format in case of empty arrays. <a href=https://github.com/ClickHouse/ClickHouse/issues/3907 rel="external nofollow noreferrer" target=_blank>#3907</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4011 rel="external nofollow noreferrer" target=_blank>#4011</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Fixed incorrect result while using distinct by single LowCardinality numeric column. <a href=https://github.com/ClickHouse/ClickHouse/issues/3895 rel="external nofollow noreferrer" target=_blank>#3895</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4012 rel="external nofollow noreferrer" target=_blank>#4012</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Fixed specialized aggregation with LowCardinality key (in case when <code class=syntax>compile</code> setting is enabled). <a href=https://github.com/ClickHouse/ClickHouse/pull/3886 rel="external nofollow noreferrer" target=_blank>#3886</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Fix user and password forwarding for replicated tables queries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3957 rel="external nofollow noreferrer" target=_blank>#3957</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>) (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li> <li>Fixed very rare race condition that can happen when listing tables in Dictionary database while reloading dictionaries. <a href=https://github.com/ClickHouse/ClickHouse/pull/3970 rel="external nofollow noreferrer" target=_blank>#3970</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed incorrect result when HAVING was used with ROLLUP or CUBE. <a href=https://github.com/ClickHouse/ClickHouse/issues/3756 rel="external nofollow noreferrer" target=_blank>#3756</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3837 rel="external nofollow noreferrer" target=_blank>#3837</a> (<a href=https://github.com/reflection rel="external nofollow noreferrer" target=_blank>Sam Chou</a>)</li> <li>Fixed column aliases for query with <code class=syntax>JOIN ON</code> syntax and distributed tables. <a href=https://github.com/ClickHouse/ClickHouse/pull/3980 rel="external nofollow noreferrer" target=_blank>#3980</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Fixed error in internal implementation of <code class=syntax>quantileTDigest</code> (found by Artem Vakhrushev). This error never happens in ClickHouse and was relevant only for those who use ClickHouse codebase as a library directly. <a href=https://github.com/ClickHouse/ClickHouse/pull/3935 rel="external nofollow noreferrer" target=_blank>#3935</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=improvements-6>Improvements<a class=headerlink href=#improvements-6 title="Permanent link"> </a></h4> <ul> <li>Support for <code class=syntax>IF NOT EXISTS</code> in <code class=syntax>ALTER TABLE ADD COLUMN</code> statements along with <code class=syntax>IF EXISTS</code> in <code class=syntax>DROP/MODIFY/CLEAR/COMMENT COLUMN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3900 rel="external nofollow noreferrer" target=_blank>#3900</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li> <li>Function <code class=syntax>parseDateTimeBestEffort</code>: support for formats <code class=syntax>DD.MM.YYYY</code>, <code class=syntax>DD.MM.YY</code>, <code class=syntax>DD-MM-YYYY</code>, <code class=syntax>DD-Mon-YYYY</code>, <code class=syntax>DD/Month/YYYY</code> and similar. <a href=https://github.com/ClickHouse/ClickHouse/pull/3922 rel="external nofollow noreferrer" target=_blank>#3922</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li><code class=syntax>CapnProtoInputStream</code> now support jagged structures. <a href=https://github.com/ClickHouse/ClickHouse/pull/4063 rel="external nofollow noreferrer" target=_blank>#4063</a> (<a href=https://github.com/Miniwoffer rel="external nofollow noreferrer" target=_blank>Odin Hultgren Van Der Horst</a>)</li> <li>Usability improvement: added a check that server process is started from the data directory’s owner. Do not allow to start server from root if the data belongs to non-root user. <a href=https://github.com/ClickHouse/ClickHouse/pull/3785 rel="external nofollow noreferrer" target=_blank>#3785</a> (<a href=https://github.com/sergey-v-galtsev rel="external nofollow noreferrer" target=_blank>sergey-v-galtsev</a>)</li> <li>Better logic of checking required columns during analysis of queries with JOINs. <a href=https://github.com/ClickHouse/ClickHouse/pull/3930 rel="external nofollow noreferrer" target=_blank>#3930</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li> <li>Decreased the number of connections in case of large number of Distributed tables in a single server. <a href=https://github.com/ClickHouse/ClickHouse/pull/3726 rel="external nofollow noreferrer" target=_blank>#3726</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> <li>Supported totals row for <code class=syntax>WITH TOTALS</code> query for ODBC driver. <a href=https://github.com/ClickHouse/ClickHouse/pull/3836 rel="external nofollow noreferrer" target=_blank>#3836</a> (<a href=https://github.com/nightweb rel="external nofollow noreferrer" target=_blank>Maksim Koritckiy</a>)</li> <li>Allowed to use <code class=syntax>Enum</code>s as integers inside if function. <a href=https://github.com/ClickHouse/ClickHouse/pull/3875 rel="external nofollow noreferrer" target=_blank>#3875</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Added <code class=syntax>low_cardinality_allow_in_native_format</code> setting. If disabled, do not use <code class=syntax>LowCadrinality</code> type in <code class=syntax>Native</code> format. <a href=https://github.com/ClickHouse/ClickHouse/pull/3879 rel="external nofollow noreferrer" target=_blank>#3879</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li> <li>Removed some redundant objects from compiled expressions cache to lower memory usage. <a href=https://github.com/ClickHouse/ClickHouse/pull/4042 rel="external nofollow noreferrer" target=_blank>#4042</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add check that <code class=syntax>SET send_logs_level = 'value'</code> query accept appropriate value. <a href=https://github.com/ClickHouse/ClickHouse/pull/3873 rel="external nofollow noreferrer" target=_blank>#3873</a> (<a href=https://github.com/s-mx rel="external nofollow noreferrer" target=_blank>Sabyanin Maxim</a>)</li> <li>Fixed data type check in type conversion functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3896 rel="external nofollow noreferrer" target=_blank>#3896</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>Winter Zhang</a>)</li> </ul> <h4 id=performance-improvements-5>Performance Improvements<a class=headerlink href=#performance-improvements-5 title="Permanent link"> </a></h4> <ul> <li>Add a MergeTree setting <code class=syntax>use_minimalistic_part_header_in_zookeeper</code>. If enabled, Replicated tables will store compact part metadata in a single part znode. This can dramatically reduce ZooKeeper snapshot size (especially if the tables have a lot of columns). Note that after enabling this setting you will not be able to downgrade to a version that doesn’t support it. <a href=https://github.com/ClickHouse/ClickHouse/pull/3960 rel="external nofollow noreferrer" target=_blank>#3960</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Add an DFA-based implementation for functions <code class=syntax>sequenceMatch</code> and <code class=syntax>sequenceCount</code> in case pattern doesn’t contain time. <a href=https://github.com/ClickHouse/ClickHouse/pull/4004 rel="external nofollow noreferrer" target=_blank>#4004</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li> <li>Performance improvement for integer numbers serialization. <a href=https://github.com/ClickHouse/ClickHouse/pull/3968 rel="external nofollow noreferrer" target=_blank>#3968</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Zero left padding PODArray so that -1 element is always valid and zeroed. It’s used for branchless calculation of offsets. <a href=https://github.com/ClickHouse/ClickHouse/pull/3920 rel="external nofollow noreferrer" target=_blank>#3920</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>Amos Bird</a>)</li> <li>Reverted <code class=syntax>jemalloc</code> version which lead to performance degradation. <a href=https://github.com/ClickHouse/ClickHouse/pull/4018 rel="external nofollow noreferrer" target=_blank>#4018</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> </ul> <h4 id=backward-incompatible-changes-2>Backward Incompatible Changes<a class=headerlink href=#backward-incompatible-changes-2 title="Permanent link"> </a></h4> <ul> <li>Removed undocumented feature <code class=syntax>ALTER MODIFY PRIMARY KEY</code> because it was superseded by the <code class=syntax>ALTER MODIFY ORDER BY</code> command. <a href=https://github.com/ClickHouse/ClickHouse/pull/3887 rel="external nofollow noreferrer" target=_blank>#3887</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li> <li>Removed function <code class=syntax>shardByHash</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3833 rel="external nofollow noreferrer" target=_blank>#3833</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Forbid using scalar subqueries with result of type <code class=syntax>AggregateFunction</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3865 rel="external nofollow noreferrer" target=_blank>#3865</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> </ul> <h4 id=buildtestingpackaging-improvements-6>Build/Testing/Packaging Improvements<a class=headerlink href=#buildtestingpackaging-improvements-6 title="Permanent link"> </a></h4> <ul> <li>Added support for PowerPC (<code class=syntax>ppc64le</code>) build. <a href=https://github.com/ClickHouse/ClickHouse/pull/4132 rel="external nofollow noreferrer" target=_blank>#4132</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li> <li>Stateful functional tests are run on public available dataset. <a href=https://github.com/ClickHouse/ClickHouse/pull/3969 rel="external nofollow noreferrer" target=_blank>#3969</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed error when the server cannot start with the <code class=syntax>bash: /usr/bin/clickhouse-extract-from-config: Operation not permitted</code> message within Docker or systemd-nspawn. <a href=https://github.com/ClickHouse/ClickHouse/pull/4136 rel="external nofollow noreferrer" target=_blank>#4136</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Updated <code class=syntax>rdkafka</code> library to v1.0.0-RC5. Used cppkafka instead of raw C interface. <a href=https://github.com/ClickHouse/ClickHouse/pull/4025 rel="external nofollow noreferrer" target=_blank>#4025</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>Ivan</a>)</li> <li>Updated <code class=syntax>mariadb-client</code> library. Fixed one of issues found by UBSan. <a href=https://github.com/ClickHouse/ClickHouse/pull/3924 rel="external nofollow noreferrer" target=_blank>#3924</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Some fixes for UBSan builds. <a href=https://github.com/ClickHouse/ClickHouse/pull/3926 rel="external nofollow noreferrer" target=_blank>#3926</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3021 rel="external nofollow noreferrer" target=_blank>#3021</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3948 rel="external nofollow noreferrer" target=_blank>#3948</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added per-commit runs of tests with UBSan build.</li> <li>Added per-commit runs of PVS-Studio static analyzer.</li> <li>Fixed bugs found by PVS-Studio. <a href=https://github.com/ClickHouse/ClickHouse/pull/4013 rel="external nofollow noreferrer" target=_blank>#4013</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed glibc compatibility issues. <a href=https://github.com/ClickHouse/ClickHouse/pull/4100 rel="external nofollow noreferrer" target=_blank>#4100</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Move Docker images to 18.10 and add compatibility file for glibc &gt;= 2.28 <a href=https://github.com/ClickHouse/ClickHouse/pull/3965 rel="external nofollow noreferrer" target=_blank>#3965</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Add env variable if user don’t want to chown directories in server Docker image. <a href=https://github.com/ClickHouse/ClickHouse/pull/3967 rel="external nofollow noreferrer" target=_blank>#3967</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li>Enabled most of the warnings from <code class=syntax>-Weverything</code> in clang. Enabled <code class=syntax>-Wpedantic</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3986 rel="external nofollow noreferrer" target=_blank>#3986</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Added a few more warnings that are available only in clang 8. <a href=https://github.com/ClickHouse/ClickHouse/pull/3993 rel="external nofollow noreferrer" target=_blank>#3993</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Link to <code class=syntax>libLLVM</code> rather than to individual LLVM libs when using shared linking. <a href=https://github.com/ClickHouse/ClickHouse/pull/3989 rel="external nofollow noreferrer" target=_blank>#3989</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Orivej Desh</a>)</li> <li>Added sanitizer variables for test images. <a href=https://github.com/ClickHouse/ClickHouse/pull/4072 rel="external nofollow noreferrer" target=_blank>#4072</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>alesapin</a>)</li> <li><code class=syntax>clickhouse-server</code> debian package will recommend <code class=syntax>libcap2-bin</code> package to use <code class=syntax>setcap</code> tool for setting capabilities. This is optional. <a href=https://github.com/ClickHouse/ClickHouse/pull/4093 rel="external nofollow noreferrer" target=_blank>#4093</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Improved compilation time, fixed includes. <a href=https://github.com/ClickHouse/ClickHouse/pull/3898 rel="external nofollow noreferrer" target=_blank>#3898</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Added performance tests for hash functions. <a href=https://github.com/ClickHouse/ClickHouse/pull/3918 rel="external nofollow noreferrer" target=_blank>#3918</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li> <li>Fixed cyclic library dependences. <a href=https://github.com/ClickHouse/ClickHouse/pull/3958 rel="external nofollow noreferrer" target=_blank>#3958</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Improved compilation with low available memory. <a href=https://github.com/ClickHouse/ClickHouse/pull/4030 rel="external nofollow noreferrer" target=_blank>#4030</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li> <li>Added test script to reproduce performance degradation in <code class=syntax>jemalloc</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4036 rel="external nofollow noreferrer" target=_blank>#4036</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>alexey-milovidov</a>)</li> <li>Fixed misspells in comments and string literals under <code class=syntax>dbms</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4122 rel="external nofollow noreferrer" target=_blank>#4122</a> (<a href=https://github.com/maiha rel="external nofollow noreferrer" target=_blank>maiha</a>)</li> <li>Fixed typos in comments. <a href=https://github.com/ClickHouse/ClickHouse/pull/4089 rel="external nofollow noreferrer" target=_blank>#4089</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>)</li> </ul> <h2 id=changelog-for-2018><a href=../2018/#clickhouse-release-18-16>Changelog for 2018</a><a class=headerlink href=#changelog-for-2018 title="Permanent link"> </a></h2> </div> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Was this content helpful?</span> <div id=rating-stars class="display-6 mb-0" data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']" data-documentation=documentation>RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#clickhouse-release-v19-17 title="ClickHouse Release 19.17" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.17 </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#clickhouse-release-v19-17-6-36-2019-12-27 title="ClickHouse Release 19.17.6.36, 2019-12-27" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.17.6.36, 2019-12-27 </a> <nav id=toc-toc-1-1 class="nav flex-column pl-2"> <a href=#bug-fix title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-v19-17-4-11-2019-11-22 title="ClickHouse Release 19.17.4.11, 2019-11-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.17.4.11, 2019-11-22 </a> <nav id=toc-toc-1-2 class="nav flex-column pl-2"> <a href=#backward-incompatible-change title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#new-feature title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#experimental-feature title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#bug-fix-1 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#buildtestingpackaging-improvement title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#other title=Other class="nav-link text-wrap d-inline-block w-100"> Other </a> </nav> </nav> <a href=#clickhouse-release-v19-16 title="ClickHouse Release 19.16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.16 </a> <nav id=toc-toc-2 class="nav flex-column pl-2"> <a href=#clickhouse-release-v19-16-14-65-2020-03-25 title="ClickHouse Release 19.16.14.65, 2020-03-25" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.16.14.65, 2020-03-25 </a> <a href=#clickhouse-release-v19-16-14-65-2020-03-05 title="ClickHouse Release 19.16.14.65, 2020-03-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.16.14.65, 2020-03-05 </a> <a href=#new-feature-1 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#clickhouse-release-v19-16-2-2-2019-10-30 title="ClickHouse Release 19.16.2.2, 2019-10-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.16.2.2, 2019-10-30 </a> <nav id=toc-toc-2-4 class="nav flex-column pl-2"> <a href=#backward-incompatible-change-1 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#new-feature-2 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix-2 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement-1 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement-1 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#buildtestingpackaging-improvement-1 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#code-cleanup title="Code Cleanup" class="nav-link text-wrap d-inline-block w-100"> Code Cleanup </a> </nav> </nav> <a href=#clickhouse-release-19-15 title="ClickHouse Release 19.15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.15 </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-15-4-10-2019-10-31 title="ClickHouse Release 19.15.4.10, 2019-10-31" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.15.4.10, 2019-10-31 </a> <nav id=toc-toc-3-1 class="nav flex-column pl-2"> <a href=#bug-fix-3 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-15-3-6-2019-10-09 title="ClickHouse Release 19.15.3.6, 2019-10-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.15.3.6, 2019-10-09 </a> <nav id=toc-toc-3-2 class="nav flex-column pl-2"> <a href=#bug-fix-4 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-15-2-2-2019-10-01 title="ClickHouse Release 19.15.2.2, 2019-10-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.15.2.2, 2019-10-01 </a> <nav id=toc-toc-3-3 class="nav flex-column pl-2"> <a href=#new-feature-3 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#experimental-feature-1 title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#improvement-2 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#buildtestingpackaging-improvement-2 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#bug-fix-5 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#backward-incompatible-change-2 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> </nav> <a href=#clickhouse-release-19-14 title="ClickHouse Release 19.14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.14 </a> <nav id=toc-toc-4 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-14-7-15-2019-10-02 title="ClickHouse Release 19.14.7.15, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.14.7.15, 2019-10-02 </a> <nav id=toc-toc-4-1 class="nav flex-column pl-2"> <a href=#bug-fix-6 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-14-6-12-2019-09-19 title="ClickHouse Release 19.14.6.12, 2019-09-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.14.6.12, 2019-09-19 </a> <nav id=toc-toc-4-2 class="nav flex-column pl-2"> <a href=#bug-fix-7 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#buildtestingpackaging-improvement-3 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-14-3-3-2019-09-10 title="ClickHouse Release 19.14.3.3, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.14.3.3, 2019-09-10 </a> <nav id=toc-toc-4-3 class="nav flex-column pl-2"> <a href=#new-feature-4 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#experimental-feature-2 title="Experimental Feature" class="nav-link text-wrap d-inline-block w-100"> Experimental Feature </a> <a href=#bug-fix-8 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> <a href=#improvement-3 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement-2 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#buildtestingpackaging-improvement-4 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change-3 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> </nav> <a href=#clickhouse-release-19-13 title="ClickHouse Release 19.13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.13 </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-13-6-51-2019-10-02 title="ClickHouse Release 19.13.6.51, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.13.6.51, 2019-10-02 </a> <nav id=toc-toc-5-1 class="nav flex-column pl-2"> <a href=#bug-fix-9 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-13-5-44-2019-09-20 title="ClickHouse Release 19.13.5.44, 2019-09-20" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.13.5.44, 2019-09-20 </a> <nav id=toc-toc-5-2 class="nav flex-column pl-2"> <a href=#bug-fix-10 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-13-4-32-2019-09-10 title="ClickHouse Release 19.13.4.32, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.13.4.32, 2019-09-10 </a> <nav id=toc-toc-5-3 class="nav flex-column pl-2"> <a href=#bug-fix-11 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix-1 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-13-3-26-2019-08-22 title="ClickHouse Release 19.13.3.26, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.13.3.26, 2019-08-22 </a> <nav id=toc-toc-5-4 class="nav flex-column pl-2"> <a href=#bug-fix-12 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#security-fix-2 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-13-2-19-2019-08-14 title="ClickHouse Release 19.13.2.19, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.13.2.19, 2019-08-14 </a> <nav id=toc-toc-5-5 class="nav flex-column pl-2"> <a href=#new-feature-5 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#backward-incompatible-change-4 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#experimental-features title="Experimental Features" class="nav-link text-wrap d-inline-block w-100"> Experimental Features </a> <a href=#bug-fix-13 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement-4 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement-3 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#buildtestingpackaging-improvement-5 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> </nav> <a href=#clickhouse-release-19-11 title="ClickHouse Release 19.11" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11 </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-11-13-74-2019-11-01 title="ClickHouse Release 19.11.13.74, 2019-11-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.13.74, 2019-11-01 </a> <nav id=toc-toc-6-1 class="nav flex-column pl-2"> <a href=#bug-fix-14 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-12-69-2019-10-02 title="ClickHouse Release 19.11.12.69, 2019-10-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.12.69, 2019-10-02 </a> <nav id=toc-toc-6-2 class="nav flex-column pl-2"> <a href=#bug-fix-15 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-11-57-2019-09-13 title="ClickHouse Release 19.11.11.57, 2019-09-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.11.57, 2019-09-13 </a> <a href=#clickhouse-release-19-11-10-54-2019-09-10 title="ClickHouse Release 19.11.10.54, 2019-09-10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.10.54, 2019-09-10 </a> <nav id=toc-toc-6-4 class="nav flex-column pl-2"> <a href=#bug-fix-16 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-9-52-2019-09-6 title="ClickHouse Release 19.11.9.52, 2019-09-6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.9.52, 2019-09-6 </a> <nav id=toc-toc-6-5 class="nav flex-column pl-2"> <a href=#security-fix-3 title="Security Fix" class="nav-link text-wrap d-inline-block w-100"> Security Fix </a> </nav> <a href=#clickhouse-release-19-11-8-46-2019-08-22 title="ClickHouse Release 19.11.8.46, 2019-08-22" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.8.46, 2019-08-22 </a> <nav id=toc-toc-6-6 class="nav flex-column pl-2"> <a href=#bug-fix-17 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-11-7-40-2019-08-14 title="ClickHouse Release 19.11.7.40, 2019-08-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.7.40, 2019-08-14 </a> <nav id=toc-toc-6-7 class="nav flex-column pl-2"> <a href=#bug-fix-18 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement-5 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> </nav> <a href=#clickhouse-release-19-11-5-28-2019-08-05 title="ClickHouse Release 19.11.5.28, 2019-08-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.5.28, 2019-08-05 </a> <nav id=toc-toc-6-8 class="nav flex-column pl-2"> <a href=#bug-fix-19 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#backward-incompatible-change-5 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-11-4-24-2019-08-01 title="ClickHouse Release 19.11.4.24, 2019-08-01" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.4.24, 2019-08-01 </a> <nav id=toc-toc-6-9 class="nav flex-column pl-2"> <a href=#bug-fix-20 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#buildtestingpackaging-improvement-6 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change-6 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> <a href=#clickhouse-release-19-11-3-11-2019-07-18 title="ClickHouse Release 19.11.3.11, 2019-07-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.11.3.11, 2019-07-18 </a> <nav id=toc-toc-6-10 class="nav flex-column pl-2"> <a href=#new-feature-6 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix-21 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement-6 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement-4 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#buildtestingpackaging-improvement-7 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> <a href=#backward-incompatible-change-7 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> </nav> </nav> <a href=#clickhouse-release-19-10 title="ClickHouse Release 19.10" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.10 </a> <nav id=toc-toc-7 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-10-1-5-2019-07-12 title="ClickHouse Release 19.10.1.5, 2019-07-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.10.1.5, 2019-07-12 </a> <nav id=toc-toc-7-1 class="nav flex-column pl-2"> <a href=#new-feature-7 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#bug-fix-22 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#improvement-7 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#performance-improvement-5 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#buildtestingpackaging-improvement-8 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> </nav> <a href=#clickhouse-release-19-9 title="ClickHouse Release 19.9" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.9 </a> <nav id=toc-toc-8 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-9-3-31-2019-07-05 title="ClickHouse Release 19.9.3.31, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.9.3.31, 2019-07-05 </a> <nav id=toc-toc-8-1 class="nav flex-column pl-2"> <a href=#bug-fix-23 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-9-2-4-2019-06-24 title="ClickHouse Release 19.9.2.4, 2019-06-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.9.2.4, 2019-06-24 </a> <nav id=toc-toc-8-2 class="nav flex-column pl-2"> <a href=#new-feature-8 title="New Feature" class="nav-link text-wrap d-inline-block w-100"> New Feature </a> <a href=#improvement-8 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#bug-fix-24 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#buildtestingpackaging-improvement-9 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> </nav> <a href=#clickhouse-release-19-8 title="ClickHouse Release 19.8" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.8 </a> <nav id=toc-toc-9 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-8-3-8-2019-06-11 title="ClickHouse Release 19.8.3.8, 2019-06-11" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.8.3.8, 2019-06-11 </a> <nav id=toc-toc-9-1 class="nav flex-column pl-2"> <a href=#new-features title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#improvements title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#bug-fixes title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#documentation title=Documentation class="nav-link text-wrap d-inline-block w-100"> Documentation </a> <a href=#buildtestingpackaging-improvements title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> </nav> <a href=#clickhouse-release-19-7 title="ClickHouse Release 19.7" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.7 </a> <nav id=toc-toc-10 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-7-5-29-2019-07-05 title="ClickHouse Release 19.7.5.29, 2019-07-05" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.7.5.29, 2019-07-05 </a> <nav id=toc-toc-10-1 class="nav flex-column pl-2"> <a href=#bug-fix-25 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> </nav> <a href=#clickhouse-release-19-7-5-27-2019-06-09 title="ClickHouse Release 19.7.5.27, 2019-06-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.7.5.27, 2019-06-09 </a> <nav id=toc-toc-10-2 class="nav flex-column pl-2"> <a href=#new-features-1 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#bug-fixes-1 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-7-3-9-2019-05-30 title="ClickHouse Release 19.7.3.9, 2019-05-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.7.3.9, 2019-05-30 </a> <nav id=toc-toc-10-3 class="nav flex-column pl-2"> <a href=#new-features-2 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#bug-fixes-2 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#performance-improvements-1 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#documentation-1 title=Documentation class="nav-link text-wrap d-inline-block w-100"> Documentation </a> <a href=#buildtestingpackaging-improvements-1 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> </nav> <a href=#clickhouse-release-19-6 title="ClickHouse Release 19.6" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.6 </a> <nav id=toc-toc-11 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-6-3-18-2019-06-13 title="ClickHouse Release 19.6.3.18, 2019-06-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.6.3.18, 2019-06-13 </a> <nav id=toc-toc-11-1 class="nav flex-column pl-2"> <a href=#bug-fixes-3 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-6-2-11-2019-05-13 title="ClickHouse Release 19.6.2.11, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.6.2.11, 2019-05-13 </a> <nav id=toc-toc-11-2 class="nav flex-column pl-2"> <a href=#new-features-3 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features-1 title="Experimental Features" class="nav-link text-wrap d-inline-block w-100"> Experimental Features </a> <a href=#improvements-1 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements-2 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#backward-incompatible-changes title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#bug-fixes-4 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#buildtestingpackaging-improvements-2 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> </nav> <a href=#clickhouse-release-19-5 title="ClickHouse Release 19.5" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.5 </a> <nav id=toc-toc-12 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-5-4-22-2019-05-13 title="ClickHouse Release 19.5.4.22, 2019-05-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.5.4.22, 2019-05-13 </a> <nav id=toc-toc-12-1 class="nav flex-column pl-2"> <a href=#bug-fixes-5 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-5-3-8-2019-04-18 title="ClickHouse Release 19.5.3.8, 2019-04-18" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.5.3.8, 2019-04-18 </a> <nav id=toc-toc-12-2 class="nav flex-column pl-2"> <a href=#bug-fixes-6 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-5-2-6-2019-04-15 title="ClickHouse Release 19.5.2.6, 2019-04-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.5.2.6, 2019-04-15 </a> <nav id=toc-toc-12-3 class="nav flex-column pl-2"> <a href=#new-features-4 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#improvement-9 title=Improvement class="nav-link text-wrap d-inline-block w-100"> Improvement </a> <a href=#bug-fix-26 title="Bug Fix" class="nav-link text-wrap d-inline-block w-100"> Bug Fix </a> <a href=#backward-incompatible-change-8 title="Backward Incompatible Change" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Change </a> <a href=#performance-improvement-6 title="Performance Improvement" class="nav-link text-wrap d-inline-block w-100"> Performance Improvement </a> <a href=#buildtestingpackaging-improvement-10 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> </nav> <a href=#clickhouse-release-19-4 title="ClickHouse Release 19.4" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.4 </a> <nav id=toc-toc-13 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-4-4-33-2019-04-17 title="ClickHouse Release 19.4.4.33, 2019-04-17" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.4.4.33, 2019-04-17 </a> <nav id=toc-toc-13-1 class="nav flex-column pl-2"> <a href=#bug-fixes-7 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements-2 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> </nav> <a href=#clickhouse-release-19-4-3-11-2019-04-02 title="ClickHouse Release 19.4.3.11, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.4.3.11, 2019-04-02 </a> <nav id=toc-toc-13-2 class="nav flex-column pl-2"> <a href=#bug-fixes-8 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#buildtestingpackaging-improvement-11 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-4-2-7-2019-03-30 title="ClickHouse Release 19.4.2.7, 2019-03-30" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.4.2.7, 2019-03-30 </a> <nav id=toc-toc-13-3 class="nav flex-column pl-2"> <a href=#bug-fixes-9 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-4-1-3-2019-03-19 title="ClickHouse Release 19.4.1.3, 2019-03-19" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.4.1.3, 2019-03-19 </a> <nav id=toc-toc-13-4 class="nav flex-column pl-2"> <a href=#bug-fixes-10 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-4-0-49-2019-03-09 title="ClickHouse Release 19.4.0.49, 2019-03-09" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.4.0.49, 2019-03-09 </a> <nav id=toc-toc-13-5 class="nav flex-column pl-2"> <a href=#new-features-5 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#bug-fixes-11 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements-3 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements-3 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#buildtestingpackaging-improvement-12 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> </nav> <a href=#clickhouse-release-19-3 title="ClickHouse Release 19.3" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.3 </a> <nav id=toc-toc-14 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-3-9-1-2019-04-02 title="ClickHouse Release 19.3.9.1, 2019-04-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.3.9.1, 2019-04-02 </a> <nav id=toc-toc-14-1 class="nav flex-column pl-2"> <a href=#bug-fixes-12 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#buildtestingpackaging-improvement-13 title="Build/Testing/Packaging Improvement" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvement </a> </nav> <a href=#clickhouse-release-19-3-7-2019-03-12 title="ClickHouse Release 19.3.7, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.3.7, 2019-03-12 </a> <nav id=toc-toc-14-2 class="nav flex-column pl-2"> <a href=#bug-fixes-13 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-3-6-2019-03-02 title="ClickHouse Release 19.3.6, 2019-03-02" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.3.6, 2019-03-02 </a> <nav id=toc-toc-14-3 class="nav flex-column pl-2"> <a href=#bug-fixes-14 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#buildtestingpackaging-improvements-3 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-3-5-2019-02-21 title="ClickHouse Release 19.3.5, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.3.5, 2019-02-21 </a> <nav id=toc-toc-14-4 class="nav flex-column pl-2"> <a href=#bug-fixes-15 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-3-4-2019-02-16 title="ClickHouse Release 19.3.4, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.3.4, 2019-02-16 </a> <nav id=toc-toc-14-5 class="nav flex-column pl-2"> <a href=#improvements-4 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#bug-fixes-16 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#buildtestingpackaging-improvements-4 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> <a href=#clickhouse-release-19-3-3-2019-02-13 title="ClickHouse Release 19.3.3, 2019-02-13" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.3.3, 2019-02-13 </a> <nav id=toc-toc-14-6 class="nav flex-column pl-2"> <a href=#new-features-6 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features-2 title="Experimental Features" class="nav-link text-wrap d-inline-block w-100"> Experimental Features </a> <a href=#bug-fixes-17 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#buildtestingpackaging-improvements-5 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> <a href=#backward-incompatible-changes-1 title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#performance-improvements-4 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#improvements-5 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> </nav> </nav> <a href=#clickhouse-release-19-1 title="ClickHouse Release 19.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1 </a> <nav id=toc-toc-15 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-1-14-2019-03-14 title="ClickHouse Release 19.1.14, 2019-03-14" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1.14, 2019-03-14 </a> <a href=#clickhouse-release-19-1-13-2019-03-12 title="ClickHouse Release 19.1.13, 2019-03-12" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1.13, 2019-03-12 </a> <a href=#clickhouse-release-19-1-10-2019-03-03 title="ClickHouse Release 19.1.10, 2019-03-03" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1.10, 2019-03-03 </a> </nav> <a href=#clickhouse-release-19-1-1 title="ClickHouse Release 19.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1 </a> <nav id=toc-toc-16 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-1-9-2019-02-21 title="ClickHouse Release 19.1.9, 2019-02-21" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1.9, 2019-02-21 </a> <nav id=toc-toc-16-1 class="nav flex-column pl-2"> <a href=#bug-fixes-18 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-1-8-2019-02-16 title="ClickHouse Release 19.1.8, 2019-02-16" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1.8, 2019-02-16 </a> <nav id=toc-toc-16-2 class="nav flex-column pl-2"> <a href=#bug-fixes-19 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> </nav> <a href=#clickhouse-release-19-1-2 title="ClickHouse Release 19.1" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1 </a> <nav id=toc-toc-17 class="nav flex-column pl-2"> <a href=#clickhouse-release-19-1-7-2019-02-15 title="ClickHouse Release 19.1.7, 2019-02-15" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1.7, 2019-02-15 </a> <nav id=toc-toc-17-1 class="nav flex-column pl-2"> <a href=#bug-fixes-20 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> </nav> <a href=#clickhouse-release-19-1-6-2019-01-24 title="ClickHouse Release 19.1.6, 2019-01-24" class="nav-link text-wrap d-inline-block w-100"> ClickHouse Release 19.1.6, 2019-01-24 </a> <nav id=toc-toc-17-2 class="nav flex-column pl-2"> <a href=#new-features-7 title="New Features" class="nav-link text-wrap d-inline-block w-100"> New Features </a> <a href=#experimental-features-3 title="Experimental Features" class="nav-link text-wrap d-inline-block w-100"> Experimental Features </a> <a href=#bug-fixes-21 title="Bug Fixes" class="nav-link text-wrap d-inline-block w-100"> Bug Fixes </a> <a href=#improvements-6 title=Improvements class="nav-link text-wrap d-inline-block w-100"> Improvements </a> <a href=#performance-improvements-5 title="Performance Improvements" class="nav-link text-wrap d-inline-block w-100"> Performance Improvements </a> <a href=#backward-incompatible-changes-2 title="Backward Incompatible Changes" class="nav-link text-wrap d-inline-block w-100"> Backward Incompatible Changes </a> <a href=#buildtestingpackaging-improvements-6 title="Build/Testing/Packaging Improvements" class="nav-link text-wrap d-inline-block w-100"> Build/Testing/Packaging Improvements </a> </nav> </nav> <a href=#changelog-for-2018 title="Changelog for 2018" class="nav-link text-wrap d-inline-block w-100"> Changelog for 2018 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?00223b07></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>