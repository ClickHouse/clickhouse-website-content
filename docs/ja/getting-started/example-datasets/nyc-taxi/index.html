<!DOCTYPE html><html lang=ja data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>ニューヨークタクシー | ClickHouseドキュメント</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/logo-180x180.png><meta property=og:title content="ニューヨークタクシー | ClickHouseドキュメント"><meta property=og:description content="ニューヨークタクシー このデータセットは二つの方法で取得できます: 生データからインポート パーティション済みデータのダウンロード 生データのインポート方法 データセットの説明とダウンロード方法については、https://github.co"><meta property=og:type content=article><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta content=https://clickhouse.tech/docs/ja/getting-started/example-datasets/nyc-taxi/ property=og:url><link href=https://clickhouse.tech/docs/ja/getting-started/example-datasets/nyc-taxi/ rel=canonical><link href=https://clickhouse.tech/docs/ja/getting-started/example-datasets/nyc-taxi/amp/ rel=amphtml><link rel=search href=/opensearch.xml title=ClickHouse type=application/opensearchdescription+xml><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "ニューヨークタクシー | ClickHouseドキュメント",
"mainEntityOfPage": "https://clickhouse.tech/docs/ja/getting-started/example-datasets/nyc-taxi/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "ニューヨークタクシー | ClickHouseドキュメント",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><meta name=description content="ニューヨークタクシー このデータセットは二つの方法で取得できます: 生データからインポート パーティション済みデータのダウンロード 生データのインポート方法 データセットの説明とダウンロード方法については、https://github.co"><meta name=keywords content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics"><link rel=alternate href=https://clickhouse.tech/docs/en/getting-started/example-datasets/nyc-taxi/ hreflang=en><link rel=alternate href=https://clickhouse.tech/docs/zh/getting-started/example-datasets/nyc-taxi/ hreflang=zh><link rel=alternate href=https://clickhouse.tech/docs/es/getting-started/example-datasets/nyc-taxi/ hreflang=es><link rel=alternate href=https://clickhouse.tech/docs/fr/getting-started/example-datasets/nyc-taxi/ hreflang=fr><link rel=alternate href=https://clickhouse.tech/docs/ru/getting-started/example-datasets/nyc-taxi/ hreflang=ru><link rel=alternate href=https://clickhouse.tech/docs/ja/getting-started/example-datasets/nyc-taxi/ hreflang=ja><link rel=alternate href=https://clickhouse.tech/docs/en/getting-started/example-datasets/nyc-taxi/ hreflang=x-default><link href=/css/base.css?e27f3458 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> ニューヨークタクシー </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li id=edit-wrapper class=nav-item> <a id=edit-link href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/getting-started/example-datasets/nyc-taxi.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ja.svg alt=日本語 title=日本語 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/getting-started/example-datasets/nyc-taxi/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/getting-started/example-datasets/nyc-taxi/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/getting-started/example-datasets/nyc-taxi/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/getting-started/example-datasets/nyc-taxi/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/getting-started/example-datasets/nyc-taxi/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/getting-started/example-datasets/nyc-taxi/ class="dropdown-item disabled"> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=はじめに class="nav-link text-light dropdown-toggle px-0">はじめに</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../getting-started/install/ title=インストール class="nav-link text-light text-wrap d-inline-block w-100 px-0">インストール</a> <a href=../../../getting-started/tutorial/ title=チュートリアル class="nav-link text-light text-wrap d-inline-block w-100 px-0">チュートリアル</a> <a href=#sidebar-sidebar-1-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1-5 title=データセット例 class="nav-link text-light dropdown-toggle px-0">データセット例</a> <div id=sidebar-sidebar-1-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../getting-started/example-datasets/ title=イントロダクション class="nav-link text-light text-wrap d-inline-block w-100 px-0">イントロダクション</a> <a href=../../../getting-started/example-datasets/metrica/ title="Yandex.Metrica データ" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica データ</a> <a href=../../../getting-started/example-datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../../getting-started/example-datasets/nyc-taxi/ title=ニューヨークタクシー class="nav-link text-white active text-wrap d-inline-block w-100 px-0">ニューヨークタクシー</a> <a href=../../../getting-started/example-datasets/amplab-benchmark/ title="AMPLab Big Data ベンチマーク" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data ベンチマーク</a> <a href=../../../getting-started/example-datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../../getting-started/example-datasets/criteo/ title="Criteo のテラバイトクリックログ" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Criteo のテラバイトクリックログ</a> <a href=../../../getting-started/example-datasets/star-schema/ title="スタースキーマ ベンチマーク" class="nav-link text-light text-wrap d-inline-block w-100 px-0">スタースキーマ ベンチマーク</a> </nav> </div> <a href=../../../getting-started/playground/ title=Playground class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=インター class="nav-link text-light dropdown-toggle px-0">インター</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../interfaces/cli/ title=コマンド行クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">コマンド行クライアント</a> <a href=../../../interfaces/tcp/ title=ネイティブイ) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネイティブイ)</a> <a href=../../../interfaces/http/ title=HTTPインターフェ class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTPインターフェ</a> <a href=../../../interfaces/mysql/ title=MySQLインタ class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQLインタ</a> <a href=../../../interfaces/formats/ title=入力および出力フォーマット class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力および出力フォーマット</a> <a href=../../../interfaces/jdbc/ title=JDBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBCドライバ</a> <a href=../../../interfaces/odbc/ title=ODBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBCドライバ</a> <a href=../../../interfaces/cpp/ title=C++クライアントライ class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++クライアントライ</a> <a href=#sidebar-sidebar-2-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-10 title=サードパーティ class="nav-link text-light dropdown-toggle px-0">サードパーティ</a> <div id=sidebar-sidebar-2-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../interfaces/third-party/client-libraries/ title=クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">クライアント</a> <a href=../../../interfaces/third-party/integrations/ title=統合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">統合</a> <a href=../../../interfaces/third-party/gui/ title=視界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">視界面</a> <a href=../../../interfaces/third-party/proxy/ title=プロキシ class="nav-link text-light text-wrap d-inline-block w-100 px-0">プロキシ</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=エンジン class="nav-link text-light dropdown-toggle px-0">エンジン</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2 title=表エンジン class="nav-link text-light dropdown-toggle px-0">表エンジン</a> <div id=sidebar-sidebar-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=#sidebar-sidebar-3-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-2 title=メルゲツリー族 class="nav-link text-light dropdown-toggle px-0">メルゲツリー族</a> <div id=sidebar-sidebar-3-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/mergetree-family/mergetree/ title=メルゲツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">メルゲツリー</a> <a href=../../../engines/table-engines/mergetree-family/replication/ title=データ複製 class="nav-link text-light text-wrap d-inline-block w-100 px-0">データ複製</a> <a href=../../../engines/table-engines/mergetree-family/custom-partitioning-key/ title=カスタム分割キー class="nav-link text-light text-wrap d-inline-block w-100 px-0">カスタム分割キー</a> <a href=../../../engines/table-engines/mergetree-family/replacingmergetree/ title=置換マージツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">置換マージツリー</a> <a href=../../../engines/table-engines/mergetree-family/summingmergetree/ title=サミングマーゲツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">サミングマーゲツリー</a> <a href=../../../engines/table-engines/mergetree-family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../../engines/table-engines/mergetree-family/collapsingmergetree/ title=折りたたみマージツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">折りたたみマージツリー</a> <a href=../../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/ title=バージョニングコラプシングマーゲットリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">バージョニングコラプシングマーゲットリー</a> <a href=../../../engines/table-engines/mergetree-family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-3-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-3 title=ログファミリ class="nav-link text-light dropdown-toggle px-0">ログファミリ</a> <div id=sidebar-sidebar-3-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/log-family/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../engines/table-engines/log-family/stripelog/ title=ストリップログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ストリップログ</a> <a href=../../../engines/table-engines/log-family/log/ title=ログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ログ</a> <a href=../../../engines/table-engines/log-family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-3-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-4 title=統合 class="nav-link text-light dropdown-toggle px-0">統合</a> <div id=sidebar-sidebar-3-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/integrations/kafka/ title=カフカ class="nav-link text-light text-wrap d-inline-block w-100 px-0">カフカ</a> <a href=../../../engines/table-engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/table-engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../engines/table-engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../engines/table-engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-3-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-5 title=スペシャル class="nav-link text-light dropdown-toggle px-0">スペシャル</a> <div id=sidebar-sidebar-3-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/table-engines/special/distributed/ title=分散 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分散</a> <a href=../../../engines/table-engines/special/external-data/ title=外部データ class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部データ</a> <a href=../../../engines/table-engines/special/dictionary/ title=辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書</a> <a href=../../../engines/table-engines/special/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../../engines/table-engines/special/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../../engines/table-engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../../engines/table-engines/special/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../../engines/table-engines/special/join/ title=参加 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参加</a> <a href=../../../engines/table-engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../engines/table-engines/special/view/ title=表示 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表示</a> <a href=../../../engines/table-engines/special/materializedview/ title=マテリアライズドビュー class="nav-link text-light text-wrap d-inline-block w-100 px-0">マテリアライズドビュー</a> <a href=../../../engines/table-engines/special/memory/ title=メモリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">メモリ</a> <a href=../../../engines/table-engines/special/buffer/ title=バッファ class="nav-link text-light text-wrap d-inline-block w-100 px-0">バッファ</a> <a href=../../../engines/table-engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title=データベース class="nav-link text-light dropdown-toggle px-0">データベース</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../engines/database-engines/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../engines/database-engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../engines/database-engines/lazy/ title=怠け者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">怠け者</a> <a href=../../../engines/database-engines/atomic/ title=Atomic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=SQLリファレンス class="nav-link text-light dropdown-toggle px-0">SQLリファレンス</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title=文 class="nav-link text-light dropdown-toggle px-0">文</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-2 title=SELECT class="nav-link text-light dropdown-toggle px-0">SELECT</a> <div id=sidebar-sidebar-4-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/statements/select/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../../sql-reference/statements/select/array-join/ title="ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN</a> <a href=../../../sql-reference/statements/select/distinct/ title=DISTINCT class="nav-link text-light text-wrap d-inline-block w-100 px-0">DISTINCT</a> <a href=../../../sql-reference/statements/select/format/ title=FORMAT class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT</a> <a href=../../../sql-reference/statements/select/from/ title=FROM class="nav-link text-light text-wrap d-inline-block w-100 px-0">FROM</a> <a href=../../../sql-reference/statements/select/group-by/ title="GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GROUP BY</a> <a href=../../../sql-reference/statements/select/having/ title=HAVING class="nav-link text-light text-wrap d-inline-block w-100 px-0">HAVING</a> <a href=../../../sql-reference/statements/select/into-outfile/ title="INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE</a> <a href=../../../sql-reference/statements/select/join/ title=JOIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">JOIN</a> <a href=../../../sql-reference/statements/select/limit/ title=LIMIT class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a> <a href=../../../sql-reference/statements/select/limit-by/ title="LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT BY</a> <a href=../../../sql-reference/statements/select/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../../sql-reference/statements/select/prewhere/ title=PREWHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE</a> <a href=../../../sql-reference/statements/select/sample/ title=SAMPLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE</a> <a href=../../../sql-reference/statements/select/where/ title=WHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">WHERE</a> <a href=../../../sql-reference/statements/select/with/ title=WITH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WITH</a> </nav> </div> <a href=../../../sql-reference/statements/insert-into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../sql-reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../sql-reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../sql-reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../sql-reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../sql-reference/statements/grant/ title=GRANT class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRANT</a> <a href=../../../sql-reference/statements/revoke/ title=REVOKE class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a> <a href=../../../sql-reference/statements/misc/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> <a href=../../../sql-reference/statements/optimize/ title=OPTIMIZE class="nav-link text-light text-wrap d-inline-block w-100 px-0">OPTIMIZE</a> </nav> </div> <a href=../../../sql-reference/syntax/ title=構文 class="nav-link text-light text-wrap d-inline-block w-100 px-0">構文</a> <a href=#sidebar-sidebar-4-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-4 title=関数 class="nav-link text-light dropdown-toggle px-0">関数</a> <div id=sidebar-sidebar-4-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/functions/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../sql-reference/functions/arithmetic-functions/ title=算術 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算術</a> <a href=../../../sql-reference/functions/comparison-functions/ title=比較 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比較</a> <a href=../../../sql-reference/functions/logical-functions/ title=論理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">論理</a> <a href=../../../sql-reference/functions/type-conversion-functions/ title=タイプ変換 class="nav-link text-light text-wrap d-inline-block w-100 px-0">タイプ変換</a> <a href=../../../sql-reference/functions/date-time-functions/ title=日付と時刻の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付と時刻の操作</a> <a href=../../../sql-reference/functions/string-functions/ title=文字列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列の操作</a> <a href=../../../sql-reference/functions/string-search-functions/ title=文字列を検索する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列を検索する場合</a> <a href=../../../sql-reference/functions/string-replace-functions/ title=文字列で置換する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列で置換する場合</a> <a href=../../../sql-reference/functions/conditional-functions/ title=条件付き class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件付き</a> <a href=../../../sql-reference/functions/math-functions/ title=数学 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学</a> <a href=../../../sql-reference/functions/rounding-functions/ title=丸め class="nav-link text-light text-wrap d-inline-block w-100 px-0">丸め</a> <a href=../../../sql-reference/functions/array-functions/ title=配列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列の操作</a> <a href=../../../sql-reference/functions/splitting-merging-functions/ title=文字列と配列の分割とマージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列と配列の分割とマージ</a> <a href=../../../sql-reference/functions/bit-functions/ title=ビット class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビット</a> <a href=../../../sql-reference/functions/bitmap-functions/ title=ビットマ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビットマ</a> <a href=../../../sql-reference/functions/hash-functions/ title=ハッシュ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハッシュ</a> <a href=../../../sql-reference/functions/random-functions/ title=擬似乱数の生成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">擬似乱数の生成</a> <a href=../../../sql-reference/functions/encoding-functions/ title=エンコード class="nav-link text-light text-wrap d-inline-block w-100 px-0">エンコード</a> <a href=../../../sql-reference/functions/uuid-functions/ title=UUIDの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUIDの操作</a> <a href=../../../sql-reference/functions/url-functions/ title=Urlの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Urlの操作</a> <a href=../../../sql-reference/functions/ip-address-functions/ title=IPアドレスの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPアドレスの操作</a> <a href=../../../sql-reference/functions/json-functions/ title=JSONでの作業 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSONでの作業</a> <a href=../../../sql-reference/functions/higher-order-functions/ title=高次 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高次</a> <a href=../../../sql-reference/functions/ext-dict-functions/ title=外部辞書の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書の操作</a> <a href=../../../sql-reference/functions/ym-dict-functions/ title=Yandexでの作業。メトリカ辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexでの作業。メトリカ辞書</a> <a href=../../../sql-reference/functions/in-functions/ title=IN演算子の実装 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN演算子の実装</a> <a href=../../../sql-reference/functions/array-join/ title=アレイジョイン class="nav-link text-light text-wrap d-inline-block w-100 px-0">アレイジョイン</a> <a href=../../../sql-reference/functions/geo/ title=地理座標の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">地理座標の操作</a> <a href=../../../sql-reference/functions/functions-for-nulls/ title=Null許容引数の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null許容引数の操作</a> <a href=../../../sql-reference/functions/machine-learning-functions/ title=機械学習機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">機械学習機能</a> <a href=../../../sql-reference/functions/introspection/ title=内省 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内省</a> <a href=../../../sql-reference/functions/other-functions/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=#sidebar-sidebar-4-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-5 title=集計関数 class="nav-link text-light dropdown-toggle px-0">集計関数</a> <div id=sidebar-sidebar-4-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/aggregate-functions/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../sql-reference/aggregate-functions/reference/ title=参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参照</a> <a href=../../../sql-reference/aggregate-functions/combinators/ title=コンビネータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">コンビネータ</a> <a href=../../../sql-reference/aggregate-functions/parametric-functions/ title=パラメトリック class="nav-link text-light text-wrap d-inline-block w-100 px-0">パラメトリック</a> </nav> </div> <a href=#sidebar-sidebar-4-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-6 title=テーブル関数 class="nav-link text-light dropdown-toggle px-0">テーブル関数</a> <div id=sidebar-sidebar-4-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/table-functions/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../sql-reference/table-functions/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../../sql-reference/table-functions/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../../sql-reference/table-functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../../sql-reference/table-functions/remote/ title=リモート class="nav-link text-light text-wrap d-inline-block w-100 px-0">リモート</a> <a href=../../../sql-reference/table-functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../../sql-reference/table-functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../sql-reference/table-functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../sql-reference/table-functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../../sql-reference/table-functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../../sql-reference/table-functions/input/ title=入力 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力</a> <a href=../../../sql-reference/table-functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-4-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7 title=辞書 class="nav-link text-light dropdown-toggle px-0">辞書</a> <div id=sidebar-sidebar-4-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/dictionaries/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=#sidebar-sidebar-4-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7-2 title=外部辞書 class="nav-link text-light dropdown-toggle px-0">外部辞書</a> <div id=sidebar-sidebar-4-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts/ title=一般的な説明 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な説明</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/ title=外部ディクショナリの構成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部ディクショナリの構成</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/ title=メモリへの辞書の格納 class="nav-link text-light text-wrap d-inline-block w-100 px-0">メモリへの辞書の格納</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/ title=辞書の更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書の更新</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/ title=外部辞書のソース class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書のソース</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/ title=辞書キーとフィールド class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書キーとフィールド</a> <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/ title=階層辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">階層辞書</a> </nav> </div> <a href=../../../sql-reference/dictionaries/internal-dicts/ title=内部辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部辞書</a> </nav> </div> <a href=#sidebar-sidebar-4-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8 title=データ型 class="nav-link text-light dropdown-toggle px-0">データ型</a> <div id=sidebar-sidebar-4-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../sql-reference/data-types/int-uint/ title=UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64</a> <a href=../../../sql-reference/data-types/float/ title=Float32、Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32、Float64</a> <a href=../../../sql-reference/data-types/decimal/ title=小数点 class="nav-link text-light text-wrap d-inline-block w-100 px-0">小数点</a> <a href=../../../sql-reference/data-types/boolean/ title=ブール値 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ブール値</a> <a href=../../../sql-reference/data-types/string/ title=文字列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列</a> <a href=../../../sql-reference/data-types/fixedstring/ title=固定文字列(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">固定文字列(N)</a> <a href=../../../sql-reference/data-types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../sql-reference/data-types/date/ title=日付 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付</a> <a href=../../../sql-reference/data-types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../../sql-reference/data-types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../sql-reference/data-types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../sql-reference/data-types/array/ title=配列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列(T)</a> <a href=../../../sql-reference/data-types/aggregatefunction/ title=AggregateFunction(名前,types_of_arguments...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(名前,types_of_arguments...)</a> <a href=../../../sql-reference/data-types/tuple/ title=Tuple(T1,T2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1,T2,...)</a> <a href=../../../sql-reference/data-types/nullable/ title=Null可能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null可能</a> <a href=#sidebar-sidebar-4-8-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8-17 title=入れ子データ構造 class="nav-link text-light dropdown-toggle px-0">入れ子データ構造</a> <div id=sidebar-sidebar-4-8-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/nested-data-structures/nested/ title=ネストされた(Name1Type1,Name2Type2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネストされた(Name1Type1,Name2Type2,...)</a> </nav> </div> <a href=#sidebar-sidebar-4-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8-18 title=特殊データ型 class="nav-link text-light dropdown-toggle px-0">特殊データ型</a> <div id=sidebar-sidebar-4-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/special-data-types/expression/ title=式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">式</a> <a href=../../../sql-reference/data-types/special-data-types/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../../sql-reference/data-types/special-data-types/nothing/ title=何もない class="nav-link text-light text-wrap d-inline-block w-100 px-0">何もない</a> <a href=../../../sql-reference/data-types/special-data-types/interval/ title=間隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">間隔</a> </nav> </div> <a href=#sidebar-sidebar-4-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8-19 title=ドメイン class="nav-link text-light dropdown-toggle px-0">ドメイン</a> <div id=sidebar-sidebar-4-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/data-types/domains/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../sql-reference/data-types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../sql-reference/data-types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../../sql-reference/data-types/simpleaggregatefunction/ title=SimpleAggregateFunction class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction</a> </nav> </div> <a href=#sidebar-sidebar-4-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-9 title=演算子 class="nav-link text-light dropdown-toggle px-0">演算子</a> <div id=sidebar-sidebar-4-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../sql-reference/operators/ title=演算子 class="nav-link text-light text-wrap d-inline-block w-100 px-0">演算子</a> <a href=../../../sql-reference/operators/in/ title="IN Operators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN Operators</a> </nav> </div> <a href=../../../sql-reference/ansi/ title=ANSIの互換性 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSIの互換性</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=ガイド class="nav-link text-light dropdown-toggle px-0">ガイド</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../guides/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../guides/apply-catboost-model/ title=CatBoostモデルの適用 class="nav-link text-light text-wrap d-inline-block w-100 px-0">CatBoostモデルの適用</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=操作 class="nav-link text-light dropdown-toggle px-0">操作</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../operations/requirements/ title=要件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要件</a> <a href=../../../operations/monitoring/ title=監視 class="nav-link text-light text-wrap d-inline-block w-100 px-0">監視</a> <a href=../../../operations/troubleshooting/ title=トラブルシ class="nav-link text-light text-wrap d-inline-block w-100 px-0">トラブルシ</a> <a href=../../../operations/update/ title=クリックハウスの更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウスの更新</a> <a href=../../../operations/access-rights/ title=アクセス制御とアカウント管理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">アクセス制御とアカウント管理</a> <a href=../../../operations/backup/ title=データバックア class="nav-link text-light text-wrap d-inline-block w-100 px-0">データバックア</a> <a href=../../../operations/configuration-files/ title=設定ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定ファイル</a> <a href=../../../operations/quotas/ title=クォータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">クォータ</a> <a href=../../../operations/system-tables/ title=システム表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">システム表</a> <a href=#sidebar-sidebar-6-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-11 title=性能の最適化 class="nav-link text-light dropdown-toggle px-0">性能の最適化</a> <div id=sidebar-sidebar-6-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/optimizing-performance/sampling-query-profiler/ title=Queryプロファイリング class="nav-link text-light text-wrap d-inline-block w-100 px-0">Queryプロファイリング</a> </nav> </div> <a href=#sidebar-sidebar-6-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-12 title=サーバ構成パラメータ class="nav-link text-light dropdown-toggle px-0">サーバ構成パラメータ</a> <div id=sidebar-sidebar-6-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/server-configuration-parameters/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../operations/server-configuration-parameters/settings/ title=サーバー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">サーバー設定</a> </nav> </div> <a href=../../../operations/performance-test/ title=ハードウェア試験 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハードウェア試験</a> <a href=#sidebar-sidebar-6-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-14 title=設定 class="nav-link text-light dropdown-toggle px-0">設定</a> <div id=sidebar-sidebar-6-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/settings/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../../operations/settings/permissions-for-queries/ title=クエリの権限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの権限</a> <a href=../../../operations/settings/query-complexity/ title=クエリの複雑さの制限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの複雑さの制限</a> <a href=../../../operations/settings/settings-profiles/ title=設定プロファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定プロファイル</a> <a href=../../../operations/settings/constraints-on-settings/ title=設定の制約 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定の制約</a> <a href=../../../operations/settings/settings-users/ title=ユーザー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ユーザー設定</a> <a href=../../../operations/settings/settings/ title=設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定</a> </nav> </div> <a href=#sidebar-sidebar-6-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-15 title=ユーティリ class="nav-link text-light dropdown-toggle px-0">ユーティリ</a> <div id=sidebar-sidebar-6-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../operations/utilities/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../../operations/utilities/clickhouse-copier/ title=クリックハウス-複写機 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウス-複写機</a> <a href=../../../operations/utilities/clickhouse-local/ title=ﾂつｨﾂ姪 ﾂ債ﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂ債ﾂつｹ</a> <a href=../../../operations/utilities/clickhouse-benchmark/ title=clickhouse-ベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-ベンチマーク</a> </nav> </div> <a href=../../../operations/tips/ title=使用法の推奨事項 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用法の推奨事項</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=開発 class="nav-link text-light dropdown-toggle px-0">開発</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../development/developer-instruction/ title=初心者ClickHouse開発者の指示 class="nav-link text-light text-wrap d-inline-block w-100 px-0">初心者ClickHouse開発者の指示</a> <a href=../../../development/architecture/ title=クリックハウス建築の概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウス建築の概要</a> <a href=../../../development/browse-code/ title=ソースコードの参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ソースコードの参照</a> <a href=../../../development/build/ title=Linux上でClickHouseを構築する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Linux上でClickHouseを構築する方法</a> <a href=../../../development/build-osx/ title="Mac OS XでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS XでClickHouseを構築する方法</a> <a href=../../../development/build-cross-osx/ title="Mac OS X用のLinux上でClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS X用のLinux上でClickHouseを構築する方法</a> <a href=../../../development/build-cross-arm/ title=Aarch64用のLinux上でClickHouseを構築する方法(ARM64) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aarch64用のLinux上でClickHouseを構築する方法(ARM64)</a> <a href=../../../development/style/ title=C++コードの書き方 class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++コードの書き方</a> <a href=../../../development/tests/ title=Testing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing</a> <a href=../../../development/contrib/ title=サードパーティ製ライブラリを使用 class="nav-link text-light text-wrap d-inline-block w-100 px-0">サードパーティ製ライブラリを使用</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=商業 class="nav-link text-light dropdown-toggle px-0">商業</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../commercial/cloud/ title=クラウド class="nav-link text-light text-wrap d-inline-block w-100 px-0">クラウド</a> <a href=../../../commercial/support/ title=Support class="nav-link text-light text-wrap d-inline-block w-100 px-0">Support</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=新着情報 class="nav-link text-light dropdown-toggle px-0">新着情報</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-9-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-2 title=Changelog class="nav-link text-light dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-9-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../whats-new/changelog/ title=2021 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a> <a href=../../../whats-new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../whats-new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../whats-new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../whats-new/roadmap/ title=ロード class="nav-link text-light text-wrap d-inline-block w-100 px-0">ロード</a> <a href=../../../whats-new/security-changelog/ title=セキュリティ変更履歴 class="nav-link text-light text-wrap d-inline-block w-100 px-0">セキュリティ変更履歴</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=F.A.Q. class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../faq/general/ title=一般的な質問 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な質問</a> </nav> </div> <a href=../../../single/clickhouse_ja.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-4"> <div id=content class=mt-md-n3> <nav class=text-muted aria-label=breadcrumb> <ol class="breadcrumb bg-transparent p-0"> <li class=breadcrumb-item><a href=../../ class=text-reset>はじめに</a> </li> <li class=breadcrumb-item><a href=../ class=text-reset>データセット例</a> </li> </ol> </nav> <h1 id=new-york-taxi-data>ニューヨークタクシー<a class=headerlink href=#new-york-taxi-data title="Permanent link"> </a></h1> <p>このデータセットは二つの方法で取得できます:</p> <ul> <li>生データからインポート</li> <li>パーティション済みデータのダウンロード</li> </ul> <h2 id=how-to-import-the-raw-data>生データのインポート方法<a class=headerlink href=#how-to-import-the-raw-data title="Permanent link"> </a></h2> <p>データセットの説明とダウンロード方法については、<a href=https://github.com/toddwschneider/nyc-taxi-data target=_blank>https://github.com/toddwschneider/nyc-taxi-data</a> と <a href=http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html target=_blank>http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html</a> を参照してください。</p> <p>ダウンロードすると、CSVファイルで約227GBの非圧縮データが生成されます。ダウンロードは約1Gbitの回線で1時間以上かかります。(s3.amazonaws.com からの並列ダウンロードは1Gbitチャネルの少なくとも半分を回復します)。</p> <p>一部のファイルは完全にダウンロードできない場合があります。ファイルサイズを確認し、疑わしいと思われるものは再ダウンロードしてください。</p> <p>ファイルの中には、無効な行が含まれている場合があり、以下のように修正することができます。</p> <div class=codehilite><pre><span></span><code class=syntax>sed -E <span class=s1>'/(.*,){18,}/d'</span> data/yellow_tripdata_2010-02.csv &gt; data/yellow_tripdata_2010-02.csv_
sed -E <span class=s1>'/(.*,){18,}/d'</span> data/yellow_tripdata_2010-03.csv &gt; data/yellow_tripdata_2010-03.csv_
mv data/yellow_tripdata_2010-02.csv_ data/yellow_tripdata_2010-02.csv
mv data/yellow_tripdata_2010-03.csv_ data/yellow_tripdata_2010-03.csv
</code></pre></div> <p>その後、PostgreSQLでデータを前処理する必要があります。これにより、(地図上の点とニューヨーク市の行政区を一致させるために) ポリゴン内の点の選択を作成し、JOINを使用してすべてのデータを単一の非正規化されたフラットテーブルに結合します。これを行うには、PostGISをサポートしたPostgreSQLをインストールする必要があります。</p> <p><code class=syntax>inititialize_database.sh</code> を実行する際には注意が必要で、すべてのテーブルが正しく作成されていることを手動で再確認してください。</p> <p>1ヶ月分のデータをPostgreSQLで処理するのに約20～30分、合計で約48時間かかります。</p> <p>ダウンロードした行数は以下のように確認できます:</p> <div class=codehilite><pre><span></span><code class=syntax>$ <span class=nb>time</span> psql nyc-taxi-data -c <span class=s2>"SELECT count(*) FROM trips;"</span>
<span class=c1>## Count</span>
 <span class=m>1298979494</span>
<span class=o>(</span><span class=m>1</span> row<span class=o>)</span>

real    7m9.164s
</code></pre></div> <p>(これはMark Litwintschik氏が一連のブログ記事で報告した11億行をわずかに上回っています)</p> <p>PostgreSQLのデータは370GBの容量を使用します。</p> <p>PostgreSQLからデータをエクスポート:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>COPY</span>
<span class=p>(</span>
    <span class=k>SELECT</span> <span class=n>trips</span><span class=p>.</span><span class=n>id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>vendor_id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_datetime</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_datetime</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>store_and_fwd_flag</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>rate_code_id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_longitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_latitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_longitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_latitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>passenger_count</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>trip_distance</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>fare_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>extra</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>mta_tax</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>tip_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>tolls_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>ehail_fee</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>improvement_surcharge</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>total_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>payment_type</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>trip_type</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff</span><span class=p>,</span>

           <span class=n>cab_types</span><span class=p>.</span><span class=k>type</span> <span class=n>cab_type</span><span class=p>,</span>

           <span class=n>weather</span><span class=p>.</span><span class=n>precipitation_tenths_of_mm</span> <span class=n>rain</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>snow_depth_mm</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>snowfall_mm</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>max_temperature_tenths_degrees_celsius</span> <span class=n>max_temp</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>min_temperature_tenths_degrees_celsius</span> <span class=n>min_temp</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>average_wind_speed_tenths_of_meters_per_second</span> <span class=n>wind</span><span class=p>,</span>

           <span class=n>pick_up</span><span class=p>.</span><span class=n>gid</span> <span class=n>pickup_nyct2010_gid</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ctlabel</span> <span class=n>pickup_ctlabel</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>borocode</span> <span class=n>pickup_borocode</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>boroname</span> <span class=n>pickup_boroname</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ct2010</span> <span class=n>pickup_ct2010</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>boroct2010</span> <span class=n>pickup_boroct2010</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>cdeligibil</span> <span class=n>pickup_cdeligibil</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ntacode</span> <span class=n>pickup_ntacode</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ntaname</span> <span class=n>pickup_ntaname</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>puma</span> <span class=n>pickup_puma</span><span class=p>,</span>

           <span class=n>drop_off</span><span class=p>.</span><span class=n>gid</span> <span class=n>dropoff_nyct2010_gid</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ctlabel</span> <span class=n>dropoff_ctlabel</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>borocode</span> <span class=n>dropoff_borocode</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>boroname</span> <span class=n>dropoff_boroname</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ct2010</span> <span class=n>dropoff_ct2010</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>boroct2010</span> <span class=n>dropoff_boroct2010</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>cdeligibil</span> <span class=n>dropoff_cdeligibil</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ntacode</span> <span class=n>dropoff_ntacode</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ntaname</span> <span class=n>dropoff_ntaname</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>puma</span> <span class=n>dropoff_puma</span>
    <span class=k>FROM</span> <span class=n>trips</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>cab_types</span>
        <span class=k>ON</span> <span class=n>trips</span><span class=p>.</span><span class=n>cab_type_id</span> <span class=o>=</span> <span class=n>cab_types</span><span class=p>.</span><span class=n>id</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>central_park_weather_observations_raw</span> <span class=n>weather</span>
        <span class=k>ON</span> <span class=n>weather</span><span class=p>.</span><span class=nb>date</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>pickup_datetime</span><span class=p>::</span><span class=nb>date</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>nyct2010</span> <span class=n>pick_up</span>
        <span class=k>ON</span> <span class=n>pick_up</span><span class=p>.</span><span class=n>gid</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>pickup_nyct2010_gid</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>nyct2010</span> <span class=n>drop_off</span>
        <span class=k>ON</span> <span class=n>drop_off</span><span class=p>.</span><span class=n>gid</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_nyct2010_gid</span>
<span class=p>)</span> <span class=k>TO</span> <span class=s1>'/opt/milovidov/nyc-taxi-data/trips.tsv'</span><span class=p>;</span>
</code></pre></div> <p>データのスナップショットは、毎秒約50MBの速度で作成されます。スナップショットを作成している間、PostgreSQLは毎秒約28MBの速度でディスクから読み込みます。<br> これには約5時間かかります。結果として得られるTSVファイルは 590612904969 バイトです。</p> <p>ClickHouseで一時テーブルを作成します:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips</span>
<span class=p>(</span>
<span class=n>trip_id</span>                 <span class=n>UInt32</span><span class=p>,</span>
<span class=n>vendor_id</span>               <span class=n>String</span><span class=p>,</span>
<span class=n>pickup_datetime</span>         <span class=n>DateTime</span><span class=p>,</span>
<span class=n>dropoff_datetime</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>DateTime</span><span class=p>),</span>
<span class=n>store_and_fwd_flag</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>)),</span>
<span class=n>rate_code_id</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_longitude</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>pickup_latitude</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>dropoff_longitude</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>dropoff_latitude</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>passenger_count</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>trip_distance</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>fare_amount</span>             <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>extra</span>                   <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>mta_tax</span>                 <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>tip_amount</span>              <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>tolls_amount</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>ehail_fee</span>               <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>improvement_surcharge</span>   <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>total_amount</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>payment_type</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>trip_type</span>               <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup</span>                  <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff</span>                 <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>cab_type</span>                <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>precipitation</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>snow_depth</span>              <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>snowfall</span>                <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>max_temperature</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>min_temperature</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>average_wind_speed</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_nyct2010_gid</span>     <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_ctlabel</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_borocode</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_boroname</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_ct2010</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_boroct2010</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_cdeligibil</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>)),</span>
<span class=n>pickup_ntacode</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_ntaname</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_puma</span>             <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_nyct2010_gid</span>    <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>dropoff_ctlabel</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_borocode</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>dropoff_boroname</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ct2010</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_boroct2010</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_cdeligibil</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ntacode</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ntaname</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_puma</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
</code></pre></div> <p>これは、フィールドをより正しいデータ型に変換したり、可能であればNULLを排除したりするために必要です。</p> <div class=codehilite><pre><span></span><code class=syntax>$ <span class=nb>time</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO trips FORMAT TabSeparated"</span> &lt; trips.tsv

real    75m56.214s
</code></pre></div> <p>データの読み込み速度は 112～140Mb/秒です。<br> 1ストリームで、Log型のテーブルにデータをロードするのに76分かかりました。<br> このテーブルのデータは 142GB を使用します。</p> <p>(Postgresから直接データをインポートするには、<code class=syntax>COPY ... TO PROGRAM</code>)を使用しても可能です。</p> <p>残念ながら、天気に関連するフィールド(降水量...平均風速)はすべてNULLで埋め尽くされていました。このため、最終的なデータセットから削除します。</p> <p>まず、一つのサーバにテーブルを作成します。そのあとで、テーブルを分散させます。</p> <p>サマリーテーブルを作成します:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips_mergetree</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>,</span> <span class=n>pickup_datetime</span><span class=p>,</span> <span class=mi>8192</span><span class=p>)</span>
<span class=k>AS</span> <span class=k>SELECT</span>

<span class=n>trip_id</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>vendor_id</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'1'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'2'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'CMT'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'VTS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'DDS'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>'B02512'</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span> <span class=s1>'B02598'</span> <span class=o>=</span> <span class=mi>11</span><span class=p>,</span> <span class=s1>'B02617'</span> <span class=o>=</span> <span class=mi>12</span><span class=p>,</span> <span class=s1>'B02682'</span> <span class=o>=</span> <span class=mi>13</span><span class=p>,</span> <span class=s1>'B02764'</span> <span class=o>=</span> <span class=mi>14</span><span class=p>))</span> <span class=k>AS</span> <span class=n>vendor_id</span><span class=p>,</span>
<span class=n>toDate</span><span class=p>(</span><span class=n>pickup_datetime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_date</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_datetime</span><span class=p>,</span> <span class=n>toDateTime</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_datetime</span><span class=p>,</span>
<span class=n>toDate</span><span class=p>(</span><span class=n>dropoff_datetime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_date</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_datetime</span><span class=p>,</span> <span class=n>toDateTime</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_datetime</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>store_and_fwd_flag</span><span class=p>)</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'Y'</span><span class=p>,</span> <span class=s1>'1'</span><span class=p>,</span> <span class=s1>'2'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>store_and_fwd_flag</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>rate_code_id</span><span class=p>)</span> <span class=k>AS</span> <span class=n>rate_code_id</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_longitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_longitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_latitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_latitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_longitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_longitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_latitude</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_latitude</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>passenger_count</span><span class=p>)</span> <span class=k>AS</span> <span class=n>passenger_count</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>trip_distance</span><span class=p>)</span> <span class=k>AS</span> <span class=n>trip_distance</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>fare_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>fare_amount</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>extra</span><span class=p>)</span> <span class=k>AS</span> <span class=n>extra</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>mta_tax</span><span class=p>)</span> <span class=k>AS</span> <span class=n>mta_tax</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>tip_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>tip_amount</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>tolls_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>tolls_amount</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>ehail_fee</span><span class=p>)</span> <span class=k>AS</span> <span class=n>ehail_fee</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>improvement_surcharge</span><span class=p>)</span> <span class=k>AS</span> <span class=n>improvement_surcharge</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>total_amount</span><span class=p>)</span> <span class=k>AS</span> <span class=n>total_amount</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>((</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>payment_type</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pt</span><span class=p>)</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'CSH'</span><span class=p>,</span> <span class=s1>'CASH'</span><span class=p>,</span> <span class=s1>'Cash'</span><span class=p>,</span> <span class=s1>'CAS'</span><span class=p>,</span> <span class=s1>'Cas'</span><span class=p>,</span> <span class=s1>'1'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'CSH'</span> <span class=p>:</span> <span class=p>(</span><span class=n>pt</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'CRD'</span><span class=p>,</span> <span class=s1>'Credit'</span><span class=p>,</span> <span class=s1>'Cre'</span><span class=p>,</span> <span class=s1>'CRE'</span><span class=p>,</span> <span class=s1>'CREDIT'</span><span class=p>,</span> <span class=s1>'2'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'CRE'</span> <span class=p>:</span> <span class=p>(</span><span class=n>pt</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'NOC'</span><span class=p>,</span> <span class=s1>'No Charge'</span><span class=p>,</span> <span class=s1>'No'</span><span class=p>,</span> <span class=s1>'3'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'NOC'</span> <span class=p>:</span> <span class=p>(</span><span class=n>pt</span> <span class=k>IN</span> <span class=p>(</span><span class=s1>'DIS'</span><span class=p>,</span> <span class=s1>'Dispute'</span><span class=p>,</span> <span class=s1>'Dis'</span><span class=p>,</span> <span class=s1>'4'</span><span class=p>)</span> <span class=o>?</span> <span class=s1>'DIS'</span> <span class=p>:</span> <span class=s1>'UNK'</span><span class=p>)))</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'CSH'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'CRE'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'UNK'</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'NOC'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'DIS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>))</span> <span class=k>AS</span> <span class=n>payment_type_</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>trip_type</span><span class=p>)</span> <span class=k>AS</span> <span class=n>trip_type</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>toFixedString</span><span class=p>(</span><span class=n>unhex</span><span class=p>(</span><span class=n>pickup</span><span class=p>),</span> <span class=mi>25</span><span class=p>),</span> <span class=n>toFixedString</span><span class=p>(</span><span class=s1>''</span><span class=p>,</span> <span class=mi>25</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup</span><span class=p>,</span>
<span class=n>ifNull</span><span class=p>(</span><span class=n>toFixedString</span><span class=p>(</span><span class=n>unhex</span><span class=p>(</span><span class=n>dropoff</span><span class=p>),</span> <span class=mi>25</span><span class=p>),</span> <span class=n>toFixedString</span><span class=p>(</span><span class=s1>''</span><span class=p>,</span> <span class=mi>25</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>cab_type</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'yellow'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'green'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'uber'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>))</span> <span class=k>AS</span> <span class=n>cab_type</span><span class=p>,</span>

<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_nyct2010_gid</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_nyct2010_gid</span><span class=p>,</span>
<span class=n>toFloat32</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_ctlabel</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_ctlabel</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_borocode</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_borocode</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_boroname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_boroname</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_ct2010</span><span class=p>,</span> <span class=s1>'000000'</span><span class=p>),</span> <span class=mi>6</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_ct2010</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_boroct2010</span><span class=p>,</span> <span class=s1>'0000000'</span><span class=p>),</span> <span class=mi>7</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_boroct2010</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_cdeligibil</span><span class=p>,</span> <span class=s1>' '</span><span class=p>))</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_cdeligibil</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_ntacode</span><span class=p>,</span> <span class=s1>'0000'</span><span class=p>),</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=n>pickup_ntacode</span><span class=p>,</span>

<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>pickup_ntaname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_ntaname</span><span class=p>,</span>

<span class=n>toUInt16</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>pickup_puma</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>pickup_puma</span><span class=p>,</span>

<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_nyct2010_gid</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_nyct2010_gid</span><span class=p>,</span>
<span class=n>toFloat32</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_ctlabel</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_ctlabel</span><span class=p>,</span>
<span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_borocode</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_borocode</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_boroname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_boroname</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_ct2010</span><span class=p>,</span> <span class=s1>'000000'</span><span class=p>),</span> <span class=mi>6</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_ct2010</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_boroct2010</span><span class=p>,</span> <span class=s1>'0000000'</span><span class=p>),</span> <span class=mi>7</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_boroct2010</span><span class=p>,</span>
<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_cdeligibil</span><span class=p>,</span> <span class=s1>' '</span><span class=p>))</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_cdeligibil</span><span class=p>,</span>
<span class=n>toFixedString</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_ntacode</span><span class=p>,</span> <span class=s1>'0000'</span><span class=p>),</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=n>dropoff_ntacode</span><span class=p>,</span>

<span class=k>CAST</span><span class=p>(</span><span class=n>assumeNotNull</span><span class=p>(</span><span class=n>dropoff_ntaname</span><span class=p>)</span> <span class=k>AS</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_ntaname</span><span class=p>,</span>

<span class=n>toUInt16</span><span class=p>(</span><span class=n>ifNull</span><span class=p>(</span><span class=n>dropoff_puma</span><span class=p>,</span> <span class=s1>'0'</span><span class=p>))</span> <span class=k>AS</span> <span class=n>dropoff_puma</span>

<span class=k>FROM</span> <span class=n>trips</span>
</code></pre></div> <p>これは1秒間に約428,000行の速度で3030秒かかります。<br> より速くロードするには、<code class=syntax>MergeTree</code>の代わりに<code class=syntax>Log</code>エンジンでテーブルを作成します。この場合、ダウンロードは200秒よりも速く動作します。</p> <p>テーブルは126GBのディスク領域を使用します。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=k>sum</span><span class=p>(</span><span class=n>bytes</span><span class=p>))</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>parts</span> <span class=k>WHERE</span> <span class=k>table</span> <span class=o>=</span> <span class=s1>'trips_mergetree'</span> <span class=k>AND</span> <span class=n>active</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─formatReadableSize(sum(bytes))─┐
│ 126.18 GiB                     │
└────────────────────────────────┘
</code></pre></div> <p>その他に、MergeTree で OPTIMIZE クエリを実行することができます。しかし、これがなくてもうまく動作するので、必須ではありません。</p> <h2 id=download-of-prepared-partitions>パーティションされたデータのダウンロード<a class=headerlink href=#download-of-prepared-partitions title="Permanent link"> </a></h2> <div class=codehilite><pre><span></span><code class=syntax>$ curl -O https://datasets.clickhouse.tech/trips_mergetree/partitions/trips_mergetree.tar
$ tar xvf trips_mergetree.tar -C /var/lib/clickhouse <span class=c1># path to ClickHouse data directory</span>
$ <span class=c1># check permissions of unpacked data, fix if required</span>
$ sudo service clickhouse-server restart
$ clickhouse-client --query <span class=s2>"select count(*) from datasets.trips_mergetree"</span>
</code></pre></div> <div class="admonition info alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">情報</p> <p>以下で説明するクエリを実行する場合は、<code class=syntax>datasets.trips_mergetree</code> のように完全なテーブル名を使用する必要があります。</p> </div> <h2 id=results-on-single-server>単一サーバーでの結果<a class=headerlink href=#results-on-single-server title="Permanent link"> </a></h2> <p>Q1:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>cab_type</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>cab_type</span>
</code></pre></div> <p>0.490秒</p> <p>Q2:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>avg</span><span class=p>(</span><span class=n>total_amount</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span>
</code></pre></div> <p>1.224秒</p> <p>Q3:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=n>toYear</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>)</span> <span class=k>AS</span> <span class=k>year</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>year</span>
</code></pre></div> <p>2.104秒</p> <p>Q4:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=n>toYear</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>)</span> <span class=k>AS</span> <span class=k>year</span><span class=p>,</span> <span class=n>round</span><span class=p>(</span><span class=n>trip_distance</span><span class=p>)</span> <span class=k>AS</span> <span class=n>distance</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>trips_mergetree</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>year</span><span class=p>,</span> <span class=n>distance</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>year</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>DESC</span>
</code></pre></div> <p>3.593秒</p> <p>使用したサーバは以下の通りです。</p> <p>Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz が2つ、合計16個の物理カーネル、128GiB RAM、RAID-5 の 8 x 6 TB HDD。</p> <p>実行時間は、3回実行した中で最もよい結果です。しかし、2回目の実行からは、クエリはファイルシステムのキャッシュからデータを読み込みます。それ以上のキャッシュは発生しません：データは読み出され、各実行で処理されます。</p> <p>3台のサーバーにテーブルを作成する:</p> <p>各サーバー上で:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>default</span><span class=p>.</span><span class=n>trips_mergetree_third</span> <span class=p>(</span> <span class=n>trip_id</span> <span class=n>UInt32</span><span class=p>,</span>  <span class=n>vendor_id</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'1'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'2'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'CMT'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'VTS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'DDS'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>'B02512'</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span> <span class=s1>'B02598'</span> <span class=o>=</span> <span class=mi>11</span><span class=p>,</span> <span class=s1>'B02617'</span> <span class=o>=</span> <span class=mi>12</span><span class=p>,</span> <span class=s1>'B02682'</span> <span class=o>=</span> <span class=mi>13</span><span class=p>,</span> <span class=s1>'B02764'</span> <span class=o>=</span> <span class=mi>14</span><span class=p>),</span>  <span class=n>pickup_date</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>pickup_datetime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>dropoff_date</span> <span class=nb>Date</span><span class=p>,</span>  <span class=n>dropoff_datetime</span> <span class=n>DateTime</span><span class=p>,</span>  <span class=n>store_and_fwd_flag</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>rate_code_id</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup_longitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>pickup_latitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>dropoff_longitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>dropoff_latitude</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>passenger_count</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>trip_distance</span> <span class=n>Float64</span><span class=p>,</span>  <span class=n>fare_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>extra</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>mta_tax</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>tip_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>tolls_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>ehail_fee</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>improvement_surcharge</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>total_amount</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>payment_type_</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'UNK'</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'CSH'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'CRE'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'NOC'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'DIS'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>),</span>  <span class=n>trip_type</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>25</span><span class=p>),</span>  <span class=n>dropoff</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>25</span><span class=p>),</span>  <span class=n>cab_type</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'yellow'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'green'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'uber'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>),</span>  <span class=n>pickup_nyct2010_gid</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup_ctlabel</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>pickup_borocode</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>pickup_boroname</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>),</span>  <span class=n>pickup_ct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>6</span><span class=p>),</span>  <span class=n>pickup_boroct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>7</span><span class=p>),</span>  <span class=n>pickup_cdeligibil</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>),</span>  <span class=n>pickup_ntacode</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>4</span><span class=p>),</span>  <span class=n>pickup_ntaname</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>),</span>  <span class=n>pickup_puma</span> <span class=n>UInt16</span><span class=p>,</span>  <span class=n>dropoff_nyct2010_gid</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>dropoff_ctlabel</span> <span class=n>Float32</span><span class=p>,</span>  <span class=n>dropoff_borocode</span> <span class=n>UInt8</span><span class=p>,</span>  <span class=n>dropoff_boroname</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Manhattan'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Bronx'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Brooklyn'</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'Queens'</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span> <span class=s1>'Staten Island'</span> <span class=o>=</span> <span class=mi>5</span><span class=p>),</span>  <span class=n>dropoff_ct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>6</span><span class=p>),</span>  <span class=n>dropoff_boroct2010</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>7</span><span class=p>),</span>  <span class=n>dropoff_cdeligibil</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>' '</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'E'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'I'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>),</span>  <span class=n>dropoff_ntacode</span> <span class=n>FixedString</span><span class=p>(</span><span class=mi>4</span><span class=p>),</span>  <span class=n>dropoff_ntaname</span> <span class=n>Enum16</span><span class=p>(</span><span class=s1>''</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>'Airport'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'Allerton-Pelham Gardens'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>'Annadale-Huguenot-Prince\'</span><span class=n>s</span> <span class=n>Bay</span><span class=o>-</span><span class=n>Eltingville</span><span class=s1>' = 3, '</span><span class=n>Arden</span> <span class=n>Heights</span><span class=s1>' = 4, '</span><span class=n>Astoria</span><span class=s1>' = 5, '</span><span class=n>Auburndale</span><span class=s1>' = 6, '</span><span class=n>Baisley</span> <span class=n>Park</span><span class=s1>' = 7, '</span><span class=n>Bath</span> <span class=n>Beach</span><span class=s1>' = 8, '</span><span class=n>Battery</span> <span class=n>Park</span> <span class=n>City</span><span class=o>-</span><span class=k>Lower</span> <span class=n>Manhattan</span><span class=s1>' = 9, '</span><span class=n>Bay</span> <span class=n>Ridge</span><span class=s1>' = 10, '</span><span class=n>Bayside</span><span class=o>-</span><span class=n>Bayside</span> <span class=n>Hills</span><span class=s1>' = 11, '</span><span class=n>Bedford</span><span class=s1>' = 12, '</span><span class=n>Bedford</span> <span class=n>Park</span><span class=o>-</span><span class=n>Fordham</span> <span class=n>North</span><span class=s1>' = 13, '</span><span class=n>Bellerose</span><span class=s1>' = 14, '</span><span class=n>Belmont</span><span class=s1>' = 15, '</span><span class=n>Bensonhurst</span> <span class=n>East</span><span class=s1>' = 16, '</span><span class=n>Bensonhurst</span> <span class=n>West</span><span class=s1>' = 17, '</span><span class=n>Borough</span> <span class=n>Park</span><span class=s1>' = 18, '</span><span class=n>Breezy</span> <span class=n>Point</span><span class=o>-</span><span class=n>Belle</span> <span class=n>Harbor</span><span class=o>-</span><span class=n>Rockaway</span> <span class=n>Park</span><span class=o>-</span><span class=n>Broad</span> <span class=n>Channel</span><span class=s1>' = 19, '</span><span class=n>Briarwood</span><span class=o>-</span><span class=n>Jamaica</span> <span class=n>Hills</span><span class=s1>' = 20, '</span><span class=n>Brighton</span> <span class=n>Beach</span><span class=s1>' = 21, '</span><span class=n>Bronxdale</span><span class=s1>' = 22, '</span><span class=n>Brooklyn</span> <span class=n>Heights</span><span class=o>-</span><span class=n>Cobble</span> <span class=n>Hill</span><span class=s1>' = 23, '</span><span class=n>Brownsville</span><span class=s1>' = 24, '</span><span class=n>Bushwick</span> <span class=n>North</span><span class=s1>' = 25, '</span><span class=n>Bushwick</span> <span class=n>South</span><span class=s1>' = 26, '</span><span class=n>Cambria</span> <span class=n>Heights</span><span class=s1>' = 27, '</span><span class=n>Canarsie</span><span class=s1>' = 28, '</span><span class=n>Carroll</span> <span class=n>Gardens</span><span class=o>-</span><span class=n>Columbia</span> <span class=n>Street</span><span class=o>-</span><span class=n>Red</span> <span class=n>Hook</span><span class=s1>' = 29, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>North</span><span class=o>-</span><span class=n>Polo</span> <span class=n>Grounds</span><span class=s1>' = 30, '</span><span class=n>Central</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 31, '</span><span class=n>Charleston</span><span class=o>-</span><span class=n>Richmond</span> <span class=n>Valley</span><span class=o>-</span><span class=n>Tottenville</span><span class=s1>' = 32, '</span><span class=n>Chinatown</span><span class=s1>' = 33, '</span><span class=n>Claremont</span><span class=o>-</span><span class=n>Bathgate</span><span class=s1>' = 34, '</span><span class=n>Clinton</span><span class=s1>' = 35, '</span><span class=n>Clinton</span> <span class=n>Hill</span><span class=s1>' = 36, '</span><span class=n>Co</span><span class=o>-</span><span class=n>op</span> <span class=n>City</span><span class=s1>' = 37, '</span><span class=n>College</span> <span class=n>Point</span><span class=s1>' = 38, '</span><span class=n>Corona</span><span class=s1>' = 39, '</span><span class=n>Crotona</span> <span class=n>Park</span> <span class=n>East</span><span class=s1>' = 40, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>North</span><span class=s1>' = 41, '</span><span class=n>Crown</span> <span class=n>Heights</span> <span class=n>South</span><span class=s1>' = 42, '</span><span class=n>Cypress</span> <span class=n>Hills</span><span class=o>-</span><span class=n>City</span> <span class=n>Line</span><span class=s1>' = 43, '</span><span class=n>DUMBO</span><span class=o>-</span><span class=n>Vinegar</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Downtown</span> <span class=n>Brooklyn</span><span class=o>-</span><span class=n>Boerum</span> <span class=n>Hill</span><span class=s1>' = 44, '</span><span class=n>Douglas</span> <span class=n>Manor</span><span class=o>-</span><span class=n>Douglaston</span><span class=o>-</span><span class=n>Little</span> <span class=n>Neck</span><span class=s1>' = 45, '</span><span class=n>Dyker</span> <span class=n>Heights</span><span class=s1>' = 46, '</span><span class=n>East</span> <span class=n>Concourse</span><span class=o>-</span><span class=n>Concourse</span> <span class=n>Village</span><span class=s1>' = 47, '</span><span class=n>East</span> <span class=n>Elmhurst</span><span class=s1>' = 48, '</span><span class=n>East</span> <span class=n>Flatbush</span><span class=o>-</span><span class=n>Farragut</span><span class=s1>' = 49, '</span><span class=n>East</span> <span class=n>Flushing</span><span class=s1>' = 50, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>North</span><span class=s1>' = 51, '</span><span class=n>East</span> <span class=n>Harlem</span> <span class=n>South</span><span class=s1>' = 52, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span><span class=s1>' = 53, '</span><span class=n>East</span> <span class=k>New</span> <span class=n>York</span> <span class=p>(</span><span class=n>Pennsylvania</span> <span class=n>Ave</span><span class=p>)</span><span class=s1>' = 54, '</span><span class=n>East</span> <span class=n>Tremont</span><span class=s1>' = 55, '</span><span class=n>East</span> <span class=n>Village</span><span class=s1>' = 56, '</span><span class=n>East</span> <span class=n>Williamsburg</span><span class=s1>' = 57, '</span><span class=n>Eastchester</span><span class=o>-</span><span class=n>Edenwald</span><span class=o>-</span><span class=n>Baychester</span><span class=s1>' = 58, '</span><span class=n>Elmhurst</span><span class=s1>' = 59, '</span><span class=n>Elmhurst</span><span class=o>-</span><span class=n>Maspeth</span><span class=s1>' = 60, '</span><span class=n>Erasmus</span><span class=s1>' = 61, '</span><span class=n>Far</span> <span class=n>Rockaway</span><span class=o>-</span><span class=n>Bayswater</span><span class=s1>' = 62, '</span><span class=n>Flatbush</span><span class=s1>' = 63, '</span><span class=n>Flatlands</span><span class=s1>' = 64, '</span><span class=n>Flushing</span><span class=s1>' = 65, '</span><span class=n>Fordham</span> <span class=n>South</span><span class=s1>' = 66, '</span><span class=n>Forest</span> <span class=n>Hills</span><span class=s1>' = 67, '</span><span class=n>Fort</span> <span class=n>Greene</span><span class=s1>' = 68, '</span><span class=n>Fresh</span> <span class=n>Meadows</span><span class=o>-</span><span class=n>Utopia</span><span class=s1>' = 69, '</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Totten</span><span class=o>-</span><span class=n>Bay</span> <span class=n>Terrace</span><span class=o>-</span><span class=n>Clearview</span><span class=s1>' = 70, '</span><span class=n>Georgetown</span><span class=o>-</span><span class=n>Marine</span> <span class=n>Park</span><span class=o>-</span><span class=n>Bergen</span> <span class=n>Beach</span><span class=o>-</span><span class=n>Mill</span> <span class=n>Basin</span><span class=s1>' = 71, '</span><span class=n>Glen</span> <span class=n>Oaks</span><span class=o>-</span><span class=n>Floral</span> <span class=n>Park</span><span class=o>-</span><span class=k>New</span> <span class=n>Hyde</span> <span class=n>Park</span><span class=s1>' = 72, '</span><span class=n>Glendale</span><span class=s1>' = 73, '</span><span class=n>Gramercy</span><span class=s1>' = 74, '</span><span class=n>Grasmere</span><span class=o>-</span><span class=n>Arrochar</span><span class=o>-</span><span class=n>Ft</span><span class=p>.</span> <span class=n>Wadsworth</span><span class=s1>' = 75, '</span><span class=n>Gravesend</span><span class=s1>' = 76, '</span><span class=n>Great</span> <span class=n>Kills</span><span class=s1>' = 77, '</span><span class=n>Greenpoint</span><span class=s1>' = 78, '</span><span class=n>Grymes</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Clifton</span><span class=o>-</span><span class=n>Fox</span> <span class=n>Hills</span><span class=s1>' = 79, '</span><span class=n>Hamilton</span> <span class=n>Heights</span><span class=s1>' = 80, '</span><span class=n>Hammels</span><span class=o>-</span><span class=n>Arverne</span><span class=o>-</span><span class=n>Edgemere</span><span class=s1>' = 81, '</span><span class=n>Highbridge</span><span class=s1>' = 82, '</span><span class=n>Hollis</span><span class=s1>' = 83, '</span><span class=n>Homecrest</span><span class=s1>' = 84, '</span><span class=n>Hudson</span> <span class=n>Yards</span><span class=o>-</span><span class=n>Chelsea</span><span class=o>-</span><span class=n>Flatiron</span><span class=o>-</span><span class=k>Union</span> <span class=n>Square</span><span class=s1>' = 85, '</span><span class=n>Hunters</span> <span class=n>Point</span><span class=o>-</span><span class=n>Sunnyside</span><span class=o>-</span><span class=n>West</span> <span class=n>Maspeth</span><span class=s1>' = 86, '</span><span class=n>Hunts</span> <span class=n>Point</span><span class=s1>' = 87, '</span><span class=n>Jackson</span> <span class=n>Heights</span><span class=s1>' = 88, '</span><span class=n>Jamaica</span><span class=s1>' = 89, '</span><span class=n>Jamaica</span> <span class=n>Estates</span><span class=o>-</span><span class=n>Holliswood</span><span class=s1>' = 90, '</span><span class=n>Kensington</span><span class=o>-</span><span class=n>Ocean</span> <span class=n>Parkway</span><span class=s1>' = 91, '</span><span class=n>Kew</span> <span class=n>Gardens</span><span class=s1>' = 92, '</span><span class=n>Kew</span> <span class=n>Gardens</span> <span class=n>Hills</span><span class=s1>' = 93, '</span><span class=n>Kingsbridge</span> <span class=n>Heights</span><span class=s1>' = 94, '</span><span class=n>Laurelton</span><span class=s1>' = 95, '</span><span class=n>Lenox</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Roosevelt</span> <span class=n>Island</span><span class=s1>' = 96, '</span><span class=n>Lincoln</span> <span class=n>Square</span><span class=s1>' = 97, '</span><span class=n>Lindenwood</span><span class=o>-</span><span class=n>Howard</span> <span class=n>Beach</span><span class=s1>' = 98, '</span><span class=n>Longwood</span><span class=s1>' = 99, '</span><span class=k>Lower</span> <span class=n>East</span> <span class=n>Side</span><span class=s1>' = 100, '</span><span class=n>Madison</span><span class=s1>' = 101, '</span><span class=n>Manhattanville</span><span class=s1>' = 102, '</span><span class=n>Marble</span> <span class=n>Hill</span><span class=o>-</span><span class=n>Inwood</span><span class=s1>' = 103, '</span><span class=n>Mariner</span><span class=err>\</span><span class=s1>'s Harbor-Arlington-Port Ivory-Graniteville'</span> <span class=o>=</span> <span class=mi>104</span><span class=p>,</span> <span class=s1>'Maspeth'</span> <span class=o>=</span> <span class=mi>105</span><span class=p>,</span> <span class=s1>'Melrose South-Mott Haven North'</span> <span class=o>=</span> <span class=mi>106</span><span class=p>,</span> <span class=s1>'Middle Village'</span> <span class=o>=</span> <span class=mi>107</span><span class=p>,</span> <span class=s1>'Midtown-Midtown South'</span> <span class=o>=</span> <span class=mi>108</span><span class=p>,</span> <span class=s1>'Midwood'</span> <span class=o>=</span> <span class=mi>109</span><span class=p>,</span> <span class=s1>'Morningside Heights'</span> <span class=o>=</span> <span class=mi>110</span><span class=p>,</span> <span class=s1>'Morrisania-Melrose'</span> <span class=o>=</span> <span class=mi>111</span><span class=p>,</span> <span class=s1>'Mott Haven-Port Morris'</span> <span class=o>=</span> <span class=mi>112</span><span class=p>,</span> <span class=s1>'Mount Hope'</span> <span class=o>=</span> <span class=mi>113</span><span class=p>,</span> <span class=s1>'Murray Hill'</span> <span class=o>=</span> <span class=mi>114</span><span class=p>,</span> <span class=s1>'Murray Hill-Kips Bay'</span> <span class=o>=</span> <span class=mi>115</span><span class=p>,</span> <span class=s1>'New Brighton-Silver Lake'</span> <span class=o>=</span> <span class=mi>116</span><span class=p>,</span> <span class=s1>'New Dorp-Midland Beach'</span> <span class=o>=</span> <span class=mi>117</span><span class=p>,</span> <span class=s1>'New Springville-Bloomfield-Travis'</span> <span class=o>=</span> <span class=mi>118</span><span class=p>,</span> <span class=s1>'North Corona'</span> <span class=o>=</span> <span class=mi>119</span><span class=p>,</span> <span class=s1>'North Riverdale-Fieldston-Riverdale'</span> <span class=o>=</span> <span class=mi>120</span><span class=p>,</span> <span class=s1>'North Side-South Side'</span> <span class=o>=</span> <span class=mi>121</span><span class=p>,</span> <span class=s1>'Norwood'</span> <span class=o>=</span> <span class=mi>122</span><span class=p>,</span> <span class=s1>'Oakland Gardens'</span> <span class=o>=</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>'Oakwood-Oakwood Beach'</span> <span class=o>=</span> <span class=mi>124</span><span class=p>,</span> <span class=s1>'Ocean Hill'</span> <span class=o>=</span> <span class=mi>125</span><span class=p>,</span> <span class=s1>'Ocean Parkway South'</span> <span class=o>=</span> <span class=mi>126</span><span class=p>,</span> <span class=s1>'Old Astoria'</span> <span class=o>=</span> <span class=mi>127</span><span class=p>,</span> <span class=s1>'Old Town-Dongan Hills-South Beach'</span> <span class=o>=</span> <span class=mi>128</span><span class=p>,</span> <span class=s1>'Ozone Park'</span> <span class=o>=</span> <span class=mi>129</span><span class=p>,</span> <span class=s1>'Park Slope-Gowanus'</span> <span class=o>=</span> <span class=mi>130</span><span class=p>,</span> <span class=s1>'Parkchester'</span> <span class=o>=</span> <span class=mi>131</span><span class=p>,</span> <span class=s1>'Pelham Bay-Country Club-City Island'</span> <span class=o>=</span> <span class=mi>132</span><span class=p>,</span> <span class=s1>'Pelham Parkway'</span> <span class=o>=</span> <span class=mi>133</span><span class=p>,</span> <span class=s1>'Pomonok-Flushing Heights-Hillcrest'</span> <span class=o>=</span> <span class=mi>134</span><span class=p>,</span> <span class=s1>'Port Richmond'</span> <span class=o>=</span> <span class=mi>135</span><span class=p>,</span> <span class=s1>'Prospect Heights'</span> <span class=o>=</span> <span class=mi>136</span><span class=p>,</span> <span class=s1>'Prospect Lefferts Gardens-Wingate'</span> <span class=o>=</span> <span class=mi>137</span><span class=p>,</span> <span class=s1>'Queens Village'</span> <span class=o>=</span> <span class=mi>138</span><span class=p>,</span> <span class=s1>'Queensboro Hill'</span> <span class=o>=</span> <span class=mi>139</span><span class=p>,</span> <span class=s1>'Queensbridge-Ravenswood-Long Island City'</span> <span class=o>=</span> <span class=mi>140</span><span class=p>,</span> <span class=s1>'Rego Park'</span> <span class=o>=</span> <span class=mi>141</span><span class=p>,</span> <span class=s1>'Richmond Hill'</span> <span class=o>=</span> <span class=mi>142</span><span class=p>,</span> <span class=s1>'Ridgewood'</span> <span class=o>=</span> <span class=mi>143</span><span class=p>,</span> <span class=s1>'Rikers Island'</span> <span class=o>=</span> <span class=mi>144</span><span class=p>,</span> <span class=s1>'Rosedale'</span> <span class=o>=</span> <span class=mi>145</span><span class=p>,</span> <span class=s1>'Rossville-Woodrow'</span> <span class=o>=</span> <span class=mi>146</span><span class=p>,</span> <span class=s1>'Rugby-Remsen Village'</span> <span class=o>=</span> <span class=mi>147</span><span class=p>,</span> <span class=s1>'Schuylerville-Throgs Neck-Edgewater Park'</span> <span class=o>=</span> <span class=mi>148</span><span class=p>,</span> <span class=s1>'Seagate-Coney Island'</span> <span class=o>=</span> <span class=mi>149</span><span class=p>,</span> <span class=s1>'Sheepshead Bay-Gerritsen Beach-Manhattan Beach'</span> <span class=o>=</span> <span class=mi>150</span><span class=p>,</span> <span class=s1>'SoHo-TriBeCa-Civic Center-Little Italy'</span> <span class=o>=</span> <span class=mi>151</span><span class=p>,</span> <span class=s1>'Soundview-Bruckner'</span> <span class=o>=</span> <span class=mi>152</span><span class=p>,</span> <span class=s1>'Soundview-Castle Hill-Clason Point-Harding Park'</span> <span class=o>=</span> <span class=mi>153</span><span class=p>,</span> <span class=s1>'South Jamaica'</span> <span class=o>=</span> <span class=mi>154</span><span class=p>,</span> <span class=s1>'South Ozone Park'</span> <span class=o>=</span> <span class=mi>155</span><span class=p>,</span> <span class=s1>'Springfield Gardens North'</span> <span class=o>=</span> <span class=mi>156</span><span class=p>,</span> <span class=s1>'Springfield Gardens South-Brookville'</span> <span class=o>=</span> <span class=mi>157</span><span class=p>,</span> <span class=s1>'Spuyten Duyvil-Kingsbridge'</span> <span class=o>=</span> <span class=mi>158</span><span class=p>,</span> <span class=s1>'St. Albans'</span> <span class=o>=</span> <span class=mi>159</span><span class=p>,</span> <span class=s1>'Stapleton-Rosebank'</span> <span class=o>=</span> <span class=mi>160</span><span class=p>,</span> <span class=s1>'Starrett City'</span> <span class=o>=</span> <span class=mi>161</span><span class=p>,</span> <span class=s1>'Steinway'</span> <span class=o>=</span> <span class=mi>162</span><span class=p>,</span> <span class=s1>'Stuyvesant Heights'</span> <span class=o>=</span> <span class=mi>163</span><span class=p>,</span> <span class=s1>'Stuyvesant Town-Cooper Village'</span> <span class=o>=</span> <span class=mi>164</span><span class=p>,</span> <span class=s1>'Sunset Park East'</span> <span class=o>=</span> <span class=mi>165</span><span class=p>,</span> <span class=s1>'Sunset Park West'</span> <span class=o>=</span> <span class=mi>166</span><span class=p>,</span> <span class=s1>'Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill'</span> <span class=o>=</span> <span class=mi>167</span><span class=p>,</span> <span class=s1>'Turtle Bay-East Midtown'</span> <span class=o>=</span> <span class=mi>168</span><span class=p>,</span> <span class=s1>'University Heights-Morris Heights'</span> <span class=o>=</span> <span class=mi>169</span><span class=p>,</span> <span class=s1>'Upper East Side-Carnegie Hill'</span> <span class=o>=</span> <span class=mi>170</span><span class=p>,</span> <span class=s1>'Upper West Side'</span> <span class=o>=</span> <span class=mi>171</span><span class=p>,</span> <span class=s1>'Van Cortlandt Village'</span> <span class=o>=</span> <span class=mi>172</span><span class=p>,</span> <span class=s1>'Van Nest-Morris Park-Westchester Square'</span> <span class=o>=</span> <span class=mi>173</span><span class=p>,</span> <span class=s1>'Washington Heights North'</span> <span class=o>=</span> <span class=mi>174</span><span class=p>,</span> <span class=s1>'Washington Heights South'</span> <span class=o>=</span> <span class=mi>175</span><span class=p>,</span> <span class=s1>'West Brighton'</span> <span class=o>=</span> <span class=mi>176</span><span class=p>,</span> <span class=s1>'West Concourse'</span> <span class=o>=</span> <span class=mi>177</span><span class=p>,</span> <span class=s1>'West Farms-Bronx River'</span> <span class=o>=</span> <span class=mi>178</span><span class=p>,</span> <span class=s1>'West New Brighton-New Brighton-St. George'</span> <span class=o>=</span> <span class=mi>179</span><span class=p>,</span> <span class=s1>'West Village'</span> <span class=o>=</span> <span class=mi>180</span><span class=p>,</span> <span class=s1>'Westchester-Unionport'</span> <span class=o>=</span> <span class=mi>181</span><span class=p>,</span> <span class=s1>'Westerleigh'</span> <span class=o>=</span> <span class=mi>182</span><span class=p>,</span> <span class=s1>'Whitestone'</span> <span class=o>=</span> <span class=mi>183</span><span class=p>,</span> <span class=s1>'Williamsbridge-Olinville'</span> <span class=o>=</span> <span class=mi>184</span><span class=p>,</span> <span class=s1>'Williamsburg'</span> <span class=o>=</span> <span class=mi>185</span><span class=p>,</span> <span class=s1>'Windsor Terrace'</span> <span class=o>=</span> <span class=mi>186</span><span class=p>,</span> <span class=s1>'Woodhaven'</span> <span class=o>=</span> <span class=mi>187</span><span class=p>,</span> <span class=s1>'Woodlawn-Wakefield'</span> <span class=o>=</span> <span class=mi>188</span><span class=p>,</span> <span class=s1>'Woodside'</span> <span class=o>=</span> <span class=mi>189</span><span class=p>,</span> <span class=s1>'Yorkville'</span> <span class=o>=</span> <span class=mi>190</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Bronx'</span> <span class=o>=</span> <span class=mi>191</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Brooklyn'</span> <span class=o>=</span> <span class=mi>192</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Manhattan'</span> <span class=o>=</span> <span class=mi>193</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Queens'</span> <span class=o>=</span> <span class=mi>194</span><span class=p>,</span> <span class=s1>'park-cemetery-etc-Staten Island'</span> <span class=o>=</span> <span class=mi>195</span><span class=p>),</span>  <span class=n>dropoff_puma</span> <span class=n>UInt16</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>,</span> <span class=n>pickup_datetime</span><span class=p>,</span> <span class=mi>8192</span><span class=p>)</span>
</code></pre></div> <p>移行元サーバー上:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips_mergetree_x3</span> <span class=k>AS</span> <span class=n>trips_mergetree_third</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Distributed</span><span class=p>(</span><span class=n>perftest</span><span class=p>,</span> <span class=k>default</span><span class=p>,</span> <span class=n>trips_mergetree_third</span><span class=p>,</span> <span class=n>rand</span><span class=p>())</span>
</code></pre></div> <p>次のクエリで、データを再配布します:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>trips_mergetree_x3</span> <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span>
</code></pre></div> <p>これには2454秒かかります。</p> <p>三つのサーバー上でクエリを実行すると:</p> <p>Q1:0.212秒<br> Q2:0.438秒<br> Q3:0.733秒<br> Q4:1.241秒</p> <p>クエリは線形にスケーリングされているので、ここでは予想通りです。</p> <p>また、140台のサーバーのクラスタからの結果も得られます:</p> <p>Q1:0.028秒<br> Q2:0.043秒<br> Q3:0.051秒<br> Q4:0.072秒</p> <p>この場合、クエリの処理時間は、ネットワークのレイテンシによって決定されます。<br> フィンランドのYandexデータセンターにあるクライアントをロシアのクラスター上に置いてクエリを実行したところ、約20ミリ秒のレイテンシが追加されました。</p> <h2 id=summary>サマリ<a class=headerlink href=#summary title="Permanent link"> </a></h2> <table> <thead> <tr> <th>サーバ</th> <th>Q1</th> <th>Q2</th> <th>Q3</th> <th>Q4</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>0.490</td> <td>1.224</td> <td>2.104</td> <td>3.593</td> </tr> <tr> <td>3</td> <td>0.212</td> <td>0.438</td> <td>0.733</td> <td>1.241</td> </tr> <tr> <td>140</td> <td>0.028</td> <td>0.043</td> <td>0.051</td> <td>0.072</td> </tr> </tbody> </table> <p><a href=https://clickhouse.tech/docs/en/getting_started/example_datasets/nyc_taxi/ target=_blank>元の記事</a> <!--hide--></p> </div> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Was this content helpful?</span> <div id=rating-stars class="display-6 mb-0" data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']" data-documentation=documentation>RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#how-to-import-the-raw-data title=生データのインポート方法 class="nav-link text-wrap d-inline-block w-100"> 生データのインポート方法 </a> <a href=#download-of-prepared-partitions title=パーティションされたデータのダウンロード class="nav-link text-wrap d-inline-block w-100"> パーティションされたデータのダウンロード </a> <a href=#results-on-single-server title=単一サーバーでの結果 class="nav-link text-wrap d-inline-block w-100"> 単一サーバーでの結果 </a> <a href=#summary title=サマリ class="nav-link text-wrap d-inline-block w-100"> サマリ </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?00223b07></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>