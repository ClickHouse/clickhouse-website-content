










    



    



    



    
    






    <!doctype html>
<html âš¡ lang="en">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>LDAP | ClickHouse Documentation</title>
    <link rel="canonical" href="https://clickhouse.com/docs/en/operations/external-authenticators/ldap/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>@charset "UTF-8";:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer,main,section{display:block}body{margin:0;font-family:"Noto Sans",sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{color:#ff8c00;text-decoration:none;background-color:transparent}a:hover{color:#ff8c00;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}template{display:none}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:"Hind Siliguri",sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{color:#495057;background-color:#d6e5ee;border-color:#cddfea;box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{color:#fff;background-color:#383d42;border-color:#32373b;box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{color:#495057;background-color:#ececec;border-color:#e6e6e6;box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{color:#fff;background-color:#101214;border-color:#0a0c0d;box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{color:#fff;background-color:#d97700;border-color:#cc7000;box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{color:#495057;background-color:#ffd68f;border-color:#ffd182;box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 rgba(255,255,255,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.btn-group{position:relative;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-control{position:relative;display:block;min-height:1.5rem;padding-left:1.5rem}.custom-control-inline{display:inline-flex;margin-right:1rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:8px}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-light{color:#8d9295;background-color:#fcfdfe;border-color:#fbfcfd}.alert-light .alert-link{color:#73797c}.alert-dark{color:#363b41;background-color:#dbdcdd;border-color:#ccced0}.alert-dark .alert-link{color:#1f2225}.alert-white{color:#949698;background-color:#fff;border-color:#fff}.alert-white .alert-link{color:#7a7d7f}.alert-black{color:#212529;background-color:#d3d3d4;border-color:#c1c2c3}.alert-black .alert-link{color:#0a0c0d}.alert-orange{color:#945b14;background-color:#ffe8cc;border-color:#ffdfb8}.alert-orange .alert-link{color:#673f0e}.alert-light-orange{color:#948872;background-color:#fffaf0;border-color:#fff7ea}.alert-light-orange .alert-link{color:#786e5b}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.list-group{display:flex;flex-direction:column;padding-left:0;margin-bottom:0}@-webkit-keyframes spinner-border{to{transform:rotate(360deg)}}@keyframes spinner-border{to{transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}.bg-light{background-color:#f1f6f9}a.bg-light:focus,a.bg-light:hover{background-color:#cddfea}.bg-dark{background-color:#495057}a.bg-dark:focus,a.bg-dark:hover{background-color:#32373b}.bg-white{background-color:#fff}a.bg-white:focus,a.bg-white:hover{background-color:#e6e6e6}.bg-black{background-color:#212529}a.bg-black:focus,a.bg-black:hover{background-color:#0a0c0d}.bg-orange{background-color:#ff8c00}a.bg-orange:focus,a.bg-orange:hover{background-color:#cc7000}.bg-light-orange{background-color:#ffe4b5}a.bg-light-orange:focus,a.bg-light-orange:hover{background-color:#ffd182}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}}@media(min-width:980px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:980px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}@supports(position:sticky){.sticky-top{position:sticky;top:0;z-index:1020}}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.my-1{margin-top:8px}.mr-1{margin-right:8px}.mb-1,.my-1{margin-bottom:8px}.my-2{margin-top:16px}.mr-2{margin-right:16px}.mb-2,.my-2{margin-bottom:16px}.my-3{margin-top:24px}.mr-3{margin-right:24px}.mb-3,.my-3{margin-bottom:24px}.my-4{margin-top:32px}.mr-4{margin-right:32px}.mb-4,.my-4{margin-bottom:32px}.my-5{margin-top:40px}.mr-5{margin-right:40px}.mb-5,.my-5{margin-bottom:40px}.my-6{margin-top:48px}.mr-6{margin-right:48px}.mb-6,.my-6{margin-bottom:48px}.my-7{margin-top:56px}.mr-7{margin-right:56px}.mb-7,.my-7{margin-bottom:56px}.my-8{margin-top:64px}.mr-8{margin-right:64px}.mb-8,.my-8{margin-bottom:64px}.my-9{margin-top:72px}.mr-9{margin-right:72px}.mb-9,.my-9{margin-bottom:72px}.my-10{margin-top:80px}.mr-10{margin-right:80px}.mb-10,.my-10{margin-bottom:80px}.my-12{margin-top:96px}.mr-12{margin-right:96px}.mb-12,.my-12{margin-bottom:96px}.my-15{margin-top:120px}.mr-15{margin-right:120px}.mb-15,.my-15{margin-bottom:120px}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:8px}.pt-1,.py-1{padding-top:8px}.pb-1,.py-1{padding-bottom:8px}.p-2{padding:16px}.pt-2,.py-2{padding-top:16px}.pb-2,.py-2{padding-bottom:16px}.p-3{padding:24px}.pt-3,.py-3{padding-top:24px}.pb-3,.py-3{padding-bottom:24px}.p-4{padding:32px}.pt-4,.py-4{padding-top:32px}.pb-4,.py-4{padding-bottom:32px}.p-5{padding:40px}.pt-5,.py-5{padding-top:40px}.pb-5,.py-5{padding-bottom:40px}.p-6{padding:48px}.pt-6,.py-6{padding-top:48px}.pb-6,.py-6{padding-bottom:48px}.p-7{padding:56px}.pt-7,.py-7{padding-top:56px}.pb-7,.py-7{padding-bottom:56px}.p-8{padding:64px}.pt-8,.py-8{padding-top:64px}.pb-8,.py-8{padding-bottom:64px}.p-9{padding:72px}.pt-9,.py-9{padding-top:72px}.pb-9,.py-9{padding-bottom:72px}.p-10{padding:80px}.pt-10,.py-10{padding-top:80px}.pb-10,.py-10{padding-bottom:80px}.p-12{padding:96px}.pt-12,.py-12{padding-top:96px}.pb-12,.py-12{padding-bottom:96px}.p-15{padding:120px}.pt-15,.py-15{padding-top:120px}.pb-15,.py-15{padding-bottom:120px}.my-n1{margin-top:-8px}.mr-n1{margin-right:-8px}.mb-n1,.my-n1{margin-bottom:-8px}.my-n2{margin-top:-16px}.mr-n2{margin-right:-16px}.mb-n2,.my-n2{margin-bottom:-16px}.my-n3{margin-top:-24px}.mr-n3{margin-right:-24px}.mb-n3,.my-n3{margin-bottom:-24px}.my-n4{margin-top:-32px}.mr-n4{margin-right:-32px}.mb-n4,.my-n4{margin-bottom:-32px}.my-n5{margin-top:-40px}.mr-n5{margin-right:-40px}.mb-n5,.my-n5{margin-bottom:-40px}.my-n6{margin-top:-48px}.mr-n6{margin-right:-48px}.mb-n6,.my-n6{margin-bottom:-48px}.my-n7{margin-top:-56px}.mr-n7{margin-right:-56px}.mb-n7,.my-n7{margin-bottom:-56px}.my-n8{margin-top:-64px}.mr-n8{margin-right:-64px}.mb-n8,.my-n8{margin-bottom:-64px}.my-n9{margin-top:-72px}.mr-n9{margin-right:-72px}.mb-n9,.my-n9{margin-bottom:-72px}.my-n10{margin-top:-80px}.mr-n10{margin-right:-80px}.mb-n10,.my-n10{margin-bottom:-80px}.my-n12{margin-top:-96px}.mr-n12{margin-right:-96px}.mb-n12,.my-n12{margin-bottom:-96px}.my-n15{margin-top:-120px}.mr-n15{margin-right:-120px}.mb-n15,.my-n15{margin-bottom:-120px}@media(min-width:768px){.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.my-md-1{margin-top:8px}.mr-md-1{margin-right:8px}.mb-md-1,.my-md-1{margin-bottom:8px}.my-md-2{margin-top:16px}.mr-md-2{margin-right:16px}.mb-md-2,.my-md-2{margin-bottom:16px}.my-md-3{margin-top:24px}.mr-md-3{margin-right:24px}.mb-md-3,.my-md-3{margin-bottom:24px}.my-md-4{margin-top:32px}.mr-md-4{margin-right:32px}.mb-md-4,.my-md-4{margin-bottom:32px}.my-md-5{margin-top:40px}.mr-md-5{margin-right:40px}.mb-md-5,.my-md-5{margin-bottom:40px}.my-md-6{margin-top:48px}.mr-md-6{margin-right:48px}.mb-md-6,.my-md-6{margin-bottom:48px}.my-md-7{margin-top:56px}.mr-md-7{margin-right:56px}.mb-md-7,.my-md-7{margin-bottom:56px}.my-md-8{margin-top:64px}.mr-md-8{margin-right:64px}.mb-md-8,.my-md-8{margin-bottom:64px}.my-md-9{margin-top:72px}.mr-md-9{margin-right:72px}.mb-md-9,.my-md-9{margin-bottom:72px}.my-md-10{margin-top:80px}.mr-md-10{margin-right:80px}.mb-md-10,.my-md-10{margin-bottom:80px}.my-md-12{margin-top:96px}.mr-md-12{margin-right:96px}.mb-md-12,.my-md-12{margin-bottom:96px}.my-md-15{margin-top:120px}.mr-md-15{margin-right:120px}.mb-md-15,.my-md-15{margin-bottom:120px}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:8px}.pt-md-1,.py-md-1{padding-top:8px}.pb-md-1,.py-md-1{padding-bottom:8px}.p-md-2{padding:16px}.pt-md-2,.py-md-2{padding-top:16px}.pb-md-2,.py-md-2{padding-bottom:16px}.p-md-3{padding:24px}.pt-md-3,.py-md-3{padding-top:24px}.pb-md-3,.py-md-3{padding-bottom:24px}.p-md-4{padding:32px}.pt-md-4,.py-md-4{padding-top:32px}.pb-md-4,.py-md-4{padding-bottom:32px}.p-md-5{padding:40px}.pt-md-5,.py-md-5{padding-top:40px}.pb-md-5,.py-md-5{padding-bottom:40px}.p-md-6{padding:48px}.pt-md-6,.py-md-6{padding-top:48px}.pb-md-6,.py-md-6{padding-bottom:48px}.p-md-7{padding:56px}.pt-md-7,.py-md-7{padding-top:56px}.pb-md-7,.py-md-7{padding-bottom:56px}.p-md-8{padding:64px}.pt-md-8,.py-md-8{padding-top:64px}.pb-md-8,.py-md-8{padding-bottom:64px}.p-md-9{padding:72px}.pt-md-9,.py-md-9{padding-top:72px}.pb-md-9,.py-md-9{padding-bottom:72px}.p-md-10{padding:80px}.pt-md-10,.py-md-10{padding-top:80px}.pb-md-10,.py-md-10{padding-bottom:80px}.p-md-12{padding:96px}.pt-md-12,.py-md-12{padding-top:96px}.pb-md-12,.py-md-12{padding-bottom:96px}.p-md-15{padding:120px}.pt-md-15,.py-md-15{padding-top:120px}.pb-md-15,.py-md-15{padding-bottom:120px}.my-md-n1{margin-top:-8px}.mr-md-n1{margin-right:-8px}.mb-md-n1,.my-md-n1{margin-bottom:-8px}.my-md-n2{margin-top:-16px}.mr-md-n2{margin-right:-16px}.mb-md-n2,.my-md-n2{margin-bottom:-16px}.my-md-n3{margin-top:-24px}.mr-md-n3{margin-right:-24px}.mb-md-n3,.my-md-n3{margin-bottom:-24px}.my-md-n4{margin-top:-32px}.mr-md-n4{margin-right:-32px}.mb-md-n4,.my-md-n4{margin-bottom:-32px}.my-md-n5{margin-top:-40px}.mr-md-n5{margin-right:-40px}.mb-md-n5,.my-md-n5{margin-bottom:-40px}.my-md-n6{margin-top:-48px}.mr-md-n6{margin-right:-48px}.mb-md-n6,.my-md-n6{margin-bottom:-48px}.my-md-n7{margin-top:-56px}.mr-md-n7{margin-right:-56px}.mb-md-n7,.my-md-n7{margin-bottom:-56px}.my-md-n8{margin-top:-64px}.mr-md-n8{margin-right:-64px}.mb-md-n8,.my-md-n8{margin-bottom:-64px}.my-md-n9{margin-top:-72px}.mr-md-n9{margin-right:-72px}.mb-md-n9,.my-md-n9{margin-bottom:-72px}.my-md-n10{margin-top:-80px}.mr-md-n10{margin-right:-80px}.mb-md-n10,.my-md-n10{margin-bottom:-80px}.my-md-n12{margin-top:-96px}.mr-md-n12{margin-right:-96px}.mb-md-n12,.my-md-n12{margin-bottom:-96px}.my-md-n15{margin-top:-120px}.mr-md-n15{margin-right:-120px}.mb-md-n15,.my-md-n15{margin-bottom:-120px}}@media(min-width:980px){.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.my-lg-1{margin-top:8px}.mr-lg-1{margin-right:8px}.mb-lg-1,.my-lg-1{margin-bottom:8px}.my-lg-2{margin-top:16px}.mr-lg-2{margin-right:16px}.mb-lg-2,.my-lg-2{margin-bottom:16px}.my-lg-3{margin-top:24px}.mr-lg-3{margin-right:24px}.mb-lg-3,.my-lg-3{margin-bottom:24px}.my-lg-4{margin-top:32px}.mr-lg-4{margin-right:32px}.mb-lg-4,.my-lg-4{margin-bottom:32px}.my-lg-5{margin-top:40px}.mr-lg-5{margin-right:40px}.mb-lg-5,.my-lg-5{margin-bottom:40px}.my-lg-6{margin-top:48px}.mr-lg-6{margin-right:48px}.mb-lg-6,.my-lg-6{margin-bottom:48px}.my-lg-7{margin-top:56px}.mr-lg-7{margin-right:56px}.mb-lg-7,.my-lg-7{margin-bottom:56px}.my-lg-8{margin-top:64px}.mr-lg-8{margin-right:64px}.mb-lg-8,.my-lg-8{margin-bottom:64px}.my-lg-9{margin-top:72px}.mr-lg-9{margin-right:72px}.mb-lg-9,.my-lg-9{margin-bottom:72px}.my-lg-10{margin-top:80px}.mr-lg-10{margin-right:80px}.mb-lg-10,.my-lg-10{margin-bottom:80px}.my-lg-12{margin-top:96px}.mr-lg-12{margin-right:96px}.mb-lg-12,.my-lg-12{margin-bottom:96px}.my-lg-15{margin-top:120px}.mr-lg-15{margin-right:120px}.mb-lg-15,.my-lg-15{margin-bottom:120px}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:8px}.pt-lg-1,.py-lg-1{padding-top:8px}.pb-lg-1,.py-lg-1{padding-bottom:8px}.p-lg-2{padding:16px}.pt-lg-2,.py-lg-2{padding-top:16px}.pb-lg-2,.py-lg-2{padding-bottom:16px}.p-lg-3{padding:24px}.pt-lg-3,.py-lg-3{padding-top:24px}.pb-lg-3,.py-lg-3{padding-bottom:24px}.p-lg-4{padding:32px}.pt-lg-4,.py-lg-4{padding-top:32px}.pb-lg-4,.py-lg-4{padding-bottom:32px}.p-lg-5{padding:40px}.pt-lg-5,.py-lg-5{padding-top:40px}.pb-lg-5,.py-lg-5{padding-bottom:40px}.p-lg-6{padding:48px}.pt-lg-6,.py-lg-6{padding-top:48px}.pb-lg-6,.py-lg-6{padding-bottom:48px}.p-lg-7{padding:56px}.pt-lg-7,.py-lg-7{padding-top:56px}.pb-lg-7,.py-lg-7{padding-bottom:56px}.p-lg-8{padding:64px}.pt-lg-8,.py-lg-8{padding-top:64px}.pb-lg-8,.py-lg-8{padding-bottom:64px}.p-lg-9{padding:72px}.pt-lg-9,.py-lg-9{padding-top:72px}.pb-lg-9,.py-lg-9{padding-bottom:72px}.p-lg-10{padding:80px}.pt-lg-10,.py-lg-10{padding-top:80px}.pb-lg-10,.py-lg-10{padding-bottom:80px}.p-lg-12{padding:96px}.pt-lg-12,.py-lg-12{padding-top:96px}.pb-lg-12,.py-lg-12{padding-bottom:96px}.p-lg-15{padding:120px}.pt-lg-15,.py-lg-15{padding-top:120px}.pb-lg-15,.py-lg-15{padding-bottom:120px}.my-lg-n1{margin-top:-8px}.mr-lg-n1{margin-right:-8px}.mb-lg-n1,.my-lg-n1{margin-bottom:-8px}.my-lg-n2{margin-top:-16px}.mr-lg-n2{margin-right:-16px}.mb-lg-n2,.my-lg-n2{margin-bottom:-16px}.my-lg-n3{margin-top:-24px}.mr-lg-n3{margin-right:-24px}.mb-lg-n3,.my-lg-n3{margin-bottom:-24px}.my-lg-n4{margin-top:-32px}.mr-lg-n4{margin-right:-32px}.mb-lg-n4,.my-lg-n4{margin-bottom:-32px}.my-lg-n5{margin-top:-40px}.mr-lg-n5{margin-right:-40px}.mb-lg-n5,.my-lg-n5{margin-bottom:-40px}.my-lg-n6{margin-top:-48px}.mr-lg-n6{margin-right:-48px}.mb-lg-n6,.my-lg-n6{margin-bottom:-48px}.my-lg-n7{margin-top:-56px}.mr-lg-n7{margin-right:-56px}.mb-lg-n7,.my-lg-n7{margin-bottom:-56px}.my-lg-n8{margin-top:-64px}.mr-lg-n8{margin-right:-64px}.mb-lg-n8,.my-lg-n8{margin-bottom:-64px}.my-lg-n9{margin-top:-72px}.mr-lg-n9{margin-right:-72px}.mb-lg-n9,.my-lg-n9{margin-bottom:-72px}.my-lg-n10{margin-top:-80px}.mr-lg-n10{margin-right:-80px}.mb-lg-n10,.my-lg-n10{margin-bottom:-80px}.my-lg-n12{margin-top:-96px}.mr-lg-n12{margin-right:-96px}.mb-lg-n12,.my-lg-n12{margin-bottom:-96px}.my-lg-n15{margin-top:-120px}.mr-lg-n15{margin-right:-120px}.mb-lg-n15,.my-lg-n15{margin-bottom:-120px}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:980px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-light{color:#f1f6f9}a.text-light:focus,a.text-light:hover{color:#bbd4e2}.text-dark{color:#495057}a.text-dark:focus,a.text-dark:hover{color:#262a2d}.text-white{color:#fff}a.text-white:focus,a.text-white:hover{color:#d9d9d9}.text-black{color:#212529}a.text-black:focus,a.text-black:hover{color:#000}.text-orange{color:#ff8c00}a.text-orange:focus,a.text-orange:hover{color:#b36200}.text-light-orange{color:#ffe4b5}a.text-light-orange:focus,a.text-light-orange:hover{color:#ffc869}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(33,37,41,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:980px}.container{min-width:980px}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}.docs a:link,.docs a:visited{color:#f14600;text-decoration:none}.docs a:active,.docs a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.height-20{height:20px}.headerlink{text-decoration:none;margin-left:.5rem}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .c{color:#747369}.syntax .k{color:#c9c}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .cp{color:#747369}.syntax .c1{color:#747369}.syntax .s{color:#9c9}.syntax .no{color:#f2777a}.syntax .ni{color:#f2f0ec}.syntax .py{color:#f2f0ec}.syntax .nt{color:#6cc}.syntax .s2{color:#9c9}.syntax .s1{color:#9c9}}@media screen and (max-width:978.98px){.btn{padding:8px 16px}}@media screen and (max-width:978.98px){.btn-lg{padding:12px 24px}}img{max-width:100%}.section{background-repeat:no-repeat;background-position:center;background-size:cover;overflow:visible;position:relative}.section-bg{background-repeat:no-repeat;background-position:center;background-size:cover;display:block;height:100%;left:50%;position:absolute;top:0;transform:translateX(-50%);z-index:1}.section>.container{position:relative;z-index:2}ul{list-style-type:square;padding-left:1.25em}ul li:not(:last-child){margin-bottom:16px}ul li::marker{color:#ff3939}.display-5{color:#212529;font-size:20px;font-weight:500}.display-6{color:#212529;font-size:14px;font-weight:700}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=external-authenticators-ldap>LDAP<a class=headerlink href=../amp/#external-authenticators-ldap title="Permanent link">Â </a></h1> <p>LDAP server can be used to authenticate ClickHouse users. There are two different approaches for doing this:</p> <ul> <li>Use LDAP as an external authenticator for existing users, which are defined in <code class=syntax>users.xml</code> or in local access control paths.</li> <li>Use LDAP as an external user directory and allow locally undefined users to be authenticated if they exist on the LDAP server.</li> </ul> <p>For both of these approaches, an internally named LDAP server must be defined in the ClickHouse config so that other parts of the config can refer to it.</p> <h2 id=ldap-server-definition>LDAP Server Definition<a class=headerlink href=../amp/#ldap-server-definition title="Permanent link">Â </a></h2> <p>To define LDAP server you must add <code class=syntax>ldap_servers</code> section to the <code class=syntax>config.xml</code>.</p> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;yandex&gt;</span>
    <span class=cp>&lt;!- ... --&gt;</span>
    <span class=nt>&lt;ldap_servers&gt;</span>
        <span class=cp>&lt;!- Typical LDAP server. --&gt;</span>
        <span class=nt>&lt;my_ldap_server&gt;</span>
            <span class=nt>&lt;host&gt;</span>localhost<span class=nt>&lt;/host&gt;</span>
            <span class=nt>&lt;port&gt;</span>636<span class=nt>&lt;/port&gt;</span>
            <span class=nt>&lt;bind_dn&gt;</span>uid={user_name},ou=users,dc=example,dc=com<span class=nt>&lt;/bind_dn&gt;</span>
            <span class=nt>&lt;verification_cooldown&gt;</span>300<span class=nt>&lt;/verification_cooldown&gt;</span>
            <span class=nt>&lt;enable_tls&gt;</span>yes<span class=nt>&lt;/enable_tls&gt;</span>
            <span class=nt>&lt;tls_minimum_protocol_version&gt;</span>tls1.2<span class=nt>&lt;/tls_minimum_protocol_version&gt;</span>
            <span class=nt>&lt;tls_require_cert&gt;</span>demand<span class=nt>&lt;/tls_require_cert&gt;</span>
            <span class=nt>&lt;tls_cert_file&gt;</span>/path/to/tls_cert_file<span class=nt>&lt;/tls_cert_file&gt;</span>
            <span class=nt>&lt;tls_key_file&gt;</span>/path/to/tls_key_file<span class=nt>&lt;/tls_key_file&gt;</span>
            <span class=nt>&lt;tls_ca_cert_file&gt;</span>/path/to/tls_ca_cert_file<span class=nt>&lt;/tls_ca_cert_file&gt;</span>
            <span class=nt>&lt;tls_ca_cert_dir&gt;</span>/path/to/tls_ca_cert_dir<span class=nt>&lt;/tls_ca_cert_dir&gt;</span>
            <span class=nt>&lt;tls_cipher_suite&gt;</span>ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:AES256-GCM-SHA384<span class=nt>&lt;/tls_cipher_suite&gt;</span>
        <span class=nt>&lt;/my_ldap_server&gt;</span>

        <span class=cp>&lt;!- Typical Active Directory with configured user DN detection for further role mapping. --&gt;</span>
        <span class=nt>&lt;my_ad_server&gt;</span>
            <span class=nt>&lt;host&gt;</span>localhost<span class=nt>&lt;/host&gt;</span>
            <span class=nt>&lt;port&gt;</span>389<span class=nt>&lt;/port&gt;</span>
            <span class=nt>&lt;bind_dn&gt;</span>EXAMPLE\{user_name}<span class=nt>&lt;/bind_dn&gt;</span>
            <span class=nt>&lt;user_dn_detection&gt;</span>
                <span class=nt>&lt;base_dn&gt;</span>CN=Users,DC=example,DC=com<span class=nt>&lt;/base_dn&gt;</span>
                <span class=nt>&lt;search_filter&gt;</span>(<span class=ni>&amp;amp;</span>(objectClass=user)(sAMAccountName={user_name}))<span class=nt>&lt;/search_filter&gt;</span>
            <span class=nt>&lt;/user_dn_detection&gt;</span>
            <span class=nt>&lt;enable_tls&gt;</span>no<span class=nt>&lt;/enable_tls&gt;</span>
        <span class=nt>&lt;/my_ad_server&gt;</span>
    <span class=nt>&lt;/ldap_servers&gt;</span>
<span class=nt>&lt;/yandex&gt;</span>
</code></pre></div> <p>Note, that you can define multiple LDAP servers inside the <code class=syntax>ldap_servers</code> section using distinct names.</p> <p><strong>Parameters</strong></p> <ul> <li><code class=syntax>host</code> â€” LDAP server hostname or IP, this parameter is mandatory and cannot be empty.</li> <li><code class=syntax>port</code> â€” LDAP server port, default is <code class=syntax>636</code> if <code class=syntax>enable_tls</code> is set to <code class=syntax>true</code>, <code class=syntax>389</code> otherwise.</li> <li><code class=syntax>bind_dn</code> â€” Template used to construct the DN to bind to.<ul> <li>The resulting DN will be constructed by replacing all <code class=syntax>{user_name}</code> substrings of the template with the actual user name during each authentication attempt.</li> </ul> </li> <li><code class=syntax>user_dn_detection</code> â€” Section with LDAP search parameters for detecting the actual user DN of the bound user.<ul> <li>This is mainly used in search filters for further role mapping when the server is Active Directory. The resulting user DN will be used when replacing <code class=syntax>{user_dn}</code> substrings wherever they are allowed. By default, user DN is set equal to bind DN, but once search is performed, it will be updated with to the actual detected user DN value.<ul> <li><code class=syntax>base_dn</code> â€” Template used to construct the base DN for the LDAP search.<ul> <li>The resulting DN will be constructed by replacing all <code class=syntax>{user_name}</code> and <code class=syntax>{bind_dn}</code> substrings of the template with the actual user name and bind DN during the LDAP search.</li> </ul> </li> <li><code class=syntax>scope</code> â€” Scope of the LDAP search.<ul> <li>Accepted values are: <code class=syntax>base</code>, <code class=syntax>one_level</code>, <code class=syntax>children</code>, <code class=syntax>subtree</code> (the default).</li> </ul> </li> <li><code class=syntax>search_filter</code> â€” Template used to construct the search filter for the LDAP search.<ul> <li>The resulting filter will be constructed by replacing all <code class=syntax>{user_name}</code>, <code class=syntax>{bind_dn}</code>, and <code class=syntax>{base_dn}</code> substrings of the template with the actual user name, bind DN, and base DN during the LDAP search.</li> <li>Note, that the special characters must be escaped properly in XML.</li> </ul> </li> </ul> </li> </ul> </li> <li><code class=syntax>verification_cooldown</code> â€” A period of time, in seconds, after a successful bind attempt, during which the user will be assumed to be successfully authenticated for all consecutive requests without contacting the LDAP server.<ul> <li>Specify <code class=syntax>0</code> (the default) to disable caching and force contacting the LDAP server for each authentication request.</li> </ul> </li> <li><code class=syntax>enable_tls</code> â€” A flag to trigger the use of the secure connection to the LDAP server.<ul> <li>Specify <code class=syntax>no</code> for plain text <code class=syntax>ldap://</code> protocol (not recommended).</li> <li>Specify <code class=syntax>yes</code> for LDAP over SSL/TLS <code class=syntax>ldaps://</code> protocol (recommended, the default).</li> <li>Specify <code class=syntax>starttls</code> for legacy StartTLS protocol (plain text <code class=syntax>ldap://</code> protocol, upgraded to TLS).</li> </ul> </li> <li><code class=syntax>tls_minimum_protocol_version</code> â€” The minimum protocol version of SSL/TLS.<ul> <li>Accepted values are: <code class=syntax>ssl2</code>, <code class=syntax>ssl3</code>, <code class=syntax>tls1.0</code>, <code class=syntax>tls1.1</code>, <code class=syntax>tls1.2</code> (the default).</li> </ul> </li> <li><code class=syntax>tls_require_cert</code> â€” SSL/TLS peer certificate verification behavior.<ul> <li>Accepted values are: <code class=syntax>never</code>, <code class=syntax>allow</code>, <code class=syntax>try</code>, <code class=syntax>demand</code> (the default).</li> </ul> </li> <li><code class=syntax>tls_cert_file</code> â€” Path to certificate file.</li> <li><code class=syntax>tls_key_file</code> â€” Path to certificate key file.</li> <li><code class=syntax>tls_ca_cert_file</code> â€” Path to CA certificate file.</li> <li><code class=syntax>tls_ca_cert_dir</code> â€” Path to the directory containing CA certificates.</li> <li><code class=syntax>tls_cipher_suite</code> â€” Allowed cipher suite (in OpenSSL notation).</li> </ul> <h2 id=ldap-external-authenticator>LDAP External Authenticator<a class=headerlink href=../amp/#ldap-external-authenticator title="Permanent link">Â </a></h2> <p>A remote LDAP server can be used as a method for verifying passwords for locally defined users (users defined in <code class=syntax>users.xml</code> or in local access control paths). To achieve this, specify previously defined LDAP server name instead of <code class=syntax>password</code> or similar sections in the user definition.</p> <p>At each login attempt, ClickHouse tries to "bind" to the specified DN defined by the <code class=syntax>bind_dn</code> parameter in the <a href=../amp/#ldap-server-definition>LDAP server definition</a> using the provided credentials, and if successful, the user is considered authenticated. This is often called a "simple bind" method.</p> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;yandex&gt;</span>
    <span class=cp>&lt;!- ... --&gt;</span>
    <span class=nt>&lt;users&gt;</span>
        <span class=cp>&lt;!- ... --&gt;</span>
        <span class=nt>&lt;my_user&gt;</span>
            <span class=cp>&lt;!- ... --&gt;</span>
            <span class=nt>&lt;ldap&gt;</span>
                <span class=nt>&lt;server&gt;</span>my_ldap_server<span class=nt>&lt;/server&gt;</span>
            <span class=nt>&lt;/ldap&gt;</span>
        <span class=nt>&lt;/my_user&gt;</span>
    <span class=nt>&lt;/users&gt;</span>
<span class=nt>&lt;/yandex&gt;</span>
</code></pre></div> <p>Note, that user <code class=syntax>my_user</code> refers to <code class=syntax>my_ldap_server</code>. This LDAP server must be configured in the main <code class=syntax>config.xml</code> file as described previously.</p> <p>When SQL-driven <a href=../../../access-rights/amp/#access-control>Access Control and Account Management</a> is enabled, users that are authenticated by LDAP servers can also be created using the <a href=../../../../sql-reference/statements/create/user/amp/#create-user-statement>CREATE USER</a> statement.</p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>USER</span> <span class=n>my_user</span> <span class=n>IDENTIFIED</span> <span class=k>WITH</span> <span class=n>ldap</span> <span class=n>SERVER</span> <span class=s1>'my_ldap_server'</span><span class=p>;</span>
</code></pre></div> <h2 id=ldap-external-user-directory>LDAP Exernal User Directory<a class=headerlink href=../amp/#ldap-external-user-directory title="Permanent link">Â </a></h2> <p>In addition to the locally defined users, a remote LDAP server can be used as a source of user definitions. To achieve this, specify previously defined LDAP server name (see <a href=../amp/#ldap-server-definition>LDAP Server Definition</a>) in the <code class=syntax>ldap</code> section inside the <code class=syntax>users_directories</code> section of the <code class=syntax>config.xml</code> file.</p> <p>At each login attempt, ClickHouse tries to find the user definition locally and authenticate it as usual. If the user is not defined, ClickHouse will assume the definition exists in the external LDAP directory and will try to "bind" to the specified DN at the LDAP server using the provided credentials. If successful, the user will be considered existing and authenticated. The user will be assigned roles from the list specified in the <code class=syntax>roles</code> section. Additionally, LDAP "search" can be performed and results can be transformed and treated as role names and then be assigned to the user if the <code class=syntax>role_mapping</code> section is also configured. All this implies that the SQL-driven <a href=../../../access-rights/amp/#access-control>Access Control and Account Management</a> is enabled and roles are created using the <a href=../../../../sql-reference/statements/create/role/amp/#create-role-statement>CREATE ROLE</a> statement.</p> <p><strong>Example</strong></p> <p>Goes into <code class=syntax>config.xml</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;yandex&gt;</span>
    <span class=cp>&lt;!- ... --&gt;</span>
    <span class=nt>&lt;user_directories&gt;</span>
        <span class=cp>&lt;!- Typical LDAP server. --&gt;</span>
        <span class=nt>&lt;ldap&gt;</span>
            <span class=nt>&lt;server&gt;</span>my_ldap_server<span class=nt>&lt;/server&gt;</span>
            <span class=nt>&lt;roles&gt;</span>
                <span class=nt>&lt;my_local_role1</span> <span class=nt>/&gt;</span>
                <span class=nt>&lt;my_local_role2</span> <span class=nt>/&gt;</span>
            <span class=nt>&lt;/roles&gt;</span>
            <span class=nt>&lt;role_mapping&gt;</span>
                <span class=nt>&lt;base_dn&gt;</span>ou=groups,dc=example,dc=com<span class=nt>&lt;/base_dn&gt;</span>
                <span class=nt>&lt;scope&gt;</span>subtree<span class=nt>&lt;/scope&gt;</span>
                <span class=nt>&lt;search_filter&gt;</span>(<span class=ni>&amp;amp;</span>(objectClass=groupOfNames)(member={bind_dn}))<span class=nt>&lt;/search_filter&gt;</span>
                <span class=nt>&lt;attribute&gt;</span>cn<span class=nt>&lt;/attribute&gt;</span>
                <span class=nt>&lt;prefix&gt;</span>clickhouse_<span class=nt>&lt;/prefix&gt;</span>
            <span class=nt>&lt;/role_mapping&gt;</span>
        <span class=nt>&lt;/ldap&gt;</span>

        <span class=cp>&lt;!- Typical Active Directory with role mapping that relies on the detected user DN. --&gt;</span>
        <span class=nt>&lt;ldap&gt;</span>
            <span class=nt>&lt;server&gt;</span>my_ad_server<span class=nt>&lt;/server&gt;</span>
            <span class=nt>&lt;role_mapping&gt;</span>
                <span class=nt>&lt;base_dn&gt;</span>CN=Users,DC=example,DC=com<span class=nt>&lt;/base_dn&gt;</span>
                <span class=nt>&lt;attribute&gt;</span>CN<span class=nt>&lt;/attribute&gt;</span>
                <span class=nt>&lt;scope&gt;</span>subtree<span class=nt>&lt;/scope&gt;</span>
                <span class=nt>&lt;search_filter&gt;</span>(<span class=ni>&amp;amp;</span>(objectClass=group)(member={user_dn}))<span class=nt>&lt;/search_filter&gt;</span>
                <span class=nt>&lt;prefix&gt;</span>clickhouse_<span class=nt>&lt;/prefix&gt;</span>
            <span class=nt>&lt;/role_mapping&gt;</span>
        <span class=nt>&lt;/ldap&gt;</span>
    <span class=nt>&lt;/user_directories&gt;</span>
<span class=nt>&lt;/yandex&gt;</span>
</code></pre></div> <p>Note that <code class=syntax>my_ldap_server</code> referred in the <code class=syntax>ldap</code> section inside the <code class=syntax>user_directories</code> section must be a previously defined LDAP server that is configured in the <code class=syntax>config.xml</code> (see <a href=../amp/#ldap-server-definition>LDAP Server Definition</a>).</p> <p><strong>Parameters</strong></p> <ul> <li><code class=syntax>server</code> â€” One of LDAP server names defined in the <code class=syntax>ldap_servers</code> config section above. This parameter is mandatory and cannot be empty.</li> <li><code class=syntax>roles</code> â€” Section with a list of locally defined roles that will be assigned to each user retrieved from the LDAP server.<ul> <li>If no roles are specified here or assigned during role mapping (below), user will not be able to perform any actions after authentication.</li> </ul> </li> <li><code class=syntax>role_mapping</code> â€” Section with LDAP search parameters and mapping rules.<ul> <li>When a user authenticates, while still bound to LDAP, an LDAP search is performed using <code class=syntax>search_filter</code> and the name of the logged-in user. For each entry found during that search, the value of the specified attribute is extracted. For each attribute value that has the specified prefix, the prefix is removed, and the rest of the value becomes the name of a local role defined in ClickHouse, which is expected to be created beforehand by the <a href=../../../../sql-reference/statements/create/role/amp/#create-role-statement>CREATE ROLE</a> statement.</li> <li>There can be multiple <code class=syntax>role_mapping</code> sections defined inside the same <code class=syntax>ldap</code> section. All of them will be applied.<ul> <li><code class=syntax>base_dn</code> â€” Template used to construct the base DN for the LDAP search.<ul> <li>The resulting DN will be constructed by replacing all <code class=syntax>{user_name}</code>, <code class=syntax>{bind_dn}</code>, and <code class=syntax>{user_dn}</code> substrings of the template with the actual user name, bind DN, and user DN during each LDAP search.</li> </ul> </li> <li><code class=syntax>scope</code> â€” Scope of the LDAP search.<ul> <li>Accepted values are: <code class=syntax>base</code>, <code class=syntax>one_level</code>, <code class=syntax>children</code>, <code class=syntax>subtree</code> (the default).</li> </ul> </li> <li><code class=syntax>search_filter</code> â€” Template used to construct the search filter for the LDAP search.<ul> <li>The resulting filter will be constructed by replacing all <code class=syntax>{user_name}</code>, <code class=syntax>{bind_dn}</code>, <code class=syntax>{user_dn}</code>, and <code class=syntax>{base_dn}</code> substrings of the template with the actual user name, bind DN, user DN, and base DN during each LDAP search.</li> <li>Note, that the special characters must be escaped properly in XML.</li> </ul> </li> <li><code class=syntax>attribute</code> â€” Attribute name whose values will be returned by the LDAP search. <code class=syntax>cn</code>, by default.</li> <li><code class=syntax>prefix</code> â€” Prefix, that will be expected to be in front of each string in the original list of strings returned by the LDAP search. The prefix will be removed from the original strings and the resulting strings will be treated as local role names. Empty by default.</li> </ul> </li> </ul> </li> </ul>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">Â©2016â€“2021 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/0456f20bf4dfe43e56279f2734c4dda7e89f437b" rel="external nofollow noreferrer" target="_blank" class="text-reset">0456f20bf4</a>
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/en/operations/external-authenticators/ldap/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
