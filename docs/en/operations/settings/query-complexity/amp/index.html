<!doctype html><html ⚡ lang=en> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>Restrictions on Query Complexity | ClickHouse Documentation</title><link href=https://clickhouse.tech/docs/en/operations/settings/query-complexity/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Restrictions on Query Complexity | ClickHouse Documentation",
"mainEntityOfPage": "https://clickhouse.tech/docs/en/operations/settings/query-complexity/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Restrictions on Query Complexity | ClickHouse Documentation",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}blockquote{margin:0 0 1rem}strong{font-weight:bolder}sub{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-.25em}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote-footer{display:block;font-size:80%;color:#6c757d}.blockquote-footer::before{content:"\2014\00A0"}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn.disabled,.btn:disabled{opacity:.65}a.btn.disabled{pointer-events:none}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light.disabled,.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:not(:disabled):not(.disabled):active{color:#212529;background-color:#dae0e5;border-color:#d3d9df}.btn-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark.disabled,.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#1d2124;border-color:#171a1d}.btn-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light.disabled,.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-light:not(:disabled):not(.disabled):active{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark.disabled,.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-outline-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link.disabled,.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-control{position:relative;display:block;min-height:1.5rem;padding-left:1.5rem}.custom-control-inline{display:-ms-inline-flexbox;display:inline-flex;margin-right:1rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.overflow-hidden{overflow:hidden}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.mt-0,.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.mt-1,.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.mt-2,.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.mt-3,.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.mt-4,.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.mt-5,.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.mt-n1,.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.mt-n2,.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.mt-n3,.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.mt-n4,.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.mt-n5,.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.mt-md-0,.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.mt-md-1,.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.mt-md-2,.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.mt-md-3,.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.mt-md-4,.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.mt-md-5,.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.mt-md-n1,.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.mt-md-n2,.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.mt-md-n3,.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.mt-md-n4,.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.mt-md-n5,.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.mt-lg-0,.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.mt-lg-1,.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.mt-lg-2,.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.mt-lg-3,.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.mt-lg-4,.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.mt-lg-5,.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.mt-lg-n3,.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.mt-lg-n5,.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-break{word-break:break-word;overflow-wrap:break-word}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}blockquote,pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn.disabled,.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}details{background:#444451;color:#eee;padding:1rem;margin-bottom:1rem;margin-top:1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .k{color:#c9c}.syntax .l{color:#f99157}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .ld{color:#9c9}.syntax .s{color:#9c9}.syntax .no{color:#f2777a}.syntax .py{color:#f2f0ec}.syntax .mi{color:#f99157}.syntax .s2{color:#9c9}.syntax .s1{color:#9c9}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <h1 id=restrictions-on-query-complexity>Restrictions on Query Complexity<a class=headerlink href=../amp/#restrictions-on-query-complexity title="Permanent link"> </a></h1> <p>Restrictions on query complexity are part of the settings.<br> They are used to provide safer execution from the user interface.<br> Almost all the restrictions only apply to <code class=syntax>SELECT</code>. For distributed query processing, restrictions are applied on each server separately.</p> <p>ClickHouse checks the restrictions for data parts, not for each row. It means that you can exceed the value of restriction with the size of the data part.</p> <p>Restrictions on the “maximum amount of something” can take the value 0, which means “unrestricted”.<br> Most restrictions also have an ‘overflow_mode’ setting, meaning what to do when the limit is exceeded.<br> It can take one of two values: <code class=syntax>throw</code> or <code class=syntax>break</code>. Restrictions on aggregation (group_by_overflow_mode) also have the value <code class=syntax>any</code>.</p> <p><code class=syntax>throw</code> – Throw an exception (default).</p> <p><code class=syntax>break</code> – Stop executing the query and return the partial result, as if the source data ran out.</p> <p><code class=syntax>any (only for group_by_overflow_mode)</code> – Continuing aggregation for the keys that got into the set, but do not add new keys to the set.</p> <h2 id=settings_max_memory_usage>max_memory_usage<a class=headerlink href=../amp/#settings_max_memory_usage title="Permanent link"> </a></h2> <p>The maximum amount of RAM to use for running a query on a single server.</p> <p>In the default configuration file, the maximum is 10 GB.</p> <p>The setting does not consider the volume of available memory or the total volume of memory on the machine.<br> The restriction applies to a single query within a single server.<br> You can use <code class=syntax>SHOW PROCESSLIST</code> to see the current memory consumption for each query.<br> Besides, the peak memory consumption is tracked for each query and written to the log.</p> <p>Memory usage is not monitored for the states of certain aggregate functions.</p> <p>Memory usage is not fully tracked for states of the aggregate functions <code class=syntax>min</code>, <code class=syntax>max</code>, <code class=syntax>any</code>, <code class=syntax>anyLast</code>, <code class=syntax>argMin</code>, <code class=syntax>argMax</code> from <code class=syntax>String</code> and <code class=syntax>Array</code> arguments.</p> <p>Memory consumption is also restricted by the parameters <code class=syntax>max_memory_usage_for_user</code> and <a href=../../../server-configuration-parameters/settings/amp/#max_server_memory_usage>max_server_memory_usage</a>.</p> <h2 id=max-memory-usage-for-user>max_memory_usage_for_user<a class=headerlink href=../amp/#max-memory-usage-for-user title="Permanent link"> </a></h2> <p>The maximum amount of RAM to use for running a user’s queries on a single server.</p> <p>Default values are defined in <a href=https://github.com/ClickHouse/ClickHouse/blob/master/src/Core/Settings.h#L288 rel="external nofollow noreferrer" target=_blank>Settings.h</a>. By default, the amount is not restricted (<code class=syntax>max_memory_usage_for_user = 0</code>).</p> <p>See also the description of <a href=../amp/#settings_max_memory_usage>max_memory_usage</a>.</p> <h2 id=max-rows-to-read>max_rows_to_read<a class=headerlink href=../amp/#max-rows-to-read title="Permanent link"> </a></h2> <p>The following restrictions can be checked on each block (instead of on each row). That is, the restrictions can be broken a little.</p> <p>A maximum number of rows that can be read from a table when running a query.</p> <h2 id=max-bytes-to-read>max_bytes_to_read<a class=headerlink href=../amp/#max-bytes-to-read title="Permanent link"> </a></h2> <p>A maximum number of bytes (uncompressed data) that can be read from a table when running a query.</p> <h2 id=read-overflow-mode>read_overflow_mode<a class=headerlink href=../amp/#read-overflow-mode title="Permanent link"> </a></h2> <p>What to do when the volume of data read exceeds one of the limits: ‘throw’ or ‘break’. By default, throw.</p> <h2 id=max-rows-to-read-leaf>max_rows_to_read_leaf<a class=headerlink href=../amp/#max-rows-to-read-leaf title="Permanent link"> </a></h2> <p>The following restrictions can be checked on each block (instead of on each row). That is, the restrictions can be broken a little.</p> <p>A maximum number of rows that can be read from a local table on a leaf node when running a distributed query. While<br> distributed queries can issue a multiple sub-queries to each shard (leaf) - this limit will be checked only on the read <br> stage on the leaf nodes and ignored on results merging stage on the root node. For example, cluster consists of 2 shards <br> and each shard contains a table with 100 rows. Then distributed query which suppose to read all the data from both <br> tables with setting <code class=syntax>max_rows_to_read=150</code> will fail as in total it will be 200 rows. While query <br> with <code class=syntax>max_rows_to_read_leaf=150</code> will succeed since leaf nodes will read 100 rows at max.</p> <h2 id=max-bytes-to-read-leaf>max_bytes_to_read_leaf<a class=headerlink href=../amp/#max-bytes-to-read-leaf title="Permanent link"> </a></h2> <p>A maximum number of bytes (uncompressed data) that can be read from a local table on a leaf node when running <br> a distributed query. While distributed queries can issue a multiple sub-queries to each shard (leaf) - this limit will <br> be checked only on the read stage on the leaf nodes and ignored on results merging stage on the root node. <br> For example, cluster consists of 2 shards and each shard contains a table with 100 bytes of data. <br> Then distributed query which suppose to read all the data from both tables with setting <code class=syntax>max_bytes_to_read=150</code> will fail <br> as in total it will be 200 bytes. While query with <code class=syntax>max_bytes_to_read_leaf=150</code> will succeed since leaf nodes will read <br> 100 bytes at max.</p> <h2 id=read-overflow-mode-leaf>read_overflow_mode_leaf<a class=headerlink href=../amp/#read-overflow-mode-leaf title="Permanent link"> </a></h2> <p>What to do when the volume of data read exceeds one of the leaf limits: ‘throw’ or ‘break’. By default, throw.</p> <h2 id=settings-max-rows-to-group-by>max_rows_to_group_by<a class=headerlink href=../amp/#settings-max-rows-to-group-by title="Permanent link"> </a></h2> <p>A maximum number of unique keys received from aggregation. This setting lets you limit memory consumption when aggregating.</p> <h2 id=group-by-overflow-mode>group_by_overflow_mode<a class=headerlink href=../amp/#group-by-overflow-mode title="Permanent link"> </a></h2> <p>What to do when the number of unique keys for aggregation exceeds the limit: ‘throw’, ‘break’, or ‘any’. By default, throw.<br> Using the ‘any’ value lets you run an approximation of GROUP BY. The quality of this approximation depends on the statistical nature of the data.</p> <h2 id=settings-max_bytes_before_external_group_by>max_bytes_before_external_group_by<a class=headerlink href=../amp/#settings-max_bytes_before_external_group_by title="Permanent link"> </a></h2> <p>Enables or disables execution of <code class=syntax>GROUP BY</code> clauses in external memory. See <a href=../../../../sql-reference/statements/select/group-by/amp/#select-group-by-in-external-memory>GROUP BY in external memory</a>.</p> <p>Possible values:</p> <ul> <li>Maximum volume of RAM (in bytes) that can be used by the single <a href=../../../../sql-reference/statements/select/group-by/amp/#select-group-by-clause>GROUP BY</a> operation.</li> <li>0 — <code class=syntax>GROUP BY</code> in external memory disabled.</li> </ul> <p>Default value: 0.</p> <h2 id=max-rows-to-sort>max_rows_to_sort<a class=headerlink href=../amp/#max-rows-to-sort title="Permanent link"> </a></h2> <p>A maximum number of rows before sorting. This allows you to limit memory consumption when sorting.</p> <h2 id=max-bytes-to-sort>max_bytes_to_sort<a class=headerlink href=../amp/#max-bytes-to-sort title="Permanent link"> </a></h2> <p>A maximum number of bytes before sorting.</p> <h2 id=sort-overflow-mode>sort_overflow_mode<a class=headerlink href=../amp/#sort-overflow-mode title="Permanent link"> </a></h2> <p>What to do if the number of rows received before sorting exceeds one of the limits: ‘throw’ or ‘break’. By default, throw.</p> <h2 id=setting-max_result_rows>max_result_rows<a class=headerlink href=../amp/#setting-max_result_rows title="Permanent link"> </a></h2> <p>Limit on the number of rows in the result. Also checked for subqueries, and on remote servers when running parts of a distributed query.</p> <h2 id=max-result-bytes>max_result_bytes<a class=headerlink href=../amp/#max-result-bytes title="Permanent link"> </a></h2> <p>Limit on the number of bytes in the result. The same as the previous setting.</p> <h2 id=result-overflow-mode>result_overflow_mode<a class=headerlink href=../amp/#result-overflow-mode title="Permanent link"> </a></h2> <p>What to do if the volume of the result exceeds one of the limits: ‘throw’ or ‘break’. By default, throw.</p> <p>Using ‘break’ is similar to using LIMIT. <code class=syntax>Break</code> interrupts execution only at the block level. This means that amount of returned rows is greater than <a href=../amp/#setting-max_result_rows>max_result_rows</a>, multiple of <a href=../../settings/amp/#setting-max_block_size>max_block_size</a> and depends on <a href=../../settings/amp/#settings-max_threads>max_threads</a>.</p> <p>Example:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>max_threads</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=n>max_block_size</span> <span class=o>=</span> <span class=mi>3333</span><span class=p>;</span>
<span class=k>SET</span> <span class=n>max_result_rows</span> <span class=o>=</span> <span class=mi>3334</span><span class=p>,</span> <span class=n>result_overflow_mode</span> <span class=o>=</span> <span class=s1>'break'</span><span class=p>;</span>

<span class=k>SELECT</span> <span class=o>*</span>
<span class=k>FROM</span> <span class=n>numbers_mt</span><span class=p>(</span><span class=mi>100000</span><span class=p>)</span>
<span class=n>FORMAT</span> <span class=k>Null</span><span class=p>;</span>
</code></pre></div> <p>Result:</p> <div class=codehilite><pre><span></span><code class=syntax>6666 rows in set. ...
</code></pre></div> <h2 id=max-execution-time>max_execution_time<a class=headerlink href=../amp/#max-execution-time title="Permanent link"> </a></h2> <p>Maximum query execution time in seconds.<br> At this time, it is not checked for one of the sorting stages, or when merging and finalizing aggregate functions.</p> <h2 id=timeout-overflow-mode>timeout_overflow_mode<a class=headerlink href=../amp/#timeout-overflow-mode title="Permanent link"> </a></h2> <p>What to do if the query is run longer than ‘max_execution_time’: ‘throw’ or ‘break’. By default, throw.</p> <h2 id=min-execution-speed>min_execution_speed<a class=headerlink href=../amp/#min-execution-speed title="Permanent link"> </a></h2> <p>Minimal execution speed in rows per second. Checked on every data block when ‘timeout_before_checking_execution_speed’ expires. If the execution speed is lower, an exception is thrown.</p> <h2 id=min-execution-speed-bytes>min_execution_speed_bytes<a class=headerlink href=../amp/#min-execution-speed-bytes title="Permanent link"> </a></h2> <p>A minimum number of execution bytes per second. Checked on every data block when ‘timeout_before_checking_execution_speed’ expires. If the execution speed is lower, an exception is thrown.</p> <h2 id=max-execution-speed>max_execution_speed<a class=headerlink href=../amp/#max-execution-speed title="Permanent link"> </a></h2> <p>A maximum number of execution rows per second. Checked on every data block when ‘timeout_before_checking_execution_speed’ expires. If the execution speed is high, the execution speed will be reduced.</p> <h2 id=max-execution-speed-bytes>max_execution_speed_bytes<a class=headerlink href=../amp/#max-execution-speed-bytes title="Permanent link"> </a></h2> <p>A maximum number of execution bytes per second. Checked on every data block when ‘timeout_before_checking_execution_speed’ expires. If the execution speed is high, the execution speed will be reduced.</p> <h2 id=timeout-before-checking-execution-speed>timeout_before_checking_execution_speed<a class=headerlink href=../amp/#timeout-before-checking-execution-speed title="Permanent link"> </a></h2> <p>Checks that execution speed is not too slow (no less than ‘min_execution_speed’), after the specified time in seconds has expired.</p> <h2 id=max-columns-to-read>max_columns_to_read<a class=headerlink href=../amp/#max-columns-to-read title="Permanent link"> </a></h2> <p>A maximum number of columns that can be read from a table in a single query. If a query requires reading a greater number of columns, it throws an exception.</p> <h2 id=max-temporary-columns>max_temporary_columns<a class=headerlink href=../amp/#max-temporary-columns title="Permanent link"> </a></h2> <p>A maximum number of temporary columns that must be kept in RAM at the same time when running a query, including constant columns. If there are more temporary columns than this, it throws an exception.</p> <h2 id=max-temporary-non-const-columns>max_temporary_non_const_columns<a class=headerlink href=../amp/#max-temporary-non-const-columns title="Permanent link"> </a></h2> <p>The same thing as ‘max_temporary_columns’, but without counting constant columns.<br> Note that constant columns are formed fairly often when running a query, but they require approximately zero computing resources.</p> <h2 id=max-subquery-depth>max_subquery_depth<a class=headerlink href=../amp/#max-subquery-depth title="Permanent link"> </a></h2> <p>Maximum nesting depth of subqueries. If subqueries are deeper, an exception is thrown. By default, 100.</p> <h2 id=max-pipeline-depth>max_pipeline_depth<a class=headerlink href=../amp/#max-pipeline-depth title="Permanent link"> </a></h2> <p>Maximum pipeline depth. Corresponds to the number of transformations that each data block goes through during query processing. Counted within the limits of a single server. If the pipeline depth is greater, an exception is thrown. By default, 1000.</p> <h2 id=max-ast-depth>max_ast_depth<a class=headerlink href=../amp/#max-ast-depth title="Permanent link"> </a></h2> <p>Maximum nesting depth of a query syntactic tree. If exceeded, an exception is thrown.<br> At this time, it isn’t checked during parsing, but only after parsing the query. That is, a syntactic tree that is too deep can be created during parsing, but the query will fail. By default, 1000.</p> <h2 id=max-ast-elements>max_ast_elements<a class=headerlink href=../amp/#max-ast-elements title="Permanent link"> </a></h2> <p>A maximum number of elements in a query syntactic tree. If exceeded, an exception is thrown.<br> In the same way as the previous setting, it is checked only after parsing the query. By default, 50,000.</p> <h2 id=max-rows-in-set>max_rows_in_set<a class=headerlink href=../amp/#max-rows-in-set title="Permanent link"> </a></h2> <p>A maximum number of rows for a data set in the IN clause created from a subquery.</p> <h2 id=max-bytes-in-set>max_bytes_in_set<a class=headerlink href=../amp/#max-bytes-in-set title="Permanent link"> </a></h2> <p>A maximum number of bytes (uncompressed data) used by a set in the IN clause created from a subquery.</p> <h2 id=set-overflow-mode>set_overflow_mode<a class=headerlink href=../amp/#set-overflow-mode title="Permanent link"> </a></h2> <p>What to do when the amount of data exceeds one of the limits: ‘throw’ or ‘break’. By default, throw.</p> <h2 id=max-rows-in-distinct>max_rows_in_distinct<a class=headerlink href=../amp/#max-rows-in-distinct title="Permanent link"> </a></h2> <p>A maximum number of different rows when using DISTINCT.</p> <h2 id=max-bytes-in-distinct>max_bytes_in_distinct<a class=headerlink href=../amp/#max-bytes-in-distinct title="Permanent link"> </a></h2> <p>A maximum number of bytes used by a hash table when using DISTINCT.</p> <h2 id=distinct-overflow-mode>distinct_overflow_mode<a class=headerlink href=../amp/#distinct-overflow-mode title="Permanent link"> </a></h2> <p>What to do when the amount of data exceeds one of the limits: ‘throw’ or ‘break’. By default, throw.</p> <h2 id=max-rows-to-transfer>max_rows_to_transfer<a class=headerlink href=../amp/#max-rows-to-transfer title="Permanent link"> </a></h2> <p>A maximum number of rows that can be passed to a remote server or saved in a temporary table when using GLOBAL IN.</p> <h2 id=max-bytes-to-transfer>max_bytes_to_transfer<a class=headerlink href=../amp/#max-bytes-to-transfer title="Permanent link"> </a></h2> <p>A maximum number of bytes (uncompressed data) that can be passed to a remote server or saved in a temporary table when using GLOBAL IN.</p> <h2 id=transfer-overflow-mode>transfer_overflow_mode<a class=headerlink href=../amp/#transfer-overflow-mode title="Permanent link"> </a></h2> <p>What to do when the amount of data exceeds one of the limits: ‘throw’ or ‘break’. By default, throw.</p> <h2 id=settings-max_rows_in_join>max_rows_in_join<a class=headerlink href=../amp/#settings-max_rows_in_join title="Permanent link"> </a></h2> <p>Limits the number of rows in the hash table that is used when joining tables.</p> <p>This settings applies to <a href=../../../../sql-reference/statements/select/join/amp/#select-join>SELECT … JOIN</a> operations and the <a href=../../../../engines/table-engines/special/join/amp/ >Join</a> table engine.</p> <p>If a query contains multiple joins, ClickHouse checks this setting for every intermediate result.</p> <p>ClickHouse can proceed with different actions when the limit is reached. Use the <a href=../amp/#settings-join_overflow_mode>join_overflow_mode</a> setting to choose the action.</p> <p>Possible values:</p> <ul> <li>Positive integer.</li> <li>0 — Unlimited number of rows.</li> </ul> <p>Default value: 0.</p> <h2 id=settings-max_bytes_in_join>max_bytes_in_join<a class=headerlink href=../amp/#settings-max_bytes_in_join title="Permanent link"> </a></h2> <p>Limits the size in bytes of the hash table used when joining tables.</p> <p>This settings applies to <a href=../../../../sql-reference/statements/select/join/amp/#select-join>SELECT … JOIN</a> operations and <a href=../../../../engines/table-engines/special/join/amp/ >Join table engine</a>.</p> <p>If the query contains joins, ClickHouse checks this setting for every intermediate result.</p> <p>ClickHouse can proceed with different actions when the limit is reached. Use <a href=../amp/#settings-join_overflow_mode>join_overflow_mode</a> settings to choose the action.</p> <p>Possible values:</p> <ul> <li>Positive integer.</li> <li>0 — Memory control is disabled.</li> </ul> <p>Default value: 0.</p> <h2 id=settings-join_overflow_mode>join_overflow_mode<a class=headerlink href=../amp/#settings-join_overflow_mode title="Permanent link"> </a></h2> <p>Defines what action ClickHouse performs when any of the following join limits is reached:</p> <ul> <li><a href=../amp/#settings-max_bytes_in_join>max_bytes_in_join</a></li> <li><a href=../amp/#settings-max_rows_in_join>max_rows_in_join</a></li> </ul> <p>Possible values:</p> <ul> <li><code class=syntax>THROW</code> — ClickHouse throws an exception and breaks operation.</li> <li><code class=syntax>BREAK</code> — ClickHouse breaks operation and does not throw an exception.</li> </ul> <p>Default value: <code class=syntax>THROW</code>.</p> <p><strong>See Also</strong></p> <ul> <li><a href=../../../../sql-reference/statements/select/join/amp/#select-join>JOIN clause</a></li> <li><a href=../../../../engines/table-engines/special/join/amp/ >Join table engine</a></li> </ul> <h2 id=max-partitions-per-insert-block>max_partitions_per_insert_block<a class=headerlink href=../amp/#max-partitions-per-insert-block title="Permanent link"> </a></h2> <p>Limits the maximum number of partitions in a single inserted block.</p> <ul> <li>Positive integer.</li> <li>0 — Unlimited number of partitions.</li> </ul> <p>Default value: 100.</p> <p><strong>Details</strong></p> <p>When inserting data, ClickHouse calculates the number of partitions in the inserted block. If the number of partitions is more than <code class=syntax>max_partitions_per_insert_block</code>, ClickHouse throws an exception with the following text:</p> <blockquote> <p>“Too many partitions for single INSERT block (more than” + toString(max_parts) + “). The limit is controlled by ‘max_partitions_per_insert_block’ setting. A large number of partitions is a common misconception. It will lead to severe negative performance impact, including slow server startup, slow INSERT queries and slow SELECT queries. Recommended total number of partitions for a table is under 1000..10000. Please note, that partitioning is not intended to speed up SELECT queries (ORDER BY key is sufficient to make range queries fast). Partitions are intended for data manipulation (DROP PARTITION, etc).”</p> </blockquote> <p><a href=https://clickhouse.tech/docs/en/operations/settings/query_complexity/ target=_blank>Original article</a> <!--hide--></p> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2021 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/878a159538935028f2d2dce3eb3074d44eb191df rel="external nofollow noreferrer" target=_blank class=text-reset>878a159538</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/en/operations/settings/query-complexity/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 