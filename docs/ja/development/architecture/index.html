<!DOCTYPE html><html lang=ja data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>クリックハウス建築の概要 | ClickHouseドキュメント</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/logo-180x180.png><meta property=og:title content="クリックハウス建築の概要 | ClickHouseドキュメント"><meta property=og:description content="クリックハウス建築の概要 ClickHouseは真の列指向のDBMSです。 データは、列によって、および配列（列のベクトルまたはチャンク）の実行中に格納されます。 可能であれば、個々の値ではなく配列に対して演算が送出されます。 それは呼ばれ"><meta property=og:type content=article><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta content=https://clickhouse.tech/docs/ja/development/architecture/ property=og:url><link href=https://clickhouse.tech/docs/ja/development/architecture/ rel=canonical><link href=https://clickhouse.tech/docs/ja/development/architecture/amp/ rel=amphtml><link rel=search href=/opensearch.xml title=ClickHouse type=application/opensearchdescription+xml><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "クリックハウス建築の概要 | ClickHouseドキュメント",
"mainEntityOfPage": "https://clickhouse.tech/docs/ja/development/architecture/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "クリックハウス建築の概要 | ClickHouseドキュメント",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><meta name=description content="クリックハウス建築の概要 ClickHouseは真の列指向のDBMSです。 データは、列によって、および配列（列のベクトルまたはチャンク）の実行中に格納されます。 可能であれば、個々の値ではなく配列に対して演算が送出されます。 それは呼ばれ"><meta name=keywords content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics"><link rel=alternate href=https://clickhouse.tech/docs/en/development/architecture/ hreflang=en><link rel=alternate href=https://clickhouse.tech/docs/zh/development/architecture/ hreflang=zh><link rel=alternate href=https://clickhouse.tech/docs/es/development/architecture/ hreflang=es><link rel=alternate href=https://clickhouse.tech/docs/fr/development/architecture/ hreflang=fr><link rel=alternate href=https://clickhouse.tech/docs/ru/development/architecture/ hreflang=ru><link rel=alternate href=https://clickhouse.tech/docs/ja/development/architecture/ hreflang=ja><link rel=alternate href=https://clickhouse.tech/docs/en/development/architecture/ hreflang=x-default><link href=/css/base.css?e27f3458 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> クリックハウス建築の概要 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li id=edit-wrapper class=nav-item> <a id=edit-link href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/development/architecture.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/ja.svg alt=日本語 title=日本語 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/development/architecture/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/development/architecture/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/development/architecture/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/development/architecture/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/development/architecture/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/development/architecture/ class="dropdown-item disabled"> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=はじめに class="nav-link text-light dropdown-toggle px-0">はじめに</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../getting-started/install/ title=インストール class="nav-link text-light text-wrap d-inline-block w-100 px-0">インストール</a> <a href=../../getting-started/tutorial/ title=チュートリアル class="nav-link text-light text-wrap d-inline-block w-100 px-0">チュートリアル</a> <a href=#sidebar-sidebar-1-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1-5 title=データセット例 class="nav-link text-light dropdown-toggle px-0">データセット例</a> <div id=sidebar-sidebar-1-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting-started/example-datasets/ title=イントロダクション class="nav-link text-light text-wrap d-inline-block w-100 px-0">イントロダクション</a> <a href=../../getting-started/example-datasets/metrica/ title="Yandex.Metrica データ" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica データ</a> <a href=../../getting-started/example-datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> <a href=../../getting-started/example-datasets/nyc-taxi/ title=ニューヨークタクシー class="nav-link text-light text-wrap d-inline-block w-100 px-0">ニューヨークタクシー</a> <a href=../../getting-started/example-datasets/amplab-benchmark/ title="AMPLab Big Data ベンチマーク" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data ベンチマーク</a> <a href=../../getting-started/example-datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting-started/example-datasets/criteo/ title="Criteo のテラバイトクリックログ" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Criteo のテラバイトクリックログ</a> <a href=../../getting-started/example-datasets/star-schema/ title="スタースキーマ ベンチマーク" class="nav-link text-light text-wrap d-inline-block w-100 px-0">スタースキーマ ベンチマーク</a> </nav> </div> <a href=../../getting-started/playground/ title=Playground class="nav-link text-light text-wrap d-inline-block w-100 px-0">Playground</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=インター class="nav-link text-light dropdown-toggle px-0">インター</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../interfaces/cli/ title=コマンド行クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">コマンド行クライアント</a> <a href=../../interfaces/tcp/ title=ネイティブイ) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネイティブイ)</a> <a href=../../interfaces/http/ title=HTTPインターフェ class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTPインターフェ</a> <a href=../../interfaces/mysql/ title=MySQLインタ class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQLインタ</a> <a href=../../interfaces/formats/ title=入力および出力フォーマット class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力および出力フォーマット</a> <a href=../../interfaces/jdbc/ title=JDBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBCドライバ</a> <a href=../../interfaces/odbc/ title=ODBCドライバ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBCドライバ</a> <a href=../../interfaces/cpp/ title=C++クライアントライ class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++クライアントライ</a> <a href=#sidebar-sidebar-2-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-10 title=サードパーティ class="nav-link text-light dropdown-toggle px-0">サードパーティ</a> <div id=sidebar-sidebar-2-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/client-libraries/ title=クライアント class="nav-link text-light text-wrap d-inline-block w-100 px-0">クライアント</a> <a href=../../interfaces/third-party/integrations/ title=統合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">統合</a> <a href=../../interfaces/third-party/gui/ title=視界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">視界面</a> <a href=../../interfaces/third-party/proxy/ title=プロキシ class="nav-link text-light text-wrap d-inline-block w-100 px-0">プロキシ</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=エンジン class="nav-link text-light dropdown-toggle px-0">エンジン</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2 title=表エンジン class="nav-link text-light dropdown-toggle px-0">表エンジン</a> <div id=sidebar-sidebar-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=#sidebar-sidebar-3-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-2 title=メルゲツリー族 class="nav-link text-light dropdown-toggle px-0">メルゲツリー族</a> <div id=sidebar-sidebar-3-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/mergetree-family/mergetree/ title=メルゲツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">メルゲツリー</a> <a href=../../engines/table-engines/mergetree-family/replication/ title=データ複製 class="nav-link text-light text-wrap d-inline-block w-100 px-0">データ複製</a> <a href=../../engines/table-engines/mergetree-family/custom-partitioning-key/ title=カスタム分割キー class="nav-link text-light text-wrap d-inline-block w-100 px-0">カスタム分割キー</a> <a href=../../engines/table-engines/mergetree-family/replacingmergetree/ title=置換マージツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">置換マージツリー</a> <a href=../../engines/table-engines/mergetree-family/summingmergetree/ title=サミングマーゲツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">サミングマーゲツリー</a> <a href=../../engines/table-engines/mergetree-family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/collapsingmergetree/ title=折りたたみマージツリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">折りたたみマージツリー</a> <a href=../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/ title=バージョニングコラプシングマーゲットリー class="nav-link text-light text-wrap d-inline-block w-100 px-0">バージョニングコラプシングマーゲットリー</a> <a href=../../engines/table-engines/mergetree-family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-3-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-3 title=ログファミリ class="nav-link text-light dropdown-toggle px-0">ログファミリ</a> <div id=sidebar-sidebar-3-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/log-family/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../engines/table-engines/log-family/stripelog/ title=ストリップログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ストリップログ</a> <a href=../../engines/table-engines/log-family/log/ title=ログ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ログ</a> <a href=../../engines/table-engines/log-family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-3-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-4 title=統合 class="nav-link text-light dropdown-toggle px-0">統合</a> <div id=sidebar-sidebar-3-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/integrations/kafka/ title=カフカ class="nav-link text-light text-wrap d-inline-block w-100 px-0">カフカ</a> <a href=../../engines/table-engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/table-engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../engines/table-engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../engines/table-engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-3-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2-5 title=スペシャル class="nav-link text-light dropdown-toggle px-0">スペシャル</a> <div id=sidebar-sidebar-3-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/special/distributed/ title=分散 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分散</a> <a href=../../engines/table-engines/special/external-data/ title=外部データ class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部データ</a> <a href=../../engines/table-engines/special/dictionary/ title=辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書</a> <a href=../../engines/table-engines/special/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../engines/table-engines/special/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../engines/table-engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../engines/table-engines/special/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../engines/table-engines/special/join/ title=参加 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参加</a> <a href=../../engines/table-engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../engines/table-engines/special/view/ title=表示 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表示</a> <a href=../../engines/table-engines/special/materializedview/ title=マテリアライズドビュー class="nav-link text-light text-wrap d-inline-block w-100 px-0">マテリアライズドビュー</a> <a href=../../engines/table-engines/special/memory/ title=メモリ class="nav-link text-light text-wrap d-inline-block w-100 px-0">メモリ</a> <a href=../../engines/table-engines/special/buffer/ title=バッファ class="nav-link text-light text-wrap d-inline-block w-100 px-0">バッファ</a> <a href=../../engines/table-engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title=データベース class="nav-link text-light dropdown-toggle px-0">データベース</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database-engines/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../engines/database-engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database-engines/lazy/ title=怠け者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">怠け者</a> <a href=../../engines/database-engines/atomic/ title=Atomic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=SQLリファレンス class="nav-link text-light dropdown-toggle px-0">SQLリファレンス</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title=文 class="nav-link text-light dropdown-toggle px-0">文</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-2 title=SELECT class="nav-link text-light dropdown-toggle px-0">SELECT</a> <div id=sidebar-sidebar-4-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/statements/select/ title=Overview class="nav-link text-light text-wrap d-inline-block w-100 px-0">Overview</a> <a href=../../sql-reference/statements/select/array-join/ title="ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN</a> <a href=../../sql-reference/statements/select/distinct/ title=DISTINCT class="nav-link text-light text-wrap d-inline-block w-100 px-0">DISTINCT</a> <a href=../../sql-reference/statements/select/format/ title=FORMAT class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT</a> <a href=../../sql-reference/statements/select/from/ title=FROM class="nav-link text-light text-wrap d-inline-block w-100 px-0">FROM</a> <a href=../../sql-reference/statements/select/group-by/ title="GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GROUP BY</a> <a href=../../sql-reference/statements/select/having/ title=HAVING class="nav-link text-light text-wrap d-inline-block w-100 px-0">HAVING</a> <a href=../../sql-reference/statements/select/into-outfile/ title="INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE</a> <a href=../../sql-reference/statements/select/join/ title=JOIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">JOIN</a> <a href=../../sql-reference/statements/select/limit/ title=LIMIT class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a> <a href=../../sql-reference/statements/select/limit-by/ title="LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT BY</a> <a href=../../sql-reference/statements/select/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../sql-reference/statements/select/prewhere/ title=PREWHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE</a> <a href=../../sql-reference/statements/select/sample/ title=SAMPLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE</a> <a href=../../sql-reference/statements/select/where/ title=WHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">WHERE</a> <a href=../../sql-reference/statements/select/with/ title=WITH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WITH</a> </nav> </div> <a href=../../sql-reference/statements/insert-into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../sql-reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../sql-reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql-reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../sql-reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../sql-reference/statements/grant/ title=GRANT class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRANT</a> <a href=../../sql-reference/statements/revoke/ title=REVOKE class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a> <a href=../../sql-reference/statements/misc/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> <a href=../../sql-reference/statements/optimize/ title=OPTIMIZE class="nav-link text-light text-wrap d-inline-block w-100 px-0">OPTIMIZE</a> </nav> </div> <a href=../../sql-reference/syntax/ title=構文 class="nav-link text-light text-wrap d-inline-block w-100 px-0">構文</a> <a href=#sidebar-sidebar-4-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-4 title=関数 class="nav-link text-light dropdown-toggle px-0">関数</a> <div id=sidebar-sidebar-4-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/functions/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../sql-reference/functions/arithmetic-functions/ title=算術 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算術</a> <a href=../../sql-reference/functions/comparison-functions/ title=比較 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比較</a> <a href=../../sql-reference/functions/logical-functions/ title=論理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">論理</a> <a href=../../sql-reference/functions/type-conversion-functions/ title=タイプ変換 class="nav-link text-light text-wrap d-inline-block w-100 px-0">タイプ変換</a> <a href=../../sql-reference/functions/date-time-functions/ title=日付と時刻の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付と時刻の操作</a> <a href=../../sql-reference/functions/string-functions/ title=文字列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列の操作</a> <a href=../../sql-reference/functions/string-search-functions/ title=文字列を検索する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列を検索する場合</a> <a href=../../sql-reference/functions/string-replace-functions/ title=文字列で置換する場合 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列で置換する場合</a> <a href=../../sql-reference/functions/conditional-functions/ title=条件付き class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件付き</a> <a href=../../sql-reference/functions/math-functions/ title=数学 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学</a> <a href=../../sql-reference/functions/rounding-functions/ title=丸め class="nav-link text-light text-wrap d-inline-block w-100 px-0">丸め</a> <a href=../../sql-reference/functions/array-functions/ title=配列の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列の操作</a> <a href=../../sql-reference/functions/splitting-merging-functions/ title=文字列と配列の分割とマージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列と配列の分割とマージ</a> <a href=../../sql-reference/functions/bit-functions/ title=ビット class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビット</a> <a href=../../sql-reference/functions/bitmap-functions/ title=ビットマ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ビットマ</a> <a href=../../sql-reference/functions/hash-functions/ title=ハッシュ class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハッシュ</a> <a href=../../sql-reference/functions/random-functions/ title=擬似乱数の生成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">擬似乱数の生成</a> <a href=../../sql-reference/functions/encoding-functions/ title=エンコード class="nav-link text-light text-wrap d-inline-block w-100 px-0">エンコード</a> <a href=../../sql-reference/functions/uuid-functions/ title=UUIDの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUIDの操作</a> <a href=../../sql-reference/functions/url-functions/ title=Urlの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Urlの操作</a> <a href=../../sql-reference/functions/ip-address-functions/ title=IPアドレスの操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPアドレスの操作</a> <a href=../../sql-reference/functions/json-functions/ title=JSONでの作業 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSONでの作業</a> <a href=../../sql-reference/functions/higher-order-functions/ title=高次 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高次</a> <a href=../../sql-reference/functions/ext-dict-functions/ title=外部辞書の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書の操作</a> <a href=../../sql-reference/functions/ym-dict-functions/ title=Yandexでの作業。メトリカ辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandexでの作業。メトリカ辞書</a> <a href=../../sql-reference/functions/in-functions/ title=IN演算子の実装 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN演算子の実装</a> <a href=../../sql-reference/functions/array-join/ title=アレイジョイン class="nav-link text-light text-wrap d-inline-block w-100 px-0">アレイジョイン</a> <a href=../../sql-reference/functions/geo/ title=地理座標の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">地理座標の操作</a> <a href=../../sql-reference/functions/functions-for-nulls/ title=Null許容引数の操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null許容引数の操作</a> <a href=../../sql-reference/functions/machine-learning-functions/ title=機械学習機能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">機械学習機能</a> <a href=../../sql-reference/functions/introspection/ title=内省 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内省</a> <a href=../../sql-reference/functions/other-functions/ title=その他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">その他</a> </nav> </div> <a href=#sidebar-sidebar-4-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-5 title=集計関数 class="nav-link text-light dropdown-toggle px-0">集計関数</a> <div id=sidebar-sidebar-4-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/aggregate-functions/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../sql-reference/aggregate-functions/reference/ title=参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参照</a> <a href=../../sql-reference/aggregate-functions/combinators/ title=コンビネータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">コンビネータ</a> <a href=../../sql-reference/aggregate-functions/parametric-functions/ title=パラメトリック class="nav-link text-light text-wrap d-inline-block w-100 px-0">パラメトリック</a> </nav> </div> <a href=#sidebar-sidebar-4-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-6 title=テーブル関数 class="nav-link text-light dropdown-toggle px-0">テーブル関数</a> <div id=sidebar-sidebar-4-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/table-functions/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../sql-reference/table-functions/file/ title=ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">ファイル</a> <a href=../../sql-reference/table-functions/merge/ title=マージ class="nav-link text-light text-wrap d-inline-block w-100 px-0">マージ</a> <a href=../../sql-reference/table-functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../sql-reference/table-functions/remote/ title=リモート class="nav-link text-light text-wrap d-inline-block w-100 px-0">リモート</a> <a href=../../sql-reference/table-functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql-reference/table-functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql-reference/table-functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql-reference/table-functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql-reference/table-functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql-reference/table-functions/input/ title=入力 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入力</a> <a href=../../sql-reference/table-functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-4-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7 title=辞書 class="nav-link text-light dropdown-toggle px-0">辞書</a> <div id=sidebar-sidebar-4-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/dictionaries/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=#sidebar-sidebar-4-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7-2 title=外部辞書 class="nav-link text-light dropdown-toggle px-0">外部辞書</a> <div id=sidebar-sidebar-4-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts/ title=一般的な説明 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な説明</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/ title=外部ディクショナリの構成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部ディクショナリの構成</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/ title=メモリへの辞書の格納 class="nav-link text-light text-wrap d-inline-block w-100 px-0">メモリへの辞書の格納</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/ title=辞書の更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書の更新</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/ title=外部辞書のソース class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部辞書のソース</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/ title=辞書キーとフィールド class="nav-link text-light text-wrap d-inline-block w-100 px-0">辞書キーとフィールド</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/ title=階層辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">階層辞書</a> </nav> </div> <a href=../../sql-reference/dictionaries/internal-dicts/ title=内部辞書 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部辞書</a> </nav> </div> <a href=#sidebar-sidebar-4-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8 title=データ型 class="nav-link text-light dropdown-toggle px-0">データ型</a> <div id=sidebar-sidebar-4-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../sql-reference/data-types/int-uint/ title=UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8、UInt16、UInt32、UInt64、Int8、Int16、Int32、Int64</a> <a href=../../sql-reference/data-types/float/ title=Float32、Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32、Float64</a> <a href=../../sql-reference/data-types/decimal/ title=小数点 class="nav-link text-light text-wrap d-inline-block w-100 px-0">小数点</a> <a href=../../sql-reference/data-types/boolean/ title=ブール値 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ブール値</a> <a href=../../sql-reference/data-types/string/ title=文字列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文字列</a> <a href=../../sql-reference/data-types/fixedstring/ title=固定文字列(N) class="nav-link text-light text-wrap d-inline-block w-100 px-0">固定文字列(N)</a> <a href=../../sql-reference/data-types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql-reference/data-types/date/ title=日付 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日付</a> <a href=../../sql-reference/data-types/datetime/ title=DateTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a> <a href=../../sql-reference/data-types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../sql-reference/data-types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../sql-reference/data-types/array/ title=配列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">配列(T)</a> <a href=../../sql-reference/data-types/aggregatefunction/ title=AggregateFunction(名前,types_of_arguments...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(名前,types_of_arguments...)</a> <a href=../../sql-reference/data-types/tuple/ title=Tuple(T1,T2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1,T2,...)</a> <a href=../../sql-reference/data-types/nullable/ title=Null可能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null可能</a> <a href=#sidebar-sidebar-4-8-17 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8-17 title=入れ子データ構造 class="nav-link text-light dropdown-toggle px-0">入れ子データ構造</a> <div id=sidebar-sidebar-4-8-17 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/nested-data-structures/nested/ title=ネストされた(Name1Type1,Name2Type2,...) class="nav-link text-light text-wrap d-inline-block w-100 px-0">ネストされた(Name1Type1,Name2Type2,...)</a> </nav> </div> <a href=#sidebar-sidebar-4-8-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8-18 title=特殊データ型 class="nav-link text-light dropdown-toggle px-0">特殊データ型</a> <div id=sidebar-sidebar-4-8-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/special-data-types/expression/ title=式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">式</a> <a href=../../sql-reference/data-types/special-data-types/set/ title=セット class="nav-link text-light text-wrap d-inline-block w-100 px-0">セット</a> <a href=../../sql-reference/data-types/special-data-types/nothing/ title=何もない class="nav-link text-light text-wrap d-inline-block w-100 px-0">何もない</a> <a href=../../sql-reference/data-types/special-data-types/interval/ title=間隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">間隔</a> </nav> </div> <a href=#sidebar-sidebar-4-8-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-8-19 title=ドメイン class="nav-link text-light dropdown-toggle px-0">ドメイン</a> <div id=sidebar-sidebar-4-8-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/domains/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../sql-reference/data-types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql-reference/data-types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../sql-reference/data-types/simpleaggregatefunction/ title=SimpleAggregateFunction class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction</a> </nav> </div> <a href=#sidebar-sidebar-4-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-9 title=演算子 class="nav-link text-light dropdown-toggle px-0">演算子</a> <div id=sidebar-sidebar-4-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/operators/ title=演算子 class="nav-link text-light text-wrap d-inline-block w-100 px-0">演算子</a> <a href=../../sql-reference/operators/in/ title="IN Operators" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN Operators</a> </nav> </div> <a href=../../sql-reference/ansi/ title=ANSIの互換性 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSIの互換性</a> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=ガイド class="nav-link text-light dropdown-toggle px-0">ガイド</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../guides/apply-catboost-model/ title=CatBoostモデルの適用 class="nav-link text-light text-wrap d-inline-block w-100 px-0">CatBoostモデルの適用</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=操作 class="nav-link text-light dropdown-toggle px-0">操作</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../operations/requirements/ title=要件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要件</a> <a href=../../operations/monitoring/ title=監視 class="nav-link text-light text-wrap d-inline-block w-100 px-0">監視</a> <a href=../../operations/troubleshooting/ title=トラブルシ class="nav-link text-light text-wrap d-inline-block w-100 px-0">トラブルシ</a> <a href=../../operations/update/ title=クリックハウスの更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウスの更新</a> <a href=../../operations/access-rights/ title=アクセス制御とアカウント管理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">アクセス制御とアカウント管理</a> <a href=../../operations/backup/ title=データバックア class="nav-link text-light text-wrap d-inline-block w-100 px-0">データバックア</a> <a href=../../operations/configuration-files/ title=設定ファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定ファイル</a> <a href=../../operations/quotas/ title=クォータ class="nav-link text-light text-wrap d-inline-block w-100 px-0">クォータ</a> <a href=../../operations/system-tables/ title=システム表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">システム表</a> <a href=#sidebar-sidebar-6-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-11 title=性能の最適化 class="nav-link text-light dropdown-toggle px-0">性能の最適化</a> <div id=sidebar-sidebar-6-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing-performance/sampling-query-profiler/ title=Queryプロファイリング class="nav-link text-light text-wrap d-inline-block w-100 px-0">Queryプロファイリング</a> </nav> </div> <a href=#sidebar-sidebar-6-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-12 title=サーバ構成パラメータ class="nav-link text-light dropdown-toggle px-0">サーバ構成パラメータ</a> <div id=sidebar-sidebar-6-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server-configuration-parameters/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../operations/server-configuration-parameters/settings/ title=サーバー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">サーバー設定</a> </nav> </div> <a href=../../operations/performance-test/ title=ハードウェア試験 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ハードウェア試験</a> <a href=#sidebar-sidebar-6-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-14 title=設定 class="nav-link text-light dropdown-toggle px-0">設定</a> <div id=sidebar-sidebar-6-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/ title=はじめに class="nav-link text-light text-wrap d-inline-block w-100 px-0">はじめに</a> <a href=../../operations/settings/permissions-for-queries/ title=クエリの権限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの権限</a> <a href=../../operations/settings/query-complexity/ title=クエリの複雑さの制限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クエリの複雑さの制限</a> <a href=../../operations/settings/settings-profiles/ title=設定プロファイル class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定プロファイル</a> <a href=../../operations/settings/constraints-on-settings/ title=設定の制約 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定の制約</a> <a href=../../operations/settings/settings-users/ title=ユーザー設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ユーザー設定</a> <a href=../../operations/settings/settings/ title=設定 class="nav-link text-light text-wrap d-inline-block w-100 px-0">設定</a> </nav> </div> <a href=#sidebar-sidebar-6-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-15 title=ユーティリ class="nav-link text-light dropdown-toggle px-0">ユーティリ</a> <div id=sidebar-sidebar-6-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/ title=概要 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概要</a> <a href=../../operations/utilities/clickhouse-copier/ title=クリックハウス-複写機 class="nav-link text-light text-wrap d-inline-block w-100 px-0">クリックハウス-複写機</a> <a href=../../operations/utilities/clickhouse-local/ title=ﾂつｨﾂ姪 ﾂ債ﾂつｹ&quot; class="nav-link text-light text-wrap d-inline-block w-100 px-0">ﾂつｨﾂ姪"ﾂ債ﾂつｹ</a> <a href=../../operations/utilities/clickhouse-benchmark/ title=clickhouse-ベンチマーク class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-ベンチマーク</a> </nav> </div> <a href=../../operations/tips/ title=使用法の推奨事項 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用法の推奨事項</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=開発 class="nav-link text-light dropdown-toggle px-0">開発</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/developer-instruction/ title=初心者ClickHouse開発者の指示 class="nav-link text-light text-wrap d-inline-block w-100 px-0">初心者ClickHouse開発者の指示</a> <a href=../../development/architecture/ title=クリックハウス建築の概要 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">クリックハウス建築の概要</a> <a href=../../development/browse-code/ title=ソースコードの参照 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ソースコードの参照</a> <a href=../../development/build/ title=Linux上でClickHouseを構築する方法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Linux上でClickHouseを構築する方法</a> <a href=../../development/build-osx/ title="Mac OS XでClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS XでClickHouseを構築する方法</a> <a href=../../development/build-cross-osx/ title="Mac OS X用のLinux上でClickHouseを構築する方法" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Mac OS X用のLinux上でClickHouseを構築する方法</a> <a href=../../development/build-cross-arm/ title=Aarch64用のLinux上でClickHouseを構築する方法(ARM64) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aarch64用のLinux上でClickHouseを構築する方法(ARM64)</a> <a href=../../development/style/ title=C++コードの書き方 class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++コードの書き方</a> <a href=../../development/tests/ title=Testing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing</a> <a href=../../development/contrib/ title=サードパーティ製ライブラリを使用 class="nav-link text-light text-wrap d-inline-block w-100 px-0">サードパーティ製ライブラリを使用</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=商業 class="nav-link text-light dropdown-toggle px-0">商業</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/cloud/ title=クラウド class="nav-link text-light text-wrap d-inline-block w-100 px-0">クラウド</a> <a href=../../commercial/support/ title=Support class="nav-link text-light text-wrap d-inline-block w-100 px-0">Support</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=新着情報 class="nav-link text-light dropdown-toggle px-0">新着情報</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-9-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-2 title=Changelog class="nav-link text-light dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-9-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats-new/changelog/ title=2021 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a> <a href=../../whats-new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../whats-new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../whats-new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../whats-new/roadmap/ title=ロード class="nav-link text-light text-wrap d-inline-block w-100 px-0">ロード</a> <a href=../../whats-new/security-changelog/ title=セキュリティ変更履歴 class="nav-link text-light text-wrap d-inline-block w-100 px-0">セキュリティ変更履歴</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title=F.A.Q. class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/general/ title=一般的な質問 class="nav-link text-light text-wrap d-inline-block w-100 px-0">一般的な質問</a> </nav> </div> <a href=../../single/clickhouse_ja.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-4"> <div id=content class=mt-md-n3> <nav class=text-muted aria-label=breadcrumb> <ol class="breadcrumb bg-transparent p-0"> <li class=breadcrumb-item><a href=../ class=text-reset>開発</a> </li> </ol> </nav> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Help wanted!</p> <p class=lead>The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href=/docs/en/development/architecture/ class=alert-link>You can also use the original English version as a reference.</a></p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ja/development/architecture.md target=_blank rel="external nofollow noreferrer"> Help ClickHouse documentation by editing this page </a> </p> </div> <h1 id=overview-of-clickhouse-architecture>クリックハウス建築の概要<a class=headerlink href=#overview-of-clickhouse-architecture title="Permanent link"> </a></h1> <p>ClickHouseは真の列指向のDBMSです。 データは、列によって、および配列（列のベクトルまたはチャンク）の実行中に格納されます。 可能であれば、個々の値ではなく配列に対して演算が送出されます。 それは呼ばれます “vectorized query execution,” そしてそれは実際のデータ処理の費用を下げるのを助けます。</p> <blockquote> <p>この考え方は、新しいものではない。 それはにさかのぼります <code class=syntax>APL</code> プログラミング言語とその子孫: <code class=syntax>A +</code>, <code class=syntax>J</code>, <code class=syntax>K</code>,and <code class=syntax>Q</code>. 配列プログラミングは科学データ処理で使用されます。 どちらもこの考え方は関係データベースで新しいものではありません。 <code class=syntax>Vectorwise</code> システム</p> </blockquote> <p>クエリ処理の高速化には、ベクトル化されたクエリ実行とランタイムコード生成という二つの方法があります。 後者は、すべての間接および動的ディスパッチを削除します。 ずれのアプローチは厳重によります。 ランタイムコード生成は、多くの操作を融合し、CPU実行単位とパイプラインを完全に利用する場合に優れています。 Vectorizedクエリを実行できる実用的では一時的ベクトルを明記のことは、キャッシュを読みます。 一時データがL2キャッシュに収まらない場合、これが問題になります。 しかし、ベクトル化されたクエリの実行は、CPUのSIMD機能をより簡単に利用します。 A <a href=http://15721.courses.cs.cmu.edu/spring2016/papers/p5-sompolski.pdf rel="external nofollow noreferrer" target=_blank>研究論文</a> 書面による友人達しないことであり、両アプローチ。 ClickHouse用vectorizedクエリを実行して初期支援のためにランタイムコード。</p> <h2 id=columns>列<a class=headerlink href=#columns title="Permanent link"> </a></h2> <p><code class=syntax>IColumn</code> interfaceは、メモリ内の列（実際には列のチャンク）を表すために使用されます。 このイ 元の列を変更するのではなく、新しい変更された列を作成します。 例えば、 <code class=syntax>IColumn :: filter</code> 法を受け入れフィルタのバイトマスクです。 それはのために使用されます <code class=syntax>WHERE</code> と <code class=syntax>HAVING</code> 関係演算子。 追加の例： <code class=syntax>IColumn :: permute</code> サポートする方法 <code class=syntax>ORDER BY</code> は、 <code class=syntax>IColumn :: cut</code> サポートする方法 <code class=syntax>LIMIT</code>.</p> <p>各種 <code class=syntax>IColumn</code> 実装 (<code class=syntax>ColumnUInt8</code>, <code class=syntax>ColumnString</code> というように）は、列のメモリレイアウトを担当しています。 メモリレイアウトは、通常、連続した配列です。 整数型の列の場合は、次のように連続した配列にすぎません <code class=syntax>std :: vector</code>. のために <code class=syntax>String</code> と <code class=syntax>Array</code> すべての配列要素に対して一つ、連続して配置され、各配列の先頭へのオフセットに対して二つのベクトルです。 また <code class=syntax>ColumnConst</code> これはメモリに一つの値を格納しますが、列のように見えます。</p> <h2 id=field>フィールド<a class=headerlink href=#field title="Permanent link"> </a></h2> <p>それにもかかわらず、個々の価値を扱うことも可能です。 個々の値を表すために、 <code class=syntax>Field</code> が使用される。 <code class=syntax>Field</code> ただの識別された組合である <code class=syntax>UInt64</code>, <code class=syntax>Int64</code>, <code class=syntax>Float64</code>, <code class=syntax>String</code> と <code class=syntax>Array</code>. <code class=syntax>IColumn</code> は、 <code class=syntax>operator[]</code> n番目の値をaとして取得するメソッド <code class=syntax>Field</code> そして、 <code class=syntax>insert</code> aを追加するメソッド <code class=syntax>Field</code> 列の最後まで。 これらの方法は、一時的な処理を必要とするため、あまり効率的ではありません <code class=syntax>Field</code> 個々の値を表すオブジェクト。 次のようなより効率的な方法があります <code class=syntax>insertFrom</code>, <code class=syntax>insertRangeFrom</code>、というように。</p> <p><code class=syntax>Field</code> テーブルの特定のデータ型に関する十分な情報がありません。 例えば, <code class=syntax>UInt8</code>, <code class=syntax>UInt16</code>, <code class=syntax>UInt32</code>,and <code class=syntax>UInt64</code> すべてとして表されます <code class=syntax>UInt64</code> で <code class=syntax>Field</code>.</p> <h2 id=leaky-abstractions>漏れやすい抽象化<a class=headerlink href=#leaky-abstractions title="Permanent link"> </a></h2> <p><code class=syntax>IColumn</code> は方法のための共通の関係変容のデータもあるんですが、そのすべて満たす。 例えば, <code class=syntax>ColumnUInt64</code> 二つの列の合計を計算する方法がありません。 <code class=syntax>ColumnString</code> 部分文字列検索を実行するメソッドがありません。 これらの無数のルーチンは <code class=syntax>IColumn</code>.</p> <p>列のさまざまな関数は、次のようにして、一般的で非効率的な方法で実装できます <code class=syntax>IColumn</code> 抽出する方法 <code class=syntax>Field</code> 値、または特定のデータの内部メモリレイアウトの知識を使用して特殊な方法で <code class=syntax>IColumn</code> 実装。 で実施する鋳造機能を特定 <code class=syntax>IColumn</code> 内部表現を直接入力して処理します。 例えば, <code class=syntax>ColumnUInt64</code> は、 <code class=syntax>getData</code> 内部配列への参照を返すメソッドは、別のルーチンが直接その配列を読み取るか、または塗りつぶします。 我々は持っている “leaky abstractions” さまざまなルーチンの効率的な専門化を可能にする。</p> <h2 id=data_types>データ型<a class=headerlink href=#data_types title="Permanent link"> </a></h2> <p><code class=syntax>IDataType</code> 列または個々の値のチャンクをバイナリ形式またはテキスト形式で読み書きするためのものです。 <code class=syntax>IDataType</code> テーブル内のデータ型に直接対応します。 例えば、次のものがあります <code class=syntax>DataTypeUInt32</code>, <code class=syntax>DataTypeDateTime</code>, <code class=syntax>DataTypeString</code> など。</p> <p><code class=syntax>IDataType</code> と <code class=syntax>IColumn</code> 互いに緩やかに関連しているだけです。 異なるデータ型は、同じメモリで表すことができます <code class=syntax>IColumn</code> 実装。 例えば, <code class=syntax>DataTypeUInt32</code> と <code class=syntax>DataTypeDateTime</code> で表される。 <code class=syntax>ColumnUInt32</code> または <code class=syntax>ColumnConstUInt32</code>. また、同じデータ型で表現することができな <code class=syntax>IColumn</code> 実装。 例えば, <code class=syntax>DataTypeUInt8</code> で表すことができる <code class=syntax>ColumnUInt8</code> または <code class=syntax>ColumnConstUInt8</code>.</p> <p><code class=syntax>IDataType</code> 貨物のメタデータを指すものとします。 例えば, <code class=syntax>DataTypeUInt8</code> 何も保存しません(vptrを除きます)。 <code class=syntax>DataTypeFixedString</code> ちょうど店 <code class=syntax>N</code> (固定サイズの文字列のサイズ)。</p> <p><code class=syntax>IDataType</code> はヘルパーの方法のための様々なデータフォーマット たとえば、クォート可能な値をシリアル化したり、JSONの値をシリアル化したり、XML形式の一部として値をシリアル化したりするメソッドがあります。 データ形式への直接の対応はありません。 たとえば、異なるデータ形式 <code class=syntax>Pretty</code> と <code class=syntax>TabSeparated</code> 同じを使用できます <code class=syntax>serializeTextEscaped</code> からのヘルパーメソッド <code class=syntax>IDataType</code> インタフェース</p> <h2 id=block>ブロック<a class=headerlink href=#block title="Permanent link"> </a></h2> <p>A <code class=syntax>Block</code> メモリ内のテーブルのサブセット（チャンク）を表すコンテナです。 それは単なるトリプルのセットです: <code class=syntax>(IColumn, IDataType, column name)</code>. クエリの実行中、データは次の方法で処理されます <code class=syntax>Block</code>s.私達にaがあれば <code class=syntax>Block</code>,我々はデータを持っている(で <code class=syntax>IColumn</code> そのタイプに関する情報があります <code class=syntax>IDataType</code>）それはその列をどのように扱うかを教えてくれます。 これは、テーブルの元の列名か、一時的な計算結果を取得するために割り当てられた人工的な名前のいずれかです。</p> <p>ブロック内の列に対して関数を計算するとき、その結果を含む別の列をブロックに追加します。 後で、不要な列はブロックから削除できますが、変更はできません。 共通の部分式を排除するのに便利です。</p> <p>ブロックの作成のための各処理チャンクのデータです。 同じタイプの計算では、列名と型は異なるブロックで同じままであり、列データのみが変更されることに注意してください。 ブロックサイズが小さいと、shared_ptrsと列名をコピーするための一時的な文字列のオーバーヘッドが高くなるため、ブロックヘッダーからブロックデータを分割</p> <h2 id=block-streams>ブロックの流れ<a class=headerlink href=#block-streams title="Permanent link"> </a></h2> <p>ブロックストリームのための加工データです。 を使用していま流のブロックからデータを読み込むためのどこかに、データ変換、または書き込みデータをどこかということです。 <code class=syntax>IBlockInputStream</code> は、 <code class=syntax>read</code> 利用可能な状態で次のブロックを取得するメソッド。 <code class=syntax>IBlockOutputStream</code> は、 <code class=syntax>write</code> どこかにブロックをプッシュする方法。</p> <p>ストリームは:</p> <ol> <li>テーブルへの読み書き。 のテーブルだけを返しますストリームを読み取りまたは書き込みブロックとなります。</li> <li>データ形式の実装。 たとえば、端末にデータを出力する場合は <code class=syntax>Pretty</code> 書式設定すると、ブロックをプッシュするブロック出力ストリームを作成し、書式設定します。</li> <li>データ変換の実行。 あなたが持っているとしよう <code class=syntax>IBlockInputStream</code> いを作ろうというストリームです。 作成する <code class=syntax>FilterBlockInputStream</code> ストリームで初期化します その後、ブロックを引っ張るときから <code class=syntax>FilterBlockInputStream</code> で引きブロックからストリーム、フィルタでは、フィルタを返しますブロックします。 クエリの実行パイプラインで表現しました。</li> </ol> <p>より洗練された変換があります。 例えば、 <code class=syntax>AggregatingBlockInputStream</code> で読み込みのすべてのデータからのフレームワークを利用して、集合体で、それを返しますストリームの集約トへすでに使用されています。 別の例: <code class=syntax>UnionBlockInputStream</code> コンストラクタ内の多くの入力ソースと多数のスレッドを受け入れます。 複数のスレッドを起動し、複数のソースから並列に読み込みます。</p> <blockquote> <p>ブロックストリームは “pull” 制御フローへのアプローチ：最初のストリームからブロックをプルすると、ネストされたストリームから必要なブロックがプルされ、実行パイプライン全体 どちらも “pull” また “push” 制御フローは暗黙的であり、複数のクエリの同時実行（多くのパイプラインをマージする）などのさまざまな機能の実装を制限するため、最良の解決策で この制限は、コルーチンまたはお互いを待つ余分なスレッドを実行するだけで克服できます。 つまり、ある計算単位から別の計算単位の外部にデータを渡すロジックを見つけると、制御フローを明示的にすると、より多くの可能性があります。 これを読む <a href=http://journal.stuffwithstuff.com/2013/01/13/iteration-inside-and-out/ rel="external nofollow noreferrer" target=_blank>記事</a> より多くの思考のため。</p> </blockquote> <p>クエリ実行パイプラインでは、各ステップで一時データが作成されます。 一時データがCPUキャッシュに収まるように、ブロックサイズを十分に小さくしておきます。 その前提では、一時データの書き込みと読み込みは、他の計算と比較してほとんど自由です。 これは、パイプライン内の多くの操作を一緒に融合させることです。 パイプラインをできるだけ短くし、一時データの多くを削除することができますが、これは利点ですが、欠点もあります。 たとえば、分割パイプラインを使用すると、中間データのキャッシュ、同時に実行される類似クエリからの中間データの盗み、類似クエリのパイプライン</p> <h2 id=formats>形式<a class=headerlink href=#formats title="Permanent link"> </a></h2> <p>データフォーマットにて実施しブロックわれている。 そこには “presentational” 次のように、クライアントへのデータ出力にのみ適した形式になります <code class=syntax>Pretty</code> のみを提供する形式 <code class=syntax>IBlockOutputStream</code>. そして入出力フォーマットが、のようなあります <code class=syntax>TabSeparated</code> または <code class=syntax>JSONEachRow</code>.</p> <p>行ストリームもあります: <code class=syntax>IRowInputStream</code> と <code class=syntax>IRowOutputStream</code>. ブロックではなく、個々の行でデータをプル/プッシュすることができます。 また、行指向形式の実装を簡素化するためにのみ必要です。 ラッパー <code class=syntax>BlockInputStreamFromRowInputStream</code> と <code class=syntax>BlockOutputStreamFromRowOutputStream</code> 行指向のストリームを通常のブロック指向のストリームに変換できます。</p> <h2 id=io>I/O<a class=headerlink href=#io title="Permanent link"> </a></h2> <p>バイト指向の入出力には、次のようなものがあります <code class=syntax>ReadBuffer</code> と <code class=syntax>WriteBuffer</code> 抽象クラス。 それらはC++の代わりに使用されます <code class=syntax>iostream</code>心配しないでください：すべての成熟したC++プロジェクトは、 <code class=syntax>iostream</code>正当な理由のためのs。</p> <p><code class=syntax>ReadBuffer</code> と <code class=syntax>WriteBuffer</code> 単なる連続したバッファであり、そのバッファ内の位置を指すカーソルです。 実装にはない独自のメモリにバッファです。 以下のデータでバッファを埋める仮想メソッドがあります <code class=syntax>ReadBuffer</code>）またはバッファをどこかにフラッシュする（ <code class=syntax>WriteBuffer</code>). 仮想メソッドはまれに呼び出されます。</p> <p>の実装 <code class=syntax>ReadBuffer</code>/<code class=syntax>WriteBuffer</code> 圧縮を実装するために、ファイルとファイル記述子とネットワークソケッ (<code class=syntax>CompressedWriteBuffer</code> is initialized with another WriteBuffer and performs compression before writing data to it), and for other purposes – the names <code class=syntax>ConcatReadBuffer</code>, <code class=syntax>LimitReadBuffer</code>,and <code class=syntax>HashingWriteBuffer</code> 自分のために話す。</p> <p>Read/WriteBuffersはバイトのみを扱います。 からの関数があります <code class=syntax>ReadHelpers</code> と <code class=syntax>WriteHelpers</code> 入力/出力のフォーマットに役立つヘッダファイル。 たとえば、小数の形式で数値を書くヘルパーがあります。</p> <p>結果セットを書きたいときに何が起こるかを見てみましょう <code class=syntax>JSON</code> 標準出力にフォーマットします。 結果セットを取得する準備ができています <code class=syntax>IBlockInputStream</code>. 作成する <code class=syntax>WriteBufferFromFileDescriptor(STDOUT_FILENO)</code> stdoutにバイトを書き込む。 作成する <code class=syntax>JSONRowOutputStream</code>、それで初期化されます <code class=syntax>WriteBuffer</code>、行を書き込むには <code class=syntax>JSON</code> 標準出力に。 作成する <code class=syntax>BlockOutputStreamFromRowOutputStream</code> その上に、それを次のように表します <code class=syntax>IBlockOutputStream</code>. それから電話する <code class=syntax>copyData</code> データを転送するには <code class=syntax>IBlockInputStream</code> に <code class=syntax>IBlockOutputStream</code> そして、すべてが動作します。 内部的には, <code class=syntax>JSONRowOutputStream</code> さまざまなJSON区切り文字を書き、 <code class=syntax>IDataType::serializeTextJSON</code> を参照するメソッド <code class=syntax>IColumn</code> 引数として行番号を指定します。 その結果, <code class=syntax>IDataType::serializeTextJSON</code> からメソッドを呼び出します <code class=syntax>WriteHelpers.h</code>：例えば, <code class=syntax>writeText</code> 数値型および <code class=syntax>writeJSONString</code> のために <code class=syntax>DataTypeString</code>.</p> <h2 id=tables>テーブル<a class=headerlink href=#tables title="Permanent link"> </a></h2> <p>その <code class=syntax>IStorage</code> インタフェースです。 異なる実装のインタフェースの異なるテーブルエンジンです。 例としては <code class=syntax>StorageMergeTree</code>, <code class=syntax>StorageMemory</code>、というように。 これらのクラスのインスタ</p> <p>キー <code class=syntax>IStorage</code> メソッドは <code class=syntax>read</code> と <code class=syntax>write</code>. また、 <code class=syntax>alter</code>, <code class=syntax>rename</code>, <code class=syntax>drop</code>、というように。 その <code class=syntax>read</code> このメソッドは、次の引数を受け入れます。 <code class=syntax>AST</code> 考慮すべきクエリ、および返すストリームの必要な数。 一つまたは複数を返します <code class=syntax>IBlockInputStream</code> クエリの実行中にテーブルエンジン内で完了したデータ処理のステージに関するオブジェクトと情報。</p> <p>ほとんどの場合、readメソッドは、指定された列をテーブルから読み取るだけで、それ以降のデータ処理は行いません。 すべてのデータ処理が行われるクエリの通訳や外部の責任 <code class=syntax>IStorage</code>.</p> <p>しかし、顕著な例外があります:</p> <ul> <li>ASTクエリは <code class=syntax>read</code> 法により処理し、テーブルエンジンを使用できる指の利用と読みの少ないデータを表示します。</li> <li>時々のテーブルエンジンを処理できるデータそのものである場合でも特定の段階にある。 例えば, <code class=syntax>StorageDistributed</code> リモートサーバーにクエリを送信し、異なるリモートサーバーからのデータをマージできるステージにデータを処理するように依頼し、その前処理されたデータを返すこ クエリの通訳を仕上げ加工のデータです。</li> </ul> <p>テーブルの <code class=syntax>read</code> メソッドは、複数の <code class=syntax>IBlockInputStream</code> 並列データ処理を可能にするオブジェクト。 これらの複数のブロックの入力ストリームでテーブルから行なった。 次に、これらのストリームを、独立して計算できるさまざまな変換(式の評価やフィルタリングなど)でラップして、 <code class=syntax>UnionBlockInputStream</code> それらの上に、並列に複数のストリームから読み込みます。</p> <p>また、 <code class=syntax>TableFunction</code>これらは一時的なものを返す関数です <code class=syntax>IStorage</code> で使用するオブジェクト <code class=syntax>FROM</code> クエリの句。</p> <p>テーブルエンジンの実装方法の簡単なアイデアを得るには、次のような単純なものを見てください <code class=syntax>StorageMemory</code> または <code class=syntax>StorageTinyLog</code>.</p> <blockquote> <p>の結果として <code class=syntax>read</code> 方法, <code class=syntax>IStorage</code> ﾂづｩﾂ。 <code class=syntax>QueryProcessingStage</code> – information about what parts of the query were already calculated inside storage.</p> </blockquote> <h2 id=parsers>パーサー<a class=headerlink href=#parsers title="Permanent link"> </a></h2> <p>手書きの再帰降下パーサーは、クエリを解析します。 例えば, <code class=syntax>ParserSelectQuery</code> クエリのさまざまな部分に対して基になるパーサを再帰的に呼び出すだけです。 パーサーは <code class=syntax>AST</code>. その <code class=syntax>AST</code> ノードによって表されます。 <code class=syntax>IAST</code>.</p> <blockquote> <p>パーサジェネレータは、使用しない歴史的な理由があります。</p> </blockquote> <h2 id=interpreters>通訳者<a class=headerlink href=#interpreters title="Permanent link"> </a></h2> <p>インタプリタは、クエリ実行パイプラインの作成を担当します。 <code class=syntax>AST</code>. 以下のような簡単な通訳があります <code class=syntax>InterpreterExistsQuery</code> と <code class=syntax>InterpreterDropQuery</code> またはより洗練された <code class=syntax>InterpreterSelectQuery</code>. クエリの実行パイプラインの組み合わせたブロック入力または出力ストリーム. たとえば、 <code class=syntax>SELECT</code> クエリは <code class=syntax>IBlockInputStream</code> 結果セットを読み取るために、INSERTクエリの結果は次のようになります。 <code class=syntax>IBlockOutputStream</code> に挿入するためのデータを書き込むために、および解釈の結果 <code class=syntax>INSERT SELECT</code> クエリは <code class=syntax>IBlockInputStream</code> これは、最初の読み取り時に空の結果セットを返しますが、データをコピーします <code class=syntax>SELECT</code> に <code class=syntax>INSERT</code> 同時に。</p> <p><code class=syntax>InterpreterSelectQuery</code> 用途 <code class=syntax>ExpressionAnalyzer</code> と <code class=syntax>ExpressionActions</code> クエリ分析と変換のための機械。 ここでは、ほとんどのルールベースのクエリの最適化が行われます。 <code class=syntax>ExpressionAnalyzer</code> モジュラー変換やクエリを可能にするために、さまざまなクエリ変換と最適化を別々のクラスに抽出する必要があります。</p> <h2 id=functions>関数<a class=headerlink href=#functions title="Permanent link"> </a></h2> <p>通常の関数と集計関数があります。 集計関数については、次の節を参照してください。</p> <p>Ordinary functions don't change the number of rows – they work as if they are processing each row independently. In fact, functions are not called for individual rows, but for <code class=syntax>Block</code>ベクトル化されたクエリ実行を実装するためのデータ。</p> <p>いくつかのその他の機能があります。 <a href=../../sql-reference/functions/other-functions/#function-blocksize>ブロックサイズ</a>, <a href=../../sql-reference/functions/other-functions/#function-rownumberinblock>rowNumberInBlock</a>,and <a href=../../sql-reference/functions/other-functions/#function-runningaccumulate>runningAccumulate</a>、それはブロック処理を悪用し、行の独立性に違反します。</p> <p>ClickHouseには強い型指定があるため、暗黙的な型変換はありません。 関数が特定の型の組み合わせをサポートしていない場合、例外がスローされます。 ものの機能で作業する過負荷のもとに多くの異なる組み合わせます。 例えば、 <code class=syntax>plus</code> 関数（実装するには <code class=syntax>+</code> 演算子)数値型の任意の組み合わせに対して動作します: <code class=syntax>UInt8</code> + <code class=syntax>Float32</code>, <code class=syntax>UInt16</code> + <code class=syntax>Int8</code>、というように。 また、一部の可変引数関数は、以下のような任意の数の引数を受け入れることができます。 <code class=syntax>concat</code> 機能。</p> <p>実施の機能が少し不便での機能を明示的に派遣サポートされているデータの種類と対応 <code class=syntax>IColumns</code>. 例えば、 <code class=syntax>plus</code> 関数は、数値型の組み合わせごとにC++テンプレートのインスタンス化によって生成されたコード、および定数または非定数左と右の引数を持っていま</p> <p>テンプレートコードの膨張を避けるために、実行時コード生成を実装するのに最適な場所です。 また、fused multiply-addのようなfused関数を追加したり、一つのループ反復で多重比較を行うこともできます。</p> <p>ベクトル化されたクエリの実行により、関数は短絡されません。 たとえば、 <code class=syntax>WHERE f(x) AND g(y)</code>,両側が計算されます,でも行について,とき <code class=syntax>f(x)</code> がゼロである(場合を除く <code class=syntax>f(x)</code> はゼロ定数式である）。 しかし、の選択性が <code class=syntax>f(x)</code> 条件は高く、計算の <code class=syntax>f(x)</code> よりもはるかに安いです <code class=syntax>g(y)</code>、マルチパス計算を実装する方が良いでしょう。 最初に計算します <code class=syntax>f(x)</code> 次に、結果によって列をフィルター処理し、次に計算します <code class=syntax>g(y)</code> フィルター処理された小さなデータのチャンクのみ。</p> <h2 id=aggregate-functions>集計関数<a class=headerlink href=#aggregate-functions title="Permanent link"> </a></h2> <p>集計関数はステートフル関数です。 渡された値をある状態に蓄積し、その状態から結果を得ることができます。 それらはと管理されます <code class=syntax>IAggregateFunction</code> インタフェース 状態はかなり単純にすることができます（ <code class=syntax>AggregateFunctionCount</code> ただの単一です <code class=syntax>UInt64</code> 値）または非常に複雑な（の状態 <code class=syntax>AggregateFunctionUniqCombined</code> 線形配列、ハッシュテーブル、およびaの組み合わせです <code class=syntax>HyperLogLog</code> 確率データ構造）。</p> <p>状態は <code class=syntax>Arena</code> (メモリプール)高カーディナリティの実行中に複数の状態を処理する <code class=syntax>GROUP BY</code> クエリ。 たとえば、複雑な集約状態では、追加のメモリを割り当てることができます。 これは、作成し、状態を破壊し、適切にその所有権と破壊命令を渡すためにいくつかの注意が必要です。</p> <p>集約状態をシリアル化および逆シリアル化して、分散クエリの実行中にネットワーク経由で渡したり、十分なRAMがないディスクに書き込んだりできま それらはあるテーブルで貯えることができます <code class=syntax>DataTypeAggregateFunction</code> データの増分集計を可能にする。</p> <blockquote> <p>集計関数状態のシリアル化されたデータ形式は、現在バージョン管理されていません。 集約状態が一時的にのみ格納されていればokです。 しかし、我々は持っている <code class=syntax>AggregatingMergeTree</code> テーブルエンジンが増えた場合の集約、人々に基づき使用されている。 これは、将来集計関数のシリアル化形式を変更するときに下位互換性が必要な理由です。</p> </blockquote> <h2 id=server>サーバ<a class=headerlink href=#server title="Permanent link"> </a></h2> <p>サーバを実装し複数の複数のインタフェース:</p> <ul> <li>外部クライアント用のHTTPインターフェイス。</li> <li>TCPインタフェースのネイティブClickHouseクライアントとクロス-サーバー通信中に分散クエリを実行します。</li> <li>インターフェース転送データレプリケーション.</li> </ul> <p>内部的には、コルーチンやファイバーのない原始的なマルチスレッドサーバーです。 サーバーは、単純なクエリの割合が高いのではなく、比較的低い複雑なクエリの割合を処理するように設計されているため、それぞれが分析のために膨大</p> <p>サーバーは初期化します <code class=syntax>Context</code> クエリ実行に必要な環境を持つクラス:使用可能なデータベース、ユーザーとアクセス権、設定、クラスター、プロセスリスト、クエリログなどのリスト。 通訳者はこの環境を利用します。</p> <p>古いクライアントは新しいサーバーと話すことができ、新しいクライアントは古いサーバーと話すことができます。 しかし、我々は永遠にそれを維持したくない、と我々は約一年後に古いバージョンのサポートを削除しています。</p> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">注</p> <p>ほとんどの外部アプリケーションでは、HTTPインターフェイスを使用することをお勧めします。 TCPプロトコルは、データのブロックを渡すために内部形式を使用し、圧縮されたデータにはカスタムフレーミングを使用します。 まだ公表したCライブラリのためのこのプロトコールすることが必要なことから、リンクのClickHouseコードベース、るのは現実的ではありません。</p> </div> <h2 id=distributed-query-execution>分散クエリの実行<a class=headerlink href=#distributed-query-execution title="Permanent link"> </a></h2> <p>サーバーにクラスターセットアップがほぼ独立しています。 を作成することができます <code class=syntax>Distributed</code> クラスター内のサーバーの表。 その <code class=syntax>Distributed</code> table does not store data itself – it only provides a “view” すべての地方のテーブルに複数のノードのクラスター Aから選択すると <code class=syntax>Distributed</code> テーブルは、そのクエリを書き換え、負荷分散設定に従ってリモートノードを選択し、それらにクエリを送信します。 その <code class=syntax>Distributed</code> テーブル要求をリモートサーバー処理クエリーだけで最大のペースでの中間結果から異なるサーバできます。 その後、中間結果を受信してマージします。 のテーブルを配布してできる限りの仕事へのリモートサーバーを送信しない多くの中間データのネットワーク.</p> <p>INまたはJOIN句にサブクエリがあり、それぞれが <code class=syntax>Distributed</code> テーブル。 これらのクエリの実行には、さまざまな戦略があります。</p> <p>分散クエリ実行用のグローバルクエリプランはありません。 各ノードには、ジョブの一部のローカルクエリプランがあります。 リモートノードに対してクエリを送信し、結果をマージします。 しかし、基数の多いグループBYsを持つ複雑なクエリや、結合のための大量の一時データを持つクエリでは、これは不可能です。 そのような場合には、 “reshuffle” 追加の調整が必要なサーバー間のデータ。 ClickHouseはそのようなクエリの実行をサポートしていません。</p> <h2 id=merge-tree>マージツリー<a class=headerlink href=#merge-tree title="Permanent link"> </a></h2> <p><code class=syntax>MergeTree</code> 主キ 主キーは、列または式の任意のタプルにすることができます。 Aのデータ <code class=syntax>MergeTree</code> テーブルは “parts”. 各パートはデータを主キーの順序で格納するため、データは主キータプルによって辞書順に並べ替えられます。 すべてのテーブル列は別々に格納されます <code class=syntax>column.bin</code> これらの部分のファイル。 ファイルは圧縮ブロックで構成されます。 各ブロックは、平均値のサイズに応じて、通常64KBから1MBの非圧縮データです。 ブロックは、列の値が連続して次々に配置されています。 列の値は各列で同じ順序になるため（主キーによって順序が定義されます）、多くの列で反復処理すると、対応する行の値が取得されます。</p> <p>主キー自体は次のとおりです “sparse”. すべての行に対処するのではなく、いくつかの範囲のデータのみを扱います。 別の <code class=syntax>primary.idx</code> fileには、N番目の行ごとに主キーの値があります。 <code class=syntax>index_granularity</code> （通常、N=8192）。 また、各列について、我々は持っている <code class=syntax>column.mrk</code> ファイル “marks,” これは、データファイル内のN番目の行ごとにオフセットされます。 各マークは、ファイル内の圧縮ブロックの先頭までのオフセットと、圧縮解除ブロック内のデータの先頭までのオフセットのペアです。 通常、圧縮されたブロックはマークで整列され、解凍されたブロックのオフセットはゼロです。 データのための <code class=syntax>primary.idx</code> 常にメモリ内に存在し、 <code class=syntax>column.mrk</code> ファイ</p> <p>我々は一部から何かを読むつもりですときに <code class=syntax>MergeTree</code> 私たちは <code class=syntax>primary.idx</code> データと要求されたデータを含む可能性のある範囲を見つけて、次に <code class=syntax>column.mrk</code> これらの範囲の読み取りを開始する場所のデータと計算オフセット。 希薄さのために、余分なデータが読み取られることがあります。 ClickHouseは、単純なポイントクエリの高負荷には適していません。 <code class=syntax>index_granularity</code> キーごとに行を読み取り、圧縮されたブロック全体を列ごとに解凍する必要があります。 私たちは、インデックスの顕著なメモリ消費なしに単一のサーバーごとに数兆行を維持できる必要があるため、インデックスを疎にしました。 また、主キーは疎であるため、一意ではありません。 テーブルに同じキーを持つ多くの行を持つことができます。</p> <p>あなたが <code class=syntax>INSERT</code> データの束に <code class=syntax>MergeTree</code>、その束は主キーの順序でソートされ、新しい部分を形成します。 が背景のスレッドを定期的に、選択部分と統合して単一のソート部の部品点数が比較的低い。 それが呼び出される理由です <code class=syntax>MergeTree</code>. もちろん、マージは “write amplification”. すべてのパーツは不変であり、作成および削除のみが行われますが、変更は行われません。 SELECTが実行されると、テーブルのスナップショット(パーツのセット)が保持されます。 マージ後もしばらくの間、古いパーツを保持して、障害後の回復を容易にするため、マージされたパーツが壊れている可能性があることがわかったら、ソースパーツ</p> <p><code class=syntax>MergeTree</code> LSMツリーではありません。 “memtable” と “log”: inserted data is written directly to the filesystem. This makes it suitable only to INSERT data in batches, not by individual row and not very frequently – about once per second is ok, but a thousand times a second is not. We did it this way for simplicity's sake, and because we are already inserting data in batches in our applications.</p> <blockquote> <p>MergeTreeテーブルには、一つの(プライマリ)インデックスしか持つことができません。 たとえば、複数の物理的順序でデータを格納したり、事前に集計されたデータと元のデータを含む表現を許可したりすることもできます。</p> </blockquote> <p>バックグラウンドマージ中に追加の作業を行っているMergeTreeエンジンがあります。 例としては <code class=syntax>CollapsingMergeTree</code> と <code class=syntax>AggregatingMergeTree</code>. この処理として特別支援しました。 なぜなら、ユーザーは通常、バックグラウンドマージが実行される時間とデータを制御することができないからです。 <code class=syntax>MergeTree</code> テーブルは、ほとんどの場合、完全にマージされた形式ではなく、複数の部分に格納されます。</p> <h2 id=replication>複製<a class=headerlink href=#replication title="Permanent link"> </a></h2> <p>ClickHouseでのレプリケーションは、テーブルごとに構成できます。 きも複製されない一部の複製のテーブルと同じサーバです。 また、二要素複製のテーブルと三要素複製のテーブルなど、さまざまな方法でテーブルをレプリケートすることもできます。</p> <p>レプリケーションは <code class=syntax>ReplicatedMergeTree</code> ストレージエンジン のパス <code class=syntax>ZooKeeper</code> ストレージエンジンのパラメータとして指定します。 同じパスを持つすべてのテーブル <code class=syntax>ZooKeeper</code> 互いのレプリカになる：彼らはデータを同期し、一貫性を維持する。 レプリカは、テーブルを作成または削除するだけで動的に追加および削除できます。</p> <p>複製を使用して非同期マルチマスタースキームです。 次のセッションを持つ任意のレプリカにデータを挿入できます <code class=syntax>ZooKeeper</code> データを複製、その他すべてのレプリカは非同期的に. ClickHouseは更新をサポートしていないため、複製は競合しません。 挿入のクォーラム確認がないため、あるノードに障害が発生すると、挿入されただけのデータが失われる可能性があります。</p> <p>複製のメタデータはZooKeeperに格納されます。 実行するアクションを示すレプリケーションログがあります。 アクションは次のとおりです。 各レプリカコピー、複製のログをキューにその行動からのキューに挿入します 例えば、挿入では、 “get the part” actionを作成し、ログイン、レプリカのダウンロードいます。 マージはレプリカ間で調整され、バイトが同一の結果が得られます。 すべての部品を合併した場合と同様にすべてのレプリカ. では達成を補い、一つのレプリカのリーダーとして、レプリカを始めと融合し、書き込みます “merge parts” ログへのアクション。</p> <p>圧縮された部分のみがノード間で転送され、クエリは転送されません。 合併処理され、各レプリカ多くの場合、自主的に下げるネットワークコストを回避することによるネットワークが増幅。 大合併をさらにネットワークする場合に限り重複製に遅れて波及してきています。</p> <p>さらに、各レプリカは、その状態をパーツとそのチェックサムのセットとしてZooKeeperに格納します。 ローカルファイルシステム上の状態がZooKeeperの参照状態から乖離すると、レプリカは他のレプリカから欠落している部分と壊れている部分をダウンロード ローカルファイルシステムに予期しないデータや壊れたデータがある場合、ClickHouseはそれを削除しませんが、別のディレクトリに移動して忘れます。</p> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">注</p> <p>ClickHouseクラスターは独立したシャードで構成され、各シャードはレプリカで構成されます。 クラスターは <strong>弾性ではない</strong> したがって、新しいシャードを追加した後、データはシャード間で自動的に再調整されません。 代わりに、クラスタ負荷は不均一に調整されることになっています。 この実装はより多くの制御を提供し、数十のノードなどの比較的小さなクラスタでもokです。 しかし、運用環境で使用している数百のノードを持つクラスターでは、このアプローチは重大な欠点になります。 を実行すべきである"と述べていテーブルエンジンで広がる、クラスターを動的に再現れる可能性がある地域分割のバランスとクラスターの動します。</p> </div> </div> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Was this content helpful?</span> <div id=rating-stars class="display-6 mb-0" data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']" data-documentation=documentation>RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#columns title=列 class="nav-link text-wrap d-inline-block w-100"> 列 </a> <a href=#field title=フィールド class="nav-link text-wrap d-inline-block w-100"> フィールド </a> <a href=#leaky-abstractions title=漏れやすい抽象化 class="nav-link text-wrap d-inline-block w-100"> 漏れやすい抽象化 </a> <a href=#data_types title=データ型 class="nav-link text-wrap d-inline-block w-100"> データ型 </a> <a href=#block title=ブロック class="nav-link text-wrap d-inline-block w-100"> ブロック </a> <a href=#block-streams title=ブロックの流れ class="nav-link text-wrap d-inline-block w-100"> ブロックの流れ </a> <a href=#formats title=形式 class="nav-link text-wrap d-inline-block w-100"> 形式 </a> <a href=#io title=I/O class="nav-link text-wrap d-inline-block w-100"> I/O </a> <a href=#tables title=テーブル class="nav-link text-wrap d-inline-block w-100"> テーブル </a> <a href=#parsers title=パーサー class="nav-link text-wrap d-inline-block w-100"> パーサー </a> <a href=#interpreters title=通訳者 class="nav-link text-wrap d-inline-block w-100"> 通訳者 </a> <a href=#functions title=関数 class="nav-link text-wrap d-inline-block w-100"> 関数 </a> <a href=#aggregate-functions title=集計関数 class="nav-link text-wrap d-inline-block w-100"> 集計関数 </a> <a href=#server title=サーバ class="nav-link text-wrap d-inline-block w-100"> サーバ </a> <a href=#distributed-query-execution title=分散クエリの実行 class="nav-link text-wrap d-inline-block w-100"> 分散クエリの実行 </a> <a href=#merge-tree title=マージツリー class="nav-link text-wrap d-inline-block w-100"> マージツリー </a> <a href=#replication title=複製 class="nav-link text-wrap d-inline-block w-100"> 複製 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?00223b07></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>