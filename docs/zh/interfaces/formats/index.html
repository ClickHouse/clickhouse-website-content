<!DOCTYPE html><html lang=zh data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>输入/输出格式 | ClickHouse文档</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/logo-180x180.png><meta property=og:title content="输入/输出格式 | ClickHouse文档"><meta property=og:description content="输入/输出格式 ClickHouse可以接受和返回各种格式的数据。输入支持的格式可以用来解析提供给INSERT的数据，可以从文件备份表(如File, URL或HDFS)执行SELECT，或者读取外部字典。输出支持的格式可用于获取SELECT"><meta property=og:type content=article><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta content=https://clickhouse.tech/docs/zh/interfaces/formats/ property=og:url><link href=https://clickhouse.tech/docs/zh/interfaces/formats/ rel=canonical><link href=https://clickhouse.tech/docs/zh/interfaces/formats/amp/ rel=amphtml><link rel=search href=/opensearch.xml title=ClickHouse type=application/opensearchdescription+xml><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "输入/输出格式 | ClickHouse文档",
"mainEntityOfPage": "https://clickhouse.tech/docs/zh/interfaces/formats/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "输入/输出格式 | ClickHouse文档",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><meta name=description content="输入/输出格式 ClickHouse可以接受和返回各种格式的数据。输入支持的格式可以用来解析提供给INSERT的数据，可以从文件备份表(如File, URL或HDFS)执行SELECT，或者读取外部字典。输出支持的格式可用于获取SELECT"><meta name=keywords content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics"><link rel=alternate href=https://clickhouse.tech/docs/en/interfaces/formats/ hreflang=en><link rel=alternate href=https://clickhouse.tech/docs/zh/interfaces/formats/ hreflang=zh><link rel=alternate href=https://clickhouse.tech/docs/es/interfaces/formats/ hreflang=es><link rel=alternate href=https://clickhouse.tech/docs/fr/interfaces/formats/ hreflang=fr><link rel=alternate href=https://clickhouse.tech/docs/ru/interfaces/formats/ hreflang=ru><link rel=alternate href=https://clickhouse.tech/docs/ja/interfaces/formats/ hreflang=ja><link rel=alternate href=https://clickhouse.tech/docs/en/interfaces/formats/ hreflang=x-default><link href=/css/base.css?e27f3458 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> 输入/输出格式 </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li id=edit-wrapper class=nav-item> <a id=edit-link href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/interfaces/formats.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/zh.svg alt=中文 title=中文 width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/interfaces/formats/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/interfaces/formats/ class="dropdown-item disabled"> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/interfaces/formats/ class=dropdown-item> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/interfaces/formats/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/interfaces/formats/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/interfaces/formats/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=导言 class="nav-link text-light dropdown-toggle px-0">导言</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../ title=什么是ClickHouse？ class="nav-link text-light text-wrap d-inline-block w-100 px-0">什么是ClickHouse？</a> <a href=../../getting-started/ title=入门 class="nav-link text-light text-wrap d-inline-block w-100 px-0">入门</a> <a href=../../getting-started/install/ title=安装部署 class="nav-link text-light text-wrap d-inline-block w-100 px-0">安装部署</a> <a href=../../getting-started/tutorial/ title=使用教程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用教程</a> <a href=#sidebar-sidebar-1-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1-5 title=示例数据集 class="nav-link text-light dropdown-toggle px-0">示例数据集</a> <div id=sidebar-sidebar-1-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../getting-started/example-datasets/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../getting-started/example-datasets/metrica/ title="Yandex.Metrica Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Yandex.Metrica Data</a> <a href=../../getting-started/example-datasets/star-schema/ title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a> <a href=../../getting-started/example-datasets/wikistat/ title=WikiStat class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a> <a href=../../getting-started/example-datasets/criteo/ title="Terabyte Click Logs from Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Terabyte Click Logs from Criteo</a> <a href=../../getting-started/example-datasets/amplab-benchmark/ title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a> <a href=../../getting-started/example-datasets/nyc-taxi/ title="New York Taxi Data" class="nav-link text-light text-wrap d-inline-block w-100 px-0">New York Taxi Data</a> <a href=../../getting-started/example-datasets/ontime/ title=OnTime class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a> </nav> </div> <a href=../../getting-started/playground/ title=体验平台 class="nav-link text-light text-wrap d-inline-block w-100 px-0">体验平台</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title=Interfaces class="nav-link text-light dropdown-toggle px-0">Interfaces</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/ title=客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端</a> <a href=../../interfaces/cli/ title=命令行客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">命令行客户端</a> <a href=../../interfaces/tcp/ title=原生接口(TCP) class="nav-link text-light text-wrap d-inline-block w-100 px-0">原生接口(TCP)</a> <a href=../../interfaces/http/ title=HTTP客户端 class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP客户端</a> <a href=../../interfaces/mysql/ title=MySQL接口 class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL接口</a> <a href=../../interfaces/formats/ title=输入/输出格式 class="nav-link text-white active text-wrap d-inline-block w-100 px-0">输入/输出格式</a> <a href=../../interfaces/jdbc/ title=JDBC驱动 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC驱动</a> <a href=../../interfaces/odbc/ title=ODBC驱动 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC驱动</a> <a href=../../interfaces/cpp/ title=C++客户端库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++客户端库</a> <a href=#sidebar-sidebar-2-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-10 title=第三方工具 class="nav-link text-light dropdown-toggle px-0">第三方工具</a> <div id=sidebar-sidebar-2-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../interfaces/third-party/ title=第三方工具 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方工具</a> <a href=../../interfaces/third-party/client-libraries/ title=客户端开发库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">客户端开发库</a> <a href=../../interfaces/third-party/integrations/ title=第三方集成库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方集成库</a> <a href=../../interfaces/third-party/proxy/ title=第三方代理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方代理</a> <a href=../../interfaces/third-party/gui/ title=第三方开发的可视化界面 class="nav-link text-light text-wrap d-inline-block w-100 px-0">第三方开发的可视化界面</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=引擎 class="nav-link text-light dropdown-toggle px-0">引擎</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-2 title=数据库引擎 class="nav-link text-light dropdown-toggle px-0">数据库引擎</a> <div id=sidebar-sidebar-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/database-engines/lazy/ title=延时引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">延时引擎</a> <a href=../../engines/database-engines/atomic/ title=Atomic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a> <a href=../../engines/database-engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../engines/database-engines/ title=数据库引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据库引擎</a> </nav> </div> <a href=#sidebar-sidebar-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3 title=表引擎 class="nav-link text-light dropdown-toggle px-0">表引擎</a> <div id=sidebar-sidebar-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-3-3-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-1 title=合并树家族 class="nav-link text-light dropdown-toggle px-0">合并树家族</a> <div id=sidebar-sidebar-3-3-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/ title=版本折叠MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">版本折叠MergeTree</a> <a href=../../engines/table-engines/mergetree-family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> <a href=../../engines/table-engines/mergetree-family/aggregatingmergetree/ title=AggregatingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/mergetree/ title=MergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a> <a href=../../engines/table-engines/mergetree-family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../engines/table-engines/mergetree-family/collapsingmergetree/ title=折叠树 class="nav-link text-light text-wrap d-inline-block w-100 px-0">折叠树</a> <a href=../../engines/table-engines/mergetree-family/replication/ title=数据副本 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据副本</a> <a href=../../engines/table-engines/mergetree-family/custom-partitioning-key/ title=自定义分区键 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自定义分区键</a> </nav> </div> <a href=#sidebar-sidebar-3-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-2 title=日志系列 class="nav-link text-light dropdown-toggle px-0">日志系列</a> <div id=sidebar-sidebar-3-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/log-family/ title=日志引擎系列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日志引擎系列</a> <a href=../../engines/table-engines/log-family/log/ title=Log class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a> <a href=../../engines/table-engines/log-family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../engines/table-engines/log-family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-3-3-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-3 title=集成 class="nav-link text-light dropdown-toggle px-0">集成</a> <div id=sidebar-sidebar-3-3-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/integrations/jdbc/ title=JDBC表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC表引擎</a> <a href=../../engines/table-engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../engines/table-engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> <a href=../../engines/table-engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../engines/table-engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> </nav> </div> <a href=#sidebar-sidebar-3-3-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-3-4 title=特别 class="nav-link text-light dropdown-toggle px-0">特别</a> <div id=sidebar-sidebar-3-3-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../engines/table-engines/special/join/ title=关联表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">关联表引擎</a> <a href=../../engines/table-engines/special/generate/ title=随机数生成 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机数生成</a> <a href=../../engines/table-engines/special/materializedview/ title=MaterializedView class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a> <a href=../../engines/table-engines/special/null/ title=Null class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a> <a href=../../engines/table-engines/special/url/ title=URL(URL,格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL,格式)</a> <a href=../../engines/table-engines/special/memory/ title=内存表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内存表</a> <a href=../../engines/table-engines/special/distributed/ title=分布 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分布</a> <a href=../../engines/table-engines/special/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../engines/table-engines/special/dictionary/ title=字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典</a> <a href=../../engines/table-engines/special/file/ title=文件(输入格式) class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件(输入格式)</a> <a href=../../engines/table-engines/special/external-data/ title=用于查询处理的外部数据 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用于查询处理的外部数据</a> <a href=../../engines/table-engines/special/buffer/ title=缓冲区 class="nav-link text-light text-wrap d-inline-block w-100 px-0">缓冲区</a> <a href=../../engines/table-engines/special/view/ title=视图 class="nav-link text-light text-wrap d-inline-block w-100 px-0">视图</a> <a href=../../engines/table-engines/special/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> <a href=../../engines/table-engines/ title=表引擎 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表引擎</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=SQL参考 class="nav-link text-light dropdown-toggle px-0">SQL参考</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/syntax/ title=SQL语法 class="nav-link text-light text-wrap d-inline-block w-100 px-0">SQL语法</a> <a href=#sidebar-sidebar-4-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3 title=发言 class="nav-link text-light dropdown-toggle px-0">发言</a> <div id=sidebar-sidebar-4-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-3-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3-2 title=SELECT class="nav-link text-light dropdown-toggle px-0">SELECT</a> <div id=sidebar-sidebar-4-3-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/statements/select/ title=综述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">综述</a> <a href=../../sql-reference/statements/select/all/ title="ALL 子句" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALL 子句</a> <a href=../../sql-reference/statements/select/array-join/ title="ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN</a> <a href=../../sql-reference/statements/select/distinct/ title=DISTINCT class="nav-link text-light text-wrap d-inline-block w-100 px-0">DISTINCT</a> <a href=../../sql-reference/statements/select/format/ title=FORMAT class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT</a> <a href=../../sql-reference/statements/select/from/ title=FROM class="nav-link text-light text-wrap d-inline-block w-100 px-0">FROM</a> <a href=../../sql-reference/statements/select/group-by/ title="GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GROUP BY</a> <a href=../../sql-reference/statements/select/having/ title=HAVING class="nav-link text-light text-wrap d-inline-block w-100 px-0">HAVING</a> <a href=../../sql-reference/statements/select/into-outfile/ title="INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE</a> <a href=../../sql-reference/statements/select/join/ title=JOIN class="nav-link text-light text-wrap d-inline-block w-100 px-0">JOIN</a> <a href=../../sql-reference/statements/select/limit/ title=LIMIT class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a> <a href=../../sql-reference/statements/select/limit-by/ title="LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT BY</a> <a href=../../sql-reference/statements/select/order-by/ title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a> <a href=../../sql-reference/statements/select/prewhere/ title=PREWHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE</a> <a href=../../sql-reference/statements/select/sample/ title=SAMPLE class="nav-link text-light text-wrap d-inline-block w-100 px-0">SAMPLE</a> <a href=../../sql-reference/statements/select/union/ title="UNION ALL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UNION ALL</a> <a href=../../sql-reference/statements/select/where/ title=WHERE class="nav-link text-light text-wrap d-inline-block w-100 px-0">WHERE</a> <a href=../../sql-reference/statements/select/with/ title=WITH class="nav-link text-light text-wrap d-inline-block w-100 px-0">WITH</a> </nav> </div> <a href=../../sql-reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../sql-reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../sql-reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../sql-reference/statements/grant/ title=授权操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">授权操作</a> <a href=../../sql-reference/statements/revoke/ title=REVOKE class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a> <a href=../../sql-reference/statements/misc/ title=其他 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他</a> <a href=../../sql-reference/statements/create/ title="CREATE DATABASE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE DATABASE</a> <a href=../../sql-reference/statements/insert-into/ title="INSERT INTO 语句" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO 语句</a> </nav> </div> <a href=#sidebar-sidebar-4-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-4 title=函数 class="nav-link text-light dropdown-toggle px-0">函数</a> <div id=sidebar-sidebar-4-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/functions/ title=简介 class="nav-link text-light text-wrap d-inline-block w-100 px-0">简介</a> <a href=../../sql-reference/functions/arithmetic-functions/ title=算术函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">算术函数</a> <a href=../../sql-reference/functions/comparison-functions/ title=比较函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">比较函数</a> <a href=../../sql-reference/functions/logical-functions/ title=逻辑函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">逻辑函数</a> <a href=../../sql-reference/functions/type-conversion-functions/ title=类型转换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">类型转换函数</a> <a href=../../sql-reference/functions/in-functions/ title="IN 运算符" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN 运算符</a> <a href=../../sql-reference/functions/introspection/ title=自省 class="nav-link text-light text-wrap d-inline-block w-100 px-0">自省</a> <a href=../../sql-reference/functions/geo/ title=GEO函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">GEO函数</a> <a href=../../sql-reference/functions/hash-functions/ title=Hash函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash函数</a> <a href=../../sql-reference/functions/ip-address-functions/ title=IP函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IP函数</a> <a href=../../sql-reference/functions/json-functions/ title=JSON函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">JSON函数</a> <a href=../../sql-reference/functions/functions-for-nulls/ title=Nullable处理函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable处理函数</a> <a href=../../sql-reference/functions/url-functions/ title=URL函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL函数</a> <a href=../../sql-reference/functions/uuid-functions/ title=UUID函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID函数</a> <a href=../../sql-reference/functions/array-join/ title=arrayJoin函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin函数</a> <a href=../../sql-reference/functions/bitmap-functions/ title=位图函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位图函数</a> <a href=../../sql-reference/functions/bit-functions/ title=位操作函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">位操作函数</a> <a href=../../sql-reference/functions/other-functions/ title=其他函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">其他函数</a> <a href=../../sql-reference/functions/ym-dict-functions/ title=功能与Yandex的工作。梅特里卡词典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">功能与Yandex的工作。梅特里卡词典</a> <a href=../../sql-reference/functions/rounding-functions/ title=取整函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">取整函数</a> <a href=../../sql-reference/functions/ext-dict-functions/ title=字典函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典函数</a> <a href=../../sql-reference/functions/string-functions/ title=字符串函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串函数</a> <a href=../../sql-reference/functions/splitting-merging-functions/ title=字符串拆分合并函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串拆分合并函数</a> <a href=../../sql-reference/functions/string-search-functions/ title=字符串搜索函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串搜索函数</a> <a href=../../sql-reference/functions/string-replace-functions/ title=字符串替换函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串替换函数</a> <a href=../../sql-reference/functions/math-functions/ title=数学函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数学函数</a> <a href=../../sql-reference/functions/array-functions/ title=数组函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数组函数</a> <a href=../../sql-reference/functions/date-time-functions/ title=时间日期函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">时间日期函数</a> <a href=../../sql-reference/functions/machine-learning-functions/ title=机器学习函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">机器学习函数</a> <a href=../../sql-reference/functions/conditional-functions/ title=条件函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">条件函数</a> <a href=../../sql-reference/functions/encoding-functions/ title=编码函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">编码函数</a> <a href=../../sql-reference/functions/random-functions/ title=随机函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">随机函数</a> <a href=../../sql-reference/functions/higher-order-functions/ title=高阶函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">高阶函数</a> </nav> </div> <a href=#sidebar-sidebar-4-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-5 title=聚合函数 class="nav-link text-light dropdown-toggle px-0">聚合函数</a> <div id=sidebar-sidebar-4-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/aggregate-functions/ title=简介 class="nav-link text-light text-wrap d-inline-block w-100 px-0">简介</a> <a href=../../sql-reference/aggregate-functions/reference/ title=参考手册 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参考手册</a> <a href=../../sql-reference/aggregate-functions/combinators/ title=聚合函数组合器 class="nav-link text-light text-wrap d-inline-block w-100 px-0">聚合函数组合器</a> <a href=../../sql-reference/aggregate-functions/parametric-functions/ title=参数聚合函数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">参数聚合函数</a> </nav> </div> <a href=#sidebar-sidebar-4-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-6 title=表函数 class="nav-link text-light dropdown-toggle px-0">表函数</a> <div id=sidebar-sidebar-4-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/table-functions/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=../../sql-reference/table-functions/file/ title=文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">文件</a> <a href=../../sql-reference/table-functions/merge/ title=合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">合并</a> <a href=../../sql-reference/table-functions/numbers/ title=数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数字</a> <a href=../../sql-reference/table-functions/url/ title=url class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a> <a href=../../sql-reference/table-functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../sql-reference/table-functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../sql-reference/table-functions/odbc/ title=odbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a> <a href=../../sql-reference/table-functions/hdfs/ title=hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a> <a href=../../sql-reference/table-functions/input/ title=输入 class="nav-link text-light text-wrap d-inline-block w-100 px-0">输入</a> <a href=../../sql-reference/table-functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> <a href=../../sql-reference/table-functions/remote/ title=远程，远程安全 class="nav-link text-light text-wrap d-inline-block w-100 px-0">远程，远程安全</a> </nav> </div> <a href=#sidebar-sidebar-4-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7 title=字典 class="nav-link text-light dropdown-toggle px-0">字典</a> <div id=sidebar-sidebar-4-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/dictionaries/ title=导言 class="nav-link text-light text-wrap d-inline-block w-100 px-0">导言</a> <a href=#sidebar-sidebar-4-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-7-2 title=外部字典 class="nav-link text-light dropdown-toggle px-0">外部字典</a> <div id=sidebar-sidebar-4-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/ title=配置外部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置外部字典</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/ title=在内存中存储字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">在内存中存储字典</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/ title=字典更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典更新</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/ title=外部字典的来源 class="nav-link text-light text-wrap d-inline-block w-100 px-0">外部字典的来源</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/ title=字典键和字段 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字典键和字段</a> <a href=../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/ title=分层字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">分层字典</a> </nav> </div> <a href=../../sql-reference/dictionaries/internal-dicts/ title=内部字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">内部字典</a> </nav> </div> <a href=../../sql-reference/ansi/ title=ANSI兼容性 class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSI兼容性</a> <a href=#sidebar-sidebar-4-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-9 title=操作符 class="nav-link text-light dropdown-toggle px-0">操作符</a> <div id=sidebar-sidebar-4-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/operators/in/ title="IN 操作符" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN 操作符</a> <a href=../../sql-reference/operators/ title=操作符 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作符</a> </nav> </div> <a href=#sidebar-sidebar-4-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10 title=数据类型 class="nav-link text-light dropdown-toggle px-0">数据类型</a> <div id=sidebar-sidebar-4-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../sql-reference/data-types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../sql-reference/data-types/lowcardinality/ title=低基数类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">低基数类型</a> <a href=#sidebar-sidebar-4-10-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10-4 title=域 class="nav-link text-light dropdown-toggle px-0">域</a> <div id=sidebar-sidebar-4-10-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/domains/ title=域 class="nav-link text-light text-wrap d-inline-block w-100 px-0">域</a> <a href=../../sql-reference/data-types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../sql-reference/data-types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../sql-reference/data-types/aggregatefunction/ title="AggregateFunction(name, types_of_arguments…)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction(name, types_of_arguments…)</a> <a href=../../sql-reference/data-types/decimal/ title=Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S) class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)</a> <a href=../../sql-reference/data-types/enum/ title=Enum8,Enum16 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum8,Enum16</a> <a href=../../sql-reference/data-types/float/ title=Float32,Float64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32,Float64</a> <a href=../../sql-reference/data-types/simpleaggregatefunction/ title=SimpleAggregateFunction class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction</a> <a href=../../sql-reference/data-types/tuple/ title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a> <a href=../../sql-reference/data-types/int-uint/ title=UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8,UInt16,UInt32,UInt64,Int8,Int16,Int32,Int64</a> <a href=../../sql-reference/data-types/nullable/ title=可为空（类型名称) class="nav-link text-light text-wrap d-inline-block w-100 px-0">可为空（类型名称)</a> <a href=../../sql-reference/data-types/fixedstring/ title=固定字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">固定字符串</a> <a href=../../sql-reference/data-types/string/ title=字符串 class="nav-link text-light text-wrap d-inline-block w-100 px-0">字符串</a> <a href=../../sql-reference/data-types/boolean/ title=布尔值 class="nav-link text-light text-wrap d-inline-block w-100 px-0">布尔值</a> <a href=../../sql-reference/data-types/ title=数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据类型</a> <a href=../../sql-reference/data-types/date/ title=日期 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期</a> <a href=../../sql-reference/data-types/datetime/ title=日期时间 class="nav-link text-light text-wrap d-inline-block w-100 px-0">日期时间</a> <a href=../../sql-reference/data-types/array/ title=阵列(T) class="nav-link text-light text-wrap d-inline-block w-100 px-0">阵列(T)</a> <a href=#sidebar-sidebar-4-10-20 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10-20 title=嵌套数据结构 class="nav-link text-light dropdown-toggle px-0">嵌套数据结构</a> <div id=sidebar-sidebar-4-10-20 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/nested-data-structures/nested/ title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a> <a href=../../sql-reference/data-types/nested-data-structures/ title=嵌套数据结构 class="nav-link text-light text-wrap d-inline-block w-100 px-0">嵌套数据结构</a> </nav> </div> <a href=#sidebar-sidebar-4-10-21 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-10-21 title=特殊数据类型 class="nav-link text-light dropdown-toggle px-0">特殊数据类型</a> <div id=sidebar-sidebar-4-10-21 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../sql-reference/data-types/special-data-types/interval/ title=间隔 class="nav-link text-light text-wrap d-inline-block w-100 px-0">间隔</a> <a href=../../sql-reference/data-types/special-data-types/nothing/ title=没什么 class="nav-link text-light text-wrap d-inline-block w-100 px-0">没什么</a> <a href=../../sql-reference/data-types/special-data-types/ title=特殊数据类型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">特殊数据类型</a> <a href=../../sql-reference/data-types/special-data-types/expression/ title=表达式 class="nav-link text-light text-wrap d-inline-block w-100 px-0">表达式</a> <a href=../../sql-reference/data-types/special-data-types/set/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title=指南 class="nav-link text-light dropdown-toggle px-0">指南</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../guides/ title=概述 class="nav-link text-light text-wrap d-inline-block w-100 px-0">概述</a> <a href=../../guides/apply-catboost-model/ title=应用CatBoost模型 class="nav-link text-light text-wrap d-inline-block w-100 px-0">应用CatBoost模型</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=操作 class="nav-link text-light dropdown-toggle px-0">操作</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/ title=操作 class="nav-link text-light text-wrap d-inline-block w-100 px-0">操作</a> <a href=../../operations/requirements/ title=要求 class="nav-link text-light text-wrap d-inline-block w-100 px-0">要求</a> <a href=../../operations/monitoring/ title=监控 class="nav-link text-light text-wrap d-inline-block w-100 px-0">监控</a> <a href=../../operations/troubleshooting/ title=常见问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">常见问题</a> <a href=../../operations/update/ title=更新 class="nav-link text-light text-wrap d-inline-block w-100 px-0">更新</a> <a href=../../operations/access-rights/ title=访问权限和账户管理 class="nav-link text-light text-wrap d-inline-block w-100 px-0">访问权限和账户管理</a> <a href=../../operations/backup/ title=数据备份 class="nav-link text-light text-wrap d-inline-block w-100 px-0">数据备份</a> <a href=#sidebar-sidebar-6-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-8 title=优化性能 class="nav-link text-light dropdown-toggle px-0">优化性能</a> <div id=sidebar-sidebar-6-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/optimizing-performance/sampling-query-profiler/ title=查询分析 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询分析</a> </nav> </div> <a href=#sidebar-sidebar-6-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-9 title=系统表 class="nav-link text-light dropdown-toggle px-0">系统表</a> <div id=sidebar-sidebar-6-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/system-tables/ title=系统表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统表</a> <a href=../../operations/system-tables/query_log/ title=system.query_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">system.query_log</a> <a href=../../operations/system-tables/asynchronous_metric_log/ title=系统。asynchronous_metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。asynchronous_metric_log</a> <a href=../../operations/system-tables/asynchronous_metrics/ title=系统。asynchronous_metrics class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。asynchronous_metrics</a> <a href=../../operations/system-tables/data_type_families/ title=系统。data_type_families class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。data_type_families</a> <a href=../../operations/system-tables/detached_parts/ title=系统。detached_parts class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。detached_parts</a> <a href=../../operations/system-tables/graphite_retentions/ title=系统。graphite_retentions class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。graphite_retentions</a> <a href=../../operations/system-tables/merge_tree_settings/ title=系统。merge_tree_settings class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。merge_tree_settings</a> <a href=../../operations/system-tables/metric_log/ title=系统。metric_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。metric_log</a> <a href=../../operations/system-tables/numbers_mt/ title=系统。numbers_mt class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。numbers_mt</a> <a href=../../operations/system-tables/part_log/ title=系统。part_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。part_log</a> <a href=../../operations/system-tables/query_thread_log/ title=系统。query_thread_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。query_thread_log</a> <a href=../../operations/system-tables/storage_policies/ title=系统。storage_policies class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。storage_policies</a> <a href=../../operations/system-tables/text_log/ title=系统。text_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。text_log</a> <a href=../../operations/system-tables/trace_log/ title=系统。trace_log class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。trace_log</a> <a href=../../operations/system-tables/one/ title=系统。一 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。一</a> <a href=../../operations/system-tables/columns/ title=系统。列 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。列</a> <a href=../../operations/system-tables/replicas/ title=系统。副本 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。副本</a> <a href=../../operations/system-tables/functions/ title=系统。功能 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。功能</a> <a href=../../operations/system-tables/zookeeper/ title=系统。动物园管理员 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。动物园管理员</a> <a href=../../operations/system-tables/merges/ title=系统。合并 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。合并</a> <a href=../../operations/system-tables/dictionaries/ title=系统。字典 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。字典</a> <a href=../../operations/system-tables/metrics/ title=系统。指标 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。指标</a> <a href=../../operations/system-tables/numbers/ title=系统。数字 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。数字</a> <a href=../../operations/system-tables/databases/ title=系统。数据库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。数据库</a> <a href=../../operations/system-tables/events/ title=系统。活动 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。活动</a> <a href=../../operations/system-tables/processes/ title=系统。流程 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。流程</a> <a href=../../operations/system-tables/disks/ title=系统。磁盘 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。磁盘</a> <a href=../../operations/system-tables/mutations/ title=系统。突变 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。突变</a> <a href=../../operations/system-tables/tables/ title=系统。表 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。表</a> <a href=../../operations/system-tables/table_engines/ title=系统。表_engines class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。表_engines</a> <a href=../../operations/system-tables/settings/ title=系统。设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。设置</a> <a href=../../operations/system-tables/contributors/ title=系统。贡献者 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。贡献者</a> <a href=../../operations/system-tables/clusters/ title=系统。集群 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。集群</a> <a href=../../operations/system-tables/parts/ title=系统。零件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">系统。零件</a> </nav> </div> <a href=../../operations/performance-test/ title=测试硬件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">测试硬件</a> <a href=../../operations/tips/ title=使用建议 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用建议</a> <a href=../../operations/configuration-files/ title=配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配置文件</a> <a href=../../operations/quotas/ title=配额 class="nav-link text-light text-wrap d-inline-block w-100 px-0">配额</a> <a href=#sidebar-sidebar-6-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-14 title=实用工具 class="nav-link text-light dropdown-toggle px-0">实用工具</a> <div id=sidebar-sidebar-6-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../operations/utilities/clickhouse-benchmark/ title=性能测试 class="nav-link text-light text-wrap d-inline-block w-100 px-0">性能测试</a> <a href=../../operations/utilities/clickhouse-copier/ title=clickhouse-copier class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a> <a href=../../operations/utilities/ title=实用工具 class="nav-link text-light text-wrap d-inline-block w-100 px-0">实用工具</a> </nav> </div> <a href=#sidebar-sidebar-6-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-15 title=服务器配置参数 class="nav-link text-light dropdown-toggle px-0">服务器配置参数</a> <div id=sidebar-sidebar-6-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/server-configuration-parameters/settings/ title=服务器设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器设置</a> <a href=../../operations/server-configuration-parameters/ title=服务器配置参数 class="nav-link text-light text-wrap d-inline-block w-100 px-0">服务器配置参数</a> </nav> </div> <a href=#sidebar-sidebar-6-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6-16 title=设置 class="nav-link text-light dropdown-toggle px-0">设置</a> <div id=sidebar-sidebar-6-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../operations/settings/permissions-for-queries/ title=查询权限 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询权限</a> <a href=../../operations/settings/settings-profiles/ title=设置配置文件 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置配置文件</a> <a href=../../operations/settings/constraints-on-settings/ title=对设置的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">对设置的限制</a> <a href=../../operations/settings/settings-users/ title=用户设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">用户设置</a> <a href=../../operations/settings/query-complexity/ title=查询复杂性的限制 class="nav-link text-light text-wrap d-inline-block w-100 px-0">查询复杂性的限制</a> <a href=../../operations/settings/settings/ title=设置 class="nav-link text-light text-wrap d-inline-block w-100 px-0">设置</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=商业支持 class="nav-link text-light dropdown-toggle px-0">商业支持</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../commercial/cloud/ title=云 class="nav-link text-light text-wrap d-inline-block w-100 px-0">云</a> <a href=../../commercial/support/ title=支持 class="nav-link text-light text-wrap d-inline-block w-100 px-0">支持</a> <a href=../../commercial/ title=简介 class="nav-link text-light text-wrap d-inline-block w-100 px-0">简介</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=F.A.Q. class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../faq/general/ title=常见问题 class="nav-link text-light text-wrap d-inline-block w-100 px-0">常见问题</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=ClickHouse事迹 class="nav-link text-light dropdown-toggle px-0">ClickHouse事迹</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-9-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9-1 title=Changelog class="nav-link text-light dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-9-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../whats-new/changelog/ title=2021 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a> <a href=../../whats-new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../whats-new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../whats-new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../whats-new/roadmap/ title=Roadmap class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a> <a href=../../whats-new/security-changelog/ title=安全更新日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">安全更新日志</a> <a href=../../whats-new/ title=ClickHouse变更及改动? class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse变更及改动?</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="ClickHouse 开发" class="nav-link text-light dropdown-toggle px-0">ClickHouse 开发</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../development/browse-code/ title=浏览源代码 class="nav-link text-light text-wrap d-inline-block w-100 px-0">浏览源代码</a> <a href=../../development/build-cross-arm/ title="如何在Linux上构建ClickHouse for AARCH64（ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux上构建ClickHouse for AARCH64（ARM64)</a> <a href=../../development/ title="ClickHouse 开发" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 开发</a> <a href=../../development/architecture/ title="ClickHouse 架构概述" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse 架构概述</a> <a href=../../development/developer-instruction/ title=Windows使用指引 class="nav-link text-light text-wrap d-inline-block w-100 px-0">Windows使用指引</a> <a href=../../development/contrib/ title=使用的三方库 class="nav-link text-light text-wrap d-inline-block w-100 px-0">使用的三方库</a> <a href=../../development/build-osx/ title="在 Mac OS X 中编译 ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">在 Mac OS X 中编译 ClickHouse</a> <a href=../../development/build-cross-osx/ title="如何在Linux中编译Mac OS X ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何在Linux中编译Mac OS X ClickHouse</a> <a href=../../development/build/ title="如何构建 ClickHouse 发布包" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何构建 ClickHouse 发布包</a> <a href=../../development/style/ title="如何编写 C++ 代码" class="nav-link text-light text-wrap d-inline-block w-100 px-0">如何编写 C++ 代码</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=变更日志 class="nav-link text-light dropdown-toggle px-0">变更日志</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../changelog/ title=变更日志 class="nav-link text-light text-wrap d-inline-block w-100 px-0">变更日志</a> </nav> </div> <a href=../../single/clickhouse_zh.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-4"> <div id=content class=mt-md-n3> <nav class=text-muted aria-label=breadcrumb> <ol class="breadcrumb bg-transparent p-0"> <li class=breadcrumb-item><a href=../ class=text-reset>Interfaces</a> </li> </ol> </nav> <h1 id=formats>输入/输出格式<a class=headerlink href=#formats title="Permanent link"> </a></h1> <p>ClickHouse可以接受和返回各种格式的数据。输入支持的格式可以用来解析提供给<code class=syntax>INSERT</code>的数据，可以从文件备份表(如File, URL或HDFS)执行<code class=syntax>SELECT</code>，或者读取外部字典。输出支持的格式可用于获取<code class=syntax>SELECT</code>的结果，并支持执行<code class=syntax>INSERT</code>文件的表中。</p> <p>以下是支持的格式:</p> <table> <thead> <tr> <th>格式</th> <th>输入</th> <th>输出</th> </tr> </thead> <tbody> <tr> <td><a href=#tabseparated>TabSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedraw>TabSeparatedRaw</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnames>TabSeparatedWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-template>Template</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#templateignorespaces>TemplateIgnoreSpaces</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#csv>CSV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#csvwithnames>CSVWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-customseparated>CustomSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-values>Values</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#vertical>Vertical</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#verticalraw>VerticalRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#json>JSON</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsonasstring>JSONAsString</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#jsonstring>JSONString</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompact>JSONCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompactstring>JSONCompactString</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoneachrow>JSONEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#jsoneachrowwithprogress>JSONEachRowWithProgress</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsonstringeachrow>JSONStringEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#jsonstringeachrowwithprogress>JSONStringEachRowWithProgress</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompacteachrow>JSONCompactEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompacteachrowwithnamesandtypes>JSONCompactEachRowWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompactstringeachrow>JSONCompactStringEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompactstringeachrowwithnamesandtypes>JSONCompactStringEachRowWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tskv>TSKV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#pretty>Pretty</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompact>PrettyCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompactmonoblock>PrettyCompactMonoBlock</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettynoescapes>PrettyNoEscapes</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettyspace>PrettySpace</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#protobuf>Protobuf</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#protobufsingle>ProtobufSingle</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-avro>Avro</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-avro-confluent>AvroConfluent</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#data-format-parquet>Parquet</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-arrow>Arrow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-arrow-stream>ArrowStream</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-orc>ORC</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#rowbinary>RowBinary</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#native>Native</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#null>Null</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#xml>XML</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#capnproto>CapnProto</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#lineasstring>LineAsString</a></td> <td>✔</td> <td>✗</td> </tr> </tbody> </table> <p>您可以使用ClickHouse设置控制一些格式处理参数。更多详情设置请参考<a href=../../operations/settings/settings/ >设置</a> </p> <h2 id=tabseparated>TabSeparated<a class=headerlink href=#tabseparated title="Permanent link"> </a></h2> <p>在TabSeparated分隔格式中，数据按行写入。每行包含由制表符分隔的值。每个值后跟一个制表符，除了行中最后一个值后跟换行。在任何地方都采用严格的Unix换行。最后一行还必须在末尾包含换行。值以文本格式编写，不包含引号，并使用转义的特殊字符。</p> <p>这种格式也可以用<code class=syntax>TSV</code>来表示。</p> <p><code class=syntax>TabSeparated</code>格式便于使用自定义程序和脚本处理数据。默认情况下，它在HTTP接口和命令行客户端的批处理模式中使用。这种格式还允许在不同dbms之间传输数据。例如，您可以从MySQL获取转储并将其上传到ClickHouse，反之亦然。</p> <p><code class=syntax>TabSeparated</code>格式支持输出total值(与TOTALS一起使用时)和extreme值(当<code class=syntax>extreme</code>被设置为1时)。在这种情况下，total值和extreme值会在主数据后输出。主要结果、总值和极值之间用空行分隔。示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>TabSeparated</span><span class=o>``</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>2014-03-17      1406958
2014-03-18      1383658
2014-03-19      1405797
2014-03-20      1353623
2014-03-21      1245779
2014-03-22      1031592
2014-03-23      1046491

1970-01-01      8873898

2014-03-17      1031592
2014-03-23      1406958
</code></pre></div> <h3 id=data-formatting>数据格式化<a class=headerlink href=#data-formatting title="Permanent link"> </a></h3> <p>整数是用十进制形式写的。数字可以在开头包含一个额外的<code class=syntax>+</code>字符(解析时忽略，格式化时不记录)。非负数不能包含负号。在读取时，允许将空字符串解析为零，或者(对于有符号类型)将仅由一个负号组成的字符串解析为零。不符合相应数据类型的数字可以被解析为不同的数字，而不会出现错误消息。</p> <p>浮点数以十进制形式书写。<code class=syntax>.</code>号用作十进制分隔符。支持指数符号，如<code class=syntax>inf</code>、<code class=syntax>+inf</code>、<code class=syntax>-inf</code>和<code class=syntax>nan</code>。浮点数的条目可以以小数点开始或结束。<br> 在格式化期间，浮点数可能会丢失准确性。<br> 在解析期间，并不严格要求读取与机器可以表示的最接近的数值。</p> <p>日期以YYYY-MM-DD格式编写，并以相同的格式解析，但使用任何字符作为分隔符。<br> 日期和时间以<code class=syntax>YYYY-MM-DD hh:mm:ss</code>的格式书写，并以相同的格式解析，但使用任何字符作为分隔符。<br> 这一切都发生在客户端或服务器启动时的系统时区(取决于它们对数据的格式)。对于带有时间的日期，夏时制时间未指定。因此，如果转储在夏令时有时间，则转储不会明确地与数据匹配，解析将选择这两次中的一次。<br> 在读取操作期间，不正确的日期和具有时间的日期可以使用自然溢出或null日期和时间进行分析，而不会出现错误消息。</p> <p>有个例外情况，Unix时间戳格式也支持用时间解析日期(如果它恰好由10个十进制数字组成)。其结果与时间区域无关。格式<code class=syntax>YYYY-MM-DD hh:mm:ss</code>和<code class=syntax>NNNNNNNNNN</code>是自动区分的。</p> <p>字符串以反斜杠转义的特殊字符输出。下面的转义序列用于输出:<code class=syntax>\b</code>, <code class=syntax>\f</code>, <code class=syntax>\r</code>, <code class=syntax>\n</code>, <code class=syntax>\t</code>, <code class=syntax>\0</code>, <code class=syntax>\'</code>, <code class=syntax>\\</code>。解析还支持<code class=syntax>\a</code>、<code class=syntax>\v</code>和<code class=syntax>\xHH</code>(十六进制转义字符)和任何<code class=syntax>\c</code>字符，其中<code class=syntax>c</code>是任何字符(这些序列被转换为<code class=syntax>c</code>)。因此，读取数据支持这样一种格式，即可以将换行符写成<code class=syntax>\n</code>或<code class=syntax>\</code>，或者写成换行符。例如，字符串<code class=syntax>Hello world</code>在单词之间有换行符，而不是空格，可以用以下语法进行解析:</p> <div class=codehilite><pre><span></span><code class=syntax>Hello\nworld

Hello\
world
</code></pre></div> <p>第二种形式是支持的，因为MySQL读取tab-separated格式数据集的时候也会使用它。</p> <p>在TabSeparated分隔格式传递数据时需要转义的最小字符集:<code class=syntax>Tab</code>、换行符(LF)和反斜杠。</p> <p>只有一小部分符号被转义。您可以很容易地找到一个字符串值，而您的终端将在输出中不显示它。</p> <p>数组写在方括号内的逗号分隔值列表中。数组中的数字项按正常格式进行格式化。<code class=syntax>Date</code>和<code class=syntax>DateTime</code>类型用单引号表示。字符串使用与上面相同的转义规则在单引号中编写。</p> <p><a href=../../sql-reference/syntax/ >NULL</a>将输出为<code class=syntax>\N</code>。</p> <p><a href=../../sql-reference/data-types/nested-data-structures/nested/ >Nested</a>结构的每个元素都表示为数组。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>nestedt</span>
<span class=p>(</span>
    <span class=o>`</span><span class=n>id</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>aux</span><span class=o>`</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>a</span> <span class=n>UInt8</span><span class=p>,</span>
        <span class=n>b</span> <span class=n>String</span>
    <span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>nestedt</span> <span class=k>Values</span> <span class=p>(</span> <span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=p>[</span><span class=s1>'a'</span><span class=p>])</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>nestedt</span> <span class=n>FORMAT</span> <span class=n>TSV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>1  [1]    ['a']
</code></pre></div> <h2 id=tabseparatedraw>TabSeparatedRaw<a class=headerlink href=#tabseparatedraw title="Permanent link"> </a></h2> <p>与<code class=syntax>TabSeparated</code>格式的不同之处在于，写入的行没有转义。<br> 使用这种格式解析时，每个字段中不允许使用制表符或换行符。</p> <p>这种格式也可以使用名称<code class=syntax>TSVRaw</code>来表示。</p> <h2 id=tabseparatedwithnames>TabSeparatedWithNames<a class=headerlink href=#tabseparatedwithnames title="Permanent link"> </a></h2> <p>与<code class=syntax>TabSeparated</code>格式不同的是列名写在第一行。<br> 在解析过程中，第一行被完全忽略。不能使用列名来确定它们的位置或检查它们的正确性。<br> (将来可能会添加对头行解析的支持。)</p> <p>这种格式也可以使用名称<code class=syntax>TSVWithNames</code>来表示。</p> <h2 id=tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes<a class=headerlink href=#tabseparatedwithnamesandtypes title="Permanent link"> </a></h2> <p>与<code class=syntax>TabSeparated</code>格式不同的是列名写在第一行，而列类型写在第二行。<br> 在解析过程中，将完全忽略第一行和第二行。</p> <p>这种格式也可以使用名称<code class=syntax>TSVWithNamesAndTypes</code>来表示。</p> <h2 id=format-template>Template<a class=headerlink href=#format-template title="Permanent link"> </a></h2> <p>此格式允许指定带有占位符的自定义格式字符串，这些占位符用于指定转义规则。</p> <p>它使用设置<code class=syntax>format_schema</code>, <code class=syntax>format_schema_rows</code>, <code class=syntax>format_schema_rows_between_delimiter</code>以及其他格式的一些设置(例如转义<code class=syntax>JSON</code>时使用<code class=syntax>output_format_json_quote_64bit_integers</code>)</p> <p>设置<code class=syntax>format_template_row</code>指定文件的路径，该文件包含以下语法的行格式字符串:</p> <p><code class=syntax>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p> <p>其中，<code class=syntax>delimiter_i</code>是值之间的分隔符(<code class=syntax>$</code>符号可以转义为<code class=syntax>$$</code>)，<br> <code class=syntax>column_i</code>是要选择或插入其值的列的名称或索引(如果为空，则跳过该列)，<br> <code class=syntax>serializeAs_i</code>是列值的转义规则。支持以下转义规则:</p> <ul> <li><code class=syntax>CSV</code>, <code class=syntax>JSON</code>, <code class=syntax>XML</code> (类似于相同名称的格式)</li> <li><code class=syntax>Escaped</code> (类似于<code class=syntax>TSV</code>)</li> <li><code class=syntax>Quoted</code> (类似于<code class=syntax>Values</code>)</li> <li><code class=syntax>Raw</code> (类似于<code class=syntax>TSVRaw</code>)</li> <li><code class=syntax>None</code></li> </ul> <p>如果省略了转义规则，那么将使用<code class=syntax>None</code>。<code class=syntax>XML</code>和<code class=syntax>Raw</code>只适用于输出。</p> <p>对于下面的格式字符串:</p> <div class=codehilite><pre><span></span><code class=syntax>  `Search phrase: <span class=cp>${</span><span class=n>SearchPhrase</span><span class=p>:</span><span class=n>Quoted</span><span class=cp>}</span>, count: <span class=cp>${</span><span class=n>c</span><span class=p>:</span><span class=n>Escaped</span><span class=cp>}</span>, ad price: $$${price:JSON};`
</code></pre></div> <p><code class=syntax>SearchPhrase</code>、<code class=syntax>c</code>和<code class=syntax>price</code>列的值被转义为<code class=syntax>quotation</code>、<code class=syntax>Escaped</code>和<code class=syntax>JSON</code>将分别在<code class=syntax>Search phrase:</code>， <code class=syntax>， count:</code>， <code class=syntax>， ad price: $</code>和<code class=syntax>;</code>分隔符之间打印(用于选择)或expected(用于插入)。例如:</p> <p><code class=syntax>Search phrase: 'bathroom interior design', count: 2166, ad price: $3;</code></p> <p><code class=syntax>format_template_rows_between_delimiter</code>设置指定行之间的分隔符，它将打印(或expected)在每一行之后，最后一行除外(默认为<code class=syntax>\n</code>)。</p> <p>设置<code class=syntax>format_template_resultset</code>指定文件路径，该文件包含resultset的格式字符串。resultset的格式字符串与row的格式字符串具有相同的语法，允许指定前缀、后缀和打印一些附加信息的方法。它包含以下占位符而不是列名:</p> <ul> <li><code class=syntax>data</code> <code class=syntax>format_template_row</code>格式的数据行，由<code class=syntax>format_template_rows_between_delimiter</code>分隔。此占位符必须是格式字符串中的第一个占位符。</li> <li><code class=syntax>totals</code> <code class=syntax>format_template_row</code>格式的总值(和WITH TOTALS一起使用)</li> <li><code class=syntax>min</code> <code class=syntax>format_template_row</code>格式的最小值(当极值设置为1时)</li> <li><code class=syntax>max</code> <code class=syntax>format_template_row</code>格式的最大值(当极值设置为1时)</li> <li><code class=syntax>rows</code> 输出行的总数</li> <li><code class=syntax>rows_before_limit</code> 没有LIMIT的最小行数。仅当查询包含LIMIT时输出。如果查询包含GROUP BY，那么rows_before_limit_at_least就是没有LIMIT的确切行数。</li> <li><code class=syntax>time</code> 请求执行时间（秒）</li> <li><code class=syntax>rows_read</code> 已读取的行数</li> <li><code class=syntax>bytes_read</code> 已读取（未压缩）的字节数</li> </ul> <p>占位符<code class=syntax>data</code>、<code class=syntax>totals</code>、<code class=syntax>min</code>和<code class=syntax>max</code>必须没有指定转义规则(或者必须显式指定<code class=syntax>None</code>)。其余占位符可以指定任何转义规则。<br> 如果<code class=syntax>format_template_resultset</code>设置为空字符串，则使用<code class=syntax>${data}</code>作为默认值。<br> 对于insert查询，格式允许跳过某些列或某些字段的前缀或后缀(参见示例)。</p> <p>Select示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>'/some/path/resultset.format'</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>'/some/path/row.format'</span><span class=p>,</span> <span class=n>format_template_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>'\n    '</span>
</code></pre></div> <p><code class=syntax>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>&lt;!DOCTYPE HTML&gt;
&lt;html&gt; &lt;head&gt; &lt;title&gt;Search phrases&lt;/title&gt; &lt;/head&gt;
 &lt;body&gt;
  &lt;table border="1"&gt; &lt;caption&gt;Search phrases&lt;/caption&gt;
    &lt;tr&gt; &lt;th&gt;Search phrase&lt;/th&gt; &lt;th&gt;Count&lt;/th&gt; &lt;/tr&gt;
    ${data}
  &lt;/table&gt;
  &lt;table border="1"&gt; &lt;caption&gt;Max&lt;/caption&gt;
    ${max}
  &lt;/table&gt;
  &lt;b&gt;Processed ${rows_read:XML} rows in ${time:XML} sec&lt;/b&gt;
 &lt;/body&gt;
&lt;/html&gt;
</code></pre></div> <p><code class=syntax>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>&lt;tr&gt; &lt;td&gt;${0:XML}&lt;/td&gt; &lt;td&gt;${1:XML}&lt;/td&gt; &lt;/tr&gt;
</code></pre></div> <p>结果：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>"1"</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Search phrase<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Count<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8267016<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>bathroom interior design<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>2166<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>yandex<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1655<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>spring 2014 fashion<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1549<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>freeform photos<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1480<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>"1"</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Max<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8873898<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
 <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p>Insert示例：</p> <div class=codehilite><pre><span></span><code class=syntax>Some header
Page views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1
Page views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1
Total rows: 2
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>'/some/path/resultset.format'</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>'/some/path/row.format'</span>
</code></pre></div> <p><code class=syntax>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>Some header\n${data}\nTotal rows: ${:CSV}\n
</code></pre></div> <p><code class=syntax>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>Page views: ${PageViews:CSV}, User id: ${UserID:CSV}, Useless field: ${:CSV}, Duration: ${Duration:CSV}, Sign: ${Sign:CSV}
</code></pre></div> <p><code class=syntax>PageViews</code>, <code class=syntax>UserID</code>, <code class=syntax>Duration</code>和<code class=syntax>Sign</code> 内部占位符是表中列的名称。将忽略行中<code class=syntax>Useless field</code>后面和后缀中<code class=syntax>\nTotal rows:</code>之后的值。<br> 输入数据中的所有分隔符必须严格等于指定格式字符串中的分隔符。</p> <h2 id=templateignorespaces>TemplateIgnoreSpaces<a class=headerlink href=#templateignorespaces title="Permanent link"> </a></h2> <p>这种格式只适用于输入。<br> 类似于<code class=syntax>Template</code>，但跳过输入流中分隔符和值之间的空白字符。但是，如果格式字符串包含空格字符，这些字符将会出现在输入流中。还允许指定空占位符(<code class=syntax>${}</code>或<code class=syntax>${:None}</code>)来将一些分隔符分割为单独的部分，以忽略它们之间的空格。这种占位符仅用于跳过空白字符。<br> 如果列的值在所有行的顺序相同，那么可以使用这种格式读取<code class=syntax>JSON</code>。可以使用以下请求从格式为<a href=#json>JSON</a>的输出示例中插入数据：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=k>table_name</span> <span class=n>FORMAT</span> <span class=n>TemplateIgnoreSpaces</span> <span class=n>SETTINGS</span>
<span class=n>format_template_resultset</span> <span class=o>=</span> <span class=s1>'/some/path/resultset.format'</span><span class=p>,</span> <span class=n>format_template_row</span> <span class=o>=</span> <span class=s1>'/some/path/row.format'</span><span class=p>,</span> <span class=n>format_template_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>','</span>
</code></pre></div> <p><code class=syntax>/some/path/resultset.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>{${}"meta"${}:${:JSON},${}"data"${}:${}[${data}]${},${}"totals"${}:${:JSON},${}"extremes"${}:${:JSON},${}"rows"${}:${:JSON},${}"rows_before_limit_at_least"${}:${:JSON}${}}
</code></pre></div> <p><code class=syntax>/some/path/row.format</code>:</p> <div class=codehilite><pre><span></span><code class=syntax>{${}"SearchPhrase"${}:${}${phrase:JSON}${},${}"c"${}:${}${cnt:JSON}${}}
</code></pre></div> <h2 id=tskv>TSKV<a class=headerlink href=#tskv title="Permanent link"> </a></h2> <p>类似于TabSeparated，但是输出的值是name=value格式。名称的转义方式与TabSeparated格式相同，=符号也是转义的。</p> <div class=codehilite><pre><span></span><code class=syntax>SearchPhrase=   count()=8267016
SearchPhrase=bathroom interior design    count()=2166
SearchPhrase=yandex     count()=1655
SearchPhrase=2014 spring fashion    count()=1549
SearchPhrase=freeform photos       count()=1480
SearchPhrase=angelina jolie    count()=1245
SearchPhrase=omsk       count()=1112
SearchPhrase=photos of dog breeds    count()=1091
SearchPhrase=curtain designs        count()=1064
SearchPhrase=baku       count()=1000
</code></pre></div> <p><a href=../../sql-reference/syntax/ >NULL</a>格式为<code class=syntax>\N</code>。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>TSKV</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>x=1    y=\N
</code></pre></div> <p>当有大量的小列时，这种格式是无效的，并且通常没有理由使用它。不过，就效率而言，它并不比JSONEachRow差。<br> 这种格式支持数据输出和解析。对于解析，不同列的值支持任何顺序。省略某些值是可以接受的——它们被视为与其默认值相等。在这种情况下，0和空白行被用作默认值。不支持在表中指定的复杂值作为缺省值。</p> <p>解析允许存在不带等号或值的附加字段<code class=syntax>tskv</code>。此字段被忽略。</p> <h2 id=csv>CSV<a class=headerlink href=#csv title="Permanent link"> </a></h2> <p>按<code class=syntax>,</code>分隔的数据格式(<a href=https://tools.ietf.org/html/rfc4180 rel="external nofollow noreferrer" target=_blank>RFC</a>)。</p> <p>格式化时，行是用双引号括起来的。字符串中的双引号会以两个双引号输出，除此之外没有其他规则来做字符转义了。日期和时间也会以双引号包括。数字的输出不带引号。值由一个单独的字符隔开，这个字符默认是<code class=syntax>,</code>。行使用Unix换行符（LF）分隔。数组序列化成CSV规则如下：首先将数组序列化为<code class=syntax>TabSeparated</code>格式的字符串，然后将结果字符串用双引号包括输出到<code class=syntax>CSV</code>。<code class=syntax>CSV</code>格式的元组被序列化为单独的列（即它们在元组中的嵌套关系会丢失）。</p> <div class=codehilite><pre><span></span><code class=syntax>$ clickhouse-client --format_csv_delimiter<span class=o>=</span><span class=s2>"|"</span> --query<span class=o>=</span><span class=s2>"INSERT INTO test.csv FORMAT CSV"</span> &lt; data.csv
</code></pre></div> <p>* 默认情况下间隔符是<code class=syntax>,</code> ，在<a href=../../operations/settings/settings/#settings-format_csv_delimiter>format_csv_delimiter</a>中可以了解更多分隔符配置。</p> <p>解析的时候，可以使用或不使用引号来解析所有值。支持双引号和单引号。行也可以不用引号排列。在这种情况下，它们被解析为逗号或换行符（<code class=syntax>CR或</code>LF<code class=syntax>）。在解析不带引号的行时，若违反</code>RFC`规则，会忽略前缀和结尾的空格和制表符。对于换行，全部支持Unix（LF），Windows（CR LF）和Mac OS Classic（CR LF）。</p> <p>如果启用<a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>，空的末尾加引号的输入值将替换为相应列的默认值。</p> <p><code class=syntax>NULL</code>被格式化为<code class=syntax>\N</code>或<code class=syntax>NULL</code>或一个空的非引号字符串(详见配置<a href=../../operations/settings/settings/#settings-input_format_csv_unquoted_null_literal_as_null>input_format_csv_unquoted_null_literal_as_null</a>或<a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>)。</p> <p><code class=syntax>CSV</code>格式支持输出总数和极值的方式与<code class=syntax>TabSeparated</code>相同。</p> <h2 id=csvwithnames>CSVWithNames<a class=headerlink href=#csvwithnames title="Permanent link"> </a></h2> <p>会输出带头部的信息(字段列表)，和<code class=syntax>TabSeparatedWithNames</code>一样。</p> <h2 id=format-customseparated>CustomSeparated<a class=headerlink href=#format-customseparated title="Permanent link"> </a></h2> <p>类似于<a href=#format-template>Template</a>， 但它打印或读取所有列和使用转义规则在设置<code class=syntax>format_custom_escaping_rule</code>和分隔符设置<code class=syntax>format_custom_field_delimiter</code>,<code class=syntax>format_custom_row_before_delimiter</code>,<code class=syntax>format_custom_row_after_delimiter</code>,<code class=syntax>format_custom_row_between_delimiter</code>,<code class=syntax>format_custom_result_before_delimiter</code>,<code class=syntax>format_custom_result_after_delimiter</code>中,而不是从格式字符串。<br> 也有<code class=syntax>CustomSeparatedIgnoreSpaces</code>格式，这是类似于<code class=syntax>TemplateIgnoreSpaces</code>。</p> <h2 id=json>JSON<a class=headerlink href=#json title="Permanent link"> </a></h2> <p>以JSON格式输出数据。除了数据表之外，它还输出列名和类型，以及一些附加信息: 输出行的总数，以及如果没有LIMIT的话可输出的行数。示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=n>JSON</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span>
        <span class=nt>"meta"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"'hello'"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"String"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"multiply(42, number)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"UInt64"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"range(5)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"Array(UInt8)"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"data"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"'hello'"</span><span class=p>:</span> <span class=s2>"hello"</span><span class=p>,</span>
                        <span class=nt>"multiply(42, number)"</span><span class=p>:</span> <span class=s2>"0"</span><span class=p>,</span>
                        <span class=nt>"range(5)"</span><span class=p>:</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"'hello'"</span><span class=p>:</span> <span class=s2>"hello"</span><span class=p>,</span>
                        <span class=nt>"multiply(42, number)"</span><span class=p>:</span> <span class=s2>"42"</span><span class=p>,</span>
                        <span class=nt>"range(5)"</span><span class=p>:</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"'hello'"</span><span class=p>:</span> <span class=s2>"hello"</span><span class=p>,</span>
                        <span class=nt>"multiply(42, number)"</span><span class=p>:</span> <span class=s2>"84"</span><span class=p>,</span>
                        <span class=nt>"range(5)"</span><span class=p>:</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"rows"</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>

        <span class=nt>"rows_before_limit_at_least"</span><span class=p>:</span> <span class=mi>3</span>
<span class=p>}</span>
</code></pre></div> <p>JSON与JavaScript兼容。为了确保这一点，一些字符被另外转义：斜线<code class=syntax>/</code>被转义为<code class=syntax>\/</code>; 替代的换行符<code class=syntax>U+2028</code>和<code class=syntax>U+2029</code>会打断一些浏览器解析，它们会被转义为<code class=syntax>\uXXXX</code>。 ASCII控制字符被转义：退格，换页，换行，回车和水平制表符被替换为<code class=syntax>\b</code>，<code class=syntax>\f</code>，<code class=syntax>\n</code>，<code class=syntax>\r</code>，<code class=syntax>\t</code> 作为使用<code class=syntax>\uXXXX</code>序列的00-1F范围内的剩余字节。 无效的UTF-8序列更改为替换字符，因此输出文本将包含有效的UTF-8序列。 为了与JavaScript兼容，默认情况下，Int64和UInt64整数用双引号引起来。要除去引号，可以将配置参数<code class=syntax>output_format_json_quote_64bit_integers</code>设置为0。</p> <p><code class=syntax>rows</code> – 结果输出的行数。</p> <p><code class=syntax>rows_before_limit_at_least</code>去掉 LIMIT过滤后的最小行总数。 只会在查询包含LIMIT条件时输出。<br> 若查询包含 GROUP BY，<code class=syntax>rows_before_limit_at_least</code>就是去掉LIMIT后过滤后的准确行数。</p> <p><code class=syntax>totals</code> – 总值 （当使用TOTALS条件时）。</p> <p><code class=syntax>extremes</code> – 极值（当extremes设置为1时）。</p> <p>该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>ClickHouse支持<a href=../../sql-reference/syntax/ >NULL</a>, 在JSON输出中显示为<code class=syntax>null</code>。若要在输出中启用<code class=syntax>+nan</code>、<code class=syntax>-nan</code>、<code class=syntax>+inf</code>、<code class=syntax>-inf</code>值，请设置<a href=../../operations/settings/settings/#settings-output_format_json_quote_denormals>output_format_json_quote_denormals</a>为1。</p> <p><strong>参考</strong></p> <ul> <li><a href=#jsoneachrow>JSONEachRow</a>格式</li> <li><a href=../../operations/settings/settings/#output-format-json-array-of-rows>output_format_json_array_of_rows</a>设置</li> </ul> <h2 id=jsonstring>JSONString<a class=headerlink href=#jsonstring title="Permanent link"> </a></h2> <p>与JSON的不同之处在于数据字段以字符串输出，而不是以类型化JSON值输出。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span>
        <span class=nt>"meta"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"'hello'"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"String"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"multiply(42, number)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"UInt64"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"range(5)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"Array(UInt8)"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"data"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"'hello'"</span><span class=p>:</span> <span class=s2>"hello"</span><span class=p>,</span>
                        <span class=nt>"multiply(42, number)"</span><span class=p>:</span> <span class=s2>"0"</span><span class=p>,</span>
                        <span class=nt>"range(5)"</span><span class=p>:</span> <span class=s2>"[0,1,2,3,4]"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"'hello'"</span><span class=p>:</span> <span class=s2>"hello"</span><span class=p>,</span>
                        <span class=nt>"multiply(42, number)"</span><span class=p>:</span> <span class=s2>"42"</span><span class=p>,</span>
                        <span class=nt>"range(5)"</span><span class=p>:</span> <span class=s2>"[0,1,2,3,4]"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"'hello'"</span><span class=p>:</span> <span class=s2>"hello"</span><span class=p>,</span>
                        <span class=nt>"multiply(42, number)"</span><span class=p>:</span> <span class=s2>"84"</span><span class=p>,</span>
                        <span class=nt>"range(5)"</span><span class=p>:</span> <span class=s2>"[0,1,2,3,4]"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"rows"</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>

        <span class=nt>"rows_before_limit_at_least"</span><span class=p>:</span> <span class=mi>3</span>
<span class=p>}</span>
</code></pre></div> <h2 id=jsonasstring>JSONAsString<a class=headerlink href=#jsonasstring title="Permanent link"> </a></h2> <p>在这种格式中，一个JSON对象被解释为一个值。如果输入有几个JSON对象(逗号分隔)，它们将被解释为独立的行。</p> <p>这种格式只能对具有单个字段类型的表进行解析<a href=../../sql-reference/data-types/string/ >String</a>。其余的列必须设置为<a href=../../sql-reference/statements/create/ >DEFAULT</a>或<a href=../../sql-reference/statements/create/ >MATERIALIZED</a>，或者忽略。一旦将整个JSON对象收集为字符串，就可以使用<a href=../../sql-reference/functions/json-functions/ >JSON函数</a>运行它。</p> <p><strong>示例</strong></p> <p>查询：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>json_as_string</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>json_as_string</span> <span class=p>(</span><span class=n>json</span> <span class=n>String</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_as_string</span> <span class=n>FORMAT</span> <span class=n>JSONAsString</span> <span class=err>{</span><span class=ss>"foo"</span><span class=p>:</span><span class=err>{</span><span class=ss>"bar"</span><span class=p>:</span><span class=err>{</span><span class=ss>"x"</span><span class=p>:</span><span class=ss>"y"</span><span class=err>}</span><span class=p>,</span><span class=ss>"baz"</span><span class=p>:</span><span class=mi>1</span><span class=err>}}</span><span class=p>,</span><span class=err>{}</span><span class=p>,</span><span class=err>{</span><span class=ss>"any json stucture"</span><span class=p>:</span><span class=mi>1</span><span class=err>}</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>json_as_string</span><span class=p>;</span>
</code></pre></div> <p>结果：</p> <div class=codehilite><pre><span></span><code class=syntax>┌─json──────────────────────────────┐
│ {"foo":{"bar":{"x":"y"},"baz":1}} │
│ {}                                │
│ {"any json stucture":1}           │
└───────────────────────────────────┘
</code></pre></div> <h2 id=jsoncompact>JSONCompact<a class=headerlink href=#jsoncompact title="Permanent link"> </a></h2> <h2 id=jsoncompactstring>JSONCompactString<a class=headerlink href=#jsoncompactstring title="Permanent link"> </a></h2> <p>与JSON格式不同的是它以数组的方式输出结果，而不是以结构体。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>//</span> <span class=err>JSONCompact</span>
<span class=p>{</span>
        <span class=nt>"meta"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"'hello'"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"String"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"multiply(42, number)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"UInt64"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"range(5)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"Array(UInt8)"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"data"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"0"</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]],</span>
                <span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"42"</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]],</span>
                <span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"84"</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]]</span>
        <span class=p>],</span>

        <span class=nt>"rows"</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>

        <span class=nt>"rows_before_limit_at_least"</span><span class=p>:</span> <span class=mi>3</span>
<span class=p>}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=err>//</span> <span class=err>JSONCompactString</span>
<span class=p>{</span>
        <span class=nt>"meta"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"'hello'"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"String"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"multiply(42, number)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"UInt64"</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>"name"</span><span class=p>:</span> <span class=s2>"range(5)"</span><span class=p>,</span>
                        <span class=nt>"type"</span><span class=p>:</span> <span class=s2>"Array(UInt8)"</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>"data"</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"0"</span><span class=p>,</span> <span class=s2>"[0,1,2,3,4]"</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"42"</span><span class=p>,</span> <span class=s2>"[0,1,2,3,4]"</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"84"</span><span class=p>,</span> <span class=s2>"[0,1,2,3,4]"</span><span class=p>]</span>
        <span class=p>],</span>

        <span class=nt>"rows"</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>

        <span class=nt>"rows_before_limit_at_least"</span><span class=p>:</span> <span class=mi>3</span>
<span class=p>}</span>
</code></pre></div> <h2 id=jsoneachrow>JSONEachRow<a class=headerlink href=#jsoneachrow title="Permanent link"> </a></h2> <h2 id=jsonstringeachrow>JSONStringEachRow<a class=headerlink href=#jsonstringeachrow title="Permanent link"> </a></h2> <h2 id=jsoncompacteachrow>JSONCompactEachRow<a class=headerlink href=#jsoncompacteachrow title="Permanent link"> </a></h2> <h2 id=jsoncompactstringeachrow>JSONCompactStringEachRow<a class=headerlink href=#jsoncompactstringeachrow title="Permanent link"> </a></h2> <p>使用这些格式时，ClickHouse会将行输出为分隔的、换行分隔的JSON值，但数据作为一个整体不是有效的JSON。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span><span class=nt>"some_int"</span><span class=p>:</span><span class=mi>42</span><span class=p>,</span><span class=nt>"some_str"</span><span class=p>:</span><span class=s2>"hello"</span><span class=p>,</span><span class=nt>"some_tuple"</span><span class=p>:[</span><span class=mi>1</span><span class=p>,</span><span class=s2>"a"</span><span class=p>]}</span> <span class=err>//</span> <span class=err>JSONEachRow</span>
<span class=p>[</span><span class=mi>42</span><span class=p>,</span><span class=s2>"hello"</span><span class=p>,[</span><span class=mi>1</span><span class=p>,</span><span class=s2>"a"</span><span class=p>]]</span> <span class=err>//</span> <span class=err>JSONCompactEachRow</span>
<span class=p>[</span><span class=s2>"42"</span><span class=p>,</span><span class=s2>"hello"</span><span class=p>,</span><span class=s2>"(2,'a')"</span><span class=p>]</span> <span class=err>//</span> <span class=err>JSONCompactStringsEachRow</span>
</code></pre></div> <p>在插入数据时，应该为每一行提供一个单独的JSON值。</p> <h2 id=jsoneachrowwithprogress>JSONEachRowWithProgress<a class=headerlink href=#jsoneachrowwithprogress title="Permanent link"> </a></h2> <h2 id=jsonstringeachrowwithprogress>JSONStringEachRowWithProgress<a class=headerlink href=#jsonstringeachrowwithprogress title="Permanent link"> </a></h2> <p>与<code class=syntax>JSONEachRow</code>/<code class=syntax>JSONStringEachRow</code>不同的是，ClickHouse还将生成作为JSON值的进度信息。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span><span class=nt>"row"</span><span class=p>:{</span><span class=nt>"'hello'"</span><span class=p>:</span><span class=s2>"hello"</span><span class=p>,</span><span class=nt>"multiply(42, number)"</span><span class=p>:</span><span class=s2>"0"</span><span class=p>,</span><span class=nt>"range(5)"</span><span class=p>:[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]}}</span>
<span class=p>{</span><span class=nt>"row"</span><span class=p>:{</span><span class=nt>"'hello'"</span><span class=p>:</span><span class=s2>"hello"</span><span class=p>,</span><span class=nt>"multiply(42, number)"</span><span class=p>:</span><span class=s2>"42"</span><span class=p>,</span><span class=nt>"range(5)"</span><span class=p>:[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]}}</span>
<span class=p>{</span><span class=nt>"row"</span><span class=p>:{</span><span class=nt>"'hello'"</span><span class=p>:</span><span class=s2>"hello"</span><span class=p>,</span><span class=nt>"multiply(42, number)"</span><span class=p>:</span><span class=s2>"84"</span><span class=p>,</span><span class=nt>"range(5)"</span><span class=p>:[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]}}</span>
<span class=p>{</span><span class=nt>"progress"</span><span class=p>:{</span><span class=nt>"read_rows"</span><span class=p>:</span><span class=s2>"3"</span><span class=p>,</span><span class=nt>"read_bytes"</span><span class=p>:</span><span class=s2>"24"</span><span class=p>,</span><span class=nt>"written_rows"</span><span class=p>:</span><span class=s2>"0"</span><span class=p>,</span><span class=nt>"written_bytes"</span><span class=p>:</span><span class=s2>"0"</span><span class=p>,</span><span class=nt>"total_rows_to_read"</span><span class=p>:</span><span class=s2>"3"</span><span class=p>}}</span>
</code></pre></div> <h2 id=jsoncompacteachrowwithnamesandtypes>JSONCompactEachRowWithNamesAndTypes<a class=headerlink href=#jsoncompacteachrowwithnamesandtypes title="Permanent link"> </a></h2> <h2 id=jsoncompactstringeachrowwithnamesandtypes>JSONCompactStringEachRowWithNamesAndTypes<a class=headerlink href=#jsoncompactstringeachrowwithnamesandtypes title="Permanent link"> </a></h2> <p>与<code class=syntax>JSONCompactEachRow</code>/<code class=syntax>JSONCompactStringEachRow</code>不同的是，其中列名和类型被写入前两行。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>[</span><span class=s2>"'hello'"</span><span class=p>,</span> <span class=s2>"multiply(42, number)"</span><span class=p>,</span> <span class=s2>"range(5)"</span><span class=p>]</span>
<span class=p>[</span><span class=s2>"String"</span><span class=p>,</span> <span class=s2>"UInt64"</span><span class=p>,</span> <span class=s2>"Array(UInt8)"</span><span class=p>]</span>
<span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"0"</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]]</span>
<span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"42"</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]]</span>
<span class=p>[</span><span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"84"</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]]</span>
</code></pre></div> <h3 id=inserting-data>Inserting Data<a class=headerlink href=#inserting-data title="Permanent link"> </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"PageViews"</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span> <span class=ss>"UserID"</span><span class=p>:</span><span class=ss>"4324182021466249494"</span><span class=p>,</span> <span class=ss>"Duration"</span><span class=p>:</span><span class=mi>146</span><span class=p>,</span><span class=ss>"Sign"</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=err>}</span> <span class=err>{</span><span class=ss>"UserID"</span><span class=p>:</span><span class=ss>"4324182021466249494"</span><span class=p>,</span><span class=ss>"PageViews"</span><span class=p>:</span><span class=mi>6</span><span class=p>,</span><span class=ss>"Duration"</span><span class=p>:</span><span class=mi>185</span><span class=p>,</span><span class=ss>"Sign"</span><span class=p>:</span><span class=mi>1</span><span class=err>}</span>
</code></pre></div> <p>ClickHouse允许:</p> <ul> <li>对象中key-value的任何顺序。</li> <li>省略一些值。</li> </ul> <p>ClickHouse忽略元素之间的空格和对象后面的逗号。您可以在一行中传递所有对象。你不需要用换行符把它们分开。</p> <p><strong>省略值处理</strong></p> <p>ClickHouse将省略的值替换为对应的<a href=../../sql-reference/data-types/ >data types</a>默认值。</p> <p>如果指定了<code class=syntax>DEFAULT expr</code>，则ClickHouse根据属性使用不同的替换规则，详看<a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>设置。</p> <p>参考下表：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>x</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=n>a</span> <span class=k>DEFAULT</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
</code></pre></div> <ul> <li>如果<code class=syntax>input_format_defaults_for_omitted_fields = 0</code>, 那么<code class=syntax>x</code>和<code class=syntax>a</code>的默认值等于<code class=syntax>0</code>(作为<code class=syntax>UInt32</code>数据类型的默认值)。</li> <li>如果<code class=syntax>input_format_defaults_for_omitted_fields = 1</code>, 那么<code class=syntax>x</code>的默认值为<code class=syntax>0</code>，但<code class=syntax>a</code>的默认值为<code class=syntax>x * 2</code>。</li> </ul> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">注意</p> </div> <p>当使用<code class=syntax>insert_sample_with_metadata = 1</code>插入数据时，与使用<code class=syntax>insert_sample_with_metadata = 0</code>插入数据相比，ClickHouse消耗更多的计算资源。</p> <h3 id=selecting-data>Selecting Data<a class=headerlink href=#selecting-data title="Permanent link"> </a></h3> <p>以<code class=syntax>UserActivity</code>表为例:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────────UserID─┬─PageViews─┬─Duration─┬─Sign─┐
│ 4324182021466249494 │         5 │      146 │   -1 │
│ 4324182021466249494 │         6 │      185 │    1 │
└─────────────────────┴───────────┴──────────┴──────┘
</code></pre></div> <p>当查询<code class=syntax>SELECT * FROM UserActivity FORMAT JSONEachRow</code>返回:</p> <div class=codehilite><pre><span></span><code class=syntax>{"UserID":"4324182021466249494","PageViews":5,"Duration":146,"Sign":-1}
{"UserID":"4324182021466249494","PageViews":6,"Duration":185,"Sign":1}
</code></pre></div> <p>与<a href=#json>JSON</a>格式不同，没有替换无效的UTF-8序列。值以与<code class=syntax>JSON</code>相同的方式转义。</p> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">提示</p> </div> <p>字符串中可以输出任意一组字节。如果您确信表中的数据可以被格式化为JSON而不会丢失任何信息，那么就使用<code class=syntax>JSONEachRow</code>格式。</p> <h3 id=jsoneachrow-nested>Nested Structures<a class=headerlink href=#jsoneachrow-nested title="Permanent link"> </a></h3> <p>如果您有一个包含<a href=../../sql-reference/data-types/nested-data-structures/nested/ >Nested</a>数据类型列的表，您可以插入具有相同结构的JSON数据。使用<a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json</a>设置启用该特性。</p> <p>例如，请参考下表:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>json_each_row_nested</span> <span class=p>(</span><span class=n>n</span> <span class=n>Nested</span> <span class=p>(</span><span class=n>s</span> <span class=n>String</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span>
</code></pre></div> <p>正如您在<code class=syntax>Nested</code>数据类型描述中看到的，ClickHouse将嵌套结构的每个组件作为一个单独的列(<code class=syntax>n.s</code>和<code class=syntax>n.i</code>是我们的表)。您可以通过以下方式插入数据:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"n.s"</span><span class=p>:</span> <span class=p>[</span><span class=ss>"abc"</span><span class=p>,</span> <span class=ss>"def"</span><span class=p>],</span> <span class=ss>"n.i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}</span>
</code></pre></div> <p>将数据作为分层JSON对象集插入<a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json=1</a>。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>{</span>
    <span class=nt>"n"</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>"s"</span><span class=p>:</span> <span class=p>[</span><span class=s2>"abc"</span><span class=p>,</span> <span class=s2>"def"</span><span class=p>],</span>
        <span class=nt>"i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>如果没有此设置，ClickHouse将引发异常。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>'input_format_import_nested_json'</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─name────────────────────────────┬─value─┐
│ input_format_import_nested_json │ 0     │
└─────────────────────────────────┴───────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"n"</span><span class=p>:</span> <span class=err>{</span><span class=ss>"s"</span><span class=p>:</span> <span class=p>[</span><span class=ss>"abc"</span><span class=p>,</span> <span class=ss>"def"</span><span class=p>],</span> <span class=ss>"i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>input_format_import_nested_json</span><span class=o>=</span><span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>"n"</span><span class=p>:</span> <span class=err>{</span><span class=ss>"s"</span><span class=p>:</span> <span class=p>[</span><span class=ss>"abc"</span><span class=p>,</span> <span class=ss>"def"</span><span class=p>],</span> <span class=ss>"i"</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>json_each_row_nested</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─n.s───────────┬─n.i────┐
│ ['abc','def'] │ [1,23] │
└───────────────┴────────┘
</code></pre></div> <h2 id=native>Native<a class=headerlink href=#native title="Permanent link"> </a></h2> <p>最高性能的格式。通过二进制格式的块进行写入和读取。对于每个块，该中的行数，列数，列名称和类型以及列的部分将被相继记录。 换句话说，这种格式是<code class=syntax>columnar</code>的 - 它不会将列转换为行。这是用于在服务器之间进行交互的本地界面中使用的格式，用于使用命令行客户端和C++客户端。</p> <p>您可以使用此格式快速生成只能由ClickHouse DBMS读取的格式。但自己处理这种格式是没有意义的。</p> <h2 id=null>Null<a class=headerlink href=#null title="Permanent link"> </a></h2> <p>没有输出。但是，查询已处理完毕，并且在使用命令行客户端时，数据将传输到客户端。这仅用于测试，包括性能测试。<br> 显然，这种格式只适用于输出，不适用于解析。</p> <h2 id=pretty>Pretty<a class=headerlink href=#pretty title="Permanent link"> </a></h2> <p>将数据以表格形式输出，也可以使用ANSI转义字符在终端中设置颜色。<br> 它会绘制一个完整的表格，每行数据在终端中占用两行。<br> 每个结果块作为一个单独的表输出。这是必要的，以便在输出块时不需要缓冲结果(为了预先计算所有值的可见宽度，缓冲是必要的)。</p> <p><a href=../../sql-reference/syntax/ >NULL</a>输出为<code class=syntax>ᴺᵁᴸᴸ</code>。</p> <p>示例(显示<a href=#prettycompact>PrettyCompact</a>格式)</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┬────y─┐
│ 1 │ ᴺᵁᴸᴸ │
└───┴──────┘
</code></pre></div> <p>行没有转义为Pretty* 格式。示例显示了<a href=#prettycompact>PrettyCompact</a>格式:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'String with \'</span><span class=n>quotes</span><span class=err>\</span><span class=s1>' and \t character'</span> <span class=k>AS</span> <span class=n>Escaping_test</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─Escaping_test────────────────────────┐
│ String with 'quotes' and      character │
└──────────────────────────────────────┘
</code></pre></div> <p>为避免将太多数据传输到终端，只打印前10,000行。 如果行数大于或等于10,000，则会显示消息<code class=syntax>Showed first 10 000</code>。<br> 该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <p>Pretty格式支持输出合计值(当使用WITH TOTALS时)和极值(当<code class=syntax>extremes</code>设置为1时)。在这些情况下，合计值和极值将输出在主要数据之后，在单独的表中。示例(显示为<a href=#prettycompact>PrettyCompact</a>格式):</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>PrettyCompact</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1406958 │
│ 2014-03-18 │ 1383658 │
│ 2014-03-19 │ 1405797 │
│ 2014-03-20 │ 1353623 │
│ 2014-03-21 │ 1245779 │
│ 2014-03-22 │ 1031592 │
│ 2014-03-23 │ 1046491 │
└────────────┴─────────┘

Totals:
┌──EventDate─┬───────c─┐
│ 1970-01-01 │ 8873898 │
└────────────┴─────────┘

Extremes:
┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1031592 │
│ 2014-03-23 │ 1406958 │
└────────────┴─────────┘
</code></pre></div> <h2 id=prettycompact>PrettyCompact<a class=headerlink href=#prettycompact title="Permanent link"> </a></h2> <p>与<a href=#pretty>Pretty</a>格式不一样的是<code class=syntax>PrettyCompact</code>去掉了行之间的表格分割线，这样使得结果更加紧凑。<br> 这种格式会在交互命令行客户端下默认使用。</p> <h2 id=prettycompactmonoblock>PrettyCompactMonoBlock<a class=headerlink href=#prettycompactmonoblock title="Permanent link"> </a></h2> <p>与<a href=#prettycompact>PrettyCompact</a>格式不一样的是，它支持10,000行数据缓冲，然后输出在一个表格中，不会按照块来区分。</p> <h2 id=prettynoescapes>PrettyNoEscapes<a class=headerlink href=#prettynoescapes title="Permanent link"> </a></h2> <p>与<code class=syntax>Pretty</code>格式不一样的是，它不使用ANSI字符转义，这在浏览器显示数据以及在使用<code class=syntax>watch</code>命令行工具是有必要的。</p> <p>示例：</p> <div class=codehilite><pre><span></span><code class=syntax>watch -n1 <span class=s2>"clickhouse-client --query='SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes'"</span>
</code></pre></div> <p>您可以使用HTTP接口来获取数据，显示在浏览器中。</p> <h3 id=prettycompactnoescapes>PrettyCompactNoEscapes<a class=headerlink href=#prettycompactnoescapes title="Permanent link"> </a></h3> <p>用法类似上述。</p> <h3 id=prettyspacenoescapes>PrettySpaceNoEscapes<a class=headerlink href=#prettyspacenoescapes title="Permanent link"> </a></h3> <p>用法类似上述。</p> <h3 id=prettycompactnoescapes>PrettyCompactNoEscapes<a class=headerlink href=#prettycompactnoescapes title="Permanent link"> </a></h3> <p>与前面的设置相同。</p> <h3 id=prettyspacenoescapes>PrettySpaceNoEscapes<a class=headerlink href=#prettyspacenoescapes title="Permanent link"> </a></h3> <p>与前面的设置相同。</p> <h2 id=prettyspace>PrettySpace<a class=headerlink href=#prettyspace title="Permanent link"> </a></h2> <p>与<a href=#prettycompact>PrettyCompact</a>格式不一样的是，它使用空格来代替网格来显示数据。</p> <h2 id=rowbinary>RowBinary<a class=headerlink href=#rowbinary title="Permanent link"> </a></h2> <p>以二进制格式逐行格式化和解析数据。行和值连续列出，没有分隔符。<br> 这种格式比 Native 格式效率低，因为它是基于行的。</p> <p>整数使用固定长度的小端表示法。 例如，UInt64 使用8个字节。<br> DateTime 被表示为 UInt32 类型的Unix 时间戳值。<br> Date 被表示为 UInt16 对象，它的值为 1970-01-01以来的天数。<br> 字符串表示为 varint 长度（无符号 <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer" target=_blank>LEB128</a>），后跟字符串的字节数。<br> FixedString 被简单地表示为一个字节序列。</p> <p>数组表示为 varint 长度（无符号 <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer" target=_blank>LEB128</a>），后跟有序的数组元素。</p> <p>对于 <a href=../../sql-reference/syntax/#null-literal>NULL</a> 的支持， 一个为 1 或 0 的字节会加在每个 <a href=../../sql-reference/data-types/nullable/ >可为空</a> 值前面。如果为 1, 那么该值就是 <code class=syntax>NULL</code>。 如果为 0，则不为 <code class=syntax>NULL</code>。</p> <h2 id=rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes<a class=headerlink href=#rowbinarywithnamesandtypes title="Permanent link"> </a></h2> <p>类似于 <a href=#rowbinary>RowBinary</a>，但添加了标题:</p> <ul> <li><a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow noreferrer" target=_blank>LEB128</a>-编码列数（N)</li> <li>N <code class=syntax>String</code>s指定列名</li> <li>N <code class=syntax>String</code>s指定列类型</li> </ul> <h2 id=data-format-values>值<a class=headerlink href=#data-format-values title="Permanent link"> </a></h2> <p>在括号中打印每一行。行由逗号分隔。最后一行之后没有逗号。括号内的值也用逗号分隔。数字以十进制格式输出，不含引号。 数组以方括号输出。带有时间的字符串，日期和时间用引号包围输出。转义字符的解析规则与 <a href=#tabseparated>TabSeparated</a> 格式类似。 在格式化过程中，不插入额外的空格，但在解析过程中，空格是被允许并跳过的（除了数组值之外的空格，这是不允许的）。<a href=../../sql-reference/syntax/ >NULL</a> 为 <code class=syntax>NULL</code>。</p> <p>以 Values 格式传递数据时需要转义的最小字符集是：单引号和反斜线。</p> <p>这是 <code class=syntax>INSERT INTO t VALUES ...</code> 中可以使用的格式，但您也可以将其用于查询结果。</p> <h2 id=vertical>垂直<a class=headerlink href=#vertical title="Permanent link"> </a></h2> <p>使用指定的列名在单独的行上打印每个值。如果每行都包含大量列，则此格式便于打印一行或几行。</p> <p><a href=../../sql-reference/syntax/ >NULL</a> 输出为 <code class=syntax>ᴺᵁᴸᴸ</code>。</p> <p>示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=err>Row 1:</span>
<span class=err>──────</span>
<span class=c>x: 1</span>
<span class=c>y: ᴺᵁᴸᴸ</span>
</code></pre></div> <p>该格式仅适用于输出查询结果，但不适用于解析输入（将数据插入到表中）。</p> <h2 id=verticalraw>VerticalRaw<a class=headerlink href=#verticalraw title="Permanent link"> </a></h2> <p>和 <code class=syntax>Vertical</code> 格式不同点在于，行是不会被转义的。<br> 这种格式仅仅适用于输出，但不适用于解析输入（将数据插入到表中）。</p> <p>示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=p>:)</span> <span class=k>SHOW</span> <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>geonames</span> <span class=n>FORMAT</span> <span class=n>VerticalRaw</span><span class=p>;</span>
<span class=k>Row</span> <span class=mi>1</span><span class=p>:</span>
<span class=err>──────</span>
<span class=k>statement</span><span class=p>:</span> <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>default</span><span class=p>.</span><span class=n>geonames</span> <span class=p>(</span> <span class=n>geonameid</span> <span class=n>UInt32</span><span class=p>,</span> <span class=nb>date</span> <span class=nb>Date</span> <span class=k>DEFAULT</span> <span class=k>CAST</span><span class=p>(</span><span class=s1>'2017-12-08'</span> <span class=k>AS</span> <span class=nb>Date</span><span class=p>))</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>(</span><span class=nb>date</span><span class=p>,</span> <span class=n>geonameid</span><span class=p>,</span> <span class=mi>8192</span><span class=p>)</span>

<span class=p>:)</span> <span class=k>SELECT</span> <span class=s1>'string with \'</span><span class=n>quotes</span><span class=err>\</span><span class=s1>' and \t with some special \n characters'</span> <span class=k>AS</span> <span class=n>test</span> <span class=n>FORMAT</span> <span class=n>VerticalRaw</span><span class=p>;</span>
<span class=k>Row</span> <span class=mi>1</span><span class=p>:</span>
<span class=err>──────</span>
<span class=n>test</span><span class=p>:</span> <span class=n>string</span> <span class=k>with</span> <span class=s1>'quotes'</span> <span class=k>and</span>   <span class=k>with</span> <span class=k>some</span> <span class=n>special</span>
 <span class=n>characters</span>
</code></pre></div> <p>和 Vertical 格式相比：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>:) SELECT 'string with \'quotes\' and \t with some special \n characters' AS test FORMAT Vertical;</span>
<span class=err>Row 1:</span>
<span class=err>──────</span>
<span class=c>test: string with \'quotes\' and \t with some special \n characters</span>
</code></pre></div> <h2 id=xml>XML<a class=headerlink href=#xml title="Permanent link"> </a></h2> <p>该格式仅适用于输出查询结果，但不适用于解析输入，示例：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cp>&lt;?xml version='1.0' encoding='UTF-8' ?&gt;</span>
<span class=nt>&lt;result&gt;</span>
        <span class=nt>&lt;meta&gt;</span>
                <span class=nt>&lt;columns&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>SearchPhrase<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>count()<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                <span class=nt>&lt;/columns&gt;</span>
        <span class=nt>&lt;/meta&gt;</span>
        <span class=nt>&lt;data&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>8267016<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>bathroom interior design<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>2166<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>yandex<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1655<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>2014 spring fashion<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1549<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>freeform photos<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1480<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>angelina jolie<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1245<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>omsk<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1112<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>photos of dog breeds<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1091<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>curtain designs<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1064<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>baku<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1000<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
        <span class=nt>&lt;/data&gt;</span>
        <span class=nt>&lt;rows&gt;</span>10<span class=nt>&lt;/rows&gt;</span>
        <span class=nt>&lt;rows_before_limit_at_least&gt;</span>141137<span class=nt>&lt;/rows_before_limit_at_least&gt;</span>
<span class=nt>&lt;/result&gt;</span>
</code></pre></div> <p>如果列名称没有可接受的格式，则仅使用 <code class=syntax>field</code> 作为元素名称。 通常，XML 结构遵循 JSON 结构。<br> 就像JSON一样，将无效的 UTF-8 字符都作替换，以便输出文本将包含有效的 UTF-8 字符序列。</p> <p>在字符串值中，字符 <code class=syntax>&lt;</code> 和 <code class=syntax>＆</code> 被转义为 <code class=syntax>&lt;</code> 和 <code class=syntax>＆</code>。</p> <p>数组输出为 <code class=syntax>&lt;array&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ elem&gt; ... &lt;/ array&gt;</code>，元组输出为 <code class=syntax>&lt;tuple&gt; &lt;elem&gt; Hello &lt;/ elem&gt; &lt;elem&gt; World &lt;/ ELEM&gt; ... &lt;/tuple&gt;</code> 。</p> <h2 id=capnproto>CapnProto<a class=headerlink href=#capnproto title="Permanent link"> </a></h2> <p>Cap’n Proto 是一种二进制消息格式，类似 Protocol Buffers 和 Thriftis，但与 JSON 或 MessagePack 格式不一样。</p> <p>Cap’n Proto 消息格式是严格类型的，而不是自我描述，这意味着它们不需要外部的描述。这种格式可以实时地应用，并针对每个查询进行缓存。</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
       <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=n>FORMAT</span> <span class=n>CapnProto</span> <span class=n>SETTINGS</span> <span class=k>schema</span> <span class=o>=</span> <span class=s1>'schema:Message'</span>
</code></pre></div> <p>其中 <code class=syntax>schema.capnp</code> 描述如下：</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>struct</span> <span class=n>Message</span> <span class=p>{</span>
  <span class=n>SearchPhrase</span> <span class=mi>@0</span> <span class=o>:</span><span class=n>Text</span><span class=p>;</span>
  <span class=n>c</span> <span class=mi>@1</span> <span class=o>:</span><span class=n>Uint64</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>格式文件存储的目录可以在服务配置中的 <a href=../../operations/server-configuration-parameters/settings/ >format_schema_path</a> 指定。</p> <p>Cap’n Proto 反序列化是很高效的，通常不会增加系统的负载。</p> <h2 id=protobuf>Protobuf<a class=headerlink href=#protobuf title="Permanent link"> </a></h2> <p>Protobuf-是一个 <a href=https://developers.google.com/protocol-buffers/ rel="external nofollow noreferrer" target=_blank>协议缓冲区</a> 格式。</p> <p>此格式需要外部格式架构。 在查询之间缓存架构。<br> ClickHouse支持 <code class=syntax>proto2</code> 和 <code class=syntax>proto3</code> 语法 支持重复/可选/必填字段。</p> <p>使用示例:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=k>table</span> <span class=n>FORMAT</span> <span class=n>Protobuf</span> <span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>'schemafile:MessageType'</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>cat protobuf_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>"INSERT INTO test.table FORMAT Protobuf SETTINGS format_schema='schemafile:MessageType'"</span>
</code></pre></div> <p>哪里的文件 <code class=syntax>schemafile.proto</code> 看起来像这样:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>syntax</span> <span class=l>= "proto3"</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>string</span> <span class=n>name</span> <span class=l>= 1</span>;
  <span class=n>string</span> <span class=n>surname</span> <span class=l>= 2</span>;
  <span class=n>uint32</span> <span class=n>birthDate</span> <span class=l>= 3</span>;
  <span class=n>repeated</span> <span class=n>string</span> <span class=n>phoneNumbers</span> <span class=l>= 4</span>;
};
</code></pre></div> <p>要查找协议缓冲区的消息类型的表列和字段之间的对应关系，ClickHouse比较它们的名称。<br> 这种比较是不区分大小写和字符 <code class=syntax>_</code> (下划线)和 <code class=syntax>.</code> （点）被认为是相等的。<br> 如果协议缓冲区消息的列和字段的类型不同，则应用必要的转换。</p> <p>支持嵌套消息。 例如，对于字段 <code class=syntax>z</code> 在下面的消息类型</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>message</span> <span class=n>XType</span> {
    <span class=n>message</span> <span class=n>YType</span> {
      <span class=n>int32</span> <span class=n>z</span>;
    };
    <span class=n>repeated</span> <span class=n>YType</span> <span class=n>y</span>;
  };
  <span class=n>XType</span> <span class=n>x</span>;
};
</code></pre></div> <p>ClickHouse尝试找到一个名为 <code class=syntax>x.y.z</code> （或 <code class=syntax>x_y_z</code> 或 <code class=syntax>X.y_Z</code> 等）。<br> 嵌套消息适用于输入或输出一个 <a href=../../sql-reference/data-types/nested-data-structures/nested/ >嵌套数据结构</a>.</p> <p>在protobuf模式中定义的默认值，如下所示</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>syntax</span> <span class=l>= "proto2"</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>optional</span> <span class=n>int32</span> <span class=n>result_per_page</span> <span class=l>= 3 [default = 10]</span>;
}
</code></pre></div> <p>不应用;该 <a href=../../sql-reference/statements/create/#create-default-values>表默认值</a> 用来代替它们。</p> <p>ClickHouse在输入和输出protobuf消息 <code class=syntax>length-delimited</code> 格式。<br> 这意味着每个消息之前，应该写它的长度作为一个 <a href=https://developers.google.com/protocol-buffers/docs/encoding#varints rel="external nofollow noreferrer" target=_blank>varint</a>.<br> 另请参阅 <a href=https://cwiki.apache.org/confluence/display/GEODE/Delimiting+Protobuf+Messages rel="external nofollow noreferrer" target=_blank>如何在流行语言中读取/写入长度分隔的protobuf消息</a>.</p> <h2 id=data-format-avro>Avro<a class=headerlink href=#data-format-avro title="Permanent link"> </a></h2> <p><a href=http://avro.apache.org/ rel="external nofollow noreferrer" target=_blank>Apache Avro</a> 是在Apache Hadoop项目中开发的面向行的数据序列化框架。</p> <p>ClickHouse Avro格式支持读取和写入 <a href=http://avro.apache.org/docs/current/spec.html#Object+Container+Files rel="external nofollow noreferrer" target=_blank>Avro数据文件</a>.</p> <h3 id=data-types-matching-sql_referencedata_types-matching>数据类型匹配{#sql_reference/data_types-matching}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching title="Permanent link"> </a></h3> <p>下表显示了支持的数据类型以及它们如何匹配ClickHouse <a href=../../sql-reference/data-types/ >数据类型</a> 在 <code class=syntax>INSERT</code> 和 <code class=syntax>SELECT</code> 查询。</p> <table> <thead> <tr> <th>Avro数据类型 <code class=syntax>INSERT</code></th> <th>ClickHouse数据类型</th> <th>Avro数据类型 <code class=syntax>SELECT</code></th> </tr> </thead> <tbody> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int(8/16/32)</a>, <a href=../../sql-reference/data-types/int-uint/ >UInt(8/16/32)</a></td> <td><code class=syntax>int</code></td> </tr> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int64</a>, <a href=../../sql-reference/data-types/int-uint/ >UInt64</a></td> <td><code class=syntax>long</code></td> </tr> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../sql-reference/data-types/float/ >Float32</a></td> <td><code class=syntax>float</code></td> </tr> <tr> <td><code class=syntax>boolean</code>, <code class=syntax>int</code>, <code class=syntax>long</code>, <code class=syntax>float</code>, <code class=syntax>double</code></td> <td><a href=../../sql-reference/data-types/float/ >Float64</a></td> <td><code class=syntax>double</code></td> </tr> <tr> <td><code class=syntax>bytes</code>, <code class=syntax>string</code>, <code class=syntax>fixed</code>, <code class=syntax>enum</code></td> <td><a href=../../sql-reference/data-types/string/ >字符串</a></td> <td><code class=syntax>bytes</code></td> </tr> <tr> <td><code class=syntax>bytes</code>, <code class=syntax>string</code>, <code class=syntax>fixed</code></td> <td><a href=../../sql-reference/data-types/fixedstring/ >固定字符串(N)</a></td> <td><code class=syntax>fixed(N)</code></td> </tr> <tr> <td><code class=syntax>enum</code></td> <td><a href=../../sql-reference/data-types/enum/ >枚举(8/16)</a></td> <td><code class=syntax>enum</code></td> </tr> <tr> <td><code class=syntax>array(T)</code></td> <td><a href=../../sql-reference/data-types/array/ >阵列(T)</a></td> <td><code class=syntax>array(T)</code></td> </tr> <tr> <td><code class=syntax>union(null, T)</code>, <code class=syntax>union(T, null)</code></td> <td><a href=../../sql-reference/data-types/date/ >可为空(T)</a></td> <td><code class=syntax>union(null, T)</code></td> </tr> <tr> <td><code class=syntax>null</code></td> <td><a href=../../sql-reference/data-types/special-data-types/nothing/ >可为空（无)</a></td> <td><code class=syntax>null</code></td> </tr> <tr> <td><code class=syntax>int (date)</code> *</td> <td><a href=../../sql-reference/data-types/date/ >日期</a></td> <td><code class=syntax>int (date)</code> *</td> </tr> <tr> <td><code class=syntax>long (timestamp-millis)</code> *</td> <td><a href=../../sql-reference/data-types/datetime/ >DateTime64(3)</a></td> <td><code class=syntax>long (timestamp-millis)</code> *</td> </tr> <tr> <td><code class=syntax>long (timestamp-micros)</code> *</td> <td><a href=../../sql-reference/data-types/datetime/ >DateTime64(6)</a></td> <td><code class=syntax>long (timestamp-micros)</code> *</td> </tr> </tbody> </table> <p>* <a href=http://avro.apache.org/docs/current/spec.html#Logical+Types rel="external nofollow noreferrer" target=_blank>Avro逻辑类型</a></p> <p>不支持的Avro数据类型: <code class=syntax>record</code> （非根), <code class=syntax>map</code></p> <p>不支持的Avro逻辑数据类型: <code class=syntax>uuid</code>, <code class=syntax>time-millis</code>, <code class=syntax>time-micros</code>, <code class=syntax>duration</code></p> <h3 id=inserting-data>插入数据<a class=headerlink href=#inserting-data title="Permanent link"> </a></h3> <p>将Avro文件中的数据插入ClickHouse表:</p> <div class=codehilite><pre><span></span><code class=syntax>$ cat file.avro <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO {some_table} FORMAT Avro"</span>
</code></pre></div> <p>输入Avro文件的根模式必须是 <code class=syntax>record</code> 类型。</p> <p>要查找Avro schema的表列和字段之间的对应关系，ClickHouse比较它们的名称。 此比较区分大小写。<br> 跳过未使用的字段。</p> <p>ClickHouse表列的数据类型可能与插入的Avro数据的相应字段不同。 插入数据时，ClickHouse根据上表解释数据类型，然后 <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>投</a> 将数据转换为相应的列类型。</p> <h3 id=selecting-data>选择数据<a class=headerlink href=#selecting-data title="Permanent link"> </a></h3> <p>从ClickHouse表中选择数据到Avro文件:</p> <div class=codehilite><pre><span></span><code class=syntax>$ clickhouse-client --query<span class=o>=</span><span class=s2>"SELECT * FROM {some_table} FORMAT Avro"</span> &gt; file.avro
</code></pre></div> <p>列名必须:</p> <ul> <li>名,名,名,名 <code class=syntax>[A-Za-z_]</code></li> <li>随后只包含 <code class=syntax>[A-Za-z0-9_]</code></li> </ul> <p>输出Avro文件压缩和同步间隔可以配置 <a href=../../operations/settings/settings/#settings-output_format_avro_codec>output_format_avro_codec</a> 和 <a href=../../operations/settings/settings/#settings-output_format_avro_sync_interval>output_format_avro_sync_interval</a> 分别。</p> <h2 id=data-format-avro-confluent>AvroConfluent<a class=headerlink href=#data-format-avro-confluent title="Permanent link"> </a></h2> <p>AvroConfluent支持解码单对象Avro消息常用于 <a href=https://kafka.apache.org/ rel="external nofollow noreferrer" target=_blank>卡夫卡</a> 和 <a href=https://docs.confluent.io/current/schema-registry/index.html rel="external nofollow noreferrer" target=_blank>汇合的模式注册表</a>.</p> <p>每个Avro消息都嵌入了一个架构id，该架构id可以在架构注册表的帮助下解析为实际架构。</p> <p>模式解析后会进行缓存。</p> <p>架构注册表URL配置为 <a href=../../operations/settings/settings/#settings-format_avro_schema_registry_url>format_avro_schema_registry_url</a></p> <h3 id=data-types-matching-sql_referencedata_types-matching-1>数据类型匹配{#sql_reference/data_types-matching-1}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching-1 title="Permanent link"> </a></h3> <p>和 <a href=#data-format-avro>Avro</a></p> <h3 id=usage>用途<a class=headerlink href=#usage title="Permanent link"> </a></h3> <p>要快速验证架构解析，您可以使用 <a href=https://github.com/edenhill/kafkacat rel="external nofollow noreferrer" target=_blank>kafkacat</a> 与 <a href=../../operations/utilities/clickhouse-local/ >ﾂ环板-ｮﾂ嘉ｯﾂ偲</a>:</p> <div class=codehilite><pre><span></span><code class=syntax>$ kafkacat -b kafka-broker  -C -t topic1 -o beginning -f <span class=s1>'%s'</span> -c <span class=m>3</span> <span class=p>|</span> clickhouse-local   --input-format AvroConfluent --format_avro_schema_registry_url <span class=s1>'http://schema-registry'</span> -S <span class=s2>"field1 Int64, field2 String"</span>  -q <span class=s1>'select *  from table'</span>
<span class=m>1</span> a
<span class=m>2</span> b
<span class=m>3</span> c
</code></pre></div> <p>使用 <code class=syntax>AvroConfluent</code> 与 <a href=../../engines/table-engines/integrations/kafka/ >卡夫卡</a>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>topic1_stream</span>
<span class=p>(</span>
    <span class=n>field1</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>field2</span> <span class=n>String</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Kafka</span><span class=p>()</span>
<span class=n>SETTINGS</span>
<span class=n>kafka_broker_list</span> <span class=o>=</span> <span class=s1>'kafka-broker'</span><span class=p>,</span>
<span class=n>kafka_topic_list</span> <span class=o>=</span> <span class=s1>'topic1'</span><span class=p>,</span>
<span class=n>kafka_group_name</span> <span class=o>=</span> <span class=s1>'group1'</span><span class=p>,</span>
<span class=n>kafka_format</span> <span class=o>=</span> <span class=s1>'AvroConfluent'</span><span class=p>;</span>

<span class=k>SET</span> <span class=n>format_avro_schema_registry_url</span> <span class=o>=</span> <span class=s1>'http://schema-registry'</span><span class=p>;</span>

<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>topic1_stream</span><span class=p>;</span>
</code></pre></div> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">警告</p> <p>设置 <code class=syntax>format_avro_schema_registry_url</code> 需要在配置 <code class=syntax>users.xml</code> restart动后保持它的价值。</p> </div> <h2 id=data-format-parquet>Parquet<a class=headerlink href=#data-format-parquet title="Permanent link"> </a></h2> <p><a href=http://parquet.apache.org/ rel="external nofollow noreferrer" target=_blank>Apache Parquet</a> 是Hadoop生态系统中普遍存在的列式存储格式。 ClickHouse支持此格式的读写操作。</p> <h3 id=data-types-matching-sql_referencedata_types-matching-2>数据类型匹配{#sql_reference/data_types-matching-2}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching-2 title="Permanent link"> </a></h3> <p>下表显示了支持的数据类型以及它们如何匹配ClickHouse <a href=../../sql-reference/data-types/ >数据类型</a> 在 <code class=syntax>INSERT</code> 和 <code class=syntax>SELECT</code> 查询。</p> <table> <thead> <tr> <th>Parquet数据类型 (<code class=syntax>INSERT</code>)</th> <th>ClickHouse数据类型</th> <th>Parquet数据类型 (<code class=syntax>SELECT</code>)</th> </tr> </thead> <tbody> <tr> <td><code class=syntax>UINT8</code>, <code class=syntax>BOOL</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt8</a></td> <td><code class=syntax>UINT8</code></td> </tr> <tr> <td><code class=syntax>INT8</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int8</a></td> <td><code class=syntax>INT8</code></td> </tr> <tr> <td><code class=syntax>UINT16</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt16</a></td> <td><code class=syntax>UINT16</code></td> </tr> <tr> <td><code class=syntax>INT16</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int16</a></td> <td><code class=syntax>INT16</code></td> </tr> <tr> <td><code class=syntax>UINT32</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt32</a></td> <td><code class=syntax>UINT32</code></td> </tr> <tr> <td><code class=syntax>INT32</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int32</a></td> <td><code class=syntax>INT32</code></td> </tr> <tr> <td><code class=syntax>UINT64</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt64</a></td> <td><code class=syntax>UINT64</code></td> </tr> <tr> <td><code class=syntax>INT64</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int64</a></td> <td><code class=syntax>INT64</code></td> </tr> <tr> <td><code class=syntax>FLOAT</code>, <code class=syntax>HALF_FLOAT</code></td> <td><a href=../../sql-reference/data-types/float/ >Float32</a></td> <td><code class=syntax>FLOAT</code></td> </tr> <tr> <td><code class=syntax>DOUBLE</code></td> <td><a href=../../sql-reference/data-types/float/ >Float64</a></td> <td><code class=syntax>DOUBLE</code></td> </tr> <tr> <td><code class=syntax>DATE32</code></td> <td><a href=../../sql-reference/data-types/date/ >日期</a></td> <td><code class=syntax>UINT16</code></td> </tr> <tr> <td><code class=syntax>DATE64</code>, <code class=syntax>TIMESTAMP</code></td> <td><a href=../../sql-reference/data-types/datetime/ >日期时间</a></td> <td><code class=syntax>UINT32</code></td> </tr> <tr> <td><code class=syntax>STRING</code>, <code class=syntax>BINARY</code></td> <td><a href=../../sql-reference/data-types/string/ >字符串</a></td> <td><code class=syntax>STRING</code></td> </tr> <tr> <td>—</td> <td><a href=../../sql-reference/data-types/fixedstring/ >固定字符串</a></td> <td><code class=syntax>STRING</code></td> </tr> <tr> <td><code class=syntax>DECIMAL</code></td> <td><a href=../../sql-reference/data-types/decimal/ >十进制</a></td> <td><code class=syntax>DECIMAL</code></td> </tr> </tbody> </table> <p>ClickHouse支持可配置的精度 <code class=syntax>Decimal</code> 类型。 该 <code class=syntax>INSERT</code> 查询对待 Parquet <code class=syntax>DECIMAL</code> 键入为ClickHouse <code class=syntax>Decimal128</code> 类型。</p> <p>不支持的Parquet数据类型: <code class=syntax>DATE32</code>, <code class=syntax>TIME32</code>, <code class=syntax>FIXED_SIZE_BINARY</code>, <code class=syntax>JSON</code>, <code class=syntax>UUID</code>, <code class=syntax>ENUM</code>.</p> <p>ClickHouse表列的数据类型可能与插入的Parquet数据的相应字段不同。 插入数据时，ClickHouse根据上表解释数据类型，然后 <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>投</a> 为ClickHouse表列设置的数据类型的数据。</p> <h3 id=inserting-and-selecting-data>插入和选择数据<a class=headerlink href=#inserting-and-selecting-data title="Permanent link"> </a></h3> <p>您可以通过以下命令将Parquet数据从文件插入到ClickHouse表中:</p> <div class=codehilite><pre><span></span><code class=syntax>$ cat <span class=o>{</span>filename<span class=o>}</span> <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO {some_table} FORMAT Parquet"</span>
</code></pre></div> <p>您可以从ClickHouse表中选择数据，并通过以下命令将它们保存到Parquet格式的某个文件中:</p> <div class=codehilite><pre><span></span><code class=syntax>$ clickhouse-client --query<span class=o>=</span><span class=s2>"SELECT * FROM {some_table} FORMAT Parquet"</span> &gt; <span class=o>{</span>some_file.pq<span class=o>}</span>
</code></pre></div> <p>要与Hadoop交换数据，您可以使用 <a href=../../engines/table-engines/integrations/hdfs/ >HDFS表引擎</a>.</p> <h2 id=data-format-orc>ORC<a class=headerlink href=#data-format-orc title="Permanent link"> </a></h2> <p><a href=https://orc.apache.org/ rel="external nofollow noreferrer" target=_blank>阿帕奇兽人</a> 是Hadoop生态系统中普遍存在的列式存储格式。 您只能将此格式的数据插入ClickHouse。</p> <h3 id=data-types-matching-sql_referencedata_types-matching-3>数据类型匹配{#sql_reference/data_types-matching-3}<a class=headerlink href=#data-types-matching-sql_referencedata_types-matching-3 title="Permanent link"> </a></h3> <p>下表显示了支持的数据类型以及它们如何匹配ClickHouse <a href=../../sql-reference/data-types/ >数据类型</a> 在 <code class=syntax>INSERT</code> 查询。</p> <table> <thead> <tr> <th>ORC数据类型 (<code class=syntax>INSERT</code>)</th> <th>ClickHouse数据类型</th> </tr> </thead> <tbody> <tr> <td><code class=syntax>UINT8</code>, <code class=syntax>BOOL</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt8</a></td> </tr> <tr> <td><code class=syntax>INT8</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int8</a></td> </tr> <tr> <td><code class=syntax>UINT16</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt16</a></td> </tr> <tr> <td><code class=syntax>INT16</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int16</a></td> </tr> <tr> <td><code class=syntax>UINT32</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt32</a></td> </tr> <tr> <td><code class=syntax>INT32</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int32</a></td> </tr> <tr> <td><code class=syntax>UINT64</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >UInt64</a></td> </tr> <tr> <td><code class=syntax>INT64</code></td> <td><a href=../../sql-reference/data-types/int-uint/ >Int64</a></td> </tr> <tr> <td><code class=syntax>FLOAT</code>, <code class=syntax>HALF_FLOAT</code></td> <td><a href=../../sql-reference/data-types/float/ >Float32</a></td> </tr> <tr> <td><code class=syntax>DOUBLE</code></td> <td><a href=../../sql-reference/data-types/float/ >Float64</a></td> </tr> <tr> <td><code class=syntax>DATE32</code></td> <td><a href=../../sql-reference/data-types/date/ >日期</a></td> </tr> <tr> <td><code class=syntax>DATE64</code>, <code class=syntax>TIMESTAMP</code></td> <td><a href=../../sql-reference/data-types/datetime/ >日期时间</a></td> </tr> <tr> <td><code class=syntax>STRING</code>, <code class=syntax>BINARY</code></td> <td><a href=../../sql-reference/data-types/string/ >字符串</a></td> </tr> <tr> <td><code class=syntax>DECIMAL</code></td> <td><a href=../../sql-reference/data-types/decimal/ >十进制</a></td> </tr> </tbody> </table> <p>ClickHouse支持的可配置精度 <code class=syntax>Decimal</code> 类型。 该 <code class=syntax>INSERT</code> 查询对待兽人 <code class=syntax>DECIMAL</code> 键入为ClickHouse <code class=syntax>Decimal128</code> 类型。</p> <p>不支持的ORC数据类型: <code class=syntax>DATE32</code>, <code class=syntax>TIME32</code>, <code class=syntax>FIXED_SIZE_BINARY</code>, <code class=syntax>JSON</code>, <code class=syntax>UUID</code>, <code class=syntax>ENUM</code>.</p> <p>ClickHouse表列的数据类型不必匹配相应的ORC数据字段。 插入数据时，ClickHouse根据上表解释数据类型，然后 <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>投</a> 将数据转换为ClickHouse表列的数据类型集。</p> <h3 id=inserting-data-1>插入数据<a class=headerlink href=#inserting-data-1 title="Permanent link"> </a></h3> <p>您可以通过以下命令将文件中的ORC数据插入到ClickHouse表中:</p> <div class=codehilite><pre><span></span><code class=syntax>$ cat filename.orc <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>"INSERT INTO some_table FORMAT ORC"</span>
</code></pre></div> <p>要与Hadoop交换数据，您可以使用 <a href=../../engines/table-engines/integrations/hdfs/ >HDFS表引擎</a>.</p> <h2 id=formatschema>格式架构<a class=headerlink href=#formatschema title="Permanent link"> </a></h2> <p>包含格式架构的文件名由该设置设置 <code class=syntax>format_schema</code>.<br> 当使用其中一种格式时，需要设置此设置 <code class=syntax>Cap'n Proto</code> 和 <code class=syntax>Protobuf</code>.<br> 格式架构是文件名和此文件中消息类型的名称的组合，用冒号分隔,<br> e.g. <code class=syntax>schemafile.proto:MessageType</code>.<br> 如果文件具有格式的标准扩展名（例如, <code class=syntax>.proto</code> 为 <code class=syntax>Protobuf</code>),<br> 它可以被省略，在这种情况下，格式模式如下所示 <code class=syntax>schemafile:MessageType</code>.</p> <p>如果您通过输入或输出数据 <a href=../cli/ >客户</a> 在交互模式下，格式架构中指定的文件名<br> 可以包含绝对路径或相对于客户端上当前目录的路径。<br> 如果在批处理模式下使用客户端，则由于安全原因，架构的路径必须是相对的。</p> <p>如果您通过输入或输出数据 <a href=../http/ >HTTP接口</a> 格式架构中指定的文件名<br> 应该位于指定的目录中 <a href=../../operations/server-configuration-parameters/settings/#server_configuration_parameters-format_schema_path>format_schema_path</a><br> 在服务器配置中。</p> <p><a href=https://clickhouse.tech/docs/en/interfaces/formats/ target=_blank>原始文章</a> <!--hide--></p> <h2 id=skippingerrors>跳过错误<a class=headerlink href=#skippingerrors title="Permanent link"> </a></h2> <p>一些格式，如 <code class=syntax>CSV</code>, <code class=syntax>TabSeparated</code>, <code class=syntax>TSKV</code>, <code class=syntax>JSONEachRow</code>, <code class=syntax>Template</code>, <code class=syntax>CustomSeparated</code> 和 <code class=syntax>Protobuf</code> 如果发生解析错误，可以跳过断开的行，并从下一行开始继续解析。 看 <a href=../../operations/settings/settings/#settings-input_format_allow_errors_num>input_format_allow_errors_num</a> 和<br> <a href=../../operations/settings/settings/#settings-input_format_allow_errors_ratio>input_format_allow_errors_ratio</a> 设置。<br> 限制:<br> -在解析错误的情况下 <code class=syntax>JSONEachRow</code> 跳过所有数据，直到新行（或EOF），所以行必须由 <code class=syntax>\n</code> 正确计算错误。<br> - <code class=syntax>Template</code> 和 <code class=syntax>CustomSeparated</code> 在最后一列之后使用分隔符，并在行之间使用分隔符来查找下一行的开头，所以跳过错误只有在其中至少有一个不为空时才有效。</p> <p><a href=https://clickhouse.tech/docs/zh/interfaces/formats/ target=_blank>来源文章</a> <!--hide--></p> </div> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Was this content helpful?</span> <div id=rating-stars class="display-6 mb-0" data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']" data-documentation=documentation>RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#tabseparated title=TabSeparated class="nav-link text-wrap d-inline-block w-100"> TabSeparated </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#data-formatting title=数据格式化 class="nav-link text-wrap d-inline-block w-100"> 数据格式化 </a> </nav> <a href=#tabseparatedraw title=TabSeparatedRaw class="nav-link text-wrap d-inline-block w-100"> TabSeparatedRaw </a> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNames </a> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> TabSeparatedWithNamesAndTypes </a> <a href=#format-template title=Template class="nav-link text-wrap d-inline-block w-100"> Template </a> <a href=#templateignorespaces title=TemplateIgnoreSpaces class="nav-link text-wrap d-inline-block w-100"> TemplateIgnoreSpaces </a> <a href=#tskv title=TSKV class="nav-link text-wrap d-inline-block w-100"> TSKV </a> <a href=#csv title=CSV class="nav-link text-wrap d-inline-block w-100"> CSV </a> <a href=#csvwithnames title=CSVWithNames class="nav-link text-wrap d-inline-block w-100"> CSVWithNames </a> <a href=#format-customseparated title=CustomSeparated class="nav-link text-wrap d-inline-block w-100"> CustomSeparated </a> <a href=#json title=JSON class="nav-link text-wrap d-inline-block w-100"> JSON </a> <a href=#jsonstring title=JSONString class="nav-link text-wrap d-inline-block w-100"> JSONString </a> <a href=#jsonasstring title=JSONAsString class="nav-link text-wrap d-inline-block w-100"> JSONAsString </a> <a href=#jsoncompact title=JSONCompact class="nav-link text-wrap d-inline-block w-100"> JSONCompact </a> <a href=#jsoncompactstring title=JSONCompactString class="nav-link text-wrap d-inline-block w-100"> JSONCompactString </a> <a href=#jsoneachrow title=JSONEachRow class="nav-link text-wrap d-inline-block w-100"> JSONEachRow </a> <a href=#jsonstringeachrow title=JSONStringEachRow class="nav-link text-wrap d-inline-block w-100"> JSONStringEachRow </a> <a href=#jsoncompacteachrow title=JSONCompactEachRow class="nav-link text-wrap d-inline-block w-100"> JSONCompactEachRow </a> <a href=#jsoncompactstringeachrow title=JSONCompactStringEachRow class="nav-link text-wrap d-inline-block w-100"> JSONCompactStringEachRow </a> <a href=#jsoneachrowwithprogress title=JSONEachRowWithProgress class="nav-link text-wrap d-inline-block w-100"> JSONEachRowWithProgress </a> <a href=#jsonstringeachrowwithprogress title=JSONStringEachRowWithProgress class="nav-link text-wrap d-inline-block w-100"> JSONStringEachRowWithProgress </a> <a href=#jsoncompacteachrowwithnamesandtypes title=JSONCompactEachRowWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> JSONCompactEachRowWithNamesAndTypes </a> <a href=#jsoncompactstringeachrowwithnamesandtypes title=JSONCompactStringEachRowWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> JSONCompactStringEachRowWithNamesAndTypes </a> <nav id=toc-toc-23 class="nav flex-column pl-2"> <a href=#inserting-data title="Inserting Data" class="nav-link text-wrap d-inline-block w-100"> Inserting Data </a> <a href=#selecting-data title="Selecting Data" class="nav-link text-wrap d-inline-block w-100"> Selecting Data </a> <a href=#jsoneachrow-nested title="Nested Structures" class="nav-link text-wrap d-inline-block w-100"> Nested Structures </a> </nav> <a href=#native title=Native class="nav-link text-wrap d-inline-block w-100"> Native </a> <a href=#null title=Null class="nav-link text-wrap d-inline-block w-100"> Null </a> <a href=#pretty title=Pretty class="nav-link text-wrap d-inline-block w-100"> Pretty </a> <a href=#prettycompact title=PrettyCompact class="nav-link text-wrap d-inline-block w-100"> PrettyCompact </a> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class="nav-link text-wrap d-inline-block w-100"> PrettyCompactMonoBlock </a> <a href=#prettynoescapes title=PrettyNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyNoEscapes </a> <nav id=toc-toc-29 class="nav flex-column pl-2"> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyCompactNoEscapes </a> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettySpaceNoEscapes </a> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettyCompactNoEscapes </a> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class="nav-link text-wrap d-inline-block w-100"> PrettySpaceNoEscapes </a> </nav> <a href=#prettyspace title=PrettySpace class="nav-link text-wrap d-inline-block w-100"> PrettySpace </a> <a href=#rowbinary title=RowBinary class="nav-link text-wrap d-inline-block w-100"> RowBinary </a> <a href=#rowbinarywithnamesandtypes title=RowBinaryWithNamesAndTypes class="nav-link text-wrap d-inline-block w-100"> RowBinaryWithNamesAndTypes </a> <a href=#data-format-values title=值 class="nav-link text-wrap d-inline-block w-100"> 值 </a> <a href=#vertical title=垂直 class="nav-link text-wrap d-inline-block w-100"> 垂直 </a> <a href=#verticalraw title=VerticalRaw class="nav-link text-wrap d-inline-block w-100"> VerticalRaw </a> <a href=#xml title=XML class="nav-link text-wrap d-inline-block w-100"> XML </a> <a href=#capnproto title=CapnProto class="nav-link text-wrap d-inline-block w-100"> CapnProto </a> <a href=#protobuf title=Protobuf class="nav-link text-wrap d-inline-block w-100"> Protobuf </a> <a href=#data-format-avro title=Avro class="nav-link text-wrap d-inline-block w-100"> Avro </a> <nav id=toc-toc-39 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching title=数据类型匹配{#sql_reference/data_types-matching} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching} </a> <a href=#inserting-data title=插入数据 class="nav-link text-wrap d-inline-block w-100"> 插入数据 </a> <a href=#selecting-data title=选择数据 class="nav-link text-wrap d-inline-block w-100"> 选择数据 </a> </nav> <a href=#data-format-avro-confluent title=AvroConfluent class="nav-link text-wrap d-inline-block w-100"> AvroConfluent </a> <nav id=toc-toc-40 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching-1 title=数据类型匹配{#sql_reference/data_types-matching-1} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching-1} </a> <a href=#usage title=用途 class="nav-link text-wrap d-inline-block w-100"> 用途 </a> </nav> <a href=#data-format-parquet title=Parquet class="nav-link text-wrap d-inline-block w-100"> Parquet </a> <nav id=toc-toc-41 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching-2 title=数据类型匹配{#sql_reference/data_types-matching-2} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching-2} </a> <a href=#inserting-and-selecting-data title=插入和选择数据 class="nav-link text-wrap d-inline-block w-100"> 插入和选择数据 </a> </nav> <a href=#data-format-orc title=ORC class="nav-link text-wrap d-inline-block w-100"> ORC </a> <nav id=toc-toc-42 class="nav flex-column pl-2"> <a href=#data-types-matching-sql_referencedata_types-matching-3 title=数据类型匹配{#sql_reference/data_types-matching-3} class="nav-link text-wrap d-inline-block w-100"> 数据类型匹配{#sql_reference/data_types-matching-3} </a> <a href=#inserting-data-1 title=插入数据 class="nav-link text-wrap d-inline-block w-100"> 插入数据 </a> </nav> <a href=#formatschema title=格式架构 class="nav-link text-wrap d-inline-block w-100"> 格式架构 </a> <a href=#skippingerrors title=跳过错误 class="nav-link text-wrap d-inline-block w-100"> 跳过错误 </a> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?00223b07></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>