










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ru">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Как писать код на C++ | Документация ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.com/docs/ru/development/style/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Как писать код на C++ | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.com/docs/ru/development/style/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Как писать код на C++ | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>@charset "UTF-8";:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer,header{display:block}body{margin:0;font-family:"Noto Sans",sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{color:#ff8c00;text-decoration:none;background-color:transparent}a:hover{color:#ff8c00;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}template{display:none}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:"Hind Siliguri",sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-auto{flex:0 0 auto;width:auto;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-auto{flex:0 0 auto;width:auto;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-auto{flex:0 0 auto;width:auto;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}}.table{width:100%;margin-bottom:8px;color:#212529}.table-info{background-color:#bee5eb}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info:focus{color:#fff;background-color:#138496;border-color:#117a8b;box-shadow:0 0 0 0 rgba(58,176,195,.5)}.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{color:#495057;background-color:#d6e5ee;border-color:#cddfea;box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{color:#fff;background-color:#383d42;border-color:#32373b;box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{color:#495057;background-color:#ececec;border-color:#e6e6e6;box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{color:#fff;background-color:#101214;border-color:#0a0c0d;box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{color:#fff;background-color:#d97700;border-color:#cc7000;box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{color:#495057;background-color:#ffd68f;border-color:#ffd182;box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:focus{box-shadow:0 0 0 0 rgba(23,162,184,.5)}.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 rgba(255,255,255,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:8px}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-info{color:#1c6673;background-color:#d1ecf1;border-color:#bee5eb}.alert-info .alert-link{color:#12424a}.alert-light{color:#8d9295;background-color:#fcfdfe;border-color:#fbfcfd}.alert-light .alert-link{color:#73797c}.alert-dark{color:#363b41;background-color:#dbdcdd;border-color:#ccced0}.alert-dark .alert-link{color:#1f2225}.alert-white{color:#949698;background-color:#fff;border-color:#fff}.alert-white .alert-link{color:#7a7d7f}.alert-black{color:#212529;background-color:#d3d3d4;border-color:#c1c2c3}.alert-black .alert-link{color:#0a0c0d}.alert-orange{color:#945b14;background-color:#ffe8cc;border-color:#ffdfb8}.alert-orange .alert-link{color:#673f0e}.alert-light-orange{color:#948872;background-color:#fffaf0;border-color:#fff7ea}.alert-light-orange .alert-link{color:#786e5b}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.close{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#212529;text-shadow:0 1px 0 #fff;opacity:.5}@media(max-width:1200px){.close{font-size:calc(1.275rem+.3vw)}}.close:hover{color:#212529;text-decoration:none}@-webkit-keyframes spinner-border{to{transform:rotate(360deg)}}@keyframes spinner-border{to{transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}.bg-info{background-color:#17a2b8}a.bg-info:focus,a.bg-info:hover{background-color:#117a8b}.bg-light{background-color:#f1f6f9}a.bg-light:focus,a.bg-light:hover{background-color:#cddfea}.bg-dark{background-color:#495057}a.bg-dark:focus,a.bg-dark:hover{background-color:#32373b}.bg-white{background-color:#fff}a.bg-white:focus,a.bg-white:hover{background-color:#e6e6e6}.bg-black{background-color:#212529}a.bg-black:focus,a.bg-black:hover{background-color:#0a0c0d}.bg-orange{background-color:#ff8c00}a.bg-orange:focus,a.bg-orange:hover{background-color:#cc7000}.bg-light-orange{background-color:#ffe4b5}a.bg-light-orange:focus,a.bg-light-orange:hover{background-color:#ffd182}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:980px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:980px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.position-static{position:static}.position-fixed{position:fixed}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}@supports(position:sticky){.sticky-top{position:sticky;top:0;z-index:1020}}.w-25{width:25%}.w-50{width:50%}.w-75{width:75%}.w-100{width:100%}.w-auto{width:auto}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.h-auto{height:auto}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:8px}.my-1{margin-top:8px}.mr-1{margin-right:8px}.mb-1,.my-1{margin-bottom:8px}.m-2{margin:16px}.my-2{margin-top:16px}.mr-2{margin-right:16px}.mb-2,.my-2{margin-bottom:16px}.m-3{margin:24px}.my-3{margin-top:24px}.mr-3{margin-right:24px}.mb-3,.my-3{margin-bottom:24px}.m-4{margin:32px}.my-4{margin-top:32px}.mr-4{margin-right:32px}.mb-4,.my-4{margin-bottom:32px}.m-5{margin:40px}.my-5{margin-top:40px}.mr-5{margin-right:40px}.mb-5,.my-5{margin-bottom:40px}.m-6{margin:48px}.my-6{margin-top:48px}.mr-6{margin-right:48px}.mb-6,.my-6{margin-bottom:48px}.m-7{margin:56px}.my-7{margin-top:56px}.mr-7{margin-right:56px}.mb-7,.my-7{margin-bottom:56px}.m-8{margin:64px}.my-8{margin-top:64px}.mr-8{margin-right:64px}.mb-8,.my-8{margin-bottom:64px}.m-9{margin:72px}.my-9{margin-top:72px}.mr-9{margin-right:72px}.mb-9,.my-9{margin-bottom:72px}.m-10{margin:80px}.my-10{margin-top:80px}.mr-10{margin-right:80px}.mb-10,.my-10{margin-bottom:80px}.m-12{margin:96px}.my-12{margin-top:96px}.mr-12{margin-right:96px}.mb-12,.my-12{margin-bottom:96px}.m-15{margin:120px}.my-15{margin-top:120px}.mr-15{margin-right:120px}.mb-15,.my-15{margin-bottom:120px}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:8px}.pt-1,.py-1{padding-top:8px}.pb-1,.py-1{padding-bottom:8px}.p-2{padding:16px}.pt-2,.py-2{padding-top:16px}.pb-2,.py-2{padding-bottom:16px}.p-3{padding:24px}.pt-3,.py-3{padding-top:24px}.pb-3,.py-3{padding-bottom:24px}.p-4{padding:32px}.pt-4,.py-4{padding-top:32px}.pb-4,.py-4{padding-bottom:32px}.p-5{padding:40px}.pt-5,.py-5{padding-top:40px}.pb-5,.py-5{padding-bottom:40px}.p-6{padding:48px}.pt-6,.py-6{padding-top:48px}.pb-6,.py-6{padding-bottom:48px}.p-7{padding:56px}.pt-7,.py-7{padding-top:56px}.pb-7,.py-7{padding-bottom:56px}.p-8{padding:64px}.pt-8,.py-8{padding-top:64px}.pb-8,.py-8{padding-bottom:64px}.p-9{padding:72px}.pt-9,.py-9{padding-top:72px}.pb-9,.py-9{padding-bottom:72px}.p-10{padding:80px}.pt-10,.py-10{padding-top:80px}.pb-10,.py-10{padding-bottom:80px}.p-12{padding:96px}.pt-12,.py-12{padding-top:96px}.pb-12,.py-12{padding-bottom:96px}.p-15{padding:120px}.pt-15,.py-15{padding-top:120px}.pb-15,.py-15{padding-bottom:120px}.m-n1{margin:-8px}.my-n1{margin-top:-8px}.mr-n1{margin-right:-8px}.mb-n1,.my-n1{margin-bottom:-8px}.m-n2{margin:-16px}.my-n2{margin-top:-16px}.mr-n2{margin-right:-16px}.mb-n2,.my-n2{margin-bottom:-16px}.m-n3{margin:-24px}.my-n3{margin-top:-24px}.mr-n3{margin-right:-24px}.mb-n3,.my-n3{margin-bottom:-24px}.m-n4{margin:-32px}.my-n4{margin-top:-32px}.mr-n4{margin-right:-32px}.mb-n4,.my-n4{margin-bottom:-32px}.m-n5{margin:-40px}.my-n5{margin-top:-40px}.mr-n5{margin-right:-40px}.mb-n5,.my-n5{margin-bottom:-40px}.m-n6{margin:-48px}.my-n6{margin-top:-48px}.mr-n6{margin-right:-48px}.mb-n6,.my-n6{margin-bottom:-48px}.m-n7{margin:-56px}.my-n7{margin-top:-56px}.mr-n7{margin-right:-56px}.mb-n7,.my-n7{margin-bottom:-56px}.m-n8{margin:-64px}.my-n8{margin-top:-64px}.mr-n8{margin-right:-64px}.mb-n8,.my-n8{margin-bottom:-64px}.m-n9{margin:-72px}.my-n9{margin-top:-72px}.mr-n9{margin-right:-72px}.mb-n9,.my-n9{margin-bottom:-72px}.m-n10{margin:-80px}.my-n10{margin-top:-80px}.mr-n10{margin-right:-80px}.mb-n10,.my-n10{margin-bottom:-80px}.m-n12{margin:-96px}.my-n12{margin-top:-96px}.mr-n12{margin-right:-96px}.mb-n12,.my-n12{margin-bottom:-96px}.m-n15{margin:-120px}.my-n15{margin-top:-120px}.mr-n15{margin-right:-120px}.mb-n15,.my-n15{margin-bottom:-120px}.m-auto{margin:auto}.my-auto{margin-top:auto}.mr-auto{margin-right:auto}.mb-auto,.my-auto{margin-bottom:auto}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:8px}.my-md-1{margin-top:8px}.mr-md-1{margin-right:8px}.mb-md-1,.my-md-1{margin-bottom:8px}.m-md-2{margin:16px}.my-md-2{margin-top:16px}.mr-md-2{margin-right:16px}.mb-md-2,.my-md-2{margin-bottom:16px}.m-md-3{margin:24px}.my-md-3{margin-top:24px}.mr-md-3{margin-right:24px}.mb-md-3,.my-md-3{margin-bottom:24px}.m-md-4{margin:32px}.my-md-4{margin-top:32px}.mr-md-4{margin-right:32px}.mb-md-4,.my-md-4{margin-bottom:32px}.m-md-5{margin:40px}.my-md-5{margin-top:40px}.mr-md-5{margin-right:40px}.mb-md-5,.my-md-5{margin-bottom:40px}.m-md-6{margin:48px}.my-md-6{margin-top:48px}.mr-md-6{margin-right:48px}.mb-md-6,.my-md-6{margin-bottom:48px}.m-md-7{margin:56px}.my-md-7{margin-top:56px}.mr-md-7{margin-right:56px}.mb-md-7,.my-md-7{margin-bottom:56px}.m-md-8{margin:64px}.my-md-8{margin-top:64px}.mr-md-8{margin-right:64px}.mb-md-8,.my-md-8{margin-bottom:64px}.m-md-9{margin:72px}.my-md-9{margin-top:72px}.mr-md-9{margin-right:72px}.mb-md-9,.my-md-9{margin-bottom:72px}.m-md-10{margin:80px}.my-md-10{margin-top:80px}.mr-md-10{margin-right:80px}.mb-md-10,.my-md-10{margin-bottom:80px}.m-md-12{margin:96px}.my-md-12{margin-top:96px}.mr-md-12{margin-right:96px}.mb-md-12,.my-md-12{margin-bottom:96px}.m-md-15{margin:120px}.my-md-15{margin-top:120px}.mr-md-15{margin-right:120px}.mb-md-15,.my-md-15{margin-bottom:120px}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:8px}.pt-md-1,.py-md-1{padding-top:8px}.pb-md-1,.py-md-1{padding-bottom:8px}.p-md-2{padding:16px}.pt-md-2,.py-md-2{padding-top:16px}.pb-md-2,.py-md-2{padding-bottom:16px}.p-md-3{padding:24px}.pt-md-3,.py-md-3{padding-top:24px}.pb-md-3,.py-md-3{padding-bottom:24px}.p-md-4{padding:32px}.pt-md-4,.py-md-4{padding-top:32px}.pb-md-4,.py-md-4{padding-bottom:32px}.p-md-5{padding:40px}.pt-md-5,.py-md-5{padding-top:40px}.pb-md-5,.py-md-5{padding-bottom:40px}.p-md-6{padding:48px}.pt-md-6,.py-md-6{padding-top:48px}.pb-md-6,.py-md-6{padding-bottom:48px}.p-md-7{padding:56px}.pt-md-7,.py-md-7{padding-top:56px}.pb-md-7,.py-md-7{padding-bottom:56px}.p-md-8{padding:64px}.pt-md-8,.py-md-8{padding-top:64px}.pb-md-8,.py-md-8{padding-bottom:64px}.p-md-9{padding:72px}.pt-md-9,.py-md-9{padding-top:72px}.pb-md-9,.py-md-9{padding-bottom:72px}.p-md-10{padding:80px}.pt-md-10,.py-md-10{padding-top:80px}.pb-md-10,.py-md-10{padding-bottom:80px}.p-md-12{padding:96px}.pt-md-12,.py-md-12{padding-top:96px}.pb-md-12,.py-md-12{padding-bottom:96px}.p-md-15{padding:120px}.pt-md-15,.py-md-15{padding-top:120px}.pb-md-15,.py-md-15{padding-bottom:120px}.m-md-n1{margin:-8px}.my-md-n1{margin-top:-8px}.mr-md-n1{margin-right:-8px}.mb-md-n1,.my-md-n1{margin-bottom:-8px}.m-md-n2{margin:-16px}.my-md-n2{margin-top:-16px}.mr-md-n2{margin-right:-16px}.mb-md-n2,.my-md-n2{margin-bottom:-16px}.m-md-n3{margin:-24px}.my-md-n3{margin-top:-24px}.mr-md-n3{margin-right:-24px}.mb-md-n3,.my-md-n3{margin-bottom:-24px}.m-md-n4{margin:-32px}.my-md-n4{margin-top:-32px}.mr-md-n4{margin-right:-32px}.mb-md-n4,.my-md-n4{margin-bottom:-32px}.m-md-n5{margin:-40px}.my-md-n5{margin-top:-40px}.mr-md-n5{margin-right:-40px}.mb-md-n5,.my-md-n5{margin-bottom:-40px}.m-md-n6{margin:-48px}.my-md-n6{margin-top:-48px}.mr-md-n6{margin-right:-48px}.mb-md-n6,.my-md-n6{margin-bottom:-48px}.m-md-n7{margin:-56px}.my-md-n7{margin-top:-56px}.mr-md-n7{margin-right:-56px}.mb-md-n7,.my-md-n7{margin-bottom:-56px}.m-md-n8{margin:-64px}.my-md-n8{margin-top:-64px}.mr-md-n8{margin-right:-64px}.mb-md-n8,.my-md-n8{margin-bottom:-64px}.m-md-n9{margin:-72px}.my-md-n9{margin-top:-72px}.mr-md-n9{margin-right:-72px}.mb-md-n9,.my-md-n9{margin-bottom:-72px}.m-md-n10{margin:-80px}.my-md-n10{margin-top:-80px}.mr-md-n10{margin-right:-80px}.mb-md-n10,.my-md-n10{margin-bottom:-80px}.m-md-n12{margin:-96px}.my-md-n12{margin-top:-96px}.mr-md-n12{margin-right:-96px}.mb-md-n12,.my-md-n12{margin-bottom:-96px}.m-md-n15{margin:-120px}.my-md-n15{margin-top:-120px}.mr-md-n15{margin-right:-120px}.mb-md-n15,.my-md-n15{margin-bottom:-120px}.m-md-auto{margin:auto}.my-md-auto{margin-top:auto}.mr-md-auto{margin-right:auto}.mb-md-auto,.my-md-auto{margin-bottom:auto}}@media(min-width:980px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:8px}.my-lg-1{margin-top:8px}.mr-lg-1{margin-right:8px}.mb-lg-1,.my-lg-1{margin-bottom:8px}.m-lg-2{margin:16px}.my-lg-2{margin-top:16px}.mr-lg-2{margin-right:16px}.mb-lg-2,.my-lg-2{margin-bottom:16px}.m-lg-3{margin:24px}.my-lg-3{margin-top:24px}.mr-lg-3{margin-right:24px}.mb-lg-3,.my-lg-3{margin-bottom:24px}.m-lg-4{margin:32px}.my-lg-4{margin-top:32px}.mr-lg-4{margin-right:32px}.mb-lg-4,.my-lg-4{margin-bottom:32px}.m-lg-5{margin:40px}.my-lg-5{margin-top:40px}.mr-lg-5{margin-right:40px}.mb-lg-5,.my-lg-5{margin-bottom:40px}.m-lg-6{margin:48px}.my-lg-6{margin-top:48px}.mr-lg-6{margin-right:48px}.mb-lg-6,.my-lg-6{margin-bottom:48px}.m-lg-7{margin:56px}.my-lg-7{margin-top:56px}.mr-lg-7{margin-right:56px}.mb-lg-7,.my-lg-7{margin-bottom:56px}.m-lg-8{margin:64px}.my-lg-8{margin-top:64px}.mr-lg-8{margin-right:64px}.mb-lg-8,.my-lg-8{margin-bottom:64px}.m-lg-9{margin:72px}.my-lg-9{margin-top:72px}.mr-lg-9{margin-right:72px}.mb-lg-9,.my-lg-9{margin-bottom:72px}.m-lg-10{margin:80px}.my-lg-10{margin-top:80px}.mr-lg-10{margin-right:80px}.mb-lg-10,.my-lg-10{margin-bottom:80px}.m-lg-12{margin:96px}.my-lg-12{margin-top:96px}.mr-lg-12{margin-right:96px}.mb-lg-12,.my-lg-12{margin-bottom:96px}.m-lg-15{margin:120px}.my-lg-15{margin-top:120px}.mr-lg-15{margin-right:120px}.mb-lg-15,.my-lg-15{margin-bottom:120px}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:8px}.pt-lg-1,.py-lg-1{padding-top:8px}.pb-lg-1,.py-lg-1{padding-bottom:8px}.p-lg-2{padding:16px}.pt-lg-2,.py-lg-2{padding-top:16px}.pb-lg-2,.py-lg-2{padding-bottom:16px}.p-lg-3{padding:24px}.pt-lg-3,.py-lg-3{padding-top:24px}.pb-lg-3,.py-lg-3{padding-bottom:24px}.p-lg-4{padding:32px}.pt-lg-4,.py-lg-4{padding-top:32px}.pb-lg-4,.py-lg-4{padding-bottom:32px}.p-lg-5{padding:40px}.pt-lg-5,.py-lg-5{padding-top:40px}.pb-lg-5,.py-lg-5{padding-bottom:40px}.p-lg-6{padding:48px}.pt-lg-6,.py-lg-6{padding-top:48px}.pb-lg-6,.py-lg-6{padding-bottom:48px}.p-lg-7{padding:56px}.pt-lg-7,.py-lg-7{padding-top:56px}.pb-lg-7,.py-lg-7{padding-bottom:56px}.p-lg-8{padding:64px}.pt-lg-8,.py-lg-8{padding-top:64px}.pb-lg-8,.py-lg-8{padding-bottom:64px}.p-lg-9{padding:72px}.pt-lg-9,.py-lg-9{padding-top:72px}.pb-lg-9,.py-lg-9{padding-bottom:72px}.p-lg-10{padding:80px}.pt-lg-10,.py-lg-10{padding-top:80px}.pb-lg-10,.py-lg-10{padding-bottom:80px}.p-lg-12{padding:96px}.pt-lg-12,.py-lg-12{padding-top:96px}.pb-lg-12,.py-lg-12{padding-bottom:96px}.p-lg-15{padding:120px}.pt-lg-15,.py-lg-15{padding-top:120px}.pb-lg-15,.py-lg-15{padding-bottom:120px}.m-lg-n1{margin:-8px}.my-lg-n1{margin-top:-8px}.mr-lg-n1{margin-right:-8px}.mb-lg-n1,.my-lg-n1{margin-bottom:-8px}.m-lg-n2{margin:-16px}.my-lg-n2{margin-top:-16px}.mr-lg-n2{margin-right:-16px}.mb-lg-n2,.my-lg-n2{margin-bottom:-16px}.m-lg-n3{margin:-24px}.my-lg-n3{margin-top:-24px}.mr-lg-n3{margin-right:-24px}.mb-lg-n3,.my-lg-n3{margin-bottom:-24px}.m-lg-n4{margin:-32px}.my-lg-n4{margin-top:-32px}.mr-lg-n4{margin-right:-32px}.mb-lg-n4,.my-lg-n4{margin-bottom:-32px}.m-lg-n5{margin:-40px}.my-lg-n5{margin-top:-40px}.mr-lg-n5{margin-right:-40px}.mb-lg-n5,.my-lg-n5{margin-bottom:-40px}.m-lg-n6{margin:-48px}.my-lg-n6{margin-top:-48px}.mr-lg-n6{margin-right:-48px}.mb-lg-n6,.my-lg-n6{margin-bottom:-48px}.m-lg-n7{margin:-56px}.my-lg-n7{margin-top:-56px}.mr-lg-n7{margin-right:-56px}.mb-lg-n7,.my-lg-n7{margin-bottom:-56px}.m-lg-n8{margin:-64px}.my-lg-n8{margin-top:-64px}.mr-lg-n8{margin-right:-64px}.mb-lg-n8,.my-lg-n8{margin-bottom:-64px}.m-lg-n9{margin:-72px}.my-lg-n9{margin-top:-72px}.mr-lg-n9{margin-right:-72px}.mb-lg-n9,.my-lg-n9{margin-bottom:-72px}.m-lg-n10{margin:-80px}.my-lg-n10{margin-top:-80px}.mr-lg-n10{margin-right:-80px}.mb-lg-n10,.my-lg-n10{margin-bottom:-80px}.m-lg-n12{margin:-96px}.my-lg-n12{margin-top:-96px}.mr-lg-n12{margin-right:-96px}.mb-lg-n12,.my-lg-n12{margin-bottom:-96px}.m-lg-n15{margin:-120px}.my-lg-n15{margin-top:-120px}.mr-lg-n15{margin-right:-120px}.mb-lg-n15,.my-lg-n15{margin-bottom:-120px}.m-lg-auto{margin:auto}.my-lg-auto{margin-top:auto}.mr-lg-auto{margin-right:auto}.mb-lg-auto,.my-lg-auto{margin-bottom:auto}}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:980px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-info{color:#17a2b8}a.text-info:focus,a.text-info:hover{color:#0f6674}.text-light{color:#f1f6f9}a.text-light:focus,a.text-light:hover{color:#bbd4e2}.text-dark{color:#495057}a.text-dark:focus,a.text-dark:hover{color:#262a2d}.text-white{color:#fff}a.text-white:focus,a.text-white:hover{color:#d9d9d9}.text-black{color:#212529}a.text-black:focus,a.text-black:hover{color:#000}.text-orange{color:#ff8c00}a.text-orange:focus,a.text-orange:hover{color:#b36200}.text-light-orange{color:#ffe4b5}a.text-light-orange:focus,a.text-light-orange:hover{color:#ffc869}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(33,37,41,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:980px}.container{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}.docs a:link,.docs a:visited{color:#f14600;text-decoration:none}.docs a:active,.docs a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.w-15{width:15%}.height-20{height:20px}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .c{color:#747369}.syntax .k{color:#c9c}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .cm{color:#747369}.syntax .cp{color:#747369}.syntax .c1{color:#747369}.syntax .kr{color:#c9c}.syntax .kt{color:#fc6}.syntax .ld{color:#9c9}.syntax .m{color:#f99157}.syntax .s{color:#9c9}.syntax .na{color:#69c}.syntax .nb{color:#f2f0ec}.syntax .nc{color:#fc6}.syntax .no{color:#f2777a}.syntax .nf{color:#69c}.syntax .nl{color:#f2f0ec}.syntax .py{color:#f2f0ec}.syntax .nv{color:#f2777a}.syntax .w{color:#f2f0ec}.syntax .mf{color:#f99157}.syntax .mi{color:#f99157}.syntax .sc{color:#f2f0ec}.syntax .s2{color:#9c9}.syntax .s1{color:#9c9}.syntax .ss{color:#9c9}}@media screen and (max-width:978.98px){.btn{padding:8px 16px}}@media screen and (max-width:978.98px){.btn-lg{padding:12px 24px}}.footer-copy{white-space:nowrap}img{max-width:100%}.trailing-link{align-items:center;color:#212529;display:flex;font-size:.875rem;font-weight:700}.trailing-link:after{background:no-repeat url(../images/icons/icon-arrow.svg);background-position:right center;background-size:contain;content:"";display:block;height:12px;transition:.2s transform;width:20px}.trailing-link:active,.trailing-link:hover{color:#212529;text-decoration:none}.trailing-link:active:after,.trailing-link:hover:after{transform:translateX(8px)}.trailing-link.span-full:after{margin-left:auto}ul{list-style-type:square;padding-left:1.25em}ul li:not(:last-child){margin-bottom:16px}ul li::marker{color:#ff3939}.display-5{color:#212529;font-size:20px;font-weight:500}.display-6{color:#212529;font-size:14px;font-weight:700}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=kak-pisat-kod-na-c>Как писать код на C++<a class=headerlink href=../amp/#kak-pisat-kod-na-c title="Permanent link"> </a></h1> <h2 id=obshchee>Общее<a class=headerlink href=../amp/#obshchee title="Permanent link"> </a></h2> <p><strong>1.</strong> Этот текст носит рекомендательный характер.</p> <p><strong>2.</strong> Если вы редактируете код, то имеет смысл писать так, как уже написано.</p> <p><strong>3.</strong> Стиль нужен для единообразия. Единообразие нужно, чтобы было проще (удобнее) читать код. А также, чтобы было легче осуществлять поиск по коду.</p> <p><strong>4.</strong> Многие правила продиктованы не какими либо разумными соображениями, а сложившейся практикой.</p> <h2 id=formatirovanie>Форматирование<a class=headerlink href=../amp/#formatirovanie title="Permanent link"> </a></h2> <p><strong>1.</strong> Большую часть форматирования сделает автоматически <code class=syntax>clang-format</code>.</p> <p><strong>2.</strong> Отступы — 4 пробела. Настройте среду разработки так, чтобы таб добавлял четыре пробела.</p> <p><strong>3.</strong> Открывающая и закрывающие фигурные скобки на отдельной строке.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kr>inline</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>readBoolText</span><span class=p>(</span><span class=kt>bool</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>ReadBuffer</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>buf</span><span class=p>)</span><span class=w></span>
<span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sc>'0'</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=n>readChar</span><span class=p>(</span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=n>buf</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=n>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=sc>'0'</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>4.</strong> Если всё тело функции — один <code class=syntax>statement</code>, то его можно разместить на одной строке. При этом, вокруг фигурных скобок ставятся пробелы (кроме пробела на конце строки).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kr>inline</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=nf>mask</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w>                </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>buf_size</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=p>}</span><span class=w></span>
<span class=kr>inline</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=nf>place</span><span class=p>(</span><span class=n>HashValue</span><span class=w> </span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=k>const</span><span class=w>    </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>mask</span><span class=p>();</span><span class=w> </span><span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>5.</strong> Для функций. Пробелы вокруг скобок не ставятся.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kt>void</span><span class=w> </span><span class=n>reinsert</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Value</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>x</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>memcpy</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buf</span><span class=p>[</span><span class=n>place_value</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>x</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p><strong>6.</strong> В выражениях <code class=syntax>if</code>, <code class=syntax>for</code>, <code class=syntax>while</code> и т.д. перед открывающей скобкой ставится пробел (в отличие от вызовов функций).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>rows</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>storage</span><span class=p>.</span><span class=n>index_granularity</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>7.</strong> Вокруг бинарных операторов (<code class=syntax>+</code>, <code class=syntax>-</code>, <code class=syntax>*</code>, <code class=syntax>/</code>, <code class=syntax>%</code>, …), а также тернарного оператора <code class=syntax>?:</code> ставятся пробелы.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>UInt16</span><span class=w> </span><span class=n>year</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1000</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>);</span><span class=w></span>
<span class=n>UInt8</span><span class=w> </span><span class=n>month</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>);</span><span class=w></span>
<span class=n>UInt8</span><span class=w> </span><span class=n>day</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>'0'</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><strong>8.</strong> Если ставится перенос строки, то оператор пишется на новой строке, и перед ним увеличивается отступ.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>elapsed_ns</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>message</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" ("</span><span class=w></span>
<span class=w>        </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>rows_read_on_server</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1000000000</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>elapsed_ns</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" rows/s., "</span><span class=w></span>
<span class=w>        </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>bytes_read_on_server</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>1000.0</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>elapsed_ns</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" MB/s.) "</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>9.</strong> Внутри строки можно, выполнять выравнивание с помощью пробелов.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dst</span><span class=p>.</span><span class=n>ClickLogID</span><span class=w>         </span><span class=o>=</span><span class=w> </span><span class=n>click</span><span class=p>.</span><span class=n>LogID</span><span class=p>;</span><span class=w></span>
<span class=n>dst</span><span class=p>.</span><span class=n>ClickEventID</span><span class=w>       </span><span class=o>=</span><span class=w> </span><span class=n>click</span><span class=p>.</span><span class=n>EventID</span><span class=p>;</span><span class=w></span>
<span class=n>dst</span><span class=p>.</span><span class=n>ClickGoodEvent</span><span class=w>     </span><span class=o>=</span><span class=w> </span><span class=n>click</span><span class=p>.</span><span class=n>GoodEvent</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>10.</strong> Вокруг операторов <code class=syntax>.</code>, <code class=syntax>-&gt;</code> не ставятся пробелы.</p> <p>При необходимости, оператор может быть перенесён на новую строку. В этом случае, перед ним увеличивается отступ.</p> <p><strong>11.</strong> Унарные операторы <code class=syntax>--</code>, <code class=syntax>++</code>, <code class=syntax>*</code>, <code class=syntax>&amp;</code>, … не отделяются от аргумента пробелом.</p> <p><strong>12.</strong> После запятой ставится пробел, а перед — нет. Аналогично для точки с запятой внутри выражения <code class=syntax>for</code>.</p> <p><strong>13.</strong> Оператор <code class=syntax>[]</code> не отделяется пробелами.</p> <p><strong>14.</strong> В выражении <code class=syntax>template &lt;...&gt;</code>, между <code class=syntax>template</code> и <code class=syntax>&lt;</code> ставится пробел, а после <code class=syntax>&lt;</code> и до <code class=syntax>&gt;</code> не ставится.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span> <span class=nc>TKey</span><span class=p>,</span><span class=w> </span><span class=k>typename</span> <span class=nc>TValue</span><span class=o>&gt;</span><span class=w></span>
<span class=k>struct</span> <span class=nc>AggregatedStatElement</span><span class=w></span>
<span class=p>{}</span><span class=w></span>
</code></pre></div> <p><strong>15.</strong> В классах и структурах, <code class=syntax>public</code>, <code class=syntax>private</code>, <code class=syntax>protected</code> пишется на том же уровне, что и <code class=syntax>class/struct</code>, а остальной код с отступом.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span> <span class=nc>T</span><span class=o>&gt;</span><span class=w></span>
<span class=k>class</span> <span class=nc>MultiVersion</span><span class=w></span>
<span class=p>{</span><span class=w></span>
<span class=k>public</span><span class=o>:</span><span class=w></span>
<span class=w>    </span><span class=c1>/// Version of object for usage. shared_ptr manage lifetime of version.</span>
<span class=w>    </span><span class=k>using</span><span class=w> </span><span class=n>Version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=o>&gt;</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>16.</strong> Если на весь файл один <code class=syntax>namespace</code> и кроме него ничего существенного нет, то отступ внутри <code class=syntax>namespace</code> не нужен.</p> <p><strong>17.</strong> Если блок для выражения <code class=syntax>if</code>, <code class=syntax>for</code>, <code class=syntax>while</code>, … состоит из одного <code class=syntax>statement</code>, то фигурные скобки не обязательны. Вместо этого поместите <code class=syntax>statement</code> на отдельную строку. Это правило справедливо и для вложенных <code class=syntax>if</code>, <code class=syntax>for</code>, <code class=syntax>while</code>, …</p> <p>Если внутренний <code class=syntax>statement</code> содержит фигурные скобки или <code class=syntax>else</code>, то внешний блок следует писать в фигурных скобках.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// Finish write.</span>
<span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=nl>stream</span> <span class=p>:</span><span class=w> </span><span class=n>streams</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>stream</span><span class=p>.</span><span class=n>second</span><span class=o>-&gt;</span><span class=n>finalize</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p><strong>18.</strong> Не должно быть пробелов на концах строк.</p> <p><strong>19.</strong> Исходники в кодировке UTF-8.</p> <p><strong>20.</strong> В строковых литералах можно использовать не-ASCII.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>", "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=p>(</span><span class=n>timer</span><span class=p>.</span><span class=n>elapsed</span><span class=p>()</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>chunks_stats</span><span class=p>.</span><span class=n>hits</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" μsec/hit."</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>21.</strong> Не пишите несколько выражений в одной строке.</p> <p><strong>22.</strong> Внутри функций группируйте блоки кода, отделяя их не более, чем одной пустой строкой.</p> <p><strong>23.</strong> Функции, классы, и т. п. отделяются друг от друга одной или двумя пустыми строками.</p> <p><strong>24.</strong> <code class=syntax>const</code> (относящийся к значению) пишется до имени типа.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//correct</span>
<span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>pos</span><span class=w></span>
<span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>s</span><span class=w></span>
<span class=c1>//incorrect</span>
<span class=kt>char</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>pos</span><span class=w></span>
</code></pre></div> <p><strong>25.</strong> При объявлении указателя или ссылки, символы <code class=syntax>*</code> и <code class=syntax>&amp;</code> отделяются пробелами с обеих сторон.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//correct</span>
<span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>pos</span><span class=w></span>
<span class=c1>//incorrect</span>
<span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>pos</span><span class=w></span>
<span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>pos</span><span class=w></span>
</code></pre></div> <p><strong>26.</strong> При использовании шаблонных типов, пишите <code class=syntax>using</code> (кроме, возможно, простейших случаев).</p> <p>То есть, параметры шаблона указываются только в <code class=syntax>using</code> и затем не повторяются в коде.</p> <p><code class=syntax>using</code> может быть объявлен локально, например, внутри функции.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//correct</span>
<span class=k>using</span><span class=w> </span><span class=n>FileStreams</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>map</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>Stream</span><span class=o>&gt;&gt;</span><span class=p>;</span><span class=w></span>
<span class=n>FileStreams</span><span class=w> </span><span class=n>streams</span><span class=p>;</span><span class=w></span>
<span class=c1>//incorrect</span>
<span class=n>std</span><span class=o>::</span><span class=n>map</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>,</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>Stream</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>streams</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>27.</strong> Нельзя объявлять несколько переменных разных типов в одном выражении.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//incorrect</span>
<span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=o>*</span><span class=n>y</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>28.</strong> C-style cast не используется.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//incorrect</span>
<span class=n>std</span><span class=o>::</span><span class=n>cerr</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=n>c</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=p>;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w></span>
<span class=c1>//correct</span>
<span class=n>std</span><span class=o>::</span><span class=n>cerr</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=k>static_cast</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>29.</strong> В классах и структурах, группируйте отдельно методы и отдельно члены, внутри каждой области видимости.</p> <p><strong>30.</strong> Для не очень большого класса/структуры, можно не отделять объявления методов от реализации.</p> <p>Аналогично для маленьких методов в любых классах/структурах.</p> <p>Для шаблонных классов/структур, лучше не отделять объявления методов от реализации (так как иначе они всё равно должны быть определены в той же единице трансляции).</p> <p><strong>31.</strong> Не обязательно умещать код по ширине в 80 символов. Можно в 140.</p> <p><strong>32.</strong> Всегда используйте префиксный инкремент/декремент, если постфиксный не нужен.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>Names</span><span class=o>::</span><span class=n>const_iterator</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>column_names</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>column_names</span><span class=p>.</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>it</span><span class=p>)</span><span class=w></span>
</code></pre></div> <h2 id=kommentarii>Комментарии<a class=headerlink href=../amp/#kommentarii title="Permanent link"> </a></h2> <p><strong>1.</strong> Необходимо обязательно писать комментарии во всех нетривиальных местах.</p> <p>Это очень важно. При написании комментария, можно успеть понять, что код не нужен вообще, или что всё сделано неверно.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cm>/** Part of piece of memory, that can be used.</span>
<span class=cm>  * For example, if internal_buffer is 1MB, and there was only 10 bytes loaded to buffer from file for reading,</span>
<span class=cm>  * then working_buffer will have size of only 10 bytes</span>
<span class=cm>  * (working_buffer.end() will point to position right after those 10 bytes available for read).</span>
<span class=cm>  */</span><span class=w></span>
</code></pre></div> <p><strong>2.</strong> Комментарии могут быть сколь угодно подробными.</p> <p><strong>3.</strong> Комментарии пишутся до соответствующего кода. В редких случаях после, на той же строке.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cm>/** Parses and executes the query.</span>
<span class=cm>*/</span><span class=w></span>
<span class=kt>void</span><span class=w> </span><span class=n>executeQuery</span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>ReadBuffer</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>istr</span><span class=p>,</span><span class=w> </span><span class=c1>/// Where to read the query from (and data for INSERT, if applicable)</span>
<span class=w>    </span><span class=n>WriteBuffer</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>ostr</span><span class=p>,</span><span class=w> </span><span class=c1>/// Where to write the result</span>
<span class=w>    </span><span class=n>Context</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=c1>/// DB, tables, data types, engines, functions, aggregate functions...</span>
<span class=w>    </span><span class=n>BlockInputStreamPtr</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>query_plan</span><span class=p>,</span><span class=w> </span><span class=c1>/// Here could be written the description on how query was executed</span>
<span class=w>    </span><span class=n>QueryProcessingStage</span><span class=o>::</span><span class=n>Enum</span><span class=w> </span><span class=n>stage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>QueryProcessingStage</span><span class=o>::</span><span class=n>Complete</span><span class=w> </span><span class=c1>/// Up to which stage process the SELECT query</span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>4.</strong> Комментарии следует писать только на английском языке.</p> <p><strong>5.</strong> При написании библиотеки, разместите подробный комментарий о том, что это такое, в самом главном заголовочном файле.</p> <p><strong>6.</strong> Нельзя писать комментарии, которые не дают дополнительной информации. В частности, нельзя писать пустые комментарии вроде этого:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cm>/*</span>
<span class=cm>* Procedure Name:</span>
<span class=cm>* Original procedure name:</span>
<span class=cm>* Author:</span>
<span class=cm>* Date of creation:</span>
<span class=cm>* Dates of modification:</span>
<span class=cm>* Modification authors:</span>
<span class=cm>* Original file name:</span>
<span class=cm>* Purpose:</span>
<span class=cm>* Intent:</span>
<span class=cm>* Designation:</span>
<span class=cm>* Classes used:</span>
<span class=cm>* Constants:</span>
<span class=cm>* Local variables:</span>
<span class=cm>* Parameters:</span>
<span class=cm>* Date of creation:</span>
<span class=cm>* Purpose:</span>
<span class=cm>*/</span><span class=w></span>
</code></pre></div> <p>Пример взят с ресурса <a href=http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/ target=_blank>http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/</a>.</p> <p><strong>7.</strong> Нельзя писать мусорные комментарии (автор, дата создания…) в начале каждого файла.</p> <p><strong>8.</strong> Однострочные комментарии начинаются с трёх слешей: <code class=syntax>///</code> , многострочные с <code class=syntax>/**</code>. Такие комментарии считаются «документирующими».</p> <p>Замечание: такие комментарии могут использоваться для генерации документации с помощью Doxygen. Но, фактически, Doxygen не используется, так как для навигации по коду гораздо удобнее использовать возможности IDE.</p> <p><strong>9.</strong> В начале и конце многострочного комментария, не должно быть пустых строк (кроме строки, на которой закрывается многострочный комментарий).</p> <p><strong>10.</strong> Для закомментированных кусков кода, используются обычные, не «документирующие» комментарии.</p> <p><strong>11.</strong> Удаляйте закомментированные куски кода перед коммитом.</p> <p><strong>12.</strong> Не нужно писать нецензурную брань в комментариях или коде.</p> <p><strong>13.</strong> Не пишите прописными буквами. Не используйте излишнее количество знаков препинания.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// WHAT THE FAIL???</span>
</code></pre></div> <p><strong>14.</strong> Не составляйте из комментариев строки-разделители.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>///******************************************************</span>
</code></pre></div> <p><strong>15.</strong> Не нужно писать в комментарии диалог (лучше сказать устно).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// Why did you do this stuff?</span>
</code></pre></div> <p><strong>16.</strong> Не нужно писать комментарий в конце блока о том, что представлял собой этот блок.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// for</span>
</code></pre></div> <h2 id=imena>Имена<a class=headerlink href=../amp/#imena title="Permanent link"> </a></h2> <p><strong>1.</strong> В именах переменных и членов класса используйте маленькие буквами с подчёркиванием.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kt>size_t</span><span class=w> </span><span class=n>max_block_size</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>2.</strong> Имена функций (методов) camelCase с маленькой буквы.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=nf>getName</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=k>override</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=s>"Memory"</span><span class=p>;</span><span class=w> </span><span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>3.</strong> Имена классов (структур) - CamelCase с большой буквы. Префиксы кроме I для интерфейсов - не используются.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>class</span> <span class=nc>StorageMemory</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>IStorage</span><span class=w></span>
</code></pre></div> <p><strong>4.</strong> <code class=syntax>using</code> называются также, как классы, либо с <code class=syntax>_t</code> на конце.</p> <p><strong>5.</strong> Имена типов — параметров шаблонов: в простых случаях - <code class=syntax>T</code>; <code class=syntax>T</code>, <code class=syntax>U</code>; <code class=syntax>T1</code>, <code class=syntax>T2</code>.</p> <p>В более сложных случаях - либо также, как имена классов, либо можно добавить в начало букву <code class=syntax>T</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span> <span class=nc>TKey</span><span class=p>,</span><span class=w> </span><span class=k>typename</span> <span class=nc>TValue</span><span class=o>&gt;</span><span class=w></span>
<span class=k>struct</span> <span class=nc>AggregatedStatElement</span><span class=w></span>
</code></pre></div> <p><strong>6.</strong> Имена констант — параметров шаблонов: либо также, как имена переменных, либо <code class=syntax>N</code> в простом случае.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=kt>bool</span><span class=w> </span><span class=n>without_www</span><span class=o>&gt;</span><span class=w></span>
<span class=k>struct</span> <span class=nc>ExtractDomain</span><span class=w></span>
</code></pre></div> <p><strong>7.</strong> Для абстрактных классов (интерфейсов) можно добавить в начало имени букву <code class=syntax>I</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>class</span> <span class=nc>IBlockInputStream</span><span class=w></span>
</code></pre></div> <p><strong>8.</strong> Если переменная используется достаточно локально, то можно использовать короткое имя.</p> <p>В остальных случаях используйте имя, описывающее смысл.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=kt>bool</span><span class=w> </span><span class=n>info_successfully_loaded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>false</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>9.</strong> В именах <code class=syntax>define</code> и глобальных констант используется ALL_CAPS с подчёркиванием.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=cp>#define MAX_SRC_TABLE_NAMES_TO_STORE 1000</span>
</code></pre></div> <p><strong>10.</strong> Имена файлов с кодом называйте по стилю соответственно тому, что в них находится.</p> <p>Если в файле находится один класс, назовите файл, как класс (CamelCase).</p> <p>Если в файле находится одна функция, назовите файл, как функцию (camelCase).</p> <p><strong>11.</strong> Если имя содержит сокращение, то:</p> <ul> <li>для имён переменных, всё сокращение пишется маленькими буквами <code class=syntax>mysql_connection</code> (не <code class=syntax>mySQL_connection</code>).</li> <li>для имён классов и функций, сохраняются большие буквы в сокращении <code class=syntax>MySQLConnection</code> (не <code class=syntax>MySqlConnection</code>).</li> </ul> <p><strong>12.</strong> Параметры конструктора, использующиеся сразу же для инициализации соответствующих членов класса, следует назвать также, как и члены класса, добавив подчёркивание в конец.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>FileQueueProcessor</span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>path_</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>prefix_</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>FileHandler</span><span class=o>&gt;</span><span class=w> </span><span class=n>handler_</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>path</span><span class=p>(</span><span class=n>path_</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>prefix</span><span class=p>(</span><span class=n>prefix_</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>handler</span><span class=p>(</span><span class=n>handler_</span><span class=p>),</span><span class=w></span>
<span class=w>    </span><span class=n>log</span><span class=p>(</span><span class=o>&amp;</span><span class=n>Logger</span><span class=o>::</span><span class=n>get</span><span class=p>(</span><span class=s>"FileQueueProcessor"</span><span class=p>))</span><span class=w></span>
<span class=p>{</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>Также можно называть параметры конструктора так же, как и члены класса (не добавлять подчёркивание), но только если этот параметр не используется в теле конструктора.</p> <p><strong>13.</strong> Именование локальных переменных и членов класса никак не отличается (никакие префиксы не нужны).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>timer</span><span class=w> </span><span class=p>(</span><span class=n>not</span><span class=w> </span><span class=n>m_timer</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>14.</strong> Константы в <code class=syntax>enum</code> — CamelCase с большой буквы. Также допустим ALL_CAPS. Если <code class=syntax>enum</code> не локален, то используйте <code class=syntax>enum class</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>enum</span> <span class=k>class</span><span class=w> </span><span class=nc>CompressionMethod</span><span class=w></span>
<span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>QuickLZ</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=n>LZ4</span><span class=w>     </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w></span>
<span class=p>};</span><span class=w></span>
</code></pre></div> <p><strong>15.</strong> Все имена - по-английски. Транслит с русского использовать нельзя.</p> <div class=codehilite><pre><span></span><code class=syntax>не Stroka
</code></pre></div> <p><strong>16.</strong> Сокращения (из нескольких букв разных слов) в именах можно использовать только если они являются общепринятыми (если для сокращения можно найти расшифровку в английской википедии или сделав поисковый запрос).</p> <div class=codehilite><pre><span></span><code class=syntax>`AST`, `SQL`.

Не `NVDH` (что-то неведомое)
</code></pre></div> <p>Сокращения в виде обрезанного слова можно использовать, только если такое сокращение является широко используемым.</p> <p>Впрочем, сокращения также можно использовать, если расшифровка находится рядом в комментарии.</p> <p><strong>17.</strong> Имена файлов с исходниками на C++ должны иметь расширение только <code class=syntax>.cpp</code>. Заголовочные файлы - только <code class=syntax>.h</code>.</p> <h2 id=kak-pisat-kod>Как писать код<a class=headerlink href=../amp/#kak-pisat-kod title="Permanent link"> </a></h2> <p><strong>1.</strong> Управление памятью.</p> <p>Ручное освобождение памяти (<code class=syntax>delete</code>) можно использовать только в библиотечном коде.</p> <p>В свою очередь, в библиотечном коде, оператор <code class=syntax>delete</code> можно использовать только в деструкторах.</p> <p>В прикладном коде следует делать так, что память освобождается каким-либо объектом, который владеет ей.</p> <p>Примеры:</p> <ul> <li>проще всего разместить объект на стеке, или сделать его членом другого класса.</li> <li>для большого количества маленьких объектов используйте контейнеры.</li> <li>для автоматического освобождения маленького количества объектов, выделенных на куче, используйте <code class=syntax>shared_ptr/unique_ptr</code>.</li> </ul> <p><strong>2.</strong> Управление ресурсами.</p> <p>Используйте <code class=syntax>RAII</code> и см. пункт выше.</p> <p><strong>3.</strong> Обработка ошибок.</p> <p>Используйте исключения. В большинстве случаев, нужно только кидать исключения, а ловить - не нужно (потому что <code class=syntax>RAII</code>).</p> <p>В программах офлайн обработки данных, зачастую, можно не ловить исключения.</p> <p>В серверах, обрабатывающих пользовательские запросы, как правило, достаточно ловить исключения на самом верху обработчика соединения.</p> <p>В функциях потока, следует ловить и запоминать все исключения, чтобы выкинуть их в основном потоке после <code class=syntax>join</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>/// Если вычислений ещё не было - вычислим первый блок синхронно</span>
<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>started</span><span class=p>)</span><span class=w></span>
<span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>calculate</span><span class=p>();</span><span class=w></span>
<span class=w>    </span><span class=n>started</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>true</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
<span class=k>else</span><span class=w>    </span><span class=c1>/// Если вычисления уже идут - подождём результата</span>
<span class=w>    </span><span class=n>pool</span><span class=p>.</span><span class=n>wait</span><span class=p>();</span><span class=w></span>

<span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>exception</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>exception</span><span class=o>-&gt;</span><span class=n>rethrow</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p>Ни в коем случае не «проглатывайте» исключения без разбора. Ни в коем случае, не превращайте все исключения без разбора в сообщения в логе.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//Not correct</span>
<span class=k>catch</span><span class=w> </span><span class=p>(...)</span><span class=w> </span><span class=p>{}</span><span class=w></span>
</code></pre></div> <p>Если вам нужно проигнорировать какие-то исключения, то игнорируйте только конкретные, а остальные кидайте обратно.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>DB</span><span class=o>::</span><span class=n>Exception</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w></span>
<span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>.</span><span class=n>code</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>ErrorCodes</span><span class=o>::</span><span class=n>UNKNOWN_AGGREGATE_FUNCTION</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>nullptr</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=k>else</span><span class=w></span>
<span class=w>        </span><span class=k>throw</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>При использовании функций, использующих коды возврата или <code class=syntax>errno</code>, проверяйте результат и кидайте исключение.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>close</span><span class=p>(</span><span class=n>fd</span><span class=p>))</span><span class=w></span>
<span class=w>    </span><span class=n>throwFromErrno</span><span class=p>(</span><span class=s>"Cannot close file "</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>file_name</span><span class=p>,</span><span class=w> </span><span class=n>ErrorCodes</span><span class=o>::</span><span class=n>CANNOT_CLOSE_FILE</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p><code class=syntax>assert</code> не используются.</p> <p><strong>4.</strong> Типы исключений.</p> <p>В прикладном коде не требуется использовать сложную иерархию исключений. Желательно, чтобы текст исключения был понятен системному администратору.</p> <p><strong>5.</strong> Исключения, вылетающие из деструкторов.</p> <p>Использовать не рекомендуется, но допустимо.</p> <p>Используйте следующие варианты:</p> <ul> <li>Сделайте функцию (<code class=syntax>done()</code> или <code class=syntax>finalize()</code>), которая позволяет заранее выполнить всю работу, в процессе которой может возникнуть исключение. Если эта функция была вызвана, то затем в деструкторе не должно возникать исключений.</li> <li>Слишком сложную работу (например, отправку данных по сети) можно вообще не делать в деструкторе, рассчитывая, что пользователь заранее позовёт метод для завершения работы.</li> <li>Если в деструкторе возникло исключение, желательно не «проглатывать» его, а вывести информацию в лог (если в этом месте доступен логгер).</li> <li>В простых программах, если соответствующие исключения не ловятся, и приводят к завершению работы с записью информации в лог, можно не беспокоиться об исключениях, вылетающих из деструкторов, так как вызов <code class=syntax>std::terminate</code> (в случае <code class=syntax>noexcept</code> по умолчанию в C++11), является приемлемым способом обработки исключения.</li> </ul> <p><strong>6.</strong> Отдельные блоки кода.</p> <p>Внутри одной функции, можно создать отдельный блок кода, для того, чтобы сделать некоторые переменные локальными в нём, и для того, чтобы соответствующие деструкторы были вызваны при выходе из блока.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>Block</span><span class=w> </span><span class=n>block</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>.</span><span class=n>in</span><span class=o>-&gt;</span><span class=n>read</span><span class=p>();</span><span class=w></span>

<span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>lock_guard</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>mutex</span><span class=o>&gt;</span><span class=w> </span><span class=n>lock</span><span class=p>(</span><span class=n>mutex</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=n>data</span><span class=p>.</span><span class=n>ready</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>true</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=n>data</span><span class=p>.</span><span class=n>block</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>block</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>ready_any</span><span class=p>.</span><span class=n>set</span><span class=p>();</span><span class=w></span>
</code></pre></div> <p><strong>7.</strong> Многопоточность.</p> <p>В программах офлайн обработки данных:</p> <ul> <li>cначала добейтесь более-менее максимальной производительности на одном процессорном ядре, потом можно распараллеливать код, но только если есть необходимость.</li> </ul> <p>В программах - серверах:</p> <ul> <li>используйте пул потоков для обработки запросов. На данный момент, у нас не было задач, в которых была бы необходимость использовать userspace context switching.</li> </ul> <p>Fork для распараллеливания не используется.</p> <p><strong>8.</strong> Синхронизация потоков.</p> <p>Часто можно сделать так, чтобы отдельные потоки писали данные в разные ячейки памяти (лучше в разные кэш-линии), и не использовать синхронизацию потоков (кроме <code class=syntax>joinAll</code>).</p> <p>Если синхронизация нужна, то в большинстве случаев, достаточно использовать mutex под <code class=syntax>lock_guard</code>.</p> <p>В остальных случаях, используйте системные примитивы синхронизации. Не используйте busy wait.</p> <p>Атомарные операции можно использовать только в простейших случаях.</p> <p>Не нужно писать самостоятельно lock-free структуры данных, если вы не являетесь экспертом.</p> <p><strong>9.</strong> Ссылки и указатели.</p> <p>В большинстве случаев, предпочитайте ссылки.</p> <p><strong>10.</strong> const.</p> <p>Используйте константные ссылки, указатели на константу, <code class=syntax>const_iterator</code>, константные методы.</p> <p>Считайте, что <code class=syntax>const</code> — вариант написания «по умолчанию», а отсутствие <code class=syntax>const</code> только при необходимости.</p> <p>Для переменных, передающихся по значению, использовать <code class=syntax>const</code> обычно не имеет смысла.</p> <p><strong>11.</strong> unsigned.</p> <p>Используйте <code class=syntax>unsigned</code>, если нужно.</p> <p><strong>12.</strong> Числовые типы.</p> <p>Используйте типы <code class=syntax>UInt8</code>, <code class=syntax>UInt16</code>, <code class=syntax>UInt32</code>, <code class=syntax>UInt64</code>, <code class=syntax>Int8</code>, <code class=syntax>Int16</code>, <code class=syntax>Int32</code>, <code class=syntax>Int64</code>, а также <code class=syntax>size_t</code>, <code class=syntax>ssize_t</code>, <code class=syntax>ptrdiff_t</code>.</p> <p>Не используйте для чисел типы <code class=syntax>signed/unsigned long</code>, <code class=syntax>long long</code>, <code class=syntax>short</code>, <code class=syntax>signed/unsigned char</code>, <code class=syntax>char</code>.</p> <p><strong>13.</strong> Передача аргументов.</p> <p>Сложные значения передавайте по ссылке (включая <code class=syntax>std::string</code>).</p> <p>Если функция захватывает владение объектом, созданным на куче, то сделайте типом аргумента <code class=syntax>shared_ptr</code> или <code class=syntax>unique_ptr</code>.</p> <p><strong>14.</strong> Возврат значений.</p> <p>В большинстве случаев, просто возвращайте значение с помощью <code class=syntax>return</code>. Не пишите <code class=syntax>return std::move(res)</code>.</p> <p>Если внутри функции создаётся объект на куче и отдаётся наружу, то возвращайте <code class=syntax>shared_ptr</code> или <code class=syntax>unique_ptr</code>.</p> <p>В некоторых редких случаях, может потребоваться возвращать значение через аргумент функции. В этом случае, аргументом будет ссылка.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>using</span><span class=w> </span><span class=n>AggregateFunctionPtr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>shared_ptr</span><span class=o>&lt;</span><span class=n>IAggregateFunction</span><span class=o>&gt;</span><span class=p>;</span><span class=w></span>

<span class=cm>/** Позволяет создать агрегатную функцию по её имени.</span>
<span class=cm>  */</span><span class=w></span>
<span class=k>class</span> <span class=nc>AggregateFunctionFactory</span><span class=w></span>
<span class=p>{</span><span class=w></span>
<span class=k>public</span><span class=o>:</span><span class=w></span>
<span class=w>    </span><span class=n>AggregateFunctionFactory</span><span class=p>();</span><span class=w></span>
<span class=w>    </span><span class=n>AggregateFunctionPtr</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>DataTypes</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>argument_types</span><span class=p>)</span><span class=w> </span><span class=k>const</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p><strong>15.</strong> namespace.</p> <p>Для прикладного кода отдельный <code class=syntax>namespace</code> использовать не нужно.</p> <p>Для маленьких библиотек - не требуется.</p> <p>Для не совсем маленьких библиотек - поместите всё в <code class=syntax>namespace</code>.</p> <p>Внутри библиотеки в <code class=syntax>.h</code> файле можно использовать <code class=syntax>namespace detail</code> для деталей реализации, не нужных прикладному коду.</p> <p>В <code class=syntax>.cpp</code> файле можно использовать <code class=syntax>static</code> или анонимный namespace для скрытия символов.</p> <p>Также, <code class=syntax>namespace</code> можно использовать для <code class=syntax>enum</code>, чтобы соответствующие имена не попали во внешний <code class=syntax>namespace</code> (но лучше использовать <code class=syntax>enum class</code>).</p> <p><strong>16.</strong> Отложенная инициализация.</p> <p>Обычно, если для инициализации требуются аргументы, то не пишите конструктор по умолчанию.</p> <p>Если потом вам потребовалась отложенная инициализация, то вы можете дописать конструктор по умолчанию (который создаст объект с некорректным состоянием). Или, для небольшого количества объектов, можно использовать <code class=syntax>shared_ptr/unique_ptr</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>Loader</span><span class=p>(</span><span class=n>DB</span><span class=o>::</span><span class=n>Connection</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>connection_</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>query</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>max_block_size_</span><span class=p>);</span><span class=w></span>

<span class=c1>/// Для отложенной инициализации</span>
<span class=n>Loader</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w></span>
</code></pre></div> <p><strong>17.</strong> Виртуальные функции.</p> <p>Если класс не предназначен для полиморфного использования, то не нужно делать функции виртуальными зря. Это относится и к деструктору.</p> <p><strong>18.</strong> Кодировки.</p> <p>Везде используется UTF-8. Используется <code class=syntax>std::string</code>, <code class=syntax>char *</code>. Не используется <code class=syntax>std::wstring</code>, <code class=syntax>wchar_t</code>.</p> <p><strong>19.</strong> Логирование.</p> <p>См. примеры везде в коде.</p> <p>Перед коммитом, удалите всё бессмысленное и отладочное логирование, и другие виды отладочного вывода.</p> <p>Не должно быть логирования на каждую итерацию внутреннего цикла, даже уровня Trace.</p> <p>При любом уровне логирования, логи должно быть возможно читать.</p> <p>Логирование следует использовать, в основном, только в прикладном коде.</p> <p>Сообщения в логе должны быть написаны на английском языке.</p> <p>Желательно, чтобы лог был понятен системному администратору.</p> <p>Не нужно писать ругательства в лог.</p> <p>В логе используется кодировка UTF-8. Изредка можно использовать в логе не-ASCII символы.</p> <p><strong>20.</strong> Ввод-вывод.</p> <p>Во внутренних циклах (в критичных по производительности участках программы) нельзя использовать <code class=syntax>iostreams</code> (в том числе, ни в коем случае не используйте <code class=syntax>stringstream</code>).</p> <p>Вместо этого используйте библиотеку <code class=syntax>DB/IO</code>.</p> <p><strong>21.</strong> Дата и время.</p> <p>См. библиотеку <code class=syntax>DateLUT</code>.</p> <p><strong>22.</strong> include.</p> <p>В заголовочном файле используется только <code class=syntax>#pragma once</code>, а include guards писать не нужно.</p> <p><strong>23.</strong> using.</p> <p><code class=syntax>using namespace</code> не используется. Можно использовать <code class=syntax>using</code> что-то конкретное. Лучше локально, внутри класса или функции.</p> <p><strong>24.</strong> Не нужно использовать <code class=syntax>trailing return type</code> для функций, если в этом нет необходимости.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>auto</span><span class=w> </span><span class=n>f</span><span class=p>()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=kt>void</span><span class=w></span>
</code></pre></div> <p><strong>25.</strong> Объявление и инициализация переменных.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=c1>//right way</span>
<span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"Hello"</span><span class=p>;</span><span class=w></span>
<span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=p>{</span><span class=s>"Hello"</span><span class=p>};</span><span class=w></span>

<span class=c1>//wrong way</span>
<span class=k>auto</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>{</span><span class=s>"Hello"</span><span class=p>};</span><span class=w></span>
</code></pre></div> <p><strong>26.</strong> Для виртуальных функций, пишите <code class=syntax>virtual</code> в базовом классе, а в классах-наследниках, пишите <code class=syntax>override</code> и не пишите <code class=syntax>virtual</code>.</p> <h2 id=neispolzuemye-vozmozhnosti-iazyka-c>Неиспользуемые возможности языка C++<a class=headerlink href=../amp/#neispolzuemye-vozmozhnosti-iazyka-c title="Permanent link"> </a></h2> <p><strong>2.</strong> Спецификаторы исключений из C++03 не используются.</p> <h2 id=error-messages>Сообщения об ошибках<a class=headerlink href=../amp/#error-messages title="Permanent link"> </a></h2> <p>Сообщения об ошибках -- это часть пользовательского интерфейса программы, предназначенная для того, чтобы позволить пользователю:</p> <ul> <li>замечать ошибочные ситуации,</li> <li>понимать их смысл и причины,</li> <li>устранять эти ситуации.</li> </ul> <p>Форма и содержание сообщений об ошибках должны способствовать достижению этих целей.</p> <p>Есть два основных вида ошибок:</p> <ul> <li>пользовательская или системная ошибка,</li> <li>внутренняя программная ошибка.</li> </ul> <h3 id=error-messages-user-error>Пользовательская ошибка<a class=headerlink href=../amp/#error-messages-user-error title="Permanent link"> </a></h3> <p>Такая ошибка вызвана действиями пользователя (неверный синтаксис запроса) или конфигурацией внешних систем (кончилось место на диске). Предполагается, что пользователь может устранить её самостоятельно. Для этого в сообщении об ошибке должна содержаться следующая информация:</p> <ul> <li>что произошло. Это должно объясняться в пользовательских терминах (<code class=syntax>Function pow() is not supported for data type UInt128</code>), а не загадочными конструкциями из кода (<code class=syntax>runtime overload resolution failed in DB::BinaryOperationBuilder&lt;FunctionAdaptor&lt;pow&gt;::Impl, UInt128, Int8&gt;::kaboongleFastPath()</code>).</li> <li>почему/где/когда -- любой контекст, который помогает отладить проблему. Представьте, как бы её отлаживали вы (программировать и пользоваться отладчиком нельзя).</li> <li>что можно предпринять для устранения ошибки. Здесь можно перечислить типичные причины проблемы, настройки, влияющие на это поведение, и так далее.</li> </ul> <p>Пример нормального сообщения:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nv>No</span> <span class=nv>alias</span> <span class=k>for</span> <span class=nv>subquery</span> <span class=nv>or</span> <span class=nv>table</span> <span class=nv>function</span> <span class=nv>in</span> <span class=nv>JOIN</span> <span class=ss>(</span><span class=nv>set</span> <span class=nv>joined_subquery_requires_alias</span><span class=o>=</span><span class=mi>0</span> <span class=nv>to</span> <span class=nv>disable</span> <span class=nv>restriction</span><span class=ss>)</span>.
<span class=k>While</span> <span class=nv>processing</span> <span class=s1>'</span><span class=s>(SELECT 2 AS a)</span><span class=s1>'</span>.
</code></pre></div> <p>Сказано что не хватает алиаса, показано, для какой части запроса, и предложена настройка, позволяющая ослабить это требование.</p> <p>Пример катастрофически плохого сообщения:</p> <div class=codehilite><pre><span></span><code class=syntax>The dictionary is configured incorrectly.
</code></pre></div> <p>Из него не понятно:</p> <ul> <li>какой словарь?</li> <li>в чём ошибка конфигурации?</li> </ul> <p>Что может сделать пользователь в такой ситуации: применять внешние отладочные инструменты, спрашивать совета на форумах, гадать на кофейной гуще, и, конечно же, ненавидеть софт, который над ним так издевается. Не нужно издеваться над пользователями, это плохой UX.</p> <h3 id=error-messages-internal-error>Внутренняя программная ошибка<a class=headerlink href=../amp/#error-messages-internal-error title="Permanent link"> </a></h3> <p>Такая ошибка вызвана нарушением внутренних инвариантов программы: например, внутренняя функция вызвана с неверными параметрами, не совпадают размеры колонок в блоке, произошло разыменование нулевого указателя, и так далее. Сигналы типа <code class=syntax>SIGSEGV</code> относятся к этой же категории.</p> <p>Появление такой ошибки всегда свидетельствует о наличии бага в программе. Пользователь не может исправить такую ошибку самостоятельно, и должен сообщить о ней разработчикам.</p> <p>Есть два основных варианта проверки на такие ошибки:</p> <ul> <li>Исключение с кодом <code class=syntax>LOGICAL_ERROR</code>. Его можно использовать для важных проверок, которые делаются в том числе в релизной сборке.</li> <li><code class=syntax>assert</code>. Такие условия не проверяются в релизной сборке, можно использовать для тяжёлых и опциональных проверок.</li> </ul> <p>Пример сообщения, у которого должен быть код <code class=syntax>LOGICAL_ERROR</code>:<br> <code class=syntax>Block header is inconsistent with Chunk in ICompicatedProcessor::munge(). It is a bug!</code><br> По каким признакам можно заметить, что здесь говорится о внутренней программной ошибке?</p> <ul> <li>в сообщении упоминаются внутренние сущности из кода,</li> <li>в сообщении написано it's a bug,</li> <li>непосредственные действия пользователя не могут исправить эту ошибку. Мы ожидаем, что пользователь зарепортит её как баг, и будем исправлять в коде.</li> </ul> <h3 id=error-messages-choose>Как выбрать код ошибки?<a class=headerlink href=../amp/#error-messages-choose title="Permanent link"> </a></h3> <p>Код ошибки предназначен для автоматической обработки некоторых видов ошибок, подобно кодам HTTP. SQL стандартизирует некоторые коды, но на деле ClickHouse не всегда соответствует этим стандартам. Лучше всего выбрать существующий код из <code class=syntax>ErrorCodes.cpp</code>, который больше всего подходит по смыслу. Можно использовать общие коды типа <code class=syntax>BAD_ARGUMENTS</code> или <code class=syntax>TYPE_MISMATCH</code>. Заводить новый код нужно, только если вы чётко понимаете, что вам нужна специальная автоматическая обработка конкретно этой ошибки на клиенте. Для внутренних программных ошибок используется код <code class=syntax>LOGICAL_ERROR</code>.</p> <h3 id=error-messages-add>Как добавить новое сообщение об ошибке?<a class=headerlink href=../amp/#error-messages-add title="Permanent link"> </a></h3> <p>Когда добавляете сообщение об ошибке:</p> <ol> <li>Опишите, что произошло, в пользовательских терминах, а не кусками кода.</li> <li>Добавьте максимум контекста (с чем произошло, когда, почему, и т.д.).</li> <li>Добавьте типичные причины.</li> <li>Добавьте варианты исправления (настройки, ссылки на документацию).</li> <li>Вообразите дальнейшие действия пользователя. Ваше сообщение должно помочь ему решить проблему без использования отладочных инструментов и без чужой помощи.</li> <li>Если сообщение об ошибке не формулируется в пользовательских терминах, и действия пользователя не могут исправить проблему -- это внутренняя программная ошибка, используйте код LOGICAL_ERROR или assert.</li> </ol> <h2 id=platforma>Платформа<a class=headerlink href=../amp/#platforma title="Permanent link"> </a></h2> <p><strong>1.</strong> Мы пишем код под конкретные платформы.</p> <p>Хотя, при прочих равных условиях, предпочитается более-менее кроссплатформенный или легко портируемый код.</p> <p><strong>2.</strong> Язык - C++20 (см. список доступных <a href=https://en.cppreference.com/w/cpp/compiler_support#C.2B.2B20_features rel="external nofollow noreferrer" target=_blank>C++20 фич</a>).</p> <p><strong>3.</strong> Компилятор - <code class=syntax>clang</code>. На данный момент (апрель 2021), код собирается версией 11. (Также код может быть собран <code class=syntax>gcc</code> версии 10, но такая сборка не тестируется и непригодна для продакшена).</p> <p>Используется стандартная библиотека (реализация <code class=syntax>libc++</code>).</p> <p><strong>4.</strong> ОС - Linux, Mac OS X или FreeBSD.</p> <p><strong>5.</strong> Код пишется под процессоры с архитектурой x86_64, AArch64 и ppc64le.</p> <p><strong>6.</strong> Используются флаги компиляции <code class=syntax>-Wall -Wextra -Werror</code> и <code class=syntax>-Weverything</code> с некоторыми исключениями.</p> <p><strong>7.</strong> Используется статическая линковка со всеми библиотеками кроме libc.</p> <h2 id=instrumentarii>Инструментарий<a class=headerlink href=../amp/#instrumentarii title="Permanent link"> </a></h2> <p><strong>1.</strong> Хорошая среда разработки - KDevelop.</p> <p><strong>2.</strong> Для отладки используется <code class=syntax>gdb</code>, <code class=syntax>valgrind</code> (<code class=syntax>memcheck</code>), <code class=syntax>strace</code>, <code class=syntax>-fsanitize=...</code>, <code class=syntax>tcmalloc_minimal_debug</code>.</p> <p><strong>3.</strong> Для профилирования используется <code class=syntax>Linux Perf</code>, <code class=syntax>valgrind</code> (<code class=syntax>callgrind</code>), <code class=syntax>strace -cf</code>.</p> <p><strong>4.</strong> Исходники в Git.</p> <p><strong>5.</strong> Сборка с помощью <code class=syntax>CMake</code>.</p> <p><strong>6.</strong> Программы выкладываются с помощью <code class=syntax>deb</code> пакетов.</p> <p><strong>7.</strong> Коммиты в master не должны ломать сборку проекта.</p> <p>А работоспособность собранных программ гарантируется только для отдельных ревизий.</p> <p><strong>8.</strong> Коммитьте как можно чаще, в том числе и нерабочий код.</p> <p>Для этого следует использовать бранчи.</p> <p>Если ваш код в ветке <code class=syntax>master</code> ещё не собирается, исключите его из сборки перед <code class=syntax>push</code>, также вы будете должны его доработать или удалить в течение нескольких дней.</p> <p><strong>9.</strong> Для нетривиальных изменений, используются бранчи. Следует загружать бранчи на сервер.</p> <p><strong>10.</strong> Ненужный код удаляется из исходников.</p> <h2 id=libraries>Библиотеки<a class=headerlink href=../amp/#libraries title="Permanent link"> </a></h2> <p><strong>1.</strong> Используются стандартные библиотеки C++20 (допустимо использовать экспериментальные расширения), а также фреймворки <code class=syntax>boost</code>, <code class=syntax>Poco</code>.</p> <p><strong>2.</strong> Библиотеки должны быть расположены в виде исходников в директории <code class=syntax>contrib</code> и собираться вместе с ClickHouse. Не разрешено использовать библиотеки, доступные в пакетах ОС, или любые другие способы установки библиотек в систему. Подробнее смотрите раздел <a href=../../contrib/amp/#adding-third-party-libraries>Рекомендации по добавлению сторонних библиотек и поддержанию в них пользовательских изменений</a>.</p> <p><strong>3.</strong> Предпочтение отдаётся уже использующимся библиотекам.</p> <h2 id=obshchee-1>Общее<a class=headerlink href=../amp/#obshchee-1 title="Permanent link"> </a></h2> <p><strong>1.</strong> Пишите как можно меньше кода.</p> <p><strong>2.</strong> Пробуйте самое простое решение.</p> <p><strong>3.</strong> Не нужно писать код, если вы ещё не знаете, что будет делать ваша программа, и как будет работать её внутренний цикл.</p> <p><strong>4.</strong> В простейших случаях, используйте <code class=syntax>using</code> вместо классов/структур.</p> <p><strong>5.</strong> Если есть возможность - не пишите конструкторы копирования, операторы присваивания, деструктор (кроме виртуального, если класс содержит хотя бы одну виртуальную функцию), move-конструкторы и move-присваивания. То есть, чтобы соответствущие функции, генерируемые компилятором, работали правильно. Можно использовать <code class=syntax>default</code>.</p> <p><strong>6.</strong> Приветствуется упрощение и уменьшение объёма кода.</p> <h2 id=dopolnitelno>Дополнительно<a class=headerlink href=../amp/#dopolnitelno title="Permanent link"> </a></h2> <p><strong>1.</strong> Явное указание <code class=syntax>std::</code> для типов из <code class=syntax>stddef.h</code>.</p> <p>Рекомендуется не указывать. То есть, рекомендуется писать <code class=syntax>size_t</code> вместо <code class=syntax>std::size_t</code>, это короче.</p> <p>При желании, можно дописать <code class=syntax>std::</code>, этот вариант допустим.</p> <p><strong>2.</strong> Явное указание <code class=syntax>std::</code> для функций из стандартной библиотеки C.</p> <p>Не рекомендуется. То есть, пишите <code class=syntax>memcpy</code> вместо <code class=syntax>std::memcpy</code>.</p> <p>Причина - существуют похожие нестандартные функции, например, <code class=syntax>memmem</code>. Мы можем использовать и изредка используем эти функции. Эти функции отсутствуют в <code class=syntax>namespace std</code>.</p> <p>Если вы везде напишете <code class=syntax>std::memcpy</code> вместо <code class=syntax>memcpy</code>, то будет неудобно смотреться <code class=syntax>memmem</code> без <code class=syntax>std::</code>.</p> <p>Тем не менее, указывать <code class=syntax>std::</code> тоже допустимо, если так больше нравится.</p> <p><strong>3.</strong> Использование функций из C при наличии аналогов в стандартной библиотеке C++.</p> <p>Допустимо, если это использование эффективнее.</p> <p>Для примера, для копирования длинных кусков памяти, используйте <code class=syntax>memcpy</code> вместо <code class=syntax>std::copy</code>.</p> <p><strong>4.</strong> Перенос длинных аргументов функций.</p> <p>Допустимо использовать любой стиль переноса, похожий на приведённые ниже:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span><span class=w></span>
<span class=w>  </span><span class=n>T1</span><span class=w> </span><span class=n>x1</span><span class=p>,</span><span class=w></span>
<span class=w>  </span><span class=n>T2</span><span class=w> </span><span class=n>x2</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span><span class=w></span>
<span class=w>  </span><span class=kt>size_t</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>right</span><span class=p>,</span><span class=w></span>
<span class=w>  </span><span class=k>const</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>RangesInDataParts</span><span class=w> </span><span class=n>ranges</span><span class=p>,</span><span class=w></span>
<span class=w>  </span><span class=kt>size_t</span><span class=w> </span><span class=n>limit</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>right</span><span class=p>,</span><span class=w></span>
<span class=w>  </span><span class=k>const</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>RangesInDataParts</span><span class=w> </span><span class=n>ranges</span><span class=p>,</span><span class=w></span>
<span class=w>  </span><span class=kt>size_t</span><span class=w> </span><span class=n>limit</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>right</span><span class=p>,</span><span class=w></span>
<span class=w>      </span><span class=k>const</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>RangesInDataParts</span><span class=w> </span><span class=n>ranges</span><span class=p>,</span><span class=w></span>
<span class=w>      </span><span class=kt>size_t</span><span class=w> </span><span class=n>limit</span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=n>function</span><span class=p>(</span><span class=w></span>
<span class=w>      </span><span class=kt>size_t</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w></span>
<span class=w>      </span><span class=kt>size_t</span><span class=w> </span><span class=n>right</span><span class=p>,</span><span class=w></span>
<span class=w>      </span><span class=k>const</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>RangesInDataParts</span><span class=w> </span><span class=n>ranges</span><span class=p>,</span><span class=w></span>
<span class=w>      </span><span class=kt>size_t</span><span class=w> </span><span class=n>limit</span><span class=p>)</span><span class=w></span>
</code></pre></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2021 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/0456f20bf4dfe43e56279f2734c4dda7e89f437b" rel="external nofollow noreferrer" target="_blank" class="text-reset">0456f20bf4</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/ru/development/style/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
