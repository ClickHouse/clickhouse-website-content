










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ru">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Прочие функции | Документация ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.com/docs/ru/sql-reference/functions/other-functions/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Прочие функции | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.com/docs/ru/sql-reference/functions/other-functions/",




"image": "https://clickhouse.com/images/clickhouse-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "ClickHouse, Inc.",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.com/images/logo-400x240.png",
    "width": 400,
    "height": 240
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Прочие функции | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>@charset "UTF-8";:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--brand-primary:#fc0;--brand-secondary:#ff3939;--primary-accent-yellow:#fc0;--primary-accent-light-yellow:#fffaf0;--primary-accent-blue:#257af4;--primary-accent-light-blue:#e3f1fe;--secondary-accent-orange:#ff8c00;--secondary-accent-light-orange:#ffe4b5;--secondary-accent-red:#ff3939;--secondary-accent-light-red:#ffe4e1;--primary:#fc0;--secondary:#212529;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f1f6f9;--dark:#495057;--primary-light:#fffaf0;--secondary-light:#fff;--tertiary:#257af4;--tertiary-light:#e3f1fe;--white:#fff;--black:#212529;--blue:#257af4;--light-blue:#e3f1fe;--yellow:#fc0;--light-yellow:#fffaf0;--orange:#ff8c00;--light-orange:#ffe4b5;--red:#ff3939;--light-red:#ffe4e1;--medium:#d6dbdf;--breakpoint-xxs:0;--breakpoint-xs:400px;--breakpoint-sm:616px;--breakpoint-md:768px;--breakpoint-lg:980px;--breakpoint-xl:1240px;--font-family-sans-serif:"Noto Sans",sans-serif;--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(33,37,41,0)}article,footer{display:block}body{margin:0;font-family:"Noto Sans",sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:16px}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}b,strong{font-weight:bolder}a{color:#ff8c00;text-decoration:none;background-color:transparent}a:hover{color:#ff8c00;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:16px;font-family:"Hind Siliguri",sans-serif;font-weight:500;line-height:1.125}.h1,h1{font-size:2.5rem}@media(max-width:1200px){.h1,h1{font-size:calc(1.375rem+1.5vw)}}.h2,h2{font-size:2rem}@media(max-width:1200px){.h2,h2{font-size:calc(1.325rem+.9vw)}}.h3,h3{font-size:1.75rem}@media(max-width:1200px){.h3,h3{font-size:calc(1.3rem+.6vw)}}.h4,h4{font-size:1.5rem}@media(max-width:1200px){.h4,h4{font-size:calc(1.275rem+.3vw)}}.h5,h5{font-size:1.125rem}.h6,h6{font-size:.875rem}.lead{font-size:1.375rem;font-weight:400}@media(max-width:1200px){.lead{font-size:calc(1.2625rem+.15vw)}}.display-1{font-size:4rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-1{font-size:calc(1.525rem+3.3vw)}}.display-2{font-size:2.5rem;font-weight:600;line-height:1.125}@media(max-width:1200px){.display-2{font-size:calc(1.375rem+1.5vw)}}.display-3{font-size:2rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-3{font-size:calc(1.325rem+.9vw)}}.display-4{font-size:1.75rem;font-weight:500;line-height:1.125}@media(max-width:1200px){.display-4{font-size:calc(1.3rem+.6vw)}}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#495057}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container{max-width:958px}}@media(min-width:980px){.container{max-width:1008px}}@media(min-width:1240px){.container{max-width:1118px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:20px;padding-left:20px;margin-right:auto;margin-left:auto}@media(min-width:400px){.container{max-width:576px}}@media(min-width:616px){.container{max-width:576px}}@media(min-width:768px){.container,.container-md{max-width:958px}}@media(min-width:980px){.container,.container-lg,.container-md{max-width:1008px}}@media(min-width:1240px){.container,.container-lg,.container-md{max-width:1118px}}.row{display:flex;flex-wrap:wrap;margin-right:-20px;margin-left:-20px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:20px;padding-left:20px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}.offset-1{margin-left:8.3333333333%}.offset-2{margin-left:16.6666666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.3333333333%}.offset-5{margin-left:41.6666666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.3333333333%}.offset-8{margin-left:66.6666666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.3333333333%}.offset-11{margin-left:91.6666666667%}@media(min-width:768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.3333333333%}.offset-md-2{margin-left:16.6666666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.3333333333%}.offset-md-5{margin-left:41.6666666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.3333333333%}.offset-md-8{margin-left:66.6666666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.3333333333%}.offset-md-11{margin-left:91.6666666667%}}@media(min-width:980px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.3333333333%}.offset-lg-2{margin-left:16.6666666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.3333333333%}.offset-lg-5{margin-left:41.6666666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.3333333333%}.offset-lg-8{margin-left:66.6666666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.3333333333%}.offset-lg-11{margin-left:91.6666666667%}}.table{width:100%;margin-bottom:8px;color:#212529}.table-warning{background-color:#ffeeba}.table-light{background-color:#fbfcfd}.table-dark{background-color:#ccced0}.table-white{background-color:#fff}.table-black{background-color:#c1c2c3}.table-orange{background-color:#ffdfb8}.table-light-orange{background-color:#fff7ea}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-family:inherit;font-weight:700;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:12px 32px;font-size:.875rem;line-height:20px;border-radius:8px;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:none}.btn:disabled{opacity:.65}.btn-warning{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#495057;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{color:#495057;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 0 rgba(228,176,19,.5)}.btn-warning:disabled{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-light:hover{color:#495057;background-color:#d6e5ee;border-color:#cddfea}.btn-light:focus{color:#495057;background-color:#d6e5ee;border-color:#cddfea;box-shadow:0 0 0 0 rgba(216,221,225,.5)}.btn-light:disabled{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-dark{color:#fff;background-color:#495057;border-color:#495057}.btn-dark:hover{color:#fff;background-color:#383d42;border-color:#32373b}.btn-dark:focus{color:#fff;background-color:#383d42;border-color:#32373b;box-shadow:0 0 0 0 rgba(100,106,112,.5)}.btn-dark:disabled{color:#fff;background-color:#495057;border-color:#495057}.btn-white{color:#495057;background-color:#fff;border-color:#fff}.btn-white:hover{color:#495057;background-color:#ececec;border-color:#e6e6e6}.btn-white:focus{color:#495057;background-color:#ececec;border-color:#e6e6e6;box-shadow:0 0 0 0 rgba(228,229,230,.5)}.btn-white:disabled{color:#495057;background-color:#fff;border-color:#fff}.btn-black{color:#fff;background-color:#212529;border-color:#212529}.btn-black:hover{color:#fff;background-color:#101214;border-color:#0a0c0d}.btn-black:focus{color:#fff;background-color:#101214;border-color:#0a0c0d;box-shadow:0 0 0 0 rgba(66,70,73,.5)}.btn-black:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-orange{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-orange:hover{color:#fff;background-color:#d97700;border-color:#cc7000}.btn-orange:focus{color:#fff;background-color:#d97700;border-color:#cc7000;box-shadow:0 0 0 0 rgba(228,131,13,.5)}.btn-orange:disabled{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-light-orange{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-light-orange:hover{color:#495057;background-color:#ffd68f;border-color:#ffd182}.btn-light-orange:focus{color:#495057;background-color:#ffd68f;border-color:#ffd182;box-shadow:0 0 0 0 rgba(228,206,167,.5)}.btn-light-orange:disabled{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#495057;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 0 rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:hover{color:#495057;background-color:#f1f6f9;border-color:#f1f6f9}.btn-outline-light:focus{box-shadow:0 0 0 0 rgba(241,246,249,.5)}.btn-outline-light:disabled{color:#f1f6f9;background-color:transparent}.btn-outline-dark{color:#495057;border-color:#495057}.btn-outline-dark:hover{color:#fff;background-color:#495057;border-color:#495057}.btn-outline-dark:focus{box-shadow:0 0 0 0 rgba(73,80,87,.5)}.btn-outline-dark:disabled{color:#495057;background-color:transparent}.btn-outline-white{color:#fff;border-color:#fff}.btn-outline-white:hover{color:#495057;background-color:#fff;border-color:#fff}.btn-outline-white:focus{box-shadow:0 0 0 0 rgba(255,255,255,.5)}.btn-outline-white:disabled{color:#fff;background-color:transparent}.btn-outline-black{color:#212529;border-color:#212529}.btn-outline-black:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-black:focus{box-shadow:0 0 0 0 rgba(33,37,41,.5)}.btn-outline-black:disabled{color:#212529;background-color:transparent}.btn-outline-orange{color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:hover{color:#495057;background-color:#ff8c00;border-color:#ff8c00}.btn-outline-orange:focus{box-shadow:0 0 0 0 rgba(255,140,0,.5)}.btn-outline-orange:disabled{color:#ff8c00;background-color:transparent}.btn-outline-light-orange{color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:hover{color:#495057;background-color:#ffe4b5;border-color:#ffe4b5}.btn-outline-light-orange:focus{box-shadow:0 0 0 0 rgba(255,228,181,.5)}.btn-outline-light-orange:disabled{color:#ffe4b5;background-color:transparent}.btn-link{font-weight:400;color:#ff8c00;text-decoration:none}.btn-link:hover{color:#ff8c00;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#d6dbdf;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:16px 32px;font-size:1.125rem;line-height:26px;border-radius:8px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:24px}.btn-group,.btn-group-vertical{position:relative;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group-vertical>.btn:hover,.btn-group>.btn:hover{z-index:1}.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.btn-group-vertical{flex-direction:column;align-items:flex-start;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn-group:not(:last-child)>.btn{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn:not(:first-child){border-top-left-radius:0;border-top-right-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#6c757d;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#ffe680;outline:0;box-shadow:0 0 0 .2rem rgba(255,204,0,.25)}.custom-select:focus::-ms-value{color:#6c757d;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #6c757d}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.125rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:8px}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-warning{color:#947617;background-color:#fff3cd;border-color:#ffeeba}.alert-warning .alert-link{color:#685310}.alert-light{color:#8d9295;background-color:#fcfdfe;border-color:#fbfcfd}.alert-light .alert-link{color:#73797c}.alert-dark{color:#363b41;background-color:#dbdcdd;border-color:#ccced0}.alert-dark .alert-link{color:#1f2225}.alert-white{color:#949698;background-color:#fff;border-color:#fff}.alert-white .alert-link{color:#7a7d7f}.alert-black{color:#212529;background-color:#d3d3d4;border-color:#c1c2c3}.alert-black .alert-link{color:#0a0c0d}.alert-orange{color:#945b14;background-color:#ffe8cc;border-color:#ffdfb8}.alert-orange .alert-link{color:#673f0e}.alert-light-orange{color:#948872;background-color:#fffaf0;border-color:#fff7ea}.alert-light-orange .alert-link{color:#786e5b}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.progress{display:flex;height:1rem;overflow:hidden;font-size:.75rem;background-color:#e9ecef;border-radius:8px}.progress-bar{display:flex;flex-direction:column;justify-content:center;overflow:hidden;color:#fff;text-align:center;white-space:nowrap;background-color:#fc0;transition:width .6s ease}@media(prefers-reduced-motion:reduce){.progress-bar{transition:none}}@-webkit-keyframes spinner-border{to{transform:rotate(360deg)}}@keyframes spinner-border{to{transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1}}.bg-warning{background-color:#ffc107}a.bg-warning:focus,a.bg-warning:hover{background-color:#d39e00}.bg-light{background-color:#f1f6f9}a.bg-light:focus,a.bg-light:hover{background-color:#cddfea}.bg-dark{background-color:#495057}a.bg-dark:focus,a.bg-dark:hover{background-color:#32373b}.bg-white{background-color:#fff}a.bg-white:focus,a.bg-white:hover{background-color:#e6e6e6}.bg-black{background-color:#212529}a.bg-black:focus,a.bg-black:hover{background-color:#0a0c0d}.bg-orange{background-color:#ff8c00}a.bg-orange:focus,a.bg-orange:hover{background-color:#cc7000}.bg-light-orange{background-color:#ffe4b5}a.bg-light-orange:focus,a.bg-light-orange:hover{background-color:#ffd182}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:980px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:980px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.overflow-hidden{overflow:hidden}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}@supports(position:sticky){.sticky-top{position:sticky;top:0;z-index:1020}}.w-25{width:25%}.w-50{width:50%}.w-75{width:75%}.w-100{width:100%}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:8px}.my-1{margin-top:8px}.mr-1{margin-right:8px}.mb-1,.my-1{margin-bottom:8px}.m-2{margin:16px}.my-2{margin-top:16px}.mr-2{margin-right:16px}.mb-2,.my-2{margin-bottom:16px}.m-3{margin:24px}.my-3{margin-top:24px}.mr-3{margin-right:24px}.mb-3,.my-3{margin-bottom:24px}.m-4{margin:32px}.my-4{margin-top:32px}.mr-4{margin-right:32px}.mb-4,.my-4{margin-bottom:32px}.m-5{margin:40px}.my-5{margin-top:40px}.mr-5{margin-right:40px}.mb-5,.my-5{margin-bottom:40px}.m-6{margin:48px}.my-6{margin-top:48px}.mr-6{margin-right:48px}.mb-6,.my-6{margin-bottom:48px}.m-7{margin:56px}.my-7{margin-top:56px}.mr-7{margin-right:56px}.mb-7,.my-7{margin-bottom:56px}.m-8{margin:64px}.my-8{margin-top:64px}.mr-8{margin-right:64px}.mb-8,.my-8{margin-bottom:64px}.m-9{margin:72px}.my-9{margin-top:72px}.mr-9{margin-right:72px}.mb-9,.my-9{margin-bottom:72px}.m-10{margin:80px}.my-10{margin-top:80px}.mr-10{margin-right:80px}.mb-10,.my-10{margin-bottom:80px}.m-12{margin:96px}.my-12{margin-top:96px}.mr-12{margin-right:96px}.mb-12,.my-12{margin-bottom:96px}.m-15{margin:120px}.my-15{margin-top:120px}.mr-15{margin-right:120px}.mb-15,.my-15{margin-bottom:120px}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:8px}.pt-1,.py-1{padding-top:8px}.pb-1,.py-1{padding-bottom:8px}.p-2{padding:16px}.pt-2,.py-2{padding-top:16px}.pb-2,.py-2{padding-bottom:16px}.p-3{padding:24px}.pt-3,.py-3{padding-top:24px}.pb-3,.py-3{padding-bottom:24px}.p-4{padding:32px}.pt-4,.py-4{padding-top:32px}.pb-4,.py-4{padding-bottom:32px}.p-5{padding:40px}.pt-5,.py-5{padding-top:40px}.pb-5,.py-5{padding-bottom:40px}.p-6{padding:48px}.pt-6,.py-6{padding-top:48px}.pb-6,.py-6{padding-bottom:48px}.p-7{padding:56px}.pt-7,.py-7{padding-top:56px}.pb-7,.py-7{padding-bottom:56px}.p-8{padding:64px}.pt-8,.py-8{padding-top:64px}.pb-8,.py-8{padding-bottom:64px}.p-9{padding:72px}.pt-9,.py-9{padding-top:72px}.pb-9,.py-9{padding-bottom:72px}.p-10{padding:80px}.pt-10,.py-10{padding-top:80px}.pb-10,.py-10{padding-bottom:80px}.p-12{padding:96px}.pt-12,.py-12{padding-top:96px}.pb-12,.py-12{padding-bottom:96px}.p-15{padding:120px}.pt-15,.py-15{padding-top:120px}.pb-15,.py-15{padding-bottom:120px}.m-n1{margin:-8px}.my-n1{margin-top:-8px}.mr-n1{margin-right:-8px}.mb-n1,.my-n1{margin-bottom:-8px}.m-n2{margin:-16px}.my-n2{margin-top:-16px}.mr-n2{margin-right:-16px}.mb-n2,.my-n2{margin-bottom:-16px}.m-n3{margin:-24px}.my-n3{margin-top:-24px}.mr-n3{margin-right:-24px}.mb-n3,.my-n3{margin-bottom:-24px}.m-n4{margin:-32px}.my-n4{margin-top:-32px}.mr-n4{margin-right:-32px}.mb-n4,.my-n4{margin-bottom:-32px}.m-n5{margin:-40px}.my-n5{margin-top:-40px}.mr-n5{margin-right:-40px}.mb-n5,.my-n5{margin-bottom:-40px}.m-n6{margin:-48px}.my-n6{margin-top:-48px}.mr-n6{margin-right:-48px}.mb-n6,.my-n6{margin-bottom:-48px}.m-n7{margin:-56px}.my-n7{margin-top:-56px}.mr-n7{margin-right:-56px}.mb-n7,.my-n7{margin-bottom:-56px}.m-n8{margin:-64px}.my-n8{margin-top:-64px}.mr-n8{margin-right:-64px}.mb-n8,.my-n8{margin-bottom:-64px}.m-n9{margin:-72px}.my-n9{margin-top:-72px}.mr-n9{margin-right:-72px}.mb-n9,.my-n9{margin-bottom:-72px}.m-n10{margin:-80px}.my-n10{margin-top:-80px}.mr-n10{margin-right:-80px}.mb-n10,.my-n10{margin-bottom:-80px}.m-n12{margin:-96px}.my-n12{margin-top:-96px}.mr-n12{margin-right:-96px}.mb-n12,.my-n12{margin-bottom:-96px}.m-n15{margin:-120px}.my-n15{margin-top:-120px}.mr-n15{margin-right:-120px}.mb-n15,.my-n15{margin-bottom:-120px}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:8px}.my-md-1{margin-top:8px}.mr-md-1{margin-right:8px}.mb-md-1,.my-md-1{margin-bottom:8px}.m-md-2{margin:16px}.my-md-2{margin-top:16px}.mr-md-2{margin-right:16px}.mb-md-2,.my-md-2{margin-bottom:16px}.m-md-3{margin:24px}.my-md-3{margin-top:24px}.mr-md-3{margin-right:24px}.mb-md-3,.my-md-3{margin-bottom:24px}.m-md-4{margin:32px}.my-md-4{margin-top:32px}.mr-md-4{margin-right:32px}.mb-md-4,.my-md-4{margin-bottom:32px}.m-md-5{margin:40px}.my-md-5{margin-top:40px}.mr-md-5{margin-right:40px}.mb-md-5,.my-md-5{margin-bottom:40px}.m-md-6{margin:48px}.my-md-6{margin-top:48px}.mr-md-6{margin-right:48px}.mb-md-6,.my-md-6{margin-bottom:48px}.m-md-7{margin:56px}.my-md-7{margin-top:56px}.mr-md-7{margin-right:56px}.mb-md-7,.my-md-7{margin-bottom:56px}.m-md-8{margin:64px}.my-md-8{margin-top:64px}.mr-md-8{margin-right:64px}.mb-md-8,.my-md-8{margin-bottom:64px}.m-md-9{margin:72px}.my-md-9{margin-top:72px}.mr-md-9{margin-right:72px}.mb-md-9,.my-md-9{margin-bottom:72px}.m-md-10{margin:80px}.my-md-10{margin-top:80px}.mr-md-10{margin-right:80px}.mb-md-10,.my-md-10{margin-bottom:80px}.m-md-12{margin:96px}.my-md-12{margin-top:96px}.mr-md-12{margin-right:96px}.mb-md-12,.my-md-12{margin-bottom:96px}.m-md-15{margin:120px}.my-md-15{margin-top:120px}.mr-md-15{margin-right:120px}.mb-md-15,.my-md-15{margin-bottom:120px}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:8px}.pt-md-1,.py-md-1{padding-top:8px}.pb-md-1,.py-md-1{padding-bottom:8px}.p-md-2{padding:16px}.pt-md-2,.py-md-2{padding-top:16px}.pb-md-2,.py-md-2{padding-bottom:16px}.p-md-3{padding:24px}.pt-md-3,.py-md-3{padding-top:24px}.pb-md-3,.py-md-3{padding-bottom:24px}.p-md-4{padding:32px}.pt-md-4,.py-md-4{padding-top:32px}.pb-md-4,.py-md-4{padding-bottom:32px}.p-md-5{padding:40px}.pt-md-5,.py-md-5{padding-top:40px}.pb-md-5,.py-md-5{padding-bottom:40px}.p-md-6{padding:48px}.pt-md-6,.py-md-6{padding-top:48px}.pb-md-6,.py-md-6{padding-bottom:48px}.p-md-7{padding:56px}.pt-md-7,.py-md-7{padding-top:56px}.pb-md-7,.py-md-7{padding-bottom:56px}.p-md-8{padding:64px}.pt-md-8,.py-md-8{padding-top:64px}.pb-md-8,.py-md-8{padding-bottom:64px}.p-md-9{padding:72px}.pt-md-9,.py-md-9{padding-top:72px}.pb-md-9,.py-md-9{padding-bottom:72px}.p-md-10{padding:80px}.pt-md-10,.py-md-10{padding-top:80px}.pb-md-10,.py-md-10{padding-bottom:80px}.p-md-12{padding:96px}.pt-md-12,.py-md-12{padding-top:96px}.pb-md-12,.py-md-12{padding-bottom:96px}.p-md-15{padding:120px}.pt-md-15,.py-md-15{padding-top:120px}.pb-md-15,.py-md-15{padding-bottom:120px}.m-md-n1{margin:-8px}.my-md-n1{margin-top:-8px}.mr-md-n1{margin-right:-8px}.mb-md-n1,.my-md-n1{margin-bottom:-8px}.m-md-n2{margin:-16px}.my-md-n2{margin-top:-16px}.mr-md-n2{margin-right:-16px}.mb-md-n2,.my-md-n2{margin-bottom:-16px}.m-md-n3{margin:-24px}.my-md-n3{margin-top:-24px}.mr-md-n3{margin-right:-24px}.mb-md-n3,.my-md-n3{margin-bottom:-24px}.m-md-n4{margin:-32px}.my-md-n4{margin-top:-32px}.mr-md-n4{margin-right:-32px}.mb-md-n4,.my-md-n4{margin-bottom:-32px}.m-md-n5{margin:-40px}.my-md-n5{margin-top:-40px}.mr-md-n5{margin-right:-40px}.mb-md-n5,.my-md-n5{margin-bottom:-40px}.m-md-n6{margin:-48px}.my-md-n6{margin-top:-48px}.mr-md-n6{margin-right:-48px}.mb-md-n6,.my-md-n6{margin-bottom:-48px}.m-md-n7{margin:-56px}.my-md-n7{margin-top:-56px}.mr-md-n7{margin-right:-56px}.mb-md-n7,.my-md-n7{margin-bottom:-56px}.m-md-n8{margin:-64px}.my-md-n8{margin-top:-64px}.mr-md-n8{margin-right:-64px}.mb-md-n8,.my-md-n8{margin-bottom:-64px}.m-md-n9{margin:-72px}.my-md-n9{margin-top:-72px}.mr-md-n9{margin-right:-72px}.mb-md-n9,.my-md-n9{margin-bottom:-72px}.m-md-n10{margin:-80px}.my-md-n10{margin-top:-80px}.mr-md-n10{margin-right:-80px}.mb-md-n10,.my-md-n10{margin-bottom:-80px}.m-md-n12{margin:-96px}.my-md-n12{margin-top:-96px}.mr-md-n12{margin-right:-96px}.mb-md-n12,.my-md-n12{margin-bottom:-96px}.m-md-n15{margin:-120px}.my-md-n15{margin-top:-120px}.mr-md-n15{margin-right:-120px}.mb-md-n15,.my-md-n15{margin-bottom:-120px}}@media(min-width:980px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:8px}.my-lg-1{margin-top:8px}.mr-lg-1{margin-right:8px}.mb-lg-1,.my-lg-1{margin-bottom:8px}.m-lg-2{margin:16px}.my-lg-2{margin-top:16px}.mr-lg-2{margin-right:16px}.mb-lg-2,.my-lg-2{margin-bottom:16px}.m-lg-3{margin:24px}.my-lg-3{margin-top:24px}.mr-lg-3{margin-right:24px}.mb-lg-3,.my-lg-3{margin-bottom:24px}.m-lg-4{margin:32px}.my-lg-4{margin-top:32px}.mr-lg-4{margin-right:32px}.mb-lg-4,.my-lg-4{margin-bottom:32px}.m-lg-5{margin:40px}.my-lg-5{margin-top:40px}.mr-lg-5{margin-right:40px}.mb-lg-5,.my-lg-5{margin-bottom:40px}.m-lg-6{margin:48px}.my-lg-6{margin-top:48px}.mr-lg-6{margin-right:48px}.mb-lg-6,.my-lg-6{margin-bottom:48px}.m-lg-7{margin:56px}.my-lg-7{margin-top:56px}.mr-lg-7{margin-right:56px}.mb-lg-7,.my-lg-7{margin-bottom:56px}.m-lg-8{margin:64px}.my-lg-8{margin-top:64px}.mr-lg-8{margin-right:64px}.mb-lg-8,.my-lg-8{margin-bottom:64px}.m-lg-9{margin:72px}.my-lg-9{margin-top:72px}.mr-lg-9{margin-right:72px}.mb-lg-9,.my-lg-9{margin-bottom:72px}.m-lg-10{margin:80px}.my-lg-10{margin-top:80px}.mr-lg-10{margin-right:80px}.mb-lg-10,.my-lg-10{margin-bottom:80px}.m-lg-12{margin:96px}.my-lg-12{margin-top:96px}.mr-lg-12{margin-right:96px}.mb-lg-12,.my-lg-12{margin-bottom:96px}.m-lg-15{margin:120px}.my-lg-15{margin-top:120px}.mr-lg-15{margin-right:120px}.mb-lg-15,.my-lg-15{margin-bottom:120px}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:8px}.pt-lg-1,.py-lg-1{padding-top:8px}.pb-lg-1,.py-lg-1{padding-bottom:8px}.p-lg-2{padding:16px}.pt-lg-2,.py-lg-2{padding-top:16px}.pb-lg-2,.py-lg-2{padding-bottom:16px}.p-lg-3{padding:24px}.pt-lg-3,.py-lg-3{padding-top:24px}.pb-lg-3,.py-lg-3{padding-bottom:24px}.p-lg-4{padding:32px}.pt-lg-4,.py-lg-4{padding-top:32px}.pb-lg-4,.py-lg-4{padding-bottom:32px}.p-lg-5{padding:40px}.pt-lg-5,.py-lg-5{padding-top:40px}.pb-lg-5,.py-lg-5{padding-bottom:40px}.p-lg-6{padding:48px}.pt-lg-6,.py-lg-6{padding-top:48px}.pb-lg-6,.py-lg-6{padding-bottom:48px}.p-lg-7{padding:56px}.pt-lg-7,.py-lg-7{padding-top:56px}.pb-lg-7,.py-lg-7{padding-bottom:56px}.p-lg-8{padding:64px}.pt-lg-8,.py-lg-8{padding-top:64px}.pb-lg-8,.py-lg-8{padding-bottom:64px}.p-lg-9{padding:72px}.pt-lg-9,.py-lg-9{padding-top:72px}.pb-lg-9,.py-lg-9{padding-bottom:72px}.p-lg-10{padding:80px}.pt-lg-10,.py-lg-10{padding-top:80px}.pb-lg-10,.py-lg-10{padding-bottom:80px}.p-lg-12{padding:96px}.pt-lg-12,.py-lg-12{padding-top:96px}.pb-lg-12,.py-lg-12{padding-bottom:96px}.p-lg-15{padding:120px}.pt-lg-15,.py-lg-15{padding-top:120px}.pb-lg-15,.py-lg-15{padding-bottom:120px}.m-lg-n1{margin:-8px}.my-lg-n1{margin-top:-8px}.mr-lg-n1{margin-right:-8px}.mb-lg-n1,.my-lg-n1{margin-bottom:-8px}.m-lg-n2{margin:-16px}.my-lg-n2{margin-top:-16px}.mr-lg-n2{margin-right:-16px}.mb-lg-n2,.my-lg-n2{margin-bottom:-16px}.m-lg-n3{margin:-24px}.my-lg-n3{margin-top:-24px}.mr-lg-n3{margin-right:-24px}.mb-lg-n3,.my-lg-n3{margin-bottom:-24px}.m-lg-n4{margin:-32px}.my-lg-n4{margin-top:-32px}.mr-lg-n4{margin-right:-32px}.mb-lg-n4,.my-lg-n4{margin-bottom:-32px}.m-lg-n5{margin:-40px}.my-lg-n5{margin-top:-40px}.mr-lg-n5{margin-right:-40px}.mb-lg-n5,.my-lg-n5{margin-bottom:-40px}.m-lg-n6{margin:-48px}.my-lg-n6{margin-top:-48px}.mr-lg-n6{margin-right:-48px}.mb-lg-n6,.my-lg-n6{margin-bottom:-48px}.m-lg-n7{margin:-56px}.my-lg-n7{margin-top:-56px}.mr-lg-n7{margin-right:-56px}.mb-lg-n7,.my-lg-n7{margin-bottom:-56px}.m-lg-n8{margin:-64px}.my-lg-n8{margin-top:-64px}.mr-lg-n8{margin-right:-64px}.mb-lg-n8,.my-lg-n8{margin-bottom:-64px}.m-lg-n9{margin:-72px}.my-lg-n9{margin-top:-72px}.mr-lg-n9{margin-right:-72px}.mb-lg-n9,.my-lg-n9{margin-bottom:-72px}.m-lg-n10{margin:-80px}.my-lg-n10{margin-top:-80px}.mr-lg-n10{margin-right:-80px}.mb-lg-n10,.my-lg-n10{margin-bottom:-80px}.m-lg-n12{margin:-96px}.my-lg-n12{margin-top:-96px}.mr-lg-n12{margin-right:-96px}.mb-lg-n12,.my-lg-n12{margin-bottom:-96px}.m-lg-n15{margin:-120px}.my-lg-n15{margin-top:-120px}.mr-lg-n15{margin-right:-120px}.mb-lg-n15,.my-lg-n15{margin-bottom:-120px}}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:980px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-warning{color:#ffc107}a.text-warning:focus,a.text-warning:hover{color:#ba8b00}.text-light{color:#f1f6f9}a.text-light:focus,a.text-light:hover{color:#bbd4e2}.text-dark{color:#495057}a.text-dark:focus,a.text-dark:hover{color:#262a2d}.text-white{color:#fff}a.text-white:focus,a.text-white:hover{color:#d9d9d9}.text-black{color:#212529}a.text-black:focus,a.text-black:hover{color:#000}.text-orange{color:#ff8c00}a.text-orange:focus,a.text-orange:hover{color:#b36200}.text-light-orange{color:#ffe4b5}a.text-light-orange:focus,a.text-light-orange:hover{color:#ffc869}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(33,37,41,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #d6dbdf;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:980px}.container{min-width:980px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}.docs a:link,.docs a:visited{color:#f14600;text-decoration:none}.docs a:active,.docs a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.w-15{width:15%}.height-20{height:20px}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}@media(prefers-color-scheme:dark){.syntax{background:#2d2d2d;color:#f2f0ec}.syntax .c{color:#747369}.syntax .k{color:#c9c}.syntax .n{color:#f2f0ec}.syntax .o{color:#6cc}.syntax .p{color:#f2f0ec}.syntax .c1{color:#747369}.syntax .ld{color:#9c9}.syntax .m{color:#f99157}.syntax .s{color:#9c9}.syntax .nb{color:#f2f0ec}.syntax .no{color:#f2777a}.syntax .py{color:#f2f0ec}.syntax .nt{color:#6cc}.syntax .w{color:#f2f0ec}.syntax .mf{color:#f99157}.syntax .mi{color:#f99157}.syntax .s2{color:#9c9}.syntax .s1{color:#9c9}.syntax .ss{color:#9c9}}@media screen and (max-width:978.98px){.btn{padding:8px 16px}}@media screen and (max-width:978.98px){.btn-lg{padding:12px 24px}}img{max-width:100%}@media screen and (max-width:978.98px){.lead{font-size:1.125rem}}ul{list-style-type:square;padding-left:1.25em}ul li:not(:last-child){margin-bottom:16px}ul li::marker{color:#ff3939}.bg-offset-right{bottom:0;left:-24px;position:absolute;top:0;width:calc(100vw+24px);z-index:-1}@media screen and (min-width:1240px){.bg-offset-right{left:-96px;width:calc(100vw+96px)}}.display-5{color:#212529;font-size:20px;font-weight:500}.display-6{color:#212529;font-size:14px;font-weight:700}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=other-functions>Прочие функции<a class=headerlink href=../amp/#other-functions title="Permanent link"> </a></h1> <h2 id=hostname>hostName()<a class=headerlink href=../amp/#hostname title="Permanent link"> </a></h2> <p>Возвращает строку - имя хоста, на котором эта функция была выполнена. При распределённой обработке запроса, это будет имя хоста удалённого сервера, если функция выполняется на удалённом сервере.</p> <h2 id=getmacro>getMacro<a class=headerlink href=../amp/#getmacro title="Permanent link"> </a></h2> <p>Возвращает именованное значение из секции <a href=../../../../operations/server-configuration-parameters/settings/amp/#macros>macros</a> конфигурации сервера.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getMacro</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>name</code> — имя, которое необходимо получить из секции <code class=syntax>macros</code>. <a href=../../../data-types/string/amp/#string>String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение по указанному имени.</li> </ul> <p>Тип: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Пример</strong></p> <p>Пример секции <code class=syntax>macros</code> в конфигурационном файле сервера:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;macros&gt;</span>
    <span class=nt>&lt;test&gt;</span>Value<span class=nt>&lt;/test&gt;</span>
<span class=nt>&lt;/macros&gt;</span>
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>getMacro</span><span class=p>(</span><span class=s1>'test'</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─getMacro('test')─┐
│ Value            │
└──────────────────┘
</code></pre></div> <p>Альтернативный способ получения значения:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>macros</span>
<span class=k>WHERE</span> <span class=n>macro</span> <span class=o>=</span> <span class=s1>'test'</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─macro─┬─substitution─┐
│ test  │ Value        │
└───────┴──────────────┘
</code></pre></div> <h2 id=fqdn>FQDN<a class=headerlink href=../amp/#fqdn title="Permanent link"> </a></h2> <p>Возвращает полное имя домена.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>fqdn</span><span class=p>()</span>
</code></pre></div> <p>Эта функция регистронезависимая.</p> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Полное имя домена.</li> </ul> <p>Тип: <code class=syntax>String</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>FQDN</span><span class=p>();</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─FQDN()──────────────────────────┐
│ clickhouse.ru-central1.internal │
└─────────────────────────────────┘
</code></pre></div> <h2 id=basename>basename<a class=headerlink href=../amp/#basename title="Permanent link"> </a></h2> <p>Извлекает конечную часть строки после последнего слэша или бэкслэша. Функция часто используется для извлечения имени файла из пути.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>basename</span><span class=p>(</span> <span class=n>expr</span> <span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expr</code> — выражение, возвращающее значение типа <a href=.././amp/ >String</a>. В результирующем значении все бэкслэши должны быть экранированы.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Строка, содержащая:</p> <ul> <li> <p>Конечную часть строки после последнего слэша или бэкслэша.</p> <div class=codehilite><pre><span></span><code class=syntax>Если входная строка содержит путь, заканчивающийся слэшем или бэкслэшем, например, `/` или `с:\`, функция возвращает пустую строку.
</code></pre></div> </li> <li> <p>Исходная строка, если нет слэша или бэкслэша.</p> </li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'some/long/path/to/file'</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'some\\long\\path\\to\\file'</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=s1>'some-file-name'</span> <span class=k>AS</span> <span class=n>a</span><span class=p>,</span> <span class=n>basename</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─a──────────────┬─basename('some-file-name')─┐
│ some-file-name │ some-file-name             │
└────────────────┴────────────────────────────┘
</code></pre></div> <h2 id=visiblewidthx>visibleWidth(x)<a class=headerlink href=../amp/#visiblewidthx title="Permanent link"> </a></h2> <p>Вычисляет приблизительную ширину при выводе значения в текстовом (tab-separated) виде на консоль.<br> Функция используется системой для реализации Pretty форматов.</p> <p><code class=syntax>NULL</code> представляется как строка, соответствующая отображению <code class=syntax>NULL</code> в форматах <code class=syntax>Pretty</code>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>visibleWidth</span><span class=p>(</span><span class=k>NULL</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─visibleWidth(NULL)─┐
│                  4 │
└────────────────────┘
</code></pre></div> <h2 id=totypenamex>toTypeName(x)<a class=headerlink href=../amp/#totypenamex title="Permanent link"> </a></h2> <p>Возвращает строку, содержащую имя типа переданного аргумента.</p> <p>Если на вход функции передать <code class=syntax>NULL</code>, то она вернёт тип <code class=syntax>Nullable(Nothing)</code>, что соответствует внутреннему представлению <code class=syntax>NULL</code> в ClickHouse.</p> <h2 id=function-blocksize>blockSize()<a class=headerlink href=../amp/#function-blocksize title="Permanent link"> </a></h2> <p>Получить размер блока.<br> В ClickHouse выполнение запроса всегда идёт по блокам (наборам кусочков столбцов). Функция позволяет получить размер блока, для которого её вызвали.</p> <h2 id=function-bytesize>byteSize<a class=headerlink href=../amp/#function-bytesize title="Permanent link"> </a></h2> <p>Возвращает оценку в байтах размера аргументов в памяти в несжатом виде.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>byteSize</span><span class=p>(</span><span class=n>argument</span> <span class=p>[,</span> <span class=p>...])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>argument</code> — значение.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Оценка размера аргументов в памяти в байтах.</li> </ul> <p>Тип: <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</p> <p><strong>Примеры</strong></p> <p>Для аргументов типа <a href=../../../data-types/string/amp/ >String</a> функция возвращает длину строки + 9 (нуль-терминатор + длина)</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>byteSize</span><span class=p>(</span><span class=s1>'string'</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─byteSize('string')─┐
│                 15 │
└────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>test</span>
<span class=p>(</span>
    <span class=o>`</span><span class=k>key</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u8</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u16</span><span class=o>`</span> <span class=n>UInt16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u32</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>u64</span><span class=o>`</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i8</span><span class=o>`</span> <span class=nb>Int8</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i16</span><span class=o>`</span> <span class=n>Int16</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i32</span><span class=o>`</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>i64</span><span class=o>`</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=o>`</span><span class=n>f32</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=n>f64</span><span class=o>`</span> <span class=n>Float64</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>key</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>test</span> <span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mi>32</span><span class=p>,</span> <span class=mi>64</span><span class=p>,</span>  <span class=o>-</span><span class=mi>8</span><span class=p>,</span> <span class=o>-</span><span class=mi>16</span><span class=p>,</span> <span class=o>-</span><span class=mi>32</span><span class=p>,</span> <span class=o>-</span><span class=mi>64</span><span class=p>,</span> <span class=mi>32</span><span class=p>.</span><span class=mi>32</span><span class=p>,</span> <span class=mi>64</span><span class=p>.</span><span class=mi>64</span><span class=p>);</span>

<span class=k>SELECT</span> <span class=k>key</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u8</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt8</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u16</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt16</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u32</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>u64</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>UInt64</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i8</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=nb>Int8</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i16</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int16</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i32</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>i64</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Int64</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>f32</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Float32</span><span class=p>)</span><span class=o>`</span><span class=p>,</span> <span class=n>byteSize</span><span class=p>(</span><span class=n>f64</span><span class=p>)</span> <span class=k>AS</span> <span class=o>`</span><span class=n>byteSize</span><span class=p>(</span><span class=n>Float64</span><span class=p>)</span><span class=o>`</span> <span class=k>FROM</span> <span class=n>test</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>key</span> <span class=k>ASC</span> <span class=n>FORMAT</span> <span class=n>Vertical</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
key:               1
byteSize(UInt8):   1
byteSize(UInt16):  2
byteSize(UInt32):  4
byteSize(UInt64):  8
byteSize(Int8):    1
byteSize(Int16):   2
byteSize(Int32):   4
byteSize(Int64):   8
byteSize(Float32): 4
byteSize(Float64): 8
</code></pre></div> <p>Если функция принимает несколько аргументов, то она возвращает их совокупный размер в байтах.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>byteSize</span><span class=p>(</span><span class=k>NULL</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>3</span><span class=p>,</span> <span class=s1>''</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─byteSize(NULL, 1, 0.3, '')─┐
│                         19 │
└────────────────────────────┘
</code></pre></div> <h2 id=materializex>materialize(x)<a class=headerlink href=../amp/#materializex title="Permanent link"> </a></h2> <p>Превращает константу в полноценный столбец, содержащий только одно значение.<br> В ClickHouse полноценные столбцы и константы представлены в памяти по-разному. Функции по-разному работают для аргументов-констант и обычных аргументов (выполняется разный код), хотя результат почти всегда должен быть одинаковым. Эта функция предназначена для отладки такого поведения.</p> <h2 id=ignore>ignore(…)<a class=headerlink href=../amp/#ignore title="Permanent link"> </a></h2> <p>Принимает любые аргументы, в т.ч. <code class=syntax>NULL</code>, всегда возвращает 0.<br> При этом, аргумент всё равно вычисляется. Это может использоваться для бенчмарков.</p> <h2 id=sleepseconds>sleep(seconds)<a class=headerlink href=../amp/#sleepseconds title="Permanent link"> </a></h2> <p>Спит seconds секунд на каждый блок данных. Можно указать как целое число, так и число с плавающей запятой.</p> <h2 id=currentdatabase>currentDatabase()<a class=headerlink href=../amp/#currentdatabase title="Permanent link"> </a></h2> <p>Возвращает имя текущей базы данных.<br> Эта функция может использоваться в параметрах движка таблицы в запросе CREATE TABLE там, где нужно указать базу данных.</p> <h2 id=other-function-currentuser>currentUser()<a class=headerlink href=../amp/#other-function-currentuser title="Permanent link"> </a></h2> <p>Возвращает логин текущего пользователя. При распределенном запросе, возвращается имя пользователя, инициировавшего запрос.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>currentUser</span><span class=p>();</span>
</code></pre></div> <p>Алиас: <code class=syntax>user()</code>, <code class=syntax>USER()</code>.</p> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Логин текущего пользователя.</li> <li>При распределенном запросе — логин пользователя, инициировавшего запрос.</li> </ul> <p>Тип: <code class=syntax>String</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>currentUser</span><span class=p>();</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─currentUser()─┐
│ default       │
└───────────────┘
</code></pre></div> <h2 id=is-constant>isConstant<a class=headerlink href=../amp/#is-constant title="Permanent link"> </a></h2> <p>Проверяет, является ли аргумент константным выражением.</p> <p>Константное выражение — это выражение, результат которого известен на момент анализа запроса (до его выполнения). Например, выражения над <a href=../../../syntax/amp/#literals>литералами</a> являются константными.</p> <p>Используется в целях разработки, отладки или демонстрирования.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>isConstant</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — выражение для проверки.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>1</code> — выражение <code class=syntax>x</code> является константным.</li> <li><code class=syntax>0</code> — выражение <code class=syntax>x</code> не является константным.</li> </ul> <p>Тип: <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</p> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>isConstant</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=mi>43</span> <span class=k>AS</span> <span class=n>x</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(plus(x, 1))─┐
│                      1 │
└────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span> <span class=mi>3</span><span class=p>.</span><span class=mi>14</span> <span class=k>AS</span> <span class=n>pi</span> <span class=k>SELECT</span> <span class=n>isConstant</span><span class=p>(</span><span class=n>cos</span><span class=p>(</span><span class=n>pi</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(cos(pi))─┐
│                   1 │
└─────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>isConstant</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─isConstant(number)─┐
│                  0 │
└────────────────────┘
</code></pre></div> <h2 id=isfinitex>isFinite(x)<a class=headerlink href=../amp/#isfinitex title="Permanent link"> </a></h2> <p>Принимает Float32 или Float64 и возвращает UInt8, равный 1, если аргумент не бесконечный и не NaN, иначе 0.</p> <h2 id=ifnotfinite>ifNotFinite<a class=headerlink href=../amp/#ifnotfinite title="Permanent link"> </a></h2> <p>Проверяет, является ли значение дробного числа с плавающей точкой конечным.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax>ifNotFinite(x,y)
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — значение, которое нужно проверить на бесконечность. Тип: <a href=.././amp/ >Float*</a>.</li> <li><code class=syntax>y</code> — запасное значение. Тип: <a href=.././amp/ >Float*</a>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>x</code>, если <code class=syntax>x</code> принимает конечное значение.</li> <li><code class=syntax>y</code>, если<code class=syntax>x</code> принимает не конечное значение.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax>SELECT 1/0 as infimum, ifNotFinite(infimum,42)
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─infimum─┬─ifNotFinite(divide(1, 0), 42)─┐
│     inf │                            42 │
└─────────┴───────────────────────────────┘
</code></pre></div> <p>Аналогичный результат можно получить с помощью <a href=../../conditional-functions/amp/#ternary-operator>тернарного оператора</a> <code class=syntax>isFinite(x) ? x : y</code>.</p> <h2 id=isinfinitex>isInfinite(x)<a class=headerlink href=../amp/#isinfinitex title="Permanent link"> </a></h2> <p>Принимает Float32 или Float64 и возвращает UInt8, равный 1, если аргумент бесконечный, иначе 0. Отметим, что в случае NaN возвращается 0.</p> <h2 id=isnanx>isNaN(x)<a class=headerlink href=../amp/#isnanx title="Permanent link"> </a></h2> <p>Принимает Float32 или Float64 и возвращает UInt8, равный 1, если аргумент является NaN, иначе 0.</p> <h2 id=hascolumnintablehostname-username-password-database-table-column>hasColumnInTable([‘hostname’[, ‘username’[, ‘password’]],] ‘database’, ‘table’, ‘column’)<a class=headerlink href=../amp/#hascolumnintablehostname-username-password-database-table-column title="Permanent link"> </a></h2> <p>Принимает константные строки - имя базы данных, имя таблицы и название столбца. Возвращает константное выражение типа UInt8, равное 1,<br> если есть столбец, иначе 0. Если задан параметр hostname, проверка будет выполнена на удалённом сервере.<br> Функция кидает исключение, если таблица не существует.<br> Для элементов вложенной структуры данных функция проверяет существование столбца. Для самой же вложенной структуры данных функция возвращает 0.</p> <h2 id=function-bar>bar<a class=headerlink href=../amp/#function-bar title="Permanent link"> </a></h2> <p>Позволяет построить unicode-art диаграмму.</p> <p><code class=syntax>bar(x, min, max, width)</code> рисует полосу ширины пропорциональной <code class=syntax>(x - min)</code> и равной <code class=syntax>width</code> символов при <code class=syntax>x = max</code>.</p> <p>Аргументы:</p> <ul> <li><code class=syntax>x</code> — Величина для отображения.</li> <li><code class=syntax>min, max</code> — Целочисленные константы, значение должно помещаться в <code class=syntax>Int64</code>.</li> <li><code class=syntax>width</code> — Константа, положительное число, может быть дробным.</li> </ul> <p>Полоса рисуется с точностью до одной восьмой символа.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>toHour</span><span class=p>(</span><span class=n>EventTime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>h</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span><span class=p>,</span>
    <span class=n>bar</span><span class=p>(</span><span class=k>c</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>600000</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span> <span class=k>AS</span> <span class=n>bar</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>h</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>h</span> <span class=k>ASC</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌──h─┬──────c─┬─bar────────────────┐
│  0 │ 292907 │ █████████▋         │
│  1 │ 180563 │ ██████             │
│  2 │ 114861 │ ███▋               │
│  3 │  85069 │ ██▋                │
│  4 │  68543 │ ██▎                │
│  5 │  78116 │ ██▌                │
│  6 │ 113474 │ ███▋               │
│  7 │ 170678 │ █████▋             │
│  8 │ 278380 │ █████████▎         │
│  9 │ 391053 │ █████████████      │
│ 10 │ 457681 │ ███████████████▎   │
│ 11 │ 493667 │ ████████████████▍  │
│ 12 │ 509641 │ ████████████████▊  │
│ 13 │ 522947 │ █████████████████▍ │
│ 14 │ 539954 │ █████████████████▊ │
│ 15 │ 528460 │ █████████████████▌ │
│ 16 │ 539201 │ █████████████████▊ │
│ 17 │ 523539 │ █████████████████▍ │
│ 18 │ 506467 │ ████████████████▊  │
│ 19 │ 520915 │ █████████████████▎ │
│ 20 │ 521665 │ █████████████████▍ │
│ 21 │ 542078 │ ██████████████████ │
│ 22 │ 493642 │ ████████████████▍  │
│ 23 │ 400397 │ █████████████▎     │
└────┴────────┴────────────────────┘
</code></pre></div> <h2 id=transform>transform<a class=headerlink href=../amp/#transform title="Permanent link"> </a></h2> <p>Преобразовать значение согласно явно указанному отображению одних элементов на другие.<br> Имеется два варианта функции:</p> <h3 id=transformx-array-from-array-to-default>transform(x, array_from, array_to, default)<a class=headerlink href=../amp/#transformx-array-from-array-to-default title="Permanent link"> </a></h3> <p><code class=syntax>x</code> - что преобразовывать.</p> <p><code class=syntax>array_from</code> - константный массив значений для преобразования.</p> <p><code class=syntax>array_to</code> - константный массив значений, в которые должны быть преобразованы значения из from.</p> <p><code class=syntax>default</code> - какое значение использовать, если x не равен ни одному из значений во from.</p> <p><code class=syntax>array_from</code> и <code class=syntax>array_to</code> - массивы одинаковых размеров.</p> <p>Типы:</p> <p><code class=syntax>transform(T, Array(T), Array(U), U) -&gt; U</code></p> <p><code class=syntax>T</code> и <code class=syntax>U</code> - могут быть числовыми, строковыми, или Date или DateTime типами.<br> При этом, где обозначена одна и та же буква (T или U), могут быть, в случае числовых типов, не совпадающие типы, а типы, для которых есть общий тип.<br> Например, первый аргумент может иметь тип Int64, а второй - Array(UInt16).</p> <p>Если значение x равно одному из элементов массива array_from, то возвращает соответствующий (такой же по номеру) элемент массива array_to; иначе возвращает default. Если имеется несколько совпадающих элементов в array_from, то возвращает какой-нибудь из соответствующих.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>transform</span><span class=p>(</span><span class=n>SearchEngineID</span><span class=p>,</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=s1>'Yandex'</span><span class=p>,</span> <span class=s1>'Google'</span><span class=p>],</span> <span class=s1>'Other'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>title</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>WHERE</span> <span class=n>SearchEngineID</span> <span class=o>!=</span> <span class=mi>0</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>title</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─title─────┬──────c─┐
│ Yandex    │ 498635 │
│ Google    │ 229872 │
│ Other     │ 104472 │
└───────────┴────────┘
</code></pre></div> <h3 id=transformx-array-from-array-to>transform(x, array_from, array_to)<a class=headerlink href=../amp/#transformx-array-from-array-to title="Permanent link"> </a></h3> <p>Отличается от первого варианта отсутствующим аргументом default.<br> Если значение x равно одному из элементов массива array_from, то возвращает соответствующий (такой же по номеру) элемент массива array_to; иначе возвращает x.</p> <p>Типы:</p> <p><code class=syntax>transform(T, Array(T), Array(T)) -&gt; T</code></p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>transform</span><span class=p>(</span><span class=k>domain</span><span class=p>(</span><span class=n>Referer</span><span class=p>),</span> <span class=p>[</span><span class=s1>'yandex.ru'</span><span class=p>,</span> <span class=s1>'google.ru'</span><span class=p>,</span> <span class=s1>'vk.com'</span><span class=p>],</span> <span class=p>[</span><span class=s1>'www.yandex'</span><span class=p>,</span> <span class=s1>'example.com'</span><span class=p>])</span> <span class=k>AS</span> <span class=n>s</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span>
<span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=k>domain</span><span class=p>(</span><span class=n>Referer</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>count</span><span class=p>()</span> <span class=k>DESC</span>
<span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─s──────────────┬───────c─┐
│                │ 2906259 │
│ www.yandex     │  867767 │
│ ███████.ru     │  313599 │
│ mail.yandex.ru │  107147 │
│ ██████.ru      │  100355 │
│ █████████.ru   │   65040 │
│ news.yandex.ru │   64515 │
│ ██████.net     │   59141 │
│ example.com    │   57316 │
└────────────────┴─────────┘
</code></pre></div> <h2 id=formatreadablesizex>formatReadableSize(x)<a class=headerlink href=../amp/#formatreadablesizex title="Permanent link"> </a></h2> <p>Принимает размер (число байт). Возвращает округленный размер с суффиксом (KiB, MiB и т.д.) в виде строки.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>arrayJoin</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1024</span><span class=p>,</span> <span class=mi>1024</span><span class=o>*</span><span class=mi>1024</span><span class=p>,</span> <span class=mi>192851925</span><span class=p>])</span> <span class=k>AS</span> <span class=n>filesize_bytes</span><span class=p>,</span>
    <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesize_bytes</span><span class=p>)</span> <span class=k>AS</span> <span class=n>filesize</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─filesize_bytes─┬─filesize───┐
│              1 │ 1.00 B     │
│           1024 │ 1.00 KiB   │
│        1048576 │ 1.00 MiB   │
│      192851925 │ 183.92 MiB │
└────────────────┴────────────┘
</code></pre></div> <h2 id=formatreadablequantityx>formatReadableQuantity(x)<a class=headerlink href=../amp/#formatreadablequantityx title="Permanent link"> </a></h2> <p>Принимает число. Возвращает округленное число с суффиксом (thousand, million, billion и т.д.) в виде строки.</p> <p>Облегчает визуальное восприятие больших чисел живым человеком.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>arrayJoin</span><span class=p>([</span><span class=mi>1024</span><span class=p>,</span> <span class=mi>1234</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=p>(</span><span class=mi>4567</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>)</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=mi>98765432101234</span><span class=p>])</span> <span class=k>AS</span> <span class=nb>number</span><span class=p>,</span>
    <span class=n>formatReadableQuantity</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>AS</span> <span class=n>number_for_humans</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─────────number─┬─number_for_humans─┐
│           1024 │ 1.02 thousand     │
│        1234000 │ 1.23 million      │
│     4567000000 │ 4.57 billion      │
│ 98765432101234 │ 98.77 trillion    │
└────────────────┴───────────────────┘
</code></pre></div> <h2 id=leasta-b>least(a, b)<a class=headerlink href=../amp/#leasta-b title="Permanent link"> </a></h2> <p>Возвращает наименьшее значение из a и b.</p> <h2 id=greatesta-b>greatest(a, b)<a class=headerlink href=../amp/#greatesta-b title="Permanent link"> </a></h2> <p>Возвращает наибольшее значение из a и b.</p> <h2 id=uptime>uptime()<a class=headerlink href=../amp/#uptime title="Permanent link"> </a></h2> <p>Возвращает аптайм сервера в секундах.</p> <h2 id=version>version()<a class=headerlink href=../amp/#version title="Permanent link"> </a></h2> <p>Возвращает версию сервера в виде строки.</p> <h2 id=function-rownumberinblock>rowNumberInBlock<a class=headerlink href=../amp/#function-rownumberinblock title="Permanent link"> </a></h2> <p>Возвращает порядковый номер строки в блоке данных. Для каждого блока данных нумерация начинается с 0.</p> <h2 id=rownumberinallblocks>rowNumberInAllBlocks()<a class=headerlink href=../amp/#rownumberinallblocks title="Permanent link"> </a></h2> <p>Возвращает порядковый номер строки в блоке данных. Функция учитывает только задействованные блоки данных.</p> <h2 id=neighbor>neighbor<a class=headerlink href=../amp/#neighbor title="Permanent link"> </a></h2> <p>Функция позволяет получить доступ к значению в столбце <code class=syntax>column</code>, находящемуся на смещении <code class=syntax>offset</code> относительно текущей строки. Является частичной реализацией <a href=https://en.wikipedia.org/wiki/SQL_window_function rel="external nofollow noreferrer" target=_blank>оконных функций</a> <code class=syntax>LEAD()</code> и <code class=syntax>LAG()</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>neighbor</span><span class=p>(</span><span class=k>column</span><span class=p>,</span> <span class=k>offset</span><span class=p>[,</span> <span class=n>default_value</span><span class=p>])</span>
</code></pre></div> <p>Результат функции зависит от затронутых блоков данных и порядка данных в блоке.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Предупреждение</p> <p>Функция может получить доступ к значению в столбце соседней строки только внутри обрабатываемого в данный момент блока данных.</p> </div> <p>Порядок строк, используемый при вычислении функции <code class=syntax>neighbor</code>, может отличаться от порядка строк, возвращаемых пользователю.<br> Чтобы этого не случилось, вы можете сделать подзапрос с <a href=../../../statements/select/order-by/amp/ >ORDER BY</a> и вызвать функцию извне подзапроса.</p> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>column</code> — имя столбца или скалярное выражение.</li> <li><code class=syntax>offset</code> — смещение от текущей строки <code class=syntax>column</code>. <a href=.././amp/ >Int64</a>.</li> <li><code class=syntax>default_value</code> — опциональный параметр. Значение, которое будет возвращено, если смещение выходит за пределы блока данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Значение <code class=syntax>column</code> в смещении от текущей строки, если значение <code class=syntax>offset</code> не выходит за пределы блока.</li> <li>Значение по умолчанию для <code class=syntax>column</code>, если значение <code class=syntax>offset</code> выходит за пределы блока данных. Если передан параметр <code class=syntax>default_value</code>, то значение берется из него.</li> </ul> <p>Тип: зависит от данных в <code class=syntax>column</code> или переданного значения по умолчанию в <code class=syntax>default_value</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=nb>number</span><span class=p>,</span> <span class=n>neighbor</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span> <span class=k>LIMIT</span> <span class=mi>10</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─neighbor(number, 2)─┐
│      0 │                   2 │
│      1 │                   3 │
│      2 │                   4 │
│      3 │                   5 │
│      4 │                   6 │
│      5 │                   7 │
│      6 │                   8 │
│      7 │                   9 │
│      8 │                   0 │
│      9 │                   0 │
└────────┴─────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=nb>number</span><span class=p>,</span> <span class=n>neighbor</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>999</span><span class=p>)</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span> <span class=k>LIMIT</span> <span class=mi>10</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─neighbor(number, 2, 999)─┐
│      0 │                        2 │
│      1 │                        3 │
│      2 │                        4 │
│      3 │                        5 │
│      4 │                        6 │
│      5 │                        7 │
│      6 │                        8 │
│      7 │                        9 │
│      8 │                      999 │
│      9 │                      999 │
└────────┴──────────────────────────┘
</code></pre></div> <p>Эта функция может использоваться для оценки year-over-year значение показателя:</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>'2018-01-01'</span><span class=p>)</span> <span class=k>AS</span> <span class=n>start_date</span>
<span class=k>SELECT</span>
    <span class=n>toStartOfMonth</span><span class=p>(</span><span class=n>start_date</span> <span class=o>+</span> <span class=p>(</span><span class=nb>number</span> <span class=o>*</span> <span class=mi>32</span><span class=p>))</span> <span class=k>AS</span> <span class=k>month</span><span class=p>,</span>
    <span class=n>toInt32</span><span class=p>(</span><span class=k>month</span><span class=p>)</span> <span class=o>%</span> <span class=mi>100</span> <span class=k>AS</span> <span class=n>money</span><span class=p>,</span>
    <span class=n>neighbor</span><span class=p>(</span><span class=n>money</span><span class=p>,</span> <span class=o>-</span><span class=mi>12</span><span class=p>)</span> <span class=k>AS</span> <span class=n>prev_year</span><span class=p>,</span>
    <span class=n>round</span><span class=p>(</span><span class=n>prev_year</span> <span class=o>/</span> <span class=n>money</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=k>AS</span> <span class=n>year_over_year</span>
<span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────month─┬─money─┬─prev_year─┬─year_over_year─┐
│ 2018-01-01 │    32 │         0 │              0 │
│ 2018-02-01 │    63 │         0 │              0 │
│ 2018-03-01 │    91 │         0 │              0 │
│ 2018-04-01 │    22 │         0 │              0 │
│ 2018-05-01 │    52 │         0 │              0 │
│ 2018-06-01 │    83 │         0 │              0 │
│ 2018-07-01 │    13 │         0 │              0 │
│ 2018-08-01 │    44 │         0 │              0 │
│ 2018-09-01 │    75 │         0 │              0 │
│ 2018-10-01 │     5 │         0 │              0 │
│ 2018-11-01 │    36 │         0 │              0 │
│ 2018-12-01 │    66 │         0 │              0 │
│ 2019-01-01 │    97 │        32 │           0.33 │
│ 2019-02-01 │    28 │        63 │           2.25 │
│ 2019-03-01 │    56 │        91 │           1.62 │
│ 2019-04-01 │    87 │        22 │           0.25 │
└────────────┴───────┴───────────┴────────────────┘
</code></pre></div> <h2 id=other_functions-runningdifference>runningDifference(x)<a class=headerlink href=../amp/#other_functions-runningdifference title="Permanent link"> </a></h2> <p>Считает разницу между последовательными значениями строк в блоке данных.<br> Возвращает 0 для первой строки и разницу с предыдущей строкой для каждой последующей строки.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Предупреждение</p> <p>Функция может взять значение предыдущей строки только внутри текущего обработанного блока данных.</p> </div> <p>Результат функции зависит от затронутых блоков данных и порядка данных в блоке.</p> <p>Порядок строк, используемый при вычислении функции <code class=syntax>runningDifference</code>, может отличаться от порядка строк, возвращаемых пользователю.<br> Чтобы этого не случилось, вы можете сделать подзапрос с <a href=../../../statements/select/order-by/amp/ >ORDER BY</a> и вызвать функцию извне подзапроса.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>EventID</span><span class=p>,</span>
    <span class=n>EventTime</span><span class=p>,</span>
    <span class=n>runningDifference</span><span class=p>(</span><span class=n>EventTime</span><span class=p>)</span> <span class=k>AS</span> <span class=n>delta</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>SELECT</span>
        <span class=n>EventID</span><span class=p>,</span>
        <span class=n>EventTime</span>
    <span class=k>FROM</span> <span class=n>events</span>
    <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=s1>'2016-11-24'</span>
    <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventTime</span> <span class=k>ASC</span>
    <span class=k>LIMIT</span> <span class=mi>5</span>
<span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─EventID─┬───────────EventTime─┬─delta─┐
│    1106 │ 2016-11-24 00:00:04 │     0 │
│    1107 │ 2016-11-24 00:00:05 │     1 │
│    1108 │ 2016-11-24 00:00:05 │     0 │
│    1109 │ 2016-11-24 00:00:09 │     4 │
│    1110 │ 2016-11-24 00:00:10 │     1 │
└─────────┴─────────────────────┴───────┘
</code></pre></div> <p>Обратите внимание — размер блока влияет на результат. С каждым новым блоком состояние <code class=syntax>runningDifference</code> сбрасывается.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=nb>number</span><span class=p>,</span>
    <span class=n>runningDifference</span><span class=p>(</span><span class=nb>number</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=k>AS</span> <span class=n>diff</span>
<span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>100000</span><span class=p>)</span>
<span class=k>WHERE</span> <span class=n>diff</span> <span class=o>!=</span> <span class=mi>1</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
┌─number─┬─diff─┐
│  65536 │    0 │
└────────┴──────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>set max_block_size=100000 -- по умолчанию 65536!

SELECT
    number,
    runningDifference(number + 1) AS diff
FROM numbers(100000)
WHERE diff != 1
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
</code></pre></div> <h2 id=runningdifferencestartingwithfirstvalue>runningDifferenceStartingWithFirstValue<a class=headerlink href=../amp/#runningdifferencestartingwithfirstvalue title="Permanent link"> </a></h2> <p>То же, что и <a href=.././amp/#other_functions-runningdifference>runningDifference</a>, но в первой строке возвращается значение первой строки, а не ноль.</p> <h2 id=runningconcurrency>runningConcurrency<a class=headerlink href=../amp/#runningconcurrency title="Permanent link"> </a></h2> <p>Подсчитывает количество одновременно идущих событий.<br> У каждого события есть время начала и время окончания. Считается, что время начала включено в событие, а время окончания исключено из него. Столбцы со временем начала и окончания событий должны иметь одинаковый тип данных.<br> Функция подсчитывает количество событий, происходящих одновременно на момент начала каждого из событий в выборке.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Предупреждение</p> <p>События должны быть отсортированы по возрастанию времени начала. Если это требование нарушено, то функция вызывает исключение.<br> Каждый блок данных обрабатывается независимо. Если события из разных блоков данных накладываются по времени, они не могут быть корректно обработаны.</p> </div> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>runningConcurrency</span><span class=p>(</span><span class=k>start</span><span class=p>,</span> <span class=k>end</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>start</code> — Столбец с временем начала событий. <a href=../../../data-types/date/amp/ >Date</a>, <a href=../../../data-types/datetime/amp/ >DateTime</a> или <a href=../../../data-types/datetime64/amp/ >DateTime64</a>.</li> <li><code class=syntax>end</code> — Столбец с временем окончания событий. <a href=../../../data-types/date/amp/ >Date</a>, <a href=../../../data-types/datetime/amp/ >DateTime</a> или <a href=../../../data-types/datetime64/amp/ >DateTime64</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Количество одновременно идущих событий на момент начала каждого события.</li> </ul> <p>Тип: <a href=../../../data-types/int-uint/amp/ >UInt32</a></p> <p><strong>Пример</strong></p> <p>Рассмотрим таблицу:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────start─┬────────end─┐
│ 2021-03-03 │ 2021-03-11 │
│ 2021-03-06 │ 2021-03-12 │
│ 2021-03-07 │ 2021-03-08 │
│ 2021-03-11 │ 2021-03-12 │
└────────────┴────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>start</span><span class=p>,</span> <span class=n>runningConcurrency</span><span class=p>(</span><span class=k>start</span><span class=p>,</span> <span class=k>end</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>example_table</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────start─┬─runningConcurrency(start, end)─┐
│ 2021-03-03 │                              1 │
│ 2021-03-06 │                              2 │
│ 2021-03-07 │                              3 │
│ 2021-03-11 │                              2 │
└────────────┴────────────────────────────────┘
</code></pre></div> <h2 id=macnumtostringnum>MACNumToString(num)<a class=headerlink href=../amp/#macnumtostringnum title="Permanent link"> </a></h2> <p>Принимает число типа UInt64. Интерпретирует его, как MAC-адрес в big endian. Возвращает строку, содержащую соответствующий MAC-адрес в формате AA:BB:CC:DD:EE:FF (числа в шестнадцатеричной форме через двоеточие).</p> <h2 id=macstringtonums>MACStringToNum(s)<a class=headerlink href=../amp/#macstringtonums title="Permanent link"> </a></h2> <p>Функция, обратная к MACNumToString. Если MAC адрес в неправильном формате, то возвращает 0.</p> <h2 id=macstringtoouis>MACStringToOUI(s)<a class=headerlink href=../amp/#macstringtoouis title="Permanent link"> </a></h2> <p>Принимает MAC адрес в формате AA:BB:CC:DD:EE:FF (числа в шестнадцатеричной форме через двоеточие). Возвращает первые три октета как число в формате UInt64. Если MAC адрес в неправильном формате, то возвращает 0.</p> <h2 id=getsizeofenumtype>getSizeOfEnumType<a class=headerlink href=../amp/#getsizeofenumtype title="Permanent link"> </a></h2> <p>Возвращает количество полей в <a href=.././amp/ >Enum</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getSizeOfEnumType</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение типа <code class=syntax>Enum</code>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Количество полей входного значения типа <code class=syntax>Enum</code>.</li> <li>Исключение, если тип не <code class=syntax>Enum</code>.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>getSizeOfEnumType</span><span class=p>(</span> <span class=k>CAST</span><span class=p>(</span><span class=s1>'a'</span> <span class=k>AS</span> <span class=n>Enum8</span><span class=p>(</span><span class=s1>'a'</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>'b'</span> <span class=o>=</span> <span class=mi>2</span><span class=p>)</span> <span class=p>)</span> <span class=p>)</span> <span class=k>AS</span> <span class=n>x</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┐
│ 2 │
└───┘
</code></pre></div> <h2 id=blockserializedsize>blockSerializedSize<a class=headerlink href=../amp/#blockserializedsize title="Permanent link"> </a></h2> <p>Возвращает размер на диске (без учета сжатия).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>blockSerializedSize</span><span class=p>(</span><span class=n>value</span><span class=p>[,</span> <span class=n>value</span><span class=p>[,</span> <span class=p>...]])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Количество байтов, которые будут записаны на диск для блока значений (без сжатия).</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>blockSerializedSize</span><span class=p>(</span><span class=n>maxState</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span> <span class=k>as</span> <span class=n>x</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─x─┐
│ 2 │
└───┘
</code></pre></div> <h2 id=tocolumntypename>toColumnTypeName<a class=headerlink href=../amp/#tocolumntypename title="Permanent link"> </a></h2> <p>Возвращает имя класса, которым представлен тип данных столбца в оперативной памяти.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>toColumnTypeName</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Строка с именем класса, который используется для представления типа данных <code class=syntax>value</code> в оперативной памяти.</li> </ul> <p><strong>Пример разницы между <code class=syntax>toTypeName</code> и <code class=syntax>toColumnTypeName</code></strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>toTypeName</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span> <span class=k>AS</span> <span class=n>DateTime</span><span class=p>))</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─toTypeName(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime                                            │
└─────────────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>toColumnTypeName</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span> <span class=k>AS</span> <span class=n>DateTime</span><span class=p>))</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─toColumnTypeName(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ Const(UInt32)                                             │
└───────────────────────────────────────────────────────────┘
</code></pre></div> <p>В примере видно, что тип данных <code class=syntax>DateTime</code> хранится в памяти как <code class=syntax>Const(UInt32)</code>.</p> <h2 id=dumpcolumnstructure>dumpColumnStructure<a class=headerlink href=../amp/#dumpcolumnstructure title="Permanent link"> </a></h2> <p>Выводит развернутое описание структур данных в оперативной памяти</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>dumpColumnStructure</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>value</code> — значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Строка с описанием структуры, которая используется для представления типа данных <code class=syntax>value</code> в оперативной памяти.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>dumpColumnStructure</span><span class=p>(</span><span class=k>CAST</span><span class=p>(</span><span class=s1>'2018-01-01 01:02:03'</span><span class=p>,</span> <span class=s1>'DateTime'</span><span class=p>))</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─dumpColumnStructure(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime, Const(size = 1, UInt32(size = 1))                  │
└──────────────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=defaultvalueofargumenttype>defaultValueOfArgumentType<a class=headerlink href=../amp/#defaultvalueofargumenttype title="Permanent link"> </a></h2> <p>Выводит значение по умолчанию для типа данных.</p> <p>Не учитывает значения по умолчанию для столбцов, заданные пользователем.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultValueOfArgumentType</span><span class=p>(</span><span class=n>expression</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>expression</code> — значение произвольного типа или выражение, результатом которого является значение произвольного типа.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li><code class=syntax>0</code> для чисел;</li> <li>Пустая строка для строк;</li> <li><code class=syntax>ᴺᵁᴸᴸ</code> для <a href=.././amp/ >Nullable</a>.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfArgumentType</span><span class=p>(</span> <span class=k>CAST</span><span class=p>(</span><span class=mi>1</span> <span class=k>AS</span> <span class=nb>Int8</span><span class=p>)</span> <span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfArgumentType(CAST(1, 'Int8'))─┐
│                                           0 │
└─────────────────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfArgumentType</span><span class=p>(</span> <span class=k>CAST</span><span class=p>(</span><span class=mi>1</span> <span class=k>AS</span> <span class=k>Nullable</span><span class=p>(</span><span class=nb>Int8</span><span class=p>)</span> <span class=p>)</span> <span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfArgumentType(CAST(1, 'Nullable(Int8)'))─┐
│                                                  ᴺᵁᴸᴸ │
└───────────────────────────────────────────────────────┘
</code></pre></div> <h2 id=defaultvalueoftypename>defaultValueOfTypeName<a class=headerlink href=../amp/#defaultvalueoftypename title="Permanent link"> </a></h2> <p>Выводит значение по умолчанию для указанного типа данных.</p> <p>Не включает значения по умолчанию для настраиваемых столбцов, установленных пользователем.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=k>type</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>type</code> — тип данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li><code class=syntax>0</code> для чисел;</li> <li>Пустая строка для строк;</li> <li><code class=syntax>ᴺᵁᴸᴸ</code> для <a href=../../../data-types/nullable/amp/ >Nullable</a>.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=s1>'Int8'</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfTypeName('Int8')─┐
│                              0 │
└────────────────────────────────┘
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>defaultValueOfTypeName</span><span class=p>(</span><span class=s1>'Nullable(Int8)'</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─defaultValueOfTypeName('Nullable(Int8)')─┐
│                                     ᴺᵁᴸᴸ │
└──────────────────────────────────────────┘
</code></pre></div> <h2 id=indexhint>indexHint<a class=headerlink href=../amp/#indexhint title="Permanent link"> </a></h2> <p>Возвращает все данные из диапазона, в который попадают данные, соответствующие указанному выражению.<br> Переданное выражение не будет вычислено. Выбор диапазона производится по индексу.<br> Индекс в ClickHouse разреженный, при чтении диапазона в ответ попадают «лишние» соседние данные.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>indexHint</span><span class=p>(</span><span class=o>&lt;</span><span class=n>expression</span><span class=o>&gt;</span><span class=p>)</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <p>Возвращает диапазон индекса, в котором выполняется заданное условие.</p> <p>Тип: <a href=https://clickhouse.yandex/docs/ru/data_types/int_uint/#diapazony-uint rel="external nofollow noreferrer" target=_blank>Uint8</a>.</p> <p><strong>Пример</strong></p> <p>Рассмотрим пример с использованием тестовых данных таблицы <a href=../../../../getting-started/example-datasets/ontime/amp/ >ontime</a>.</p> <p>Исходная таблица:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│ 4276457 │
└─────────┘
</code></pre></div> <p>В таблице есть индексы по полям <code class=syntax>(FlightDate, (Year, FlightDate))</code>.</p> <p>Выполним выборку по дате, где индекс не используется.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>FlightDate</span> <span class=k>AS</span> <span class=n>k</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>ontime</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span>
</code></pre></div> <p>ClickHouse обработал всю таблицу (<code class=syntax>Processed 4.28 million rows</code>).</p> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-01-01 │   13970 │
│ 2017-01-02 │   15882 │
........................
│ 2017-09-28 │   16411 │
│ 2017-09-29 │   16384 │
│ 2017-09-30 │   12520 │
└────────────┴─────────┘
</code></pre></div> <p>Для подключения индекса выбираем конкретную дату.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>FlightDate</span> <span class=k>AS</span> <span class=n>k</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>ontime</span> <span class=k>WHERE</span> <span class=n>k</span> <span class=o>=</span> <span class=s1>'2017-09-15'</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span>
</code></pre></div> <p>При использовании индекса ClickHouse обработал значительно меньшее количество строк (<code class=syntax>Processed 32.74 thousand rows</code>).</p> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-09-15 │   16428 │
└────────────┴─────────┘
</code></pre></div> <p>Передадим в функцию <code class=syntax>indexHint</code> выражение <code class=syntax>k = '2017-09-15'</code>.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>FlightDate</span> <span class=k>AS</span> <span class=n>k</span><span class=p>,</span>
    <span class=k>count</span><span class=p>()</span>
<span class=k>FROM</span> <span class=n>ontime</span>
<span class=k>WHERE</span> <span class=n>indexHint</span><span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=s1>'2017-09-15'</span><span class=p>)</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ASC</span>
</code></pre></div> <p>ClickHouse применил индекс по аналогии с примером выше (<code class=syntax>Processed 32.74 thousand rows</code>).<br> Выражение <code class=syntax>k = '2017-09-15'</code> не используется при формировании результата.<br> Функция <code class=syntax>indexHint</code> позволяет увидеть соседние данные.</p> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌──────────k─┬─count()─┐
│ 2017-09-14 │    7071 │
│ 2017-09-15 │   16428 │
│ 2017-09-16 │    1077 │
│ 2017-09-30 │    8167 │
└────────────┴─────────┘
</code></pre></div> <h2 id=other-functions-replicate>replicate<a class=headerlink href=../amp/#other-functions-replicate title="Permanent link"> </a></h2> <p>Создает массив, заполненный одним значением.</p> <p>Используется для внутренней реализации <a href=../../array-join/amp/#functions_arrayjoin>arrayJoin</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>replicate</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>arr</span><span class=p>);</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>arr</code> — исходный массив. ClickHouse создаёт новый массив такой же длины как исходный и заполняет его значением <code class=syntax>x</code>.</li> <li><code class=syntax>x</code> — значение, которым будет заполнен результирующий массив.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Массив, заполненный значением <code class=syntax>x</code>.</p> <p>Тип: <code class=syntax>Array</code>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>replicate</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=s1>'a'</span><span class=p>,</span> <span class=s1>'b'</span><span class=p>,</span> <span class=s1>'c'</span><span class=p>]);</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─replicate(1, ['a', 'b', 'c'])─┐
│ [1,1,1]                       │
└───────────────────────────────┘
</code></pre></div> <h2 id=filesystemavailable>filesystemAvailable<a class=headerlink href=../amp/#filesystemavailable title="Permanent link"> </a></h2> <p>Возвращает объём доступного для записи данных места на файловой системе. Он всегда меньше общего свободного места (<a href=../amp/#filesystemfree>filesystemFree</a>), потому что некоторое пространство зарезервировано для нужд операционной системы.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemAvailable</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Объём доступного для записи данных места в байтах.</li> </ul> <p>Тип: <a href=.././amp/ >UInt64</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemAvailable</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Available space"</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemAvailable</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Type"</span><span class=p>;</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Available space─┬─Type───┐
│ 30.75 GiB       │ UInt64 │
└─────────────────┴────────┘
</code></pre></div> <h2 id=filesystemfree>filesystemFree<a class=headerlink href=../amp/#filesystemfree title="Permanent link"> </a></h2> <p>Возвращает объём свободного места на файловой системе. Смотрите также <code class=syntax>filesystemAvailable</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemFree</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Объем свободного места в байтах.</li> </ul> <p>Тип: <a href=.././amp/ >UInt64</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemFree</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Free space"</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemFree</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Type"</span><span class=p>;</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Free space─┬─Type───┐
│ 32.39 GiB  │ UInt64 │
└────────────┴────────┘
</code></pre></div> <h2 id=filesystemcapacity>filesystemCapacity<a class=headerlink href=../amp/#filesystemcapacity title="Permanent link"> </a></h2> <p>Возвращает информацию о ёмкости файловой системы в байтах. Для оценки должен быть настроен <a href=.././amp/#server_configuration_parameters-path>путь</a> к каталогу с данными.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>filesystemCapacity</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Информация о ёмкости файловой системы в байтах.</li> </ul> <p>Тип: <a href=.././amp/ >UInt64</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>formatReadableSize</span><span class=p>(</span><span class=n>filesystemCapacity</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Capacity"</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>filesystemCapacity</span><span class=p>())</span> <span class=k>AS</span> <span class=ss>"Type"</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─Capacity──┬─Type───┐
│ 39.32 GiB │ UInt64 │
└───────────┴────────┘
</code></pre></div> <h2 id=initializeaggregation>initializeAggregation<a class=headerlink href=../amp/#initializeaggregation title="Permanent link"> </a></h2> <p>Вычисляет результат агрегатной функции для каждой строки. Предназначена для инициализации агрегатных функций с комбинатором <a href=../../../aggregate-functions/combinators/amp/#state>-State</a>. Может быть полезна для создания состояний агрегатных функций для последующей их вставки в столбцы типа <a href=../../../data-types/aggregatefunction/amp/#data-type-aggregatefunction>AggregateFunction</a> или использования в качестве значений по-умолчанию.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>initializeAggregation</span> <span class=p>(</span><span class=n>aggregate_function</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>argN</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>aggregate_function</code> — название агрегатной функции, состояние которой нужно создать. <a href=../../../data-types/string/amp/#string>String</a>.</li> <li><code class=syntax>arg</code> — аргументы, которые передаются в агрегатную функцию.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>В каждой строке результат агрегатной функции, примененной к аргументам из этой строки.</li> </ul> <p>Тип возвращаемого значения такой же, как и у функции, переданной первым аргументом.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>uniqMerge</span><span class=p>(</span><span class=k>state</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'uniqState'</span><span class=p>,</span> <span class=nb>number</span> <span class=o>%</span> <span class=mi>3</span><span class=p>)</span> <span class=k>AS</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10000</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─uniqMerge(state)─┐
│                3 │
└──────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>(</span><span class=k>state</span><span class=p>),</span> <span class=n>toTypeName</span><span class=p>(</span><span class=k>state</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=nb>number</span> <span class=o>%</span> <span class=mi>3</span><span class=p>)</span> <span class=k>AS</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(state)─┬─toTypeName(state)─────────────┐
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
│                          2 │ AggregateFunction(sum, UInt8) │
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
└────────────────────────────┴───────────────────────────────┘
</code></pre></div> <p>Пример с движком таблиц <code class=syntax>AggregatingMergeTree</code> и столбцом типа <code class=syntax>AggregateFunction</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>metrics</span>
<span class=p>(</span>
    <span class=k>key</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>value</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=k>sum</span><span class=p>,</span> <span class=n>UInt64</span><span class=p>)</span> <span class=k>DEFAULT</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=n>toUInt64</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>AggregatingMergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>key</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>metrics</span> <span class=k>VALUES</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=n>toUInt64</span><span class=p>(</span><span class=mi>42</span><span class=p>)))</span>
</code></pre></div> <p><strong>Смотрите также</strong><br> - <a href=../../array-functions/amp/#arrayreduce>arrayReduce</a></p> <h2 id=function-finalizeaggregation>finalizeAggregation<a class=headerlink href=../amp/#function-finalizeaggregation title="Permanent link"> </a></h2> <p>Принимает состояние агрегатной функции. Возвращает результат агрегирования (или конечное состояние при использовании комбинатора <a href=../../../aggregate-functions/combinators/amp/#state>-State</a>).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>finalizeAggregation</span><span class=p>(</span><span class=k>state</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>state</code> — состояние агрегатной функции. <a href=../../../data-types/aggregatefunction/amp/#data-type-aggregatefunction>AggregateFunction</a>.</li> </ul> <p><strong>Возвращаемые значения</strong></p> <ul> <li>Значения, которые были агрегированы.</li> </ul> <p>Тип: соответствует типу агрегируемых значений.</p> <p><strong>Примеры</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>((</span> <span class=k>SELECT</span> <span class=n>countState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(_subquery16)─┐
│                               10 │
└──────────────────────────────────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>((</span> <span class=k>SELECT</span> <span class=n>sumState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(_subquery20)─┐
│                               45 │
└──────────────────────────────────┘
</code></pre></div> <p>Обратите внимание, что значения <code class=syntax>NULL</code> игнорируются.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>finalizeAggregation</span><span class=p>(</span><span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'anyState'</span><span class=p>,</span> <span class=p>[</span><span class=k>NULL</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─finalizeAggregation(arrayReduce('anyState', [NULL, 2, 3]))─┐
│                                                          2 │
└────────────────────────────────────────────────────────────┘
</code></pre></div> <p>Комбинированный пример:</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span> <span class=n>initializeAggregation</span><span class=p>(</span><span class=s1>'sumState'</span><span class=p>,</span> <span class=nb>number</span><span class=p>)</span> <span class=k>AS</span> <span class=n>one_row_sum_state</span>
<span class=k>SELECT</span>
    <span class=nb>number</span><span class=p>,</span>
    <span class=n>finalizeAggregation</span><span class=p>(</span><span class=n>one_row_sum_state</span><span class=p>)</span> <span class=k>AS</span> <span class=n>one_row_sum</span><span class=p>,</span>
    <span class=n>runningAccumulate</span><span class=p>(</span><span class=n>one_row_sum_state</span><span class=p>)</span> <span class=k>AS</span> <span class=n>cumulative_sum</span>
<span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─one_row_sum─┬─cumulative_sum─┐
│      0 │           0 │              0 │
│      1 │           1 │              1 │
│      2 │           2 │              3 │
│      3 │           3 │              6 │
│      4 │           4 │             10 │
│      5 │           5 │             15 │
│      6 │           6 │             21 │
│      7 │           7 │             28 │
│      8 │           8 │             36 │
│      9 │           9 │             45 │
└────────┴─────────────┴────────────────┘
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li><a href=../../array-functions/amp/#arrayreduce>arrayReduce</a></li> <li><a href=../amp/#initializeaggregation>initializeAggregation</a></li> </ul> <h2 id=runningaccumulate>runningAccumulate<a class=headerlink href=../amp/#runningaccumulate title="Permanent link"> </a></h2> <p>Накапливает состояния агрегатной функции для каждой строки блока данных.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-4 text-reset mb-2">Warning</p> <p>Функция обнуляет состояние для каждого нового блока.</p> </div> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>runningAccumulate</span><span class=p>(</span><span class=n>agg_state</span><span class=p>[,</span> <span class=k>grouping</span><span class=p>])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>agg_state</code> — состояние агрегатной функции. <a href=../../../data-types/aggregatefunction/amp/#data-type-aggregatefunction>AggregateFunction</a>.</li> <li><code class=syntax>grouping</code> — ключ группировки. Опциональный параметр. Состояние функции обнуляется, если значение <code class=syntax>grouping</code> меняется. Параметр может быть любого <a href=../../../data-types/amp/ >поддерживаемого типа данных</a>, для которого определен оператор равенства.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Каждая результирующая строка содержит результат агрегатной функции, накопленный для всех входных строк от 0 до текущей позиции. <code class=syntax>runningAccumulate</code> обнуляет состояния для каждого нового блока данных или при изменении значения <code class=syntax>grouping</code>.</li> </ul> <p>Тип зависит от используемой агрегатной функции.</p> <p><strong>Примеры</strong></p> <p>Рассмотрим примеры использования <code class=syntax>runningAccumulate</code> для нахождения кумулятивной суммы чисел без и с группировкой.</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>k</span><span class=p>,</span> <span class=n>runningAccumulate</span><span class=p>(</span><span class=n>sum_k</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=nb>number</span> <span class=k>as</span> <span class=n>k</span><span class=p>,</span> <span class=n>sumState</span><span class=p>(</span><span class=n>k</span><span class=p>)</span> <span class=k>AS</span> <span class=n>sum_k</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>k</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>k</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─k─┬─res─┐
│ 0 │   0 │
│ 1 │   1 │
│ 2 │   3 │
│ 3 │   6 │
│ 4 │  10 │
│ 5 │  15 │
│ 6 │  21 │
│ 7 │  28 │
│ 8 │  36 │
│ 9 │  45 │
└───┴─────┘
</code></pre></div> <p>Подзапрос формирует <code class=syntax>sumState</code> для каждого числа от <code class=syntax>0</code> до <code class=syntax>9</code>. <code class=syntax>sumState</code> возвращает состояние функции <a href=../../../aggregate-functions/reference/sum/amp/#agg_function-sum>sum</a>, содержащее сумму одного числа.</p> <p>Весь запрос делает следующее:</p> <ol> <li>Для первой строки <code class=syntax>runningAccumulate</code> берет <code class=syntax>sumState(0)</code> и возвращает <code class=syntax>0</code>.</li> <li>Для второй строки функция объединяет <code class=syntax>sumState (0)</code> и <code class=syntax>sumState (1)</code>, что приводит к <code class=syntax>sumState (0 + 1)</code>, и возвращает в результате <code class=syntax>1</code>.</li> <li>Для третьей строки функция объединяет <code class=syntax>sumState (0 + 1)</code> и <code class=syntax>sumState (2)</code>, что приводит к <code class=syntax>sumState (0 + 1 + 2)</code>, и в результате возвращает <code class=syntax>3</code>.</li> <li>Действия повторяются до тех пор, пока не закончится блок.</li> </ol> <p>В следующем примере показано использование параметра <code class=syntax>grouping</code>:</p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>grouping</span><span class=p>,</span>
    <span class=n>item</span><span class=p>,</span>
    <span class=n>runningAccumulate</span><span class=p>(</span><span class=k>state</span><span class=p>,</span> <span class=k>grouping</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span>
<span class=p>(</span>
    <span class=k>SELECT</span>
        <span class=n>toInt8</span><span class=p>(</span><span class=nb>number</span> <span class=o>/</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=k>grouping</span><span class=p>,</span>
        <span class=nb>number</span> <span class=k>AS</span> <span class=n>item</span><span class=p>,</span>
        <span class=n>sumState</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>AS</span> <span class=k>state</span>
    <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>15</span><span class=p>)</span>
    <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>item</span>
    <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>item</span> <span class=k>ASC</span>
<span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─grouping─┬─item─┬─res─┐
│        0 │    0 │   0 │
│        0 │    1 │   1 │
│        0 │    2 │   3 │
│        0 │    3 │   6 │
│        1 │    4 │   4 │
│        1 │    5 │   9 │
│        1 │    6 │  15 │
│        1 │    7 │  22 │
│        2 │    8 │   8 │
│        2 │    9 │  17 │
│        2 │   10 │  27 │
│        2 │   11 │  38 │
│        3 │   12 │  12 │
│        3 │   13 │  25 │
│        3 │   14 │  39 │
└──────────┴──────┴─────┘
</code></pre></div> <p>Как вы можете видеть, <code class=syntax>runningAccumulate</code> объединяет состояния для каждой группы строк отдельно.</p> <h2 id=joinget>joinGet<a class=headerlink href=../amp/#joinget title="Permanent link"> </a></h2> <p>Функция позволяет извлекать данные из таблицы таким же образом как из <a href=.././amp/ >словаря</a>.</p> <p>Получает данные из таблиц <a href=.././amp/#creating-a-table>Join</a> по ключу.</p> <p>Поддерживаются только таблицы, созданные с <code class=syntax>ENGINE = Join(ANY, LEFT, &lt;join_keys&gt;)</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>joinGet</span><span class=p>(</span><span class=n>join_storage_table_name</span><span class=p>,</span> <span class=o>`</span><span class=n>value_column</span><span class=o>`</span><span class=p>,</span> <span class=n>join_keys</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>join_storage_table_name</code> — <a href=../../../syntax/amp/#syntax-identifiers>идентификатор</a>, который указывает, откуда производится выборка данных. Поиск по идентификатору осуществляется в базе данных по умолчанию (см. конфигурацию <code class=syntax>default_database</code>). Чтобы переопределить базу данных по умолчанию, используйте команду <code class=syntax>USE db_name</code>, или укажите базу данных и таблицу через разделитель <code class=syntax>db_name.db_table</code>, см. пример.</li> <li><code class=syntax>value_column</code> — столбец, из которого нужно произвести выборку данных.</li> <li><code class=syntax>join_keys</code> — список ключей, по которым производится выборка данных.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Возвращает значение по списку ключей.</p> <p>Если значения не существует в исходной таблице, вернется <code class=syntax>0</code> или <code class=syntax>null</code> в соответствии с настройками <a href=../../../../operations/settings/settings/amp/#join_use_nulls>join_use_nulls</a>.</p> <p>Подробнее о настройке <code class=syntax>join_use_nulls</code> в <a href=.././amp/ >операциях Join</a>.</p> <p><strong>Пример</strong></p> <p>Входная таблица:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=n>db_test</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>,</span> <span class=o>`</span><span class=n>val</span><span class=o>`</span> <span class=n>UInt32</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=k>Join</span><span class=p>(</span><span class=k>ANY</span><span class=p>,</span> <span class=k>LEFT</span><span class=p>,</span> <span class=n>id</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>join_use_nulls</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span> <span class=k>VALUES</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>11</span><span class=p>)(</span><span class=mi>2</span><span class=p>,</span><span class=mi>12</span><span class=p>)(</span><span class=mi>4</span><span class=p>,</span><span class=mi>13</span><span class=p>)</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─id─┬─val─┐
│  4 │  13 │
│  2 │  12 │
│  1 │  11 │
└────┴─────┘
</code></pre></div> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>joinGet</span><span class=p>(</span><span class=n>db_test</span><span class=p>.</span><span class=n>id_val</span><span class=p>,</span><span class=s1>'val'</span><span class=p>,</span><span class=n>toUInt32</span><span class=p>(</span><span class=nb>number</span><span class=p>))</span> <span class=k>from</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>join_use_nulls</span> <span class=o>=</span> <span class=mi>1</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─joinGet(db_test.id_val, 'val', toUInt32(number))─┐
│                                                0 │
│                                               11 │
│                                               12 │
│                                                0 │
└──────────────────────────────────────────────────┘
</code></pre></div> <h2 id=function-modelevaluate>modelEvaluate(model_name, …)<a class=headerlink href=../amp/#function-modelevaluate title="Permanent link"> </a></h2> <p>Оценивает внешнюю модель.</p> <p>Принимает на вход имя и аргументы модели. Возвращает Float64.</p> <h2 id=throwifx-custom-message>throwIf(x[, custom_message])<a class=headerlink href=../amp/#throwifx-custom-message title="Permanent link"> </a></h2> <p>Бросает исключение, если аргумент не равен нулю.<br> custom_message - необязательный параметр, константная строка, задает текст сообщения об ошибке.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>throwIf</span><span class=p>(</span><span class=nb>number</span> <span class=o>=</span> <span class=mi>3</span><span class=p>,</span> <span class=s1>'Too many'</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>↙ Progress: 0.00 rows, 0.00 B (0.00 rows/s., 0.00 B/s.) Received exception from server (version 19.14.1):
Code: 395. DB::Exception: Received from localhost:9000. DB::Exception: Too many.
</code></pre></div> <h2 id=identity>identity<a class=headerlink href=../amp/#identity title="Permanent link"> </a></h2> <p>Возвращает свой аргумент. Используется для отладки и тестирования, позволяет отменить использование индекса, и получить результат и производительность полного сканирования таблицы. Это работает, потому что оптимизатор запросов не может «заглянуть» внутрь функции <code class=syntax>identity</code>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>identity</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</code></pre></div> <p><strong>Пример</strong></p> <p>Query:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>identity</span><span class=p>(</span><span class=mi>42</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─identity(42)─┐
│           42 │
└──────────────┘
</code></pre></div> <h2 id=randomascii>randomPrintableASCII<a class=headerlink href=../amp/#randomascii title="Permanent link"> </a></h2> <p>Генерирует строку со случайным набором печатных символов <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer" target=_blank>ASCII</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomPrintableASCII</span><span class=p>(</span><span class=k>length</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина результирующей строки. Положительное целое число.<div class=codehilite><pre><span></span><code class=syntax>Если передать `length &lt; 0`, то поведение функции не определено.
</code></pre></div> </li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Строка со случайным набором печатных символов <a href=https://en.wikipedia.org/wiki/ASCII#Printable_characters rel="external nofollow noreferrer" target=_blank>ASCII</a>.</li> </ul> <p>Тип: <a href=.././amp/ >String</a></p> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=nb>number</span><span class=p>,</span> <span class=n>randomPrintableASCII</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span> <span class=k>as</span> <span class=n>str</span><span class=p>,</span> <span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>)</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>numbers</span> <span class=k>LIMIT</span> <span class=mi>3</span>
</code></pre></div> <div class=codehilite><pre><span></span><code class=syntax>┌─number─┬─str────────────────────────────┬─length(randomPrintableASCII(30))─┐
│      0 │ SuiCOSTvC0csfABSw=UcSzp2.`rv8x │                               30 │
│      1 │ 1Ag NlJ &amp;RCN:*&gt;HVPG;PE-nO"SUFD │                               30 │
│      2 │ /"+&lt;"wUTh:=LjJ Vm!c&amp;hI*m#XTfzz │                               30 │
└────────┴────────────────────────────────┴──────────────────────────────────┘
</code></pre></div> <h2 id=randomstring>randomString<a class=headerlink href=../amp/#randomstring title="Permanent link"> </a></h2> <p>Генерирует бинарную строку заданной длины, заполненную случайными байтами (в том числе нулевыми).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomString</span><span class=p>(</span><span class=k>length</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина строки. Положительное целое число.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Строка, заполненная случайными байтами.</li> </ul> <p>Type: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>randomString</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span> <span class=k>AS</span> <span class=n>str</span><span class=p>,</span> <span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>)</span> <span class=k>AS</span> <span class=n>len</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=n>FORMAT</span> <span class=n>Vertical</span><span class=p>;</span>
</code></pre></div> <p>Ответ:</p> <div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
str: 3 G  :   pT ?w тi  k aV f6
len: 30

Row 2:
──────
str: 9 ,]    ^   )  ]??  8
len: 30
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li><a href=../../../table-functions/generate/amp/#generaterandom>generateRandom</a></li> <li><a href=.././amp/#randomascii>randomPrintableASCII</a></li> </ul> <h2 id=randomfixedstring>randomFixedString<a class=headerlink href=../amp/#randomfixedstring title="Permanent link"> </a></h2> <p>Генерирует бинарную строку заданной длины, заполненную случайными байтами, включая нулевые.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomFixedString</span><span class=p>(</span><span class=k>length</span><span class=p>);</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина строки в байтах. <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Строка, заполненная случайными байтами.</li> </ul> <p>Тип: <a href=../../../data-types/fixedstring/amp/ >FixedString</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>randomFixedString</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span> <span class=k>as</span> <span class=n>rnd</span><span class=p>,</span> <span class=n>toTypeName</span><span class=p>(</span><span class=n>rnd</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─rnd──────┬─toTypeName(randomFixedString(13))─┐
│ j▒h㋖HɨZ'▒ │ FixedString(13)                 │
└──────────┴───────────────────────────────────┘
</code></pre></div> <h2 id=randomstringutf8>randomStringUTF8<a class=headerlink href=../amp/#randomstringutf8 title="Permanent link"> </a></h2> <p>Генерирует строку заданной длины со случайными символами в кодировке UTF-8.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>randomStringUTF8</span><span class=p>(</span><span class=k>length</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>length</code> — длина итоговой строки в кодовых точках. <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Случайная строка в кодировке UTF-8.</li> </ul> <p>Тип: <a href=../../../data-types/string/amp/ >String</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>randomStringUTF8</span><span class=p>(</span><span class=mi>13</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─randomStringUTF8(13)─┐
│ 𘤗𙉝д兠庇󡅴󱱎󦐪􂕌𔊹𓰛   │
└──────────────────────┘
</code></pre></div> <h2 id=getSetting>getSetting<a class=headerlink href=../amp/#getSetting title="Permanent link"> </a></h2> <p>Возвращает текущее значение <a href=../../../../operations/settings/amp/#custom_settings>пользовательской настройки</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getSetting</span><span class=p>(</span><span class=s1>'custom_setting'</span><span class=p>)</span>
</code></pre></div> <p><strong>Параметр</strong></p> <ul> <li><code class=syntax>custom_setting</code> — название настройки. <a href=../../../data-types/string/amp/ >String</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Текущее значение пользовательской настройки.</li> </ul> <p><strong>Пример</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>custom_a</span> <span class=o>=</span> <span class=mi>123</span><span class=p>;</span>
<span class=k>SELECT</span> <span class=n>getSetting</span><span class=p>(</span><span class=s1>'custom_a'</span><span class=p>);</span>
</code></pre></div> <p><strong>Результат</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=mf>123</span>
</code></pre></div> <p><strong>См. также</strong></p> <ul> <li><a href=../../../../operations/settings/amp/#custom_settings>Пользовательские настройки</a></li> </ul> <h2 id=is-decimal-overflow>isDecimalOverflow<a class=headerlink href=../amp/#is-decimal-overflow title="Permanent link"> </a></h2> <p>Проверяет, находится ли число <a href=../../../data-types/decimal/amp/ >Decimal</a> вне собственной (или заданной) области значений.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>d</span><span class=p>,</span> <span class=p>[</span><span class=n>p</span><span class=p>])</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>d</code> — число. <a href=../../../data-types/decimal/amp/ >Decimal</a>.</li> <li><code class=syntax>p</code> — точность. Необязательный параметр. Если опущен, используется исходная точность первого аргумента. Использование этого параметра может быть полезно для извлечения данных в другую СУБД или файл. <a href=../../../data-types/int-uint/amp/#uint-ranges>UInt8</a>.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li><code class=syntax>1</code> — число имеет больше цифр, чем позволяет точность.</li> <li><code class=syntax>0</code> — число удовлетворяет заданной точности.</li> </ul> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=mi>9</span><span class=p>),</span>
       <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>)),</span>
       <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=mi>9</span><span class=p>),</span>
       <span class=n>isDecimalOverflow</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1000000000</span><span class=p>,</span> <span class=mi>0</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>1   1   1   1
</code></pre></div> <h2 id=count-digits>countDigits<a class=headerlink href=../amp/#count-digits title="Permanent link"> </a></h2> <p>Возвращает количество десятичных цифр, необходимых для представления значения.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>countDigits</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li><code class=syntax>x</code> — <a href=../../../data-types/int-uint/amp/#uint8-uint16-uint32-uint64-int8-int16-int32-int64>целое</a> или <a href=../../../data-types/decimal/amp/ >дробное</a> число.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <p>Количество цифр.</p> <p>Тип: <a href=../../../data-types/int-uint/amp/#uint-ranges>UInt8</a>.</p> <p>!!! note "Примечание"<br> Для <code class=syntax>Decimal</code> значений учитывается их масштаб: вычисляется результат по базовому целочисленному типу, полученному как <code class=syntax>(value * scale)</code>. Например: <code class=syntax>countDigits(42) = 2</code>, <code class=syntax>countDigits(42.000) = 5</code>, <code class=syntax>countDigits(0.04200) = 4</code>. То есть вы можете проверить десятичное переполнение для <code class=syntax>Decimal64</code> с помощью <code class=syntax>countDecimal(x) &gt; 18</code>. Это медленный вариант <a href=../amp/#is-decimal-overflow>isDecimalOverflow</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>9</span><span class=p>)),</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal32</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>9</span><span class=p>)),</span>
       <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>18</span><span class=p>)),</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal64</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>18</span><span class=p>)),</span>
       <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal128</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>38</span><span class=p>)),</span> <span class=n>countDigits</span><span class=p>(</span><span class=n>toDecimal128</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>38</span><span class=p>));</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>10  10  19  19  39  39
</code></pre></div> <h2 id=error-code-to-name>errorCodeToName<a class=headerlink href=../amp/#error-code-to-name title="Permanent link"> </a></h2> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Название переменной для кода ошибки.</li> </ul> <p>Тип: <a href=../../../data-types/lowcardinality/amp/ >LowCardinality(String)</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>errorCodeToName</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>UNSUPPORTED_METHOD
</code></pre></div> <h2 id=tcpPort>tcpPort<a class=headerlink href=../amp/#tcpPort title="Permanent link"> </a></h2> <p>Вовращает номер TCP порта, который использует сервер для <a href=../../../../interfaces/tcp/amp/ >нативного протокола</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>tcpPort</span><span class=p>()</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li>Нет.</li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Номер TCP порта.</li> </ul> <p>Тип: <a href=../../../data-types/int-uint/amp/ >UInt16</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>tcpPort</span><span class=p>();</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─tcpPort()─┐
│      9000 │
└───────────┘
</code></pre></div> <p><strong>Смотрите также</strong></p> <ul> <li><a href=../../../../operations/server-configuration-parameters/settings/amp/#server_configuration_parameters-tcp_port>tcp_port</a></li> </ul> <h2 id=current-profiles>currentProfiles<a class=headerlink href=../amp/#current-profiles title="Permanent link"> </a></h2> <p>Возвращает список <a href=../../../../operations/access-rights/amp/#settings-profiles-management>профилей настроек</a> для текущего пользователя.</p> <p>Для изменения текущего профиля настроек может быть использована команда SET PROFILE. Если команда <code class=syntax>SET PROFILE</code> не применялась, функция возвращает профили, указанные при определении текущего пользователя (см. <a href=../../../statements/create/user/amp/#create-user-statement>CREATE USER</a>).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>currentProfiles</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Список профилей настроек для текущего пользователя.</li> </ul> <p>Тип: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=enabled-profiles>enabledProfiles<a class=headerlink href=../amp/#enabled-profiles title="Permanent link"> </a></h2> <p>Возвращает профили настроек, назначенные пользователю как явно, так и неявно. Явно назначенные профили — это те же профили, которые возвращает функция <a href=../amp/#current-profiles>currentProfiles</a>. Неявно назначенные профили включают родительские профили других назначенных профилей; профили, назначенные с помощью предоставленных ролей; профили, назначенные с помощью собственных настроек; основной профиль по умолчанию (см. секцию <code class=syntax>default_profile</code> в основном конфигурационном файле сервера).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>enabledProfiles</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Список доступных профилей для текущего пользователя.</li> </ul> <p>Тип: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=default-profiles>defaultProfiles<a class=headerlink href=../amp/#default-profiles title="Permanent link"> </a></h2> <p>Возвращает все профили, указанные при объявлении текущего пользователя (см. <a href=../../../statements/create/user/amp/#create-user-statement>CREATE USER</a>)</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultProfiles</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Список профилей по умолчанию.</li> </ul> <p>Тип: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=current-roles>currentRoles<a class=headerlink href=../amp/#current-roles title="Permanent link"> </a></h2> <p>Возвращает список текущих ролей для текущего пользователя. Список ролей пользователя можно изменить с помощью выражения <a href=../../../statements/set-role/amp/#set-role-statement>SET ROLE</a>. Если выражение <code class=syntax>SET ROLE</code> не использовалось, данная функция возвращает тот же результат, что и функция <a href=../amp/#default-roles>defaultRoles</a>.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>currentRoles</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Список текущих ролей для текущего пользователя. </li> </ul> <p>Тип: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=enabled-roles>enabledRoles<a class=headerlink href=../amp/#enabled-roles title="Permanent link"> </a></h2> <p>Возвращает имена текущих ролей, а также ролей, которые разрешено использовать текущему пользователю путем назначения привилегий.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>enabledRoles</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Список доступных ролей для текущего пользователя. </li> </ul> <p>Тип: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=default-roles>defaultRoles<a class=headerlink href=../amp/#default-roles title="Permanent link"> </a></h2> <p>Возвращает имена ролей, которые задаются по умолчанию для текущего пользователя при входе в систему. Изначально это все роли, которые разрешено использовать текущему пользователю (см. <a href=../../../sql-reference/statements/grant/amp/#grant-select>GRANT</a>). Список ролей по умолчанию может быть изменен с помощью выражения <a href=../../../statements/set-role/amp/#set-default-role-statement>SET DEFAULT ROLE</a>. </p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>defaultRoles</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Список ролей по умолчанию. </li> </ul> <p>Тип: <a href=../../../data-types/array/amp/ >Array</a>(<a href=../../../data-types/string/amp/ >String</a>).</p> <h2 id=getserverport>getServerPort<a class=headerlink href=../amp/#getserverport title="Permanent link"> </a></h2> <p>Возвращает номер порта сервера. Если порт не используется сервером, генерируется исключение.</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>getServerPort</span><span class=p>(</span><span class=n>port_name</span><span class=p>)</span>
</code></pre></div> <p><strong>Аргументы</strong></p> <ul> <li> <p><code class=syntax>port_name</code> — имя порта сервера. <a href=../../../data-types/string/amp/#string>String</a>. Возможные значения:</p> <ul> <li>'tcp_port'</li> <li>'tcp_port_secure'</li> <li>'http_port'</li> <li>'https_port'</li> <li>'interserver_http_port'</li> <li>'interserver_https_port'</li> <li>'mysql_port'</li> <li>'postgresql_port'</li> <li>'grpc_port'</li> <li>'prometheus.port'</li> </ul> </li> </ul> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Номер порта сервера.</li> </ul> <p>Тип: <a href=../../../data-types/int-uint/amp/ >UInt16</a>.</p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>getServerPort</span><span class=p>(</span><span class=s1>'tcp_port'</span><span class=p>);</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─getServerPort('tcp_port')─┐
│ 9000                      │
└───────────────────────────┘
</code></pre></div> <h2 id=query-id>queryID<a class=headerlink href=../amp/#query-id title="Permanent link"> </a></h2> <p>Возвращает идентификатор текущего запроса. Другие параметры запроса могут быть извлечены из системной таблицы <a href=../../../../operations/system-tables/query_log/amp/ >system.query_log</a> через <code class=syntax>query_id</code>.</p> <p>В отличие от <a href=../amp/#initial-query-id>initialQueryID</a>, функция <code class=syntax>queryID</code> может возвращать различные значения для разных шардов (см. пример).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>queryID</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Идентификатор текущего запроса.</li> </ul> <p>Тип: <a href=../../../data-types/string/amp/ >String</a></p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>tmp</span> <span class=p>(</span><span class=n>str</span> <span class=n>String</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>tmp</span> <span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'a'</span><span class=p>);</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>(</span><span class=k>DISTINCT</span> <span class=n>t</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=n>queryID</span><span class=p>()</span> <span class=k>AS</span> <span class=n>t</span> <span class=k>FROM</span> <span class=n>remote</span><span class=p>(</span><span class=s1>'127.0.0.{1..3}'</span><span class=p>,</span> <span class=n>currentDatabase</span><span class=p>(),</span> <span class=s1>'tmp'</span><span class=p>)</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>queryID</span><span class=p>());</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│ 3       │
└─────────┘
</code></pre></div> <h2 id=initial-query-id>initialQueryID<a class=headerlink href=../amp/#initial-query-id title="Permanent link"> </a></h2> <p>Возвращает идентификатор родительского запроса. Другие параметры запроса могут быть извлечены из системной таблицы <a href=../../../../operations/system-tables/query_log/amp/ >system.query_log</a> через <code class=syntax>initial_query_id</code>.</p> <p>В отличие от <a href=../amp/#query-id>queryID</a>, функция <code class=syntax>initialQueryID</code> возвращает одинаковые значения для разных шардов (см. пример).</p> <p><strong>Синтаксис</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>initialQueryID</span><span class=p>()</span>
</code></pre></div> <p><strong>Возвращаемое значение</strong></p> <ul> <li>Идентификатор родительского запроса.</li> </ul> <p>Тип: <a href=../../../data-types/string/amp/ >String</a></p> <p><strong>Пример</strong></p> <p>Запрос:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>tmp</span> <span class=p>(</span><span class=n>str</span> <span class=n>String</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>tmp</span> <span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'a'</span><span class=p>);</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>(</span><span class=k>DISTINCT</span> <span class=n>t</span><span class=p>)</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=n>initialQueryID</span><span class=p>()</span> <span class=k>AS</span> <span class=n>t</span> <span class=k>FROM</span> <span class=n>remote</span><span class=p>(</span><span class=s1>'127.0.0.{1..3}'</span><span class=p>,</span> <span class=n>currentDatabase</span><span class=p>(),</span> <span class=s1>'tmp'</span><span class=p>)</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>queryID</span><span class=p>());</span>
</code></pre></div> <p>Результат:</p> <div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│ 1       │
└─────────┘
</code></pre></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p>
  <span class="alert-heading display-6">Article Rating</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2021 ClickHouse, Inc.</div>
    <div>Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/0456f20bf4dfe43e56279f2734c4dda7e89f437b" rel="external nofollow noreferrer" target="_blank" class="text-reset">0456f20bf4</a>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.com/docs/ru/sql-reference/functions/other-functions/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
