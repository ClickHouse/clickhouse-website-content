<!DOCTYPE html><html lang=es data-version=master data-single-page=false> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Método de codificación de datos: | Documentación de ClickHouse</title><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/logo-180x180.png><meta property=og:title content="Método de codificación de datos: | Documentación de ClickHouse"><meta property=og:description content="Método de codificación de datos: El MergeTree motor y otros motores de esta familia (*MergeTree) son los motores de mesa"><meta property=og:type content=article><meta property=og:image content=https://clickhouse.tech/images/logo.png><meta content=https://clickhouse.tech/docs/es/engines/table-engines/mergetree-family/mergetree/ property=og:url><link href=https://clickhouse.tech/docs/es/engines/table-engines/mergetree-family/mergetree/ rel=canonical><link href=https://clickhouse.tech/docs/es/engines/table-engines/mergetree-family/mergetree/amp/ rel=amphtml><link rel=search href=/opensearch.xml title=ClickHouse type=application/opensearchdescription+xml><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Método de codificación de datos: | Documentación de ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/es/engines/table-engines/mergetree-family/mergetree/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Método de codificación de datos: | Documentación de ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><meta name=description content="Método de codificación de datos: El MergeTree motor y otros motores de esta familia (*MergeTree) son los motores de mesa"><meta name=keywords content="ClickHouse, DBMS, OLAP, SQL, open-source, relational, analytics, analytical, Big Data, web-analytics"><link rel=alternate href=https://clickhouse.tech/docs/en/engines/table-engines/mergetree-family/mergetree/ hreflang=en><link rel=alternate href=https://clickhouse.tech/docs/zh/engines/table-engines/mergetree-family/mergetree/ hreflang=zh><link rel=alternate href=https://clickhouse.tech/docs/es/engines/table-engines/mergetree-family/mergetree/ hreflang=es><link rel=alternate href=https://clickhouse.tech/docs/fr/engines/table-engines/mergetree-family/mergetree/ hreflang=fr><link rel=alternate href=https://clickhouse.tech/docs/ru/engines/table-engines/mergetree-family/mergetree/ hreflang=ru><link rel=alternate href=https://clickhouse.tech/docs/ja/engines/table-engines/mergetree-family/mergetree/ hreflang=ja><link rel=alternate href=https://clickhouse.tech/docs/en/engines/table-engines/mergetree-family/mergetree/ hreflang=x-default><link href=/css/base.css?e27f3458 media=all rel=stylesheet></head> <body dir=ltr data-spy=scroll data-target=#toc data-offset=80> <nav id=top-nav class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top"> <div class="container-fluid justify-content-between"> <a href=/ class="d-block navbar-brand mr-3"> <img id=docs-logo-icon src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"> </a> <div class="w-100 navbar-text text-left d-none d-md-block"> <h1 class="h3 m-0 p-0 d-inline"> <a href=# class="text-white text-decoration-none"> Método de codificación de datos: </a> </h1> </div> <div class="d-none d-md-block"> <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end"> <li id=edit-wrapper class=nav-item> <a id=edit-link href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/es/engines/table-engines/mergetree-family/mergetree.md title="Edit this article" class=nav-link rel="external nofollow noreferrer" target=_blank><img src=/images/mkdocs/edit.svg alt="Edit this article" class=mt-1 height=22></a> </li> <li class=nav-item> <a class=nav-link href=https://github.com/ClickHouse/ClickHouse rel="external nofollow noreferrer"> <img src=/images/index/github.svg alt="GitHub repository" title="Go to GitHub" height=32> </a> </li> <li id=languages-wrapper class="nav-item dropdown"> <div id=languages-dropdown> <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href=# id=lang-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false> <img src=/images/flags/es.svg alt=Español title=Español width=32 class="d-inline-block mt-n1"> </a> <div class="dropdown-menu bg-dark" aria-labelledby=lang-dropdown> <a href=/docs/en/engines/table-engines/mergetree-family/mergetree/ class=dropdown-item> <img src=/images/flags/en.svg alt title width=32 class="d-inline-block mr-2">English </a> <a href=/docs/zh/engines/table-engines/mergetree-family/mergetree/ class=dropdown-item> <img src=/images/flags/zh.svg alt title width=32 class="d-inline-block mr-2">中文 </a> <a href=/docs/es/engines/table-engines/mergetree-family/mergetree/ class="dropdown-item disabled"> <img src=/images/flags/es.svg alt title width=32 class="d-inline-block mr-2">Español </a> <a href=/docs/fr/engines/table-engines/mergetree-family/mergetree/ class=dropdown-item> <img src=/images/flags/fr.svg alt title width=32 class="d-inline-block mr-2">Français </a> <a href=/docs/ru/engines/table-engines/mergetree-family/mergetree/ class=dropdown-item> <img src=/images/flags/ru.svg alt title width=32 class="d-inline-block mr-2">Русский </a> <a href=/docs/ja/engines/table-engines/mergetree-family/mergetree/ class=dropdown-item> <img src=/images/flags/ja.svg alt title width=32 class="d-inline-block mr-2">日本語 </a> </div> </div> </li> </ul> </div> <form id=search-form class="form-inline m-0"> <div class=input-group> <div class="input-group-prepend w-100"> <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id=search-icon> <img src=/images/mkdocs/search.svg> </span> <input id=docsearch-input class="form-control bg-secondary-alt text-muted border-0 pl-1" type=search placeholder=Search aria-label=Search> </div> </div> </form> <button id=navbar-toggler class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#sidebar aria-controls=sidebar aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> </div> </nav> <div class=container-fluid> <div class="row justify-content-end justify-content-xl-center"> <div id=sidebar class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto"> <div class=overflow-auto> <div id=single-page-switch class="btn-group mb-2 float-right" role=group aria-label="Multi-page or single-page"> <a href=../../../.. role=button class="btn btn-dark active" aria-pressed=true> <img src=/images/mkdocs/multi.svg alt="Multi-page version" title="Multi-page version"> </a> <a href=../../../../single/ role=button class="btn btn-dark-alt active" aria-pressed=true> <img src=/images/mkdocs/single.svg alt="Single-page version" title="Single-page version"> </a> </div> <nav id=sidebar-nav class="nav flex-column mb-5"> <a href=#sidebar-sidebar-1 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-1 title=Implantación class="nav-link text-light dropdown-toggle px-0">Implantación</a> <div id=sidebar-sidebar-1 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=../../../../introduction/distinctive-features/ title="Características distintivas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Características distintivas</a> <a href=../../../../introduction/performance/ title=Rendimiento class="nav-link text-light text-wrap d-inline-block w-100 px-0">Rendimiento</a> <a href=../../../../introduction/history/ title=Historia class="nav-link text-light text-wrap d-inline-block w-100 px-0">Historia</a> <a href=../../../../introduction/adopters/ title=Adoptante class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adoptante</a> </nav> </div> <a href=#sidebar-sidebar-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2 title="Primeros pasos" class="nav-link text-light dropdown-toggle px-0">Primeros pasos</a> <div id=sidebar-sidebar-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../getting-started/install/ title=Instalación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Instalación</a> <a href=#sidebar-sidebar-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-2-3 title="Datos De Ejemplo" class="nav-link text-light dropdown-toggle px-0">Datos De Ejemplo</a> <div id=sidebar-sidebar-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../getting-started/example-datasets/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../getting-started/example-datasets/metrica/ title="El Yandex.Metrica Datos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">El Yandex.Metrica Datos</a> <a href=../../../../getting-started/example-datasets/ontime/ title="A tiempo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">A tiempo</a> <a href=../../../../getting-started/example-datasets/nyc-taxi/ title="Datos de taxis de Nueva York" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Datos de taxis de Nueva York</a> <a href=../../../../getting-started/example-datasets/amplab-benchmark/ title="Referencia de Big Data de AMPLab" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Referencia de Big Data de AMPLab</a> <a href=../../../../getting-started/example-datasets/wikistat/ title="Nombre de la red inalámbrica (SSID):" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nombre de la red inalámbrica (SSID):</a> <a href=../../../../getting-started/example-datasets/criteo/ title="Registros de clics de Terabyte de Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Registros de clics de Terabyte de Criteo</a> <a href=../../../../getting-started/example-datasets/star-schema/ title="Estrella Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Estrella Schema Benchmark</a> </nav> </div> <a href=../../../../getting-started/tutorial/ title=Tutorial class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a> <a href=../../../../getting-started/playground/ title=Infantil class="nav-link text-light text-wrap d-inline-block w-100 px-0">Infantil</a> </nav> </div> <a href=#sidebar-sidebar-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3 title=Interfaz class="nav-link text-light dropdown-toggle px-0">Interfaz</a> <div id=sidebar-sidebar-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../interfaces/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../interfaces/cli/ title="Cliente de línea de comandos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cliente de línea de comandos</a> <a href=../../../../interfaces/tcp/ title="Interfaz nativa (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaz nativa (TCP)</a> <a href=../../../../interfaces/http/ title="Interfaz HTTP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaz HTTP</a> <a href=../../../../interfaces/mysql/ title="Interfaz MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaz MySQL</a> <a href=../../../../interfaces/formats/ title="Formatos de entrada y salida" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Formatos de entrada y salida</a> <a href=../../../../interfaces/jdbc/ title="Controlador JDBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Controlador JDBC</a> <a href=../../../../interfaces/odbc/ title="Conductor ODBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conductor ODBC</a> <a href=../../../../interfaces/cpp/ title="Biblioteca de clientes de C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Biblioteca de clientes de C++</a> <a href=#sidebar-sidebar-3-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-3-10 title=tercero class="nav-link text-light dropdown-toggle px-0">tercero</a> <div id=sidebar-sidebar-3-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../interfaces/third-party/client-libraries/ title="Client Libraries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Client Libraries</a> <a href=../../../../interfaces/third-party/integrations/ title=Integrations class="nav-link text-light text-wrap d-inline-block w-100 px-0">Integrations</a> <a href=../../../../interfaces/third-party/gui/ title="Interfaces Visuales" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interfaces Visuales</a> <a href=../../../../interfaces/third-party/proxy/ title=Proxy class="nav-link text-light text-wrap d-inline-block w-100 px-0">Proxy</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4 title=Motor class="nav-link text-light dropdown-toggle px-0">Motor</a> <div id=sidebar-sidebar-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-4-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2 title="Motores de mesa" class="nav-link text-light dropdown-toggle px-0">Motores de mesa</a> <div id=sidebar-sidebar-4-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table-engines/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=#sidebar-sidebar-4-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-2 title="Familia MergeTree" class="nav-link text-light dropdown-toggle px-0">Familia MergeTree</a> <div id=sidebar-sidebar-4-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table-engines/mergetree-family/mergetree/ title="Método de codificación de datos:" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Método de codificación de datos:</a> <a href=../../../../engines/table-engines/mergetree-family/replication/ title="Replicación de datos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Replicación de datos</a> <a href=../../../../engines/table-engines/mergetree-family/custom-partitioning-key/ title="Clave de partición personalizada" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Clave de partición personalizada</a> <a href=../../../../engines/table-engines/mergetree-family/replacingmergetree/ title=ReplacingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a> <a href=../../../../engines/table-engines/mergetree-family/summingmergetree/ title=SummingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a> <a href=../../../../engines/table-engines/mergetree-family/aggregatingmergetree/ title=AgregaciónMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">AgregaciónMergeTree</a> <a href=../../../../engines/table-engines/mergetree-family/collapsingmergetree/ title=ColapsarMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">ColapsarMergeTree</a> <a href=../../../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a> <a href=../../../../engines/table-engines/mergetree-family/graphitemergetree/ title=GraphiteMergeTree class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a> </nav> </div> <a href=#sidebar-sidebar-4-2-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-3 title="Familia de registro" class="nav-link text-light dropdown-toggle px-0">Familia de registro</a> <div id=sidebar-sidebar-4-2-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table-engines/log-family/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../engines/table-engines/log-family/stripelog/ title=StripeLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a> <a href=../../../../engines/table-engines/log-family/log/ title=Registro class="nav-link text-light text-wrap d-inline-block w-100 px-0">Registro</a> <a href=../../../../engines/table-engines/log-family/tinylog/ title=TinyLog class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a> </nav> </div> <a href=#sidebar-sidebar-4-2-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-4 title=Integración class="nav-link text-light dropdown-toggle px-0">Integración</a> <div id=sidebar-sidebar-4-2-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table-engines/integrations/kafka/ title=Kafka class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a> <a href=../../../../engines/table-engines/integrations/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../../engines/table-engines/integrations/jdbc/ title=JDBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a> <a href=../../../../engines/table-engines/integrations/odbc/ title=ODBC class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a> <a href=../../../../engines/table-engines/integrations/hdfs/ title=HDFS class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a> </nav> </div> <a href=#sidebar-sidebar-4-2-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-2-5 title=Especial class="nav-link text-light dropdown-toggle px-0">Especial</a> <div id=sidebar-sidebar-4-2-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/table-engines/special/distributed/ title=Distribuido class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distribuido</a> <a href=../../../../engines/table-engines/special/external-data/ title="Datos externos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Datos externos</a> <a href=../../../../engines/table-engines/special/dictionary/ title=Diccionario class="nav-link text-light text-wrap d-inline-block w-100 px-0">Diccionario</a> <a href=../../../../engines/table-engines/special/merge/ title=Fusionar class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fusionar</a> <a href=../../../../engines/table-engines/special/file/ title=File class="nav-link text-light text-wrap d-inline-block w-100 px-0">File</a> <a href=../../../../engines/table-engines/special/null/ title=Nulo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nulo</a> <a href=../../../../engines/table-engines/special/set/ title=Establecer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Establecer</a> <a href=../../../../engines/table-engines/special/join/ title=Unir class="nav-link text-light text-wrap d-inline-block w-100 px-0">Unir</a> <a href=../../../../engines/table-engines/special/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../../engines/table-engines/special/view/ title=Vista class="nav-link text-light text-wrap d-inline-block w-100 px-0">Vista</a> <a href=../../../../engines/table-engines/special/materializedview/ title="Método de codificación de datos:" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Método de codificación de datos:</a> <a href=../../../../engines/table-engines/special/memory/ title=Memoria class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memoria</a> <a href=../../../../engines/table-engines/special/buffer/ title=Búfer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Búfer</a> <a href=../../../../engines/table-engines/special/generate/ title=GenerateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-4-3 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-4-3 title="Motores de base de datos" class="nav-link text-light dropdown-toggle px-0">Motores de base de datos</a> <div id=sidebar-sidebar-4-3 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../engines/database-engines/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../engines/database-engines/mysql/ title=MySQL class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a> <a href=../../../../engines/database-engines/lazy/ title=Perezoso class="nav-link text-light text-wrap d-inline-block w-100 px-0">Perezoso</a> <a href=../../../../engines/database-engines/atomic/ title=Atomic class="nav-link text-light text-wrap d-inline-block w-100 px-0">Atomic</a> </nav> </div> </nav> </div> <a href=#sidebar-sidebar-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5 title="Referencia SQL" class="nav-link text-light dropdown-toggle px-0">Referencia SQL</a> <div id=sidebar-sidebar-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-5-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2 title=Instrucción class="nav-link text-light dropdown-toggle px-0">Instrucción</a> <div id=sidebar-sidebar-5-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-5-2-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-2-2 title=SELECT class="nav-link text-light dropdown-toggle px-0">SELECT</a> <div id=sidebar-sidebar-5-2-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/statements/select/ title=SELECT class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a> <a href=../../../../sql-reference/statements/select/array-join/ title="ARRAY JOIN Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ARRAY JOIN Cláusula</a> <a href=../../../../sql-reference/statements/select/with/ title="CON Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CON Cláusula</a> <a href=../../../../sql-reference/statements/select/distinct/ title="Cláusula DISTINCT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cláusula DISTINCT</a> <a href=../../../../sql-reference/statements/select/from/ title="Cláusula FROM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cláusula FROM</a> <a href=../../../../sql-reference/statements/select/having/ title="Cláusula HAVING" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cláusula HAVING</a> <a href=../../../../sql-reference/statements/select/join/ title="Cláusula JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cláusula JOIN</a> <a href=../../../../sql-reference/statements/select/limit/ title="Cláusula LIMIT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cláusula LIMIT</a> <a href=../../../../sql-reference/statements/select/sample/ title="Cláusula SAMPLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cláusula SAMPLE</a> <a href=../../../../sql-reference/statements/select/where/ title="DONDE Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DONDE Cláusula</a> <a href=../../../../sql-reference/statements/select/format/ title="FORMAT Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">FORMAT Cláusula</a> <a href=../../../../sql-reference/statements/select/group-by/ title="GRUPO POR Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRUPO POR Cláusula</a> <a href=../../../../sql-reference/statements/select/into-outfile/ title="INTO OUTFILE Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INTO OUTFILE Cláusula</a> <a href=../../../../sql-reference/statements/select/limit-by/ title="LIMITAR POR Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMITAR POR Cláusula</a> <a href=../../../../sql-reference/statements/select/order-by/ title="ORDEN POR CLÁUSULA" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDEN POR CLÁUSULA</a> <a href=../../../../sql-reference/statements/select/prewhere/ title="PREWHERE Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">PREWHERE Cláusula</a> <a href=../../../../sql-reference/statements/select/union/ title="UNION Cláusula" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UNION Cláusula</a> </nav> </div> <a href=../../../../sql-reference/statements/insert-into/ title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a> <a href=../../../../sql-reference/statements/create/ title=CREATE class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a> <a href=../../../../sql-reference/statements/alter/ title=ALTER class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a> <a href=../../../../sql-reference/statements/system/ title=SYSTEM class="nav-link text-light text-wrap d-inline-block w-100 px-0">SYSTEM</a> <a href=../../../../sql-reference/statements/show/ title=SHOW class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW</a> <a href=../../../../sql-reference/statements/grant/ title=GRANT class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRANT</a> <a href=../../../../sql-reference/statements/revoke/ title=REVOKE class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a> <a href=../../../../sql-reference/statements/misc/ title=Otro class="nav-link text-light text-wrap d-inline-block w-100 px-0">Otro</a> </nav> </div> <a href=../../../../sql-reference/syntax/ title=Sintaxis class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sintaxis</a> <a href=#sidebar-sidebar-5-4 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-4 title=Función class="nav-link text-light dropdown-toggle px-0">Función</a> <div id=sidebar-sidebar-5-4 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/functions/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql-reference/functions/arithmetic-functions/ title=Aritmética class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aritmética</a> <a href=../../../../sql-reference/functions/comparison-functions/ title=Comparación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Comparación</a> <a href=../../../../sql-reference/functions/logical-functions/ title=Lógico class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lógico</a> <a href=../../../../sql-reference/functions/type-conversion-functions/ title="Conversión de tipo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Conversión de tipo</a> <a href=../../../../sql-reference/functions/date-time-functions/ title="Trabajar con fechas y horas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con fechas y horas</a> <a href=../../../../sql-reference/functions/string-functions/ title="Trabajar con cadenas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con cadenas</a> <a href=../../../../sql-reference/functions/string-search-functions/ title="Para buscar cadenas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Para buscar cadenas</a> <a href=../../../../sql-reference/functions/string-replace-functions/ title="Para reemplazar en cadenas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Para reemplazar en cadenas</a> <a href=../../../../sql-reference/functions/conditional-functions/ title=Condicional class="nav-link text-light text-wrap d-inline-block w-100 px-0">Condicional</a> <a href=../../../../sql-reference/functions/math-functions/ title=Matemática class="nav-link text-light text-wrap d-inline-block w-100 px-0">Matemática</a> <a href=../../../../sql-reference/functions/rounding-functions/ title=Redondeo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Redondeo</a> <a href=../../../../sql-reference/functions/array-functions/ title="Trabajar con matrices" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con matrices</a> <a href=../../../../sql-reference/functions/splitting-merging-functions/ title="División y fusión de cuerdas y matrices" class="nav-link text-light text-wrap d-inline-block w-100 px-0">División y fusión de cuerdas y matrices</a> <a href=../../../../sql-reference/functions/bit-functions/ title=Trozo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trozo</a> <a href=../../../../sql-reference/functions/bitmap-functions/ title=Bits class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bits</a> <a href=../../../../sql-reference/functions/hash-functions/ title=Hash class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hash</a> <a href=../../../../sql-reference/functions/random-functions/ title="Generación de números pseudo-aleatorios" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generación de números pseudo-aleatorios</a> <a href=../../../../sql-reference/functions/encoding-functions/ title=Codificación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Codificación</a> <a href=../../../../sql-reference/functions/uuid-functions/ title="Trabajando con UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajando con UUID</a> <a href=../../../../sql-reference/functions/url-functions/ title="Trabajar con URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con URL</a> <a href=../../../../sql-reference/functions/ip-address-functions/ title="Trabajar con direcciones IP" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con direcciones IP</a> <a href=../../../../sql-reference/functions/json-functions/ title="Trabajar con JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con JSON</a> <a href=../../../../sql-reference/functions/higher-order-functions/ title="Orden superior" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Orden superior</a> <a href=../../../../sql-reference/functions/ext-dict-functions/ title="Trabajar con diccionarios externos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con diccionarios externos</a> <a href=../../../../sql-reference/functions/ym-dict-functions/ title="Trabajando con Yandex.Diccionarios de Metrica" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajando con Yandex.Diccionarios de Metrica</a> <a href=../../../../sql-reference/functions/in-functions/ title="Implementación del operador IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implementación del operador IN</a> <a href=../../../../sql-reference/functions/array-join/ title=arrayJoin class="nav-link text-light text-wrap d-inline-block w-100 px-0">arrayJoin</a> <a href=../../../../sql-reference/functions/geo/ title="Trabajar con coordenadas geográficas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con coordenadas geográficas</a> <a href=../../../../sql-reference/functions/functions-for-nulls/ title="Trabajar con argumentos Nullable" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Trabajar con argumentos Nullable</a> <a href=../../../../sql-reference/functions/machine-learning-functions/ title="Funciones de aprendizaje automático" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Funciones de aprendizaje automático</a> <a href=../../../../sql-reference/functions/introspection/ title=Introspección class="nav-link text-light text-wrap d-inline-block w-100 px-0">Introspección</a> <a href=../../../../sql-reference/functions/other-functions/ title=Otro class="nav-link text-light text-wrap d-inline-block w-100 px-0">Otro</a> </nav> </div> <a href=#sidebar-sidebar-5-5 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-5 title="Funciones agregadas" class="nav-link text-light dropdown-toggle px-0">Funciones agregadas</a> <div id=sidebar-sidebar-5-5 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/aggregate-functions/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql-reference/aggregate-functions/reference/ title=Referencia class="nav-link text-light text-wrap d-inline-block w-100 px-0">Referencia</a> <a href=../../../../sql-reference/aggregate-functions/combinators/ title=Combinadores class="nav-link text-light text-wrap d-inline-block w-100 px-0">Combinadores</a> <a href=../../../../sql-reference/aggregate-functions/parametric-functions/ title=Paramétrico class="nav-link text-light text-wrap d-inline-block w-100 px-0">Paramétrico</a> </nav> </div> <a href=#sidebar-sidebar-5-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-6 title="Funciones de tabla" class="nav-link text-light dropdown-toggle px-0">Funciones de tabla</a> <div id=sidebar-sidebar-5-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/table-functions/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql-reference/table-functions/file/ title=file class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a> <a href=../../../../sql-reference/table-functions/merge/ title=fusionar class="nav-link text-light text-wrap d-inline-block w-100 px-0">fusionar</a> <a href=../../../../sql-reference/table-functions/numbers/ title=numero class="nav-link text-light text-wrap d-inline-block w-100 px-0">numero</a> <a href=../../../../sql-reference/table-functions/remote/ title=remoto class="nav-link text-light text-wrap d-inline-block w-100 px-0">remoto</a> <a href=../../../../sql-reference/table-functions/url/ title=URL class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL</a> <a href=../../../../sql-reference/table-functions/mysql/ title=mysql class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a> <a href=../../../../sql-reference/table-functions/jdbc/ title=jdbc class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a> <a href=../../../../sql-reference/table-functions/odbc/ title=Nosotros class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nosotros</a> <a href=../../../../sql-reference/table-functions/hdfs/ title=Hdfs class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hdfs</a> <a href=../../../../sql-reference/table-functions/input/ title=entrada class="nav-link text-light text-wrap d-inline-block w-100 px-0">entrada</a> <a href=../../../../sql-reference/table-functions/generate/ title=generateRandom class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a> </nav> </div> <a href=#sidebar-sidebar-5-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7 title=Diccionario class="nav-link text-light dropdown-toggle px-0">Diccionario</a> <div id=sidebar-sidebar-5-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/dictionaries/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=#sidebar-sidebar-5-7-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-7-2 title="Diccionarios externos" class="nav-link text-light dropdown-toggle px-0">Diccionarios externos</a> <div id=sidebar-sidebar-5-7-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/dictionaries/external-dictionaries/external-dicts/ title="Descripción General" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción General</a> <a href=../../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/ title="Configuración de un diccionario externo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración de un diccionario externo</a> <a href=../../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/ title="Almacenamiento de diccionarios en la memoria" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Almacenamiento de diccionarios en la memoria</a> <a href=../../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/ title="Actualizaciones del diccionario" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Actualizaciones del diccionario</a> <a href=../../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/ title="Fuentes de diccionarios externos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fuentes de diccionarios externos</a> <a href=../../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/ title="Clave y campos del diccionario" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Clave y campos del diccionario</a> <a href=../../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/ title="Diccionarios jerárquicos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Diccionarios jerárquicos</a> </nav> </div> <a href=../../../../sql-reference/dictionaries/internal-dicts/ title="Diccionarios internos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Diccionarios internos</a> </nav> </div> <a href=#sidebar-sidebar-5-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-8 title=Operador class="nav-link text-light dropdown-toggle px-0">Operador</a> <div id=sidebar-sidebar-5-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/operators/ title=Operador class="nav-link text-light text-wrap d-inline-block w-100 px-0">Operador</a> <a href=../../../../sql-reference/operators/in/ title="IN Operadores" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IN Operadores</a> </nav> </div> <a href=#sidebar-sidebar-5-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9 title="Tipos de datos" class="nav-link text-light dropdown-toggle px-0">Tipos de datos</a> <div id=sidebar-sidebar-5-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/data-types/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../sql-reference/data-types/int-uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a> <a href=../../../../sql-reference/data-types/float/ title="Descripción del producto" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción del producto</a> <a href=../../../../sql-reference/data-types/decimal/ title=Decimal class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal</a> <a href=../../../../sql-reference/data-types/boolean/ title=Booleana class="nav-link text-light text-wrap d-inline-block w-100 px-0">Booleana</a> <a href=../../../../sql-reference/data-types/string/ title=Cadena class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cadena</a> <a href=../../../../sql-reference/data-types/fixedstring/ title="Cadena fija (N)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cadena fija (N)</a> <a href=../../../../sql-reference/data-types/uuid/ title=UUID class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a> <a href=../../../../sql-reference/data-types/date/ title=Fecha class="nav-link text-light text-wrap d-inline-block w-100 px-0">Fecha</a> <a href=../../../../sql-reference/data-types/datetime/ title=FechaHora class="nav-link text-light text-wrap d-inline-block w-100 px-0">FechaHora</a> <a href=../../../../sql-reference/data-types/datetime64/ title=DateTime64 class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a> <a href=../../../../sql-reference/data-types/enum/ title=Enum class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a> <a href=../../../../sql-reference/data-types/array/ title="Matriz (T)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Matriz (T)</a> <a href=../../../../sql-reference/data-types/aggregatefunction/ title="Agregar función (nombre, types_of_arguments)...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Agregar función (nombre, types_of_arguments)...)</a> <a href=../../../../sql-reference/data-types/tuple/ title="Tuple (T1, T2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple (T1, T2, ...)</a> <a href=#sidebar-sidebar-5-9-16 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-16 title="Estructuras de datos anidados" class="nav-link text-light dropdown-toggle px-0">Estructuras de datos anidados</a> <div id=sidebar-sidebar-5-9-16 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/data-types/nested-data-structures/nested/ title="Anidado (Nombre1 Tipo1, Nombre2 Tipo2, ...)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Anidado (Nombre1 Tipo1, Nombre2 Tipo2, ...)</a> </nav> </div> <a href=../../../../sql-reference/data-types/nullable/ title=NULL class="nav-link text-light text-wrap d-inline-block w-100 px-0">NULL</a> <a href=#sidebar-sidebar-5-9-18 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-18 title="Tipos de datos especiales" class="nav-link text-light dropdown-toggle px-0">Tipos de datos especiales</a> <div id=sidebar-sidebar-5-9-18 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/data-types/special-data-types/expression/ title=Expresion class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expresion</a> <a href=../../../../sql-reference/data-types/special-data-types/set/ title=Establecer class="nav-link text-light text-wrap d-inline-block w-100 px-0">Establecer</a> <a href=../../../../sql-reference/data-types/special-data-types/nothing/ title=Nada class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nada</a> <a href=../../../../sql-reference/data-types/special-data-types/interval/ title=Intervalo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Intervalo</a> </nav> </div> <a href=#sidebar-sidebar-5-9-19 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-5-9-19 title=Dominio class="nav-link text-light dropdown-toggle px-0">Dominio</a> <div id=sidebar-sidebar-5-9-19 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../sql-reference/data-types/domains/ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=../../../../sql-reference/data-types/domains/ipv4/ title=IPv4 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a> <a href=../../../../sql-reference/data-types/domains/ipv6/ title=IPv6 class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a> </nav> </div> <a href=../../../../sql-reference/data-types/simpleaggregatefunction/ title=SimpleAggregateFunction class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction</a> </nav> </div> <a href=../../../../sql-reference/ansi/ title="Compatibilidad con ANSI" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Compatibilidad con ANSI</a> </nav> </div> <a href=#sidebar-sidebar-6 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-6 title=Guiar class="nav-link text-light dropdown-toggle px-0">Guiar</a> <div id=sidebar-sidebar-6 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../guides/ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=../../../../guides/apply-catboost-model/ title="Aplicación de modelos CatBoost" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Aplicación de modelos CatBoost</a> </nav> </div> <a href=#sidebar-sidebar-7 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7 title=Operación class="nav-link text-light dropdown-toggle px-0">Operación</a> <div id=sidebar-sidebar-7 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../operations/requirements/ title=Requisito class="nav-link text-light text-wrap d-inline-block w-100 px-0">Requisito</a> <a href=../../../../operations/monitoring/ title=Monitoreo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Monitoreo</a> <a href=../../../../operations/troubleshooting/ title="Solución de problemas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Solución de problemas</a> <a href=../../../../operations/update/ title="Actualización de ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Actualización de ClickHouse</a> <a href=../../../../operations/access-rights/ title="Control de acceso y gestión de cuentas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Control de acceso y gestión de cuentas</a> <a href=../../../../operations/backup/ title="Copia de seguridad de datos" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Copia de seguridad de datos</a> <a href=../../../../operations/configuration-files/ title="Archivos de configuración" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Archivos de configuración</a> <a href=../../../../operations/quotas/ title=Cuota class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cuota</a> <a href=#sidebar-sidebar-7-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-10 title="Optimización del rendimiento" class="nav-link text-light dropdown-toggle px-0">Optimización del rendimiento</a> <div id=sidebar-sidebar-7-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/optimizing-performance/sampling-query-profiler/ title="Generación de perfiles de consultas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Generación de perfiles de consultas</a> </nav> </div> <a href=../../../../operations/system-tables/ title="Tablas del sistema" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tablas del sistema</a> <a href=#sidebar-sidebar-7-12 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-12 title="Parámetros de configuración del servidor" class="nav-link text-light dropdown-toggle px-0">Parámetros de configuración del servidor</a> <div id=sidebar-sidebar-7-12 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/server-configuration-parameters/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../operations/server-configuration-parameters/settings/ title="Configuración del servidor" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración del servidor</a> </nav> </div> <a href=../../../../operations/performance-test/ title="Prueba de hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Prueba de hardware</a> <a href=#sidebar-sidebar-7-14 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-14 title=Configuración class="nav-link text-light dropdown-toggle px-0">Configuración</a> <div id=sidebar-sidebar-7-14 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/settings/ title=Implantación class="nav-link text-light text-wrap d-inline-block w-100 px-0">Implantación</a> <a href=../../../../operations/settings/permissions-for-queries/ title="Permisos para consultas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Permisos para consultas</a> <a href=../../../../operations/settings/query-complexity/ title="Restricciones en la complejidad de consultas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restricciones en la complejidad de consultas</a> <a href=../../../../operations/settings/settings-profiles/ title="Perfiles de configuración" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Perfiles de configuración</a> <a href=../../../../operations/settings/constraints-on-settings/ title="Restricciones en la configuración" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Restricciones en la configuración</a> <a href=../../../../operations/settings/settings-users/ title="Configuración del usuario" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración del usuario</a> <a href=../../../../operations/settings/settings/ title=Configuración class="nav-link text-light text-wrap d-inline-block w-100 px-0">Configuración</a> </nav> </div> <a href=#sidebar-sidebar-7-15 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-7-15 title=Utilidad class="nav-link text-light dropdown-toggle px-0">Utilidad</a> <div id=sidebar-sidebar-7-15 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../operations/utilities/ title=Descripción class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción</a> <a href=../../../../operations/utilities/clickhouse-copier/ title="Método de codificación de datos:" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Método de codificación de datos:</a> <a href=../../../../operations/utilities/clickhouse-local/ title=clickhouse-local class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a> <a href=../../../../operations/utilities/clickhouse-benchmark/ title="Sistema abierto" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Sistema abierto</a> </nav> </div> <a href=../../../../operations/tips/ title="Recomendaciones de uso" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Recomendaciones de uso</a> </nav> </div> <a href=#sidebar-sidebar-8 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-8 title=Desarrollo class="nav-link text-light dropdown-toggle px-0">Desarrollo</a> <div id=sidebar-sidebar-8 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../development/developer-instruction/ title="La instrucción para desarrolladores de ClickHouse para principiantes" class="nav-link text-light text-wrap d-inline-block w-100 px-0">La instrucción para desarrolladores de ClickHouse para principiantes</a> <a href=../../../../development/architecture/ title="Descripción general de la arquitectura ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Descripción general de la arquitectura ClickHouse</a> <a href=../../../../development/browse-code/ title="Buscar código fuente" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buscar código fuente</a> <a href=../../../../development/build/ title="Cómo crear ClickHouse en Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo crear ClickHouse en Linux</a> <a href=../../../../development/build-osx/ title="Cómo crear ClickHouse en Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo crear ClickHouse en Mac OS X</a> <a href=../../../../development/build-cross-osx/ title="Cómo construir ClickHouse en Linux para Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo construir ClickHouse en Linux para Mac OS X</a> <a href=../../../../development/build-cross-arm/ title="Cómo construir ClickHouse en Linux para AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo construir ClickHouse en Linux para AARCH64 (ARM64)</a> <a href=../../../../development/style/ title="Cómo escribir código C ++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Cómo escribir código C ++</a> <a href=../../../../development/tests/ title=Testing class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing</a> <a href=../../../../development/contrib/ title="Bibliotecas de terceros utilizadas" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Bibliotecas de terceros utilizadas</a> </nav> </div> <a href=#sidebar-sidebar-9 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-9 title=Comercial class="nav-link text-light dropdown-toggle px-0">Comercial</a> <div id=sidebar-sidebar-9 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../commercial/cloud/ title=Nube class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nube</a> <a href=../../../../commercial/support/ title=Apoyo class="nav-link text-light text-wrap d-inline-block w-100 px-0">Apoyo</a> </nav> </div> <a href=#sidebar-sidebar-10 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10 title="Qué hay de Nuevo" class="nav-link text-light dropdown-toggle px-0">Qué hay de Nuevo</a> <div id=sidebar-sidebar-10 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=#sidebar-sidebar-10-2 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-10-2 title=Changelog class="nav-link text-light dropdown-toggle px-0">Changelog</a> <div id=sidebar-sidebar-10-2 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../whats-new/changelog/ title=2021 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2021</a> <a href=../../../../whats-new/changelog/2019/ title=2019 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a> <a href=../../../../whats-new/changelog/2018/ title=2018 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a> <a href=../../../../whats-new/changelog/2017/ title=2017 class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a> </nav> </div> <a href=../../../../whats-new/roadmap/ title="Hoja de ruta" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hoja de ruta</a> <a href=../../../../whats-new/security-changelog/ title="Seguridad Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Seguridad Changelog</a> </nav> </div> <a href=#sidebar-sidebar-11 data-toggle=collapse aria-expanded=false aria-controls=sidebar-sidebar-11 title=F.A.Q. class="nav-link text-light dropdown-toggle px-0">F.A.Q.</a> <div id=sidebar-sidebar-11 class="nav flex-column collapse"> <nav class="nav flex-column pl-2"> <a href=../../../../faq/general/ title="Preguntas generales" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Preguntas generales</a> </nav> </div> <a href=../../../../roadmap/ title="Hoja De Ruta" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Hoja De Ruta</a> <a href=../../../../single/clickhouse_es.pdf class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light"> <img src=/images/mkdocs/pdf.svg alt="PDF version" title="PDF version" height=24 class="d-block mr-1 float-left"><div>PDF version</div> </a> </nav> </div> </div> <div id=content-wrapper class="col-md-8 p-2 p-md-4"> <div id=content class=mt-md-n3> <nav class=text-muted aria-label=breadcrumb> <ol class="breadcrumb bg-transparent p-0"> <li class=breadcrumb-item><a href=../../../ class=text-reset>Motor</a> </li> <li class=breadcrumb-item><a href=../../ class=text-reset>Motores de mesa</a> </li> <li class=breadcrumb-item><a href=../ class=text-reset>Familia MergeTree</a> </li> </ol> </nav> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Help wanted!</p> <p class=lead>The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href=/docs/en/engines/table-engines/mergetree-family/mergetree/ class=alert-link>You can also use the original English version as a reference.</a></p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/es/engines/table-engines/mergetree-family/mergetree.md target=_blank rel="external nofollow noreferrer"> Help ClickHouse documentation by editing this page </a> </p> </div> <h1 id=table_engines-mergetree>Método de codificación de datos:<a class=headerlink href=#table_engines-mergetree title="Permanent link"> </a></h1> <p>El <code class=syntax>MergeTree</code> motor y otros motores de esta familia (<code class=syntax>*MergeTree</code>) son los motores de mesa ClickHouse más robustos.</p> <p>Motores en el <code class=syntax>MergeTree</code> familia están diseñados para insertar una gran cantidad de datos en una tabla. Los datos se escriben rápidamente en la tabla parte por parte, luego se aplican reglas para fusionar las partes en segundo plano. Este método es mucho más eficiente que reescribir continuamente los datos en almacenamiento durante la inserción.</p> <p>Principales características:</p> <ul> <li> <p>Almacena datos ordenados por clave principal.</p> <p>Esto le permite crear un pequeño índice disperso que ayuda a encontrar datos más rápido.</p> </li> <li> <p>Las particiones se pueden utilizar si <a href=../custom-partitioning-key/ >clave de partición</a> se especifica.</p> <p>ClickHouse admite ciertas operaciones con particiones que son más efectivas que las operaciones generales en los mismos datos con el mismo resultado. ClickHouse también corta automáticamente los datos de partición donde se especifica la clave de partición en la consulta. Esto también mejora el rendimiento de las consultas.</p> </li> <li> <p>Soporte de replicación de datos.</p> <p>La familia de <code class=syntax>ReplicatedMergeTree</code> proporciona la replicación de datos. Para obtener más información, consulte <a href=../replication/ >Replicación de datos</a>.</p> </li> <li> <p>Soporte de muestreo de datos.</p> <p>Si es necesario, puede establecer el método de muestreo de datos en la tabla.</p> </li> </ul> <div class="admonition info alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">INFO</p> <p>El <a class=alert-link href=../../special/merge/#merge>Fusionar</a> el motor no pertenece al <code class=syntax>*MergeTree</code> familia.</p> </div> <h2 id=table_engine-mergetree-creating-a-table>Creación de una tabla<a class=headerlink href=#table_engine-mergetree-creating-a-table title="Permanent link"> </a></h2> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
    <span class=k>INDEX</span> <span class=n>index_name1</span> <span class=n>expr1</span> <span class=k>TYPE</span> <span class=n>type1</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>value1</span><span class=p>,</span>
    <span class=k>INDEX</span> <span class=n>index_name2</span> <span class=n>expr2</span> <span class=k>TYPE</span> <span class=n>type2</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>value2</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
<span class=p>[</span><span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>ORDER</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=n>TTL</span> <span class=n>expr</span> <span class=p>[</span><span class=k>DELETE</span><span class=o>|</span><span class=k>TO</span> <span class=n>DISK</span> <span class=s1>'xxx'</span><span class=o>|</span><span class=k>TO</span> <span class=n>VOLUME</span> <span class=s1>'xxx'</span><span class=p>],</span> <span class=p>...]</span>
<span class=p>[</span><span class=n>SETTINGS</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>,</span> <span class=p>...]</span>
</code></pre></div> <p>Para obtener una descripción de los parámetros, consulte <a href=../../../../sql-reference/statements/create/ >Descripción de la consulta CREATE</a>.</p> <div class="admonition note alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Nota</p> <p><code class=syntax>INDEX</code> es una característica experimental, ver <a class=alert-link href=#table_engine-mergetree-data_skipping-indexes>Índices de saltos de datos</a>.</p> </div> <h3 id=mergetree-query-clauses>Cláusulas de consulta<a class=headerlink href=#mergetree-query-clauses title="Permanent link"> </a></h3> <ul> <li> <p><code class=syntax>ENGINE</code> — Name and parameters of the engine. <code class=syntax>ENGINE = MergeTree()</code>. El <code class=syntax>MergeTree</code> el motor no tiene parámetros.</p> </li> <li> <p><code class=syntax>PARTITION BY</code> — The <a href=../custom-partitioning-key/ >clave de partición</a>.</p> <p>Para particionar por mes, utilice el <code class=syntax>toYYYYMM(date_column)</code> expresión, donde <code class=syntax>date_column</code> es una columna con una fecha del tipo <a href=../../../../sql-reference/data-types/date/ >Fecha</a>. Los nombres de partición aquí tienen el <code class=syntax>"YYYYMM"</code> formato.</p> </li> <li> <p><code class=syntax>ORDER BY</code> — The sorting key.</p> <p>Una tupla de columnas o expresiones arbitrarias. Ejemplo: <code class=syntax>ORDER BY (CounterID, EventDate)</code>.</p> </li> <li> <p><code class=syntax>PRIMARY KEY</code> — The primary key if it <a href=#choosing-a-primary-key-that-differs-from-the-sorting-key>difiere de la clave de clasificación</a>.</p> <p>De forma predeterminada, la clave principal es la misma que la clave de ordenación (que se especifica <code class=syntax>ORDER BY</code> clausula). Por lo tanto, en la mayoría de los casos no es necesario especificar un <code class=syntax>PRIMARY KEY</code> clausula.</p> </li> <li> <p><code class=syntax>SAMPLE BY</code> — An expression for sampling.</p> <p>Si se utiliza una expresión de muestreo, la clave principal debe contenerla. Ejemplo: <code class=syntax>SAMPLE BY intHash32(UserID) ORDER BY (CounterID, EventDate, intHash32(UserID))</code>.</p> </li> <li> <p><code class=syntax>TTL</code> — A list of rules specifying storage duration of rows and defining logic of automatic parts movement <a href=#table_engine-mergetree-multiple-volumes>entre discos y volúmenes</a>.</p> <p>La expresión debe tener una <code class=syntax>Date</code> o <code class=syntax>DateTime</code> columna como resultado. Ejemplo:<br> <code class=syntax>TTL date + INTERVAL 1 DAY</code></p> <p>Tipo de regla <code class=syntax>DELETE|TO DISK 'xxx'|TO VOLUME 'xxx'</code> especifica una acción que debe realizarse con la pieza si la expresión está satisfecha (alcanza la hora actual): eliminación de filas caducadas, mover una pieza (si la expresión está satisfecha para todas las filas de una pieza) al disco especificado (<code class=syntax>TO DISK 'xxx'</code>) o al volumen (<code class=syntax>TO VOLUME 'xxx'</code>). El tipo predeterminado de la regla es la eliminación (<code class=syntax>DELETE</code>). Se puede especificar una lista de varias reglas, pero no debe haber más de una <code class=syntax>DELETE</code> regla.</p> <p>Para obtener más información, consulte <a href=#table_engine-mergetree-ttl>TTL para columnas y tablas</a></p> </li> <li> <p><code class=syntax>SETTINGS</code> — Additional parameters that control the behavior of the <code class=syntax>MergeTree</code>:</p> <ul> <li><code class=syntax>index_granularity</code> — Maximum number of data rows between the marks of an index. Default value: 8192. See <a href=#mergetree-data-storage>Almacenamiento de datos</a>.</li> <li><code class=syntax>index_granularity_bytes</code> — Maximum size of data granules in bytes. Default value: 10Mb. To restrict the granule size only by number of rows, set to 0 (not recommended). See <a href=#mergetree-data-storage>Almacenamiento de datos</a>.</li> <li><code class=syntax>enable_mixed_granularity_parts</code> — Enables or disables transitioning to control the granule size with the <code class=syntax>index_granularity_bytes</code> configuración. Antes de la versión 19.11, sólo existía el <code class=syntax>index_granularity</code> ajuste para restringir el tamaño del gránulo. El <code class=syntax>index_granularity_bytes</code> mejora el rendimiento de ClickHouse al seleccionar datos de tablas con filas grandes (decenas y cientos de megabytes). Si tiene tablas con filas grandes, puede habilitar esta configuración para que las tablas mejoren la eficiencia de <code class=syntax>SELECT</code> consulta.</li> <li><code class=syntax>use_minimalistic_part_header_in_zookeeper</code> — Storage method of the data parts headers in ZooKeeper. If <code class=syntax>use_minimalistic_part_header_in_zookeeper=1</code>, entonces ZooKeeper almacena menos datos. Para obtener más información, consulte <a href=../../../../operations/server-configuration-parameters/settings/#server-settings-use_minimalistic_part_header_in_zookeeper>descripción del ajuste</a> en “Server configuration parameters”.</li> <li><code class=syntax>min_merge_bytes_to_use_direct_io</code> — The minimum data volume for merge operation that is required for using direct I/O access to the storage disk. When merging data parts, ClickHouse calculates the total storage volume of all the data to be merged. If the volume exceeds <code class=syntax>min_merge_bytes_to_use_direct_io</code> bytes, ClickHouse lee y escribe los datos en el disco de almacenamiento utilizando la interfaz de E / S directa (<code class=syntax>O_DIRECT</code> opcion). Si <code class=syntax>min_merge_bytes_to_use_direct_io = 0</code>, entonces la E/S directa está deshabilitada. Valor predeterminado: <code class=syntax>10 * 1024 * 1024 * 1024</code> byte.<br> <a name=mergetree_setting-merge_with_ttl_timeout></a></li> <li><code class=syntax>merge_with_ttl_timeout</code> — Minimum delay in seconds before repeating a merge with TTL. Default value: 86400 (1 day).</li> <li><code class=syntax>write_final_mark</code> — Enables or disables writing the final index mark at the end of data part (after the last byte). Default value: 1. Don't turn it off.</li> <li><code class=syntax>merge_max_block_size</code> — Maximum number of rows in block for merge operations. Default value: 8192.</li> <li><code class=syntax>storage_policy</code> — Storage policy. See <a href=#table_engine-mergetree-multiple-volumes>Uso de varios dispositivos de bloque para el almacenamiento de datos</a>.</li> </ul> </li> </ul> <p><strong>Ejemplo de configuración de secciones</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>ENGINE</span> <span class=n>MergeTree</span><span class=p>()</span> <span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>))</span> <span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>index_granularity</span><span class=o>=</span><span class=mi>8192</span>
</code></pre></div> <p>En el ejemplo, configuramos la partición por mes.</p> <p>También establecemos una expresión para el muestreo como un hash por el ID de usuario. Esto le permite pseudoaleatorizar los datos en la tabla para cada <code class=syntax>CounterID</code> y <code class=syntax>EventDate</code>. Si define un <a href=../../../../sql-reference/statements/select/sample/#select-sample-clause>SAMPLE</a> cláusula al seleccionar los datos, ClickHouse devolverá una muestra de datos pseudoaleatoria uniforme para un subconjunto de usuarios.</p> <p>El <code class=syntax>index_granularity</code> se puede omitir porque 8192 es el valor predeterminado.</p> <details><summary>Método obsoleto para crear una tabla</summary> <p></p> <div class="admonition attention alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Atención</p> <p>No utilice este método en nuevos proyectos. Si es posible, cambie los proyectos antiguos al método descrito anteriormente.</p> </div> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>MergeTree</span><span class=p>(</span><span class=nb>date</span><span class=o>-</span><span class=k>column</span> <span class=p>[,</span> <span class=n>sampling_expression</span><span class=p>],</span> <span class=p>(</span><span class=k>primary</span><span class=p>,</span> <span class=k>key</span><span class=p>),</span> <span class=n>index_granularity</span><span class=p>)</span>
</code></pre></div> <p><strong>Parámetros MergeTree()</strong></p> <ul> <li><code class=syntax>date-column</code> — The name of a column of the <a href=../../../../sql-reference/data-types/date/ >Fecha</a> tipo. ClickHouse crea automáticamente particiones por mes en función de esta columna. Los nombres de partición están en el <code class=syntax>"YYYYMM"</code> formato.</li> <li><code class=syntax>sampling_expression</code> — An expression for sampling.</li> <li><code class=syntax>(primary, key)</code> — Primary key. Type: <a href=../../../../sql-reference/data-types/tuple/ >Tupla()</a></li> <li><code class=syntax>index_granularity</code> — The granularity of an index. The number of data rows between the “marks” de un índice. El valor 8192 es apropiado para la mayoría de las tareas.</li> </ul> <p><strong>Ejemplo</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>MergeTree</span><span class=p>(</span><span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)),</span> <span class=mi>8192</span><span class=p>)</span>
</code></pre></div> <p>El <code class=syntax>MergeTree</code> engine se configura de la misma manera que en el ejemplo anterior para el método de configuración del motor principal.</p> </details> <h2 id=mergetree-data-storage>Almacenamiento de datos<a class=headerlink href=#mergetree-data-storage title="Permanent link"> </a></h2> <p>Una tabla consta de partes de datos ordenadas por clave principal.</p> <p>Cuando se insertan datos en una tabla, se crean partes de datos separadas y cada una de ellas se ordena lexicográficamente por clave principal. Por ejemplo, si la clave principal es <code class=syntax>(CounterID, Date)</code>, los datos en la parte se ordenan por <code class=syntax>CounterID</code>, y dentro de cada <code class=syntax>CounterID</code> es ordenado por <code class=syntax>Date</code>.</p> <p>Los datos que pertenecen a diferentes particiones se separan en diferentes partes. En el fondo, ClickHouse combina partes de datos para un almacenamiento más eficiente. Las piezas que pertenecen a particiones diferentes no se fusionan. El mecanismo de combinación no garantiza que todas las filas con la misma clave principal estén en la misma parte de datos.</p> <p>Cada parte de datos se divide lógicamente en gránulos. Un gránulo es el conjunto de datos indivisibles más pequeño que ClickHouse lee al seleccionar datos. ClickHouse no divide filas o valores, por lo que cada gránulo siempre contiene un número entero de filas. La primera fila de un gránulo está marcada con el valor de la clave principal de la fila. Para cada parte de datos, ClickHouse crea un archivo de índice que almacena las marcas. Para cada columna, ya sea en la clave principal o no, ClickHouse también almacena las mismas marcas. Estas marcas le permiten encontrar datos directamente en archivos de columnas.</p> <p>El tamaño del gránulo es restringido por <code class=syntax>index_granularity</code> y <code class=syntax>index_granularity_bytes</code> configuración del motor de tabla. El número de filas en un gránulo se encuentra en el <code class=syntax>[1, index_granularity]</code> rango, dependiendo del tamaño de las filas. El tamaño de un gránulo puede exceder <code class=syntax>index_granularity_bytes</code> si el tamaño de una sola fila es mayor que el valor de la configuración. En este caso, el tamaño del gránulo es igual al tamaño de la fila.</p> <h2 id=primary-keys-and-indexes-in-queries>Claves e índices principales en consultas<a class=headerlink href=#primary-keys-and-indexes-in-queries title="Permanent link"> </a></h2> <p>Tome el <code class=syntax>(CounterID, Date)</code> clave primaria como ejemplo. En este caso, la clasificación y el índice se pueden ilustrar de la siguiente manera:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=w>  </span><span class=n>Whole</span><span class=w> </span><span class=k>data</span><span class=err>:</span><span class=w>     </span><span class=o>[</span><span class=n>---------------------------------------------</span><span class=o>]</span><span class=w></span>
<span class=w>  </span><span class=nl>CounterID</span><span class=p>:</span><span class=w>      </span><span class=o>[</span><span class=n>aaaaaaaaaaaaaaaaaabbbbcdeeeeeeeeeeeeefgggggggghhhhhhhhhiiiiiiiiikllllllll</span><span class=o>]</span><span class=w></span>
<span class=w>  </span><span class=nc>Date</span><span class=err>:</span><span class=w>           </span><span class=o>[</span><span class=n>1111111222222233331233211111222222333211111112122222223111112223311122333</span><span class=o>]</span><span class=w></span>
<span class=w>  </span><span class=nl>Marks</span><span class=p>:</span><span class=w>           </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w>      </span><span class=o>|</span><span class=w></span>
<span class=w>                  </span><span class=n>a</span><span class=p>,</span><span class=mi>1</span><span class=w>    </span><span class=n>a</span><span class=p>,</span><span class=mi>2</span><span class=w>    </span><span class=n>a</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>b</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>e</span><span class=p>,</span><span class=mi>2</span><span class=w>    </span><span class=n>e</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>g</span><span class=p>,</span><span class=mi>1</span><span class=w>    </span><span class=n>h</span><span class=p>,</span><span class=mi>2</span><span class=w>    </span><span class=n>i</span><span class=p>,</span><span class=mi>1</span><span class=w>    </span><span class=n>i</span><span class=p>,</span><span class=mi>3</span><span class=w>    </span><span class=n>l</span><span class=p>,</span><span class=mi>3</span><span class=w></span>
<span class=w>  </span><span class=n>Marks</span><span class=w> </span><span class=nl>numbers</span><span class=p>:</span><span class=w>   </span><span class=mi>0</span><span class=w>      </span><span class=mi>1</span><span class=w>      </span><span class=mi>2</span><span class=w>      </span><span class=mi>3</span><span class=w>      </span><span class=mi>4</span><span class=w>      </span><span class=mi>5</span><span class=w>      </span><span class=mi>6</span><span class=w>      </span><span class=mi>7</span><span class=w>      </span><span class=mi>8</span><span class=w>      </span><span class=mi>9</span><span class=w>      </span><span class=mi>10</span><span class=w></span>
</code></pre></div> <p>Si la consulta de datos especifica:</p> <ul> <li><code class=syntax>CounterID in ('a', 'h')</code>, el servidor lee los datos en los rangos de marcas <code class=syntax>[0, 3)</code> y <code class=syntax>[6, 8)</code>.</li> <li><code class=syntax>CounterID IN ('a', 'h') AND Date = 3</code>, el servidor lee los datos en los rangos de marcas <code class=syntax>[1, 3)</code> y <code class=syntax>[7, 8)</code>.</li> <li><code class=syntax>Date = 3</code>, el servidor lee los datos en el rango de marcas <code class=syntax>[1, 10]</code>.</li> </ul> <p>Los ejemplos anteriores muestran que siempre es más efectivo usar un índice que un análisis completo.</p> <p>Un índice disperso permite leer datos adicionales. Al leer un único rango de la clave primaria, hasta <code class=syntax>index_granularity * 2</code> se pueden leer filas adicionales en cada bloque de datos.</p> <p>Los índices dispersos le permiten trabajar con una gran cantidad de filas de tabla, porque en la mayoría de los casos, dichos índices caben en la RAM de la computadora.</p> <p>ClickHouse no requiere una clave principal única. Puede insertar varias filas con la misma clave principal.</p> <h3 id=selecting-the-primary-key>Selección de la clave principal<a class=headerlink href=#selecting-the-primary-key title="Permanent link"> </a></h3> <p>El número de columnas en la clave principal no está explícitamente limitado. Dependiendo de la estructura de datos, puede incluir más o menos columnas en la clave principal. Esto puede:</p> <ul> <li> <p>Mejorar el rendimiento de un índice.</p> <p>Si la clave principal es <code class=syntax>(a, b)</code>, a continuación, añadir otra columna <code class=syntax>c</code> mejorará el rendimiento si se cumplen las siguientes condiciones:</p> <ul> <li>Hay consultas con una condición en la columna <code class=syntax>c</code>.</li> <li>Rangos de datos largos (varias veces más <code class=syntax>index_granularity</code>) con valores idénticos para <code class=syntax>(a, b)</code> son comunes. En otras palabras, al agregar otra columna le permite omitir rangos de datos bastante largos.</li> </ul> </li> <li> <p>Mejorar la compresión de datos.</p> <p>ClickHouse ordena los datos por clave principal, por lo que cuanto mayor sea la consistencia, mejor será la compresión.</p> </li> <li> <p>Proporcione una lógica adicional al fusionar partes de datos en el <a href=../collapsingmergetree/#table_engine-collapsingmergetree>ColapsarMergeTree</a> y <a href=../summingmergetree/ >SummingMergeTree</a> motor.</p> <p>En este caso tiene sentido especificar el <em>clave de clasificación</em> que es diferente de la clave principal.</p> </li> </ul> <p>Una clave principal larga afectará negativamente al rendimiento de la inserción y al consumo de memoria, pero las columnas adicionales de la clave principal no afectarán al rendimiento de ClickHouse durante <code class=syntax>SELECT</code> consulta.</p> <h3 id=choosing-a-primary-key-that-differs-from-the-sorting-key>Elegir una clave principal que difiere de la clave de ordenación<a class=headerlink href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="Permanent link"> </a></h3> <p>Es posible especificar una clave principal (una expresión con valores que se escriben en el archivo de índice para cada marca) que es diferente de la clave de ordenación (una expresión para ordenar las filas en partes de datos). En este caso, la tupla de expresión de clave primaria debe ser un prefijo de la tupla de expresión de clave de ordenación.</p> <p>Esta característica es útil cuando se <a href=../summingmergetree/ >SummingMergeTree</a> y<br> <a href=../aggregatingmergetree/ >AgregaciónMergeTree</a> motores de mesa. En un caso común cuando se utilizan estos motores, la tabla tiene dos tipos de columnas: <em>cota</em> y <em>medida</em>. Las consultas típicas agregan valores de columnas de medida con <code class=syntax>GROUP BY</code> y filtrado por dimensiones. Debido a que SummingMergeTree y AggregatingMergeTree agregan filas con el mismo valor de la clave de ordenación, es natural agregarle todas las dimensiones. Como resultado, la expresión de clave consta de una larga lista de columnas y esta lista debe actualizarse con frecuencia con las dimensiones recién agregadas.</p> <p>En este caso, tiene sentido dejar solo unas pocas columnas en la clave principal que proporcionarán análisis de rango eficientes y agregarán las columnas de dimensión restantes a la tupla de clave de clasificación.</p> <p><a href=../../../../sql-reference/statements/alter/ >ALTER</a> de la clave de ordenación es una operación ligera porque cuando se agrega una nueva columna simultáneamente a la tabla y a la clave de ordenación, las partes de datos existentes no necesitan ser cambiadas. Dado que la clave de ordenación anterior es un prefijo de la nueva clave de ordenación y no hay datos en la columna recién agregada, los datos se ordenan tanto por las claves de ordenación antiguas como por las nuevas en el momento de la modificación de la tabla.</p> <h3 id=use-of-indexes-and-partitions-in-queries>Uso de índices y particiones en consultas<a class=headerlink href=#use-of-indexes-and-partitions-in-queries title="Permanent link"> </a></h3> <p>Para <code class=syntax>SELECT</code> consultas, ClickHouse analiza si se puede usar un índice. Se puede usar un índice si el <code class=syntax>WHERE/PREWHERE</code> clause tiene una expresión (como uno de los elementos de conjunción, o enteramente) que representa una operación de comparación de igualdad o desigualdad, o si tiene <code class=syntax>IN</code> o <code class=syntax>LIKE</code> con un prefijo fijo en columnas o expresiones que están en la clave principal o clave de partición, o en ciertas funciones parcialmente repetitivas de estas columnas, o relaciones lógicas de estas expresiones.</p> <p>Por lo tanto, es posible ejecutar rápidamente consultas en uno o varios rangos de la clave principal. En este ejemplo, las consultas serán rápidas cuando se ejecuten para una etiqueta de seguimiento específica, para una etiqueta y un intervalo de fechas específicos, para una etiqueta y una fecha específicas, para varias etiquetas con un intervalo de fechas, etc.</p> <p>Veamos el motor configurado de la siguiente manera:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=err>  ENGINE MergeTree() PARTITION BY toYYYYMM(EventDate) ORDER BY (CounterID, EventDate) SETTINGS index_granularity=8192</span>
</code></pre></div> <p>En este caso, en consultas:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>now</span><span class=p>())</span> <span class=k>AND</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>now</span><span class=p>())</span> <span class=k>AND</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span> <span class=k>OR</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>42</span><span class=p>)</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=p>((</span><span class=n>EventDate</span> <span class=o>&gt;=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>'2014-01-01'</span><span class=p>)</span> <span class=k>AND</span> <span class=n>EventDate</span> <span class=o>&lt;=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>'2014-01-31'</span><span class=p>))</span> <span class=k>OR</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>'2014-05-01'</span><span class=p>))</span> <span class=k>AND</span> <span class=n>CounterID</span> <span class=k>IN</span> <span class=p>(</span><span class=mi>101500</span><span class=p>,</span> <span class=mi>731962</span><span class=p>,</span> <span class=mi>160656</span><span class=p>)</span> <span class=k>AND</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>101500</span> <span class=k>OR</span> <span class=n>EventDate</span> <span class=o>!=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>'2014-05-01'</span><span class=p>))</span>
</code></pre></div> <p>ClickHouse utilizará el índice de clave principal para recortar datos incorrectos y la clave de partición mensual para recortar particiones que están en intervalos de fechas incorrectos.</p> <p>Las consultas anteriores muestran que el índice se usa incluso para expresiones complejas. La lectura de la tabla está organizada de modo que el uso del índice no puede ser más lento que un escaneo completo.</p> <p>En el siguiente ejemplo, el índice no se puede usar.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span> <span class=k>OR</span> <span class=n>URL</span> <span class=k>LIKE</span> <span class=s1>'%upyachka%'</span>
</code></pre></div> <p>Para comprobar si ClickHouse puede usar el índice al ejecutar una consulta, use la configuración <a href=../../../../operations/settings/settings/#settings-force_index_by_date>Fecha de nacimiento</a> y <a href=../../../../operations/settings/settings/ >force_primary_key</a>.</p> <p>La clave para particionar por mes permite leer solo aquellos bloques de datos que contienen fechas del rango adecuado. En este caso, el bloque de datos puede contener datos para muchas fechas (hasta un mes). Dentro de un bloque, los datos se ordenan por clave principal, que puede no contener la fecha como la primera columna. Debido a esto, el uso de una consulta con solo una condición de fecha que no especifica el prefijo de clave principal hará que se lean más datos que para una sola fecha.</p> <h3 id=use-of-index-for-partially-monotonic-primary-keys>Uso del índice para claves primarias parcialmente monótonas<a class=headerlink href=#use-of-index-for-partially-monotonic-primary-keys title="Permanent link"> </a></h3> <p>Considere, por ejemplo, los días del mes. Ellos forman un <a href=https://en.wikipedia.org/wiki/Monotonic_function rel="external nofollow noreferrer" target=_blank>monótona secuencia</a> durante un mes, pero no monótono durante períodos más prolongados. Esta es una secuencia parcialmente monotónica. Si un usuario crea la tabla con clave primaria parcialmente monótona, ClickHouse crea un índice disperso como de costumbre. Cuando un usuario selecciona datos de este tipo de tabla, ClickHouse analiza las condiciones de consulta. Si el usuario desea obtener datos entre dos marcas del índice y ambas marcas caen dentro de un mes, ClickHouse puede usar el índice en este caso particular porque puede calcular la distancia entre los parámetros de una consulta y las marcas de índice.</p> <p>ClickHouse no puede usar un índice si los valores de la clave principal en el rango de parámetros de consulta no representan una secuencia monotónica. En este caso, ClickHouse utiliza el método de análisis completo.</p> <p>ClickHouse usa esta lógica no solo para secuencias de días del mes, sino para cualquier clave principal que represente una secuencia parcialmente monotónica.</p> <h3 id=table_engine-mergetree-data_skipping-indexes>Índices de saltos de datos (experimental)<a class=headerlink href=#table_engine-mergetree-data_skipping-indexes title="Permanent link"> </a></h3> <p>La declaración de índice se encuentra en la sección de columnas del <code class=syntax>CREATE</code> consulta.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INDEX</span> <span class=n>index_name</span> <span class=n>expr</span> <span class=k>TYPE</span> <span class=k>type</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>granularity_value</span>
</code></pre></div> <p>Para tablas de la <code class=syntax>*MergeTree</code> familia, se pueden especificar índices de omisión de datos.</p> <p>Estos índices agregan cierta información sobre la expresión especificada en bloques, que consisten en <code class=syntax>granularity_value</code> gránulos (el tamaño del gránulo se especifica utilizando el <code class=syntax>index_granularity</code> ajuste en el motor de la tabla). Entonces estos agregados se usan en <code class=syntax>SELECT</code> consultas para reducir la cantidad de datos a leer desde el disco omitiendo grandes bloques de datos donde el <code class=syntax>where</code> consulta no puede ser satisfecha.</p> <p><strong>Ejemplo</strong></p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>table_name</span>
<span class=p>(</span>
    <span class=n>u64</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>i32</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=n>s</span> <span class=n>String</span><span class=p>,</span>
    <span class=p>...</span>
    <span class=k>INDEX</span> <span class=n>a</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=n>i32</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span> <span class=k>TYPE</span> <span class=n>minmax</span> <span class=n>GRANULARITY</span> <span class=mi>3</span><span class=p>,</span>
    <span class=k>INDEX</span> <span class=n>b</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>))</span> <span class=k>TYPE</span> <span class=k>set</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
<span class=p>...</span>
</code></pre></div> <p>ClickHouse puede utilizar los índices del ejemplo para reducir la cantidad de datos que se leen desde el disco en las siguientes consultas:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>s</span> <span class=o>&lt;</span> <span class=s1>'z'</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>u64</span> <span class=o>*</span> <span class=n>i32</span> <span class=o>==</span> <span class=mi>10</span> <span class=k>AND</span> <span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>1234</span>
</code></pre></div> <h4 id=available-types-of-indices>Tipos de índices disponibles<a class=headerlink href=#available-types-of-indices title="Permanent link"> </a></h4> <ul> <li> <p><code class=syntax>minmax</code></p> <p>Almacena los extremos de la expresión especificada (si la expresión <code class=syntax>tuple</code>, entonces almacena extremos para cada elemento de <code class=syntax>tuple</code>), utiliza información almacenada para omitir bloques de datos como la clave principal.</p> </li> <li> <p><code class=syntax>set(max_rows)</code></p> <p>Almacena valores únicos de la expresión especificada (no más de <code class=syntax>max_rows</code> filas, <code class=syntax>max_rows=0</code> medio “no limits”). Utiliza los valores para comprobar si <code class=syntax>WHERE</code> expresión no es satisfactorio en un bloque de datos.</p> </li> <li> <p><code class=syntax>ngrambf_v1(n, size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p> <p>Tiendas a <a href=https://en.wikipedia.org/wiki/Bloom_filter rel="external nofollow noreferrer" target=_blank>Filtro de floración</a> que contiene todos los ngrams de un bloque de datos. Funciona solo con cadenas. Puede ser utilizado para la optimización de <code class=syntax>equals</code>, <code class=syntax>like</code> y <code class=syntax>in</code> expresiones.</p> <ul> <li><code class=syntax>n</code> — ngram size,</li> <li><code class=syntax>size_of_bloom_filter_in_bytes</code> — Bloom filter size in bytes (you can use large values here, for example, 256 or 512, because it can be compressed well).</li> <li><code class=syntax>number_of_hash_functions</code> — The number of hash functions used in the Bloom filter.</li> <li><code class=syntax>random_seed</code> — The seed for Bloom filter hash functions.</li> </ul> </li> <li> <p><code class=syntax>tokenbf_v1(size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p> <p>Lo mismo que <code class=syntax>ngrambf_v1</code>, pero almacena tokens en lugar de ngrams. Los tokens son secuencias separadas por caracteres no alfanuméricos.</p> </li> <li> <p><code class=syntax>bloom_filter([false_positive])</code> — Stores a <a href=https://en.wikipedia.org/wiki/Bloom_filter rel="external nofollow noreferrer" target=_blank>Filtro de floración</a> para las columnas especificadas.</p> <p>Opcional <code class=syntax>false_positive</code> parámetro es la probabilidad de recibir una respuesta falsa positiva del filtro. Valores posibles: (0, 1). Valor predeterminado: 0.025.</p> <p>Tipos de datos admitidos: <code class=syntax>Int*</code>, <code class=syntax>UInt*</code>, <code class=syntax>Float*</code>, <code class=syntax>Enum</code>, <code class=syntax>Date</code>, <code class=syntax>DateTime</code>, <code class=syntax>String</code>, <code class=syntax>FixedString</code>, <code class=syntax>Array</code>, <code class=syntax>LowCardinality</code>, <code class=syntax>Nullable</code>.</p> <p>Las siguientes funciones pueden usarlo: <a href=../../../../sql-reference/functions/comparison-functions/ >igual</a>, <a href=../../../../sql-reference/functions/comparison-functions/ >notEquals</a>, <a href=../../../../sql-reference/functions/in-functions/ >en</a>, <a href=../../../../sql-reference/functions/in-functions/ >noEn</a>, <a href=../../../../sql-reference/functions/array-functions/ >tener</a>.</p> </li> </ul> <!-- --> <div class=codehilite><pre><span></span><code class=syntax><span class=k>INDEX</span> <span class=n>sample_index</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>))</span> <span class=k>TYPE</span> <span class=n>minmax</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=k>INDEX</span> <span class=n>sample_index2</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>),</span> <span class=n>i32</span> <span class=o>+</span> <span class=n>f64</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span> <span class=nb>date</span><span class=p>,</span> <span class=n>str</span><span class=p>)</span> <span class=k>TYPE</span> <span class=k>set</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=k>INDEX</span> <span class=n>sample_index3</span> <span class=p>(</span><span class=k>lower</span><span class=p>(</span><span class=n>str</span><span class=p>),</span> <span class=n>str</span><span class=p>)</span> <span class=k>TYPE</span> <span class=n>ngrambf_v1</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>256</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
</code></pre></div> <h4 id=functions-support>Funciones de apoyo<a class=headerlink href=#functions-support title="Permanent link"> </a></h4> <p>Condiciones en el <code class=syntax>WHERE</code> cláusula contiene llamadas de las funciones que operan con columnas. Si la columna forma parte de un índice, ClickHouse intenta usar este índice al realizar las funciones. ClickHouse admite diferentes subconjuntos de funciones para usar índices.</p> <p>El <code class=syntax>set</code> index se puede utilizar con todas las funciones. Subconjuntos de funciones para otros índices se muestran en la siguiente tabla.</p> <table> <thead> <tr> <th>Función (operador) / Índice</th> <th>clave primaria</th> <th>minmax</th> <th>Descripción</th> <th>Sistema abierto.</th> <th>bloom_filter</th> </tr> </thead> <tbody> <tr> <td><a href=../../../../sql-reference/functions/comparison-functions/#function-equals>igual (=, ==)</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/comparison-functions/#function-notequals>notEquals(!=, \&lt;&gt;)</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/string-search-functions/#function-like>como</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/string-search-functions/#function-notlike>No como</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/string-functions/#startswith>Comienza con</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/string-functions/#endswith>Finaliza con</a></td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/string-search-functions/#function-multisearchany>multiSearchAny</a></td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/in-functions/#in-functions>en</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/in-functions/#in-functions>noEn</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/comparison-functions/#function-less>menos (\&lt;)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/comparison-functions/#function-greater>mayor (&gt;)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/comparison-functions/#function-lessorequals>menosOrEquals (\&lt;=)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/comparison-functions/#function-greaterorequals>mayorOrEquals (&gt;=)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/array-functions/#function-empty>vaciar</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../../sql-reference/functions/array-functions/#function-notempty>notEmpty</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td>hasToken</td> <td>✗</td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✗</td> </tr> </tbody> </table> <p>Las funciones con un argumento constante que es menor que el tamaño de ngram no pueden ser utilizadas por <code class=syntax>ngrambf_v1</code> para la optimización de consultas.</p> <p>Los filtros Bloom pueden tener coincidencias falsas positivas, por lo que <code class=syntax>ngrambf_v1</code>, <code class=syntax>tokenbf_v1</code>, y <code class=syntax>bloom_filter</code> los índices no se pueden usar para optimizar consultas donde se espera que el resultado de una función sea falso, por ejemplo:</p> <ul> <li>Puede ser optimizado:<ul> <li><code class=syntax>s LIKE '%test%'</code></li> <li><code class=syntax>NOT s NOT LIKE '%test%'</code></li> <li><code class=syntax>s = 1</code></li> <li><code class=syntax>NOT s != 1</code></li> <li><code class=syntax>startsWith(s, 'test')</code></li> </ul> </li> <li>No se puede optimizar:<ul> <li><code class=syntax>NOT s LIKE '%test%'</code></li> <li><code class=syntax>s NOT LIKE '%test%'</code></li> <li><code class=syntax>NOT s = 1</code></li> <li><code class=syntax>s != 1</code></li> <li><code class=syntax>NOT startsWith(s, 'test')</code></li> </ul> </li> </ul> <h2 id=concurrent-data-access>Acceso a datos simultáneos<a class=headerlink href=#concurrent-data-access title="Permanent link"> </a></h2> <p>Para el acceso simultáneo a tablas, usamos versiones múltiples. En otras palabras, cuando una tabla se lee y actualiza simultáneamente, los datos se leen de un conjunto de partes que está actualizado en el momento de la consulta. No hay cerraduras largas. Las inserciones no se interponen en el camino de las operaciones de lectura.</p> <p>La lectura de una tabla se paralela automáticamente.</p> <h2 id=table_engine-mergetree-ttl>TTL para columnas y tablas<a class=headerlink href=#table_engine-mergetree-ttl title="Permanent link"> </a></h2> <p>Determina la duración de los valores.</p> <p>El <code class=syntax>TTL</code> se puede establecer para toda la tabla y para cada columna individual. TTL de nivel de tabla también puede especificar la lógica de movimiento automático de datos entre discos y volúmenes.</p> <p>Las expresiones deben evaluar <a href=../../../../sql-reference/data-types/date/ >Fecha</a> o <a href=../../../../sql-reference/data-types/datetime/ >FechaHora</a> tipo de datos.</p> <p>Ejemplo:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>TTL</span> <span class=n>time_column</span>
<span class=n>TTL</span> <span class=n>time_column</span> <span class=o>+</span> <span class=nb>interval</span>
</code></pre></div> <p>Definir <code class=syntax>interval</code>, utilizar <a href=../../../../sql-reference/operators/#operators-datetime>intervalo de tiempo</a> operador.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>TTL</span> <span class=n>date_time</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span>
<span class=n>TTL</span> <span class=n>date_time</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>15</span> <span class=n>HOUR</span>
</code></pre></div> <h3 id=mergetree-column-ttl>Columna TTL<a class=headerlink href=#mergetree-column-ttl title="Permanent link"> </a></h3> <p>Cuando los valores de la columna caducan, ClickHouse los reemplaza con los valores predeterminados para el tipo de datos de columna. Si todos los valores de columna en la parte de datos caducan, ClickHouse elimina esta columna de la parte de datos en un sistema de archivos.</p> <p>El <code class=syntax>TTL</code> cláusula no se puede utilizar para columnas clave.</p> <p>Ejemplos:</p> <p>Creación de una tabla con TTL</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>d</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>a</span> <span class=nb>Int</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>,</span>
    <span class=n>b</span> <span class=nb>Int</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>,</span>
    <span class=k>c</span> <span class=n>String</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>d</span><span class=p>;</span>
</code></pre></div> <p>Adición de TTL a una columna de una tabla existente</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=k>COLUMN</span>
    <span class=k>c</span> <span class=n>String</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>DAY</span><span class=p>;</span>
</code></pre></div> <p>Modificación de TTL de la columna</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=k>COLUMN</span>
    <span class=k>c</span> <span class=n>String</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>;</span>
</code></pre></div> <h3 id=mergetree-table-ttl>Tabla TTL<a class=headerlink href=#mergetree-table-ttl title="Permanent link"> </a></h3> <p>La tabla puede tener una expresión para la eliminación de filas caducadas y varias expresiones para el movimiento automático de partes entre <a href=#table_engine-mergetree-multiple-volumes>discos o volúmenes</a>. Cuando las filas de la tabla caducan, ClickHouse elimina todas las filas correspondientes. Para la entidad de movimiento de piezas, todas las filas de una pieza deben cumplir los criterios de expresión de movimiento.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=n>TTL</span> <span class=n>expr</span> <span class=p>[</span><span class=k>DELETE</span><span class=o>|</span><span class=k>TO</span> <span class=n>DISK</span> <span class=s1>'aaa'</span><span class=o>|</span><span class=k>TO</span> <span class=n>VOLUME</span> <span class=s1>'bbb'</span><span class=p>],</span> <span class=p>...</span>
</code></pre></div> <p>El tipo de regla TTL puede seguir cada expresión TTL. Afecta a una acción que debe realizarse una vez que se satisface la expresión (alcanza la hora actual):</p> <ul> <li><code class=syntax>DELETE</code> - Eliminar filas caducadas (acción predeterminada);</li> <li><code class=syntax>TO DISK 'aaa'</code> - mover parte al disco <code class=syntax>aaa</code>;</li> <li><code class=syntax>TO VOLUME 'bbb'</code> - mover parte al disco <code class=syntax>bbb</code>.</li> </ul> <p>Ejemplos:</p> <p>Creación de una tabla con TTL</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>d</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>a</span> <span class=nb>Int</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>d</span>
<span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span> <span class=p>[</span><span class=k>DELETE</span><span class=p>],</span>
    <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=n>WEEK</span> <span class=k>TO</span> <span class=n>VOLUME</span> <span class=s1>'aaa'</span><span class=p>,</span>
    <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>2</span> <span class=n>WEEK</span> <span class=k>TO</span> <span class=n>DISK</span> <span class=s1>'bbb'</span><span class=p>;</span>
</code></pre></div> <p>Modificación de TTL de la tabla</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>DAY</span><span class=p>;</span>
</code></pre></div> <p><strong>Eliminación de datos</strong></p> <p>Los datos con un TTL caducado se eliminan cuando ClickHouse fusiona partes de datos.</p> <p>Cuando ClickHouse ve que los datos han caducado, realiza una combinación fuera de programación. Para controlar la frecuencia de tales fusiones, puede establecer <code class=syntax>merge_with_ttl_timeout</code>. Si el valor es demasiado bajo, realizará muchas fusiones fuera de horario que pueden consumir muchos recursos.</p> <p>Si realiza el <code class=syntax>SELECT</code> consulta entre fusiones, puede obtener datos caducados. Para evitarlo, use el <a href=../../../../sql-reference/statements/misc/#misc_operations-optimize>OPTIMIZE</a> consulta antes <code class=syntax>SELECT</code>.</p> <h2 id=table_engine-mergetree-multiple-volumes>Uso de varios dispositivos de bloque para el almacenamiento de datos<a class=headerlink href=#table_engine-mergetree-multiple-volumes title="Permanent link"> </a></h2> <h3 id=introduction>Implantación<a class=headerlink href=#introduction title="Permanent link"> </a></h3> <p><code class=syntax>MergeTree</code> Los motores de tablas familiares pueden almacenar datos en múltiples dispositivos de bloque. Por ejemplo, puede ser útil cuando los datos de una determinada tabla se dividen implícitamente en “hot” y “cold”. Los datos más recientes se solicitan regularmente, pero solo requieren una pequeña cantidad de espacio. Por el contrario, los datos históricos de cola gorda se solicitan raramente. Si hay varios discos disponibles, el “hot” los datos pueden estar ubicados en discos rápidos (por ejemplo, SSD NVMe o en memoria), mientras que “cold” datos - en los relativamente lentos (por ejemplo, HDD).</p> <p>La parte de datos es la unidad móvil mínima para <code class=syntax>MergeTree</code>-mesas de motor. Los datos que pertenecen a una parte se almacenan en un disco. Las partes de datos se pueden mover entre discos en segundo plano (según la configuración del usuario) así como por medio de la <a href=../../../../sql-reference/statements/alter/#alter_move-partition>ALTER</a> consulta.</p> <h3 id=terms>Plazo<a class=headerlink href=#terms title="Permanent link"> </a></h3> <ul> <li>Disk — Block device mounted to the filesystem.</li> <li>Default disk — Disk that stores the path specified in the <a href=../../../../operations/server-configuration-parameters/settings/#server_configuration_parameters-path>camino</a> configuración del servidor.</li> <li>Volume — Ordered set of equal disks (similar to <a href=https://en.wikipedia.org/wiki/Non-RAID_drive_architectures rel="external nofollow noreferrer" target=_blank>JBOD</a>).</li> <li>Storage policy — Set of volumes and the rules for moving data between them.</li> </ul> <p>Los nombres dados a las entidades descritas se pueden encontrar en las tablas del sistema, <a href=../../../../operations/system-tables/#system_tables-storage_policies>sistema.almacenamiento_policies</a> y <a href=../../../../operations/system-tables/#system_tables-disks>sistema.disco</a>. Para aplicar una de las directivas de almacenamiento configuradas para una tabla, <code class=syntax>storage_policy</code> establecimiento de <code class=syntax>MergeTree</code>-mesas de la familia del motor.</p> <h3 id=table_engine-mergetree-multiple-volumes_configure>Configuración<a class=headerlink href=#table_engine-mergetree-multiple-volumes_configure title="Permanent link"> </a></h3> <p>Los discos, los volúmenes y las políticas de almacenamiento deben declararse <code class=syntax>&lt;storage_configuration&gt;</code> etiqueta ya sea en el archivo principal <code class=syntax>config.xml</code> o en un archivo distinto en el <code class=syntax>config.d</code> directorio.</p> <p>Estructura de configuración:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;storage_configuration&gt;</span>
    <span class=nt>&lt;disks&gt;</span>
        <span class=nt>&lt;disk_name_1&gt;</span> <span class=c>&lt;!-- disk name --&gt;</span>
            <span class=nt>&lt;path&gt;</span>/mnt/fast_ssd/clickhouse/<span class=nt>&lt;/path&gt;</span>
        <span class=nt>&lt;/disk_name_1&gt;</span>
        <span class=nt>&lt;disk_name_2&gt;</span>
            <span class=nt>&lt;path&gt;</span>/mnt/hdd1/clickhouse/<span class=nt>&lt;/path&gt;</span>
            <span class=nt>&lt;keep_free_space_bytes&gt;</span>10485760<span class=nt>&lt;/keep_free_space_bytes&gt;</span>
        <span class=nt>&lt;/disk_name_2&gt;</span>
        <span class=nt>&lt;disk_name_3&gt;</span>
            <span class=nt>&lt;path&gt;</span>/mnt/hdd2/clickhouse/<span class=nt>&lt;/path&gt;</span>
            <span class=nt>&lt;keep_free_space_bytes&gt;</span>10485760<span class=nt>&lt;/keep_free_space_bytes&gt;</span>
        <span class=nt>&lt;/disk_name_3&gt;</span>

        ...
    <span class=nt>&lt;/disks&gt;</span>

    ...
<span class=nt>&lt;/storage_configuration&gt;</span>
</code></pre></div> <p>Tags:</p> <ul> <li><code class=syntax>&lt;disk_name_N&gt;</code> — Disk name. Names must be different for all disks.</li> <li><code class=syntax>path</code> — path under which a server will store data (<code class=syntax>data</code> y <code class=syntax>shadow</code> carpetas), debe terminarse con ‘/’.</li> <li><code class=syntax>keep_free_space_bytes</code> — the amount of free disk space to be reserved.</li> </ul> <p>El orden de la definición del disco no es importante.</p> <p>Marcado de configuración de directivas de almacenamiento:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;storage_configuration&gt;</span>
    ...
    <span class=nt>&lt;policies&gt;</span>
        <span class=nt>&lt;policy_name_1&gt;</span>
            <span class=nt>&lt;volumes&gt;</span>
                <span class=nt>&lt;volume_name_1&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk_name_from_disks_configuration<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;max_data_part_size_bytes&gt;</span>1073741824<span class=nt>&lt;/max_data_part_size_bytes&gt;</span>
                <span class=nt>&lt;/volume_name_1&gt;</span>
                <span class=nt>&lt;volume_name_2&gt;</span>
                    <span class=c>&lt;!-- configuration --&gt;</span>
                <span class=nt>&lt;/volume_name_2&gt;</span>
                <span class=c>&lt;!-- more volumes --&gt;</span>
            <span class=nt>&lt;/volumes&gt;</span>
            <span class=nt>&lt;move_factor&gt;</span>0.2<span class=nt>&lt;/move_factor&gt;</span>
        <span class=nt>&lt;/policy_name_1&gt;</span>
        <span class=nt>&lt;policy_name_2&gt;</span>
            <span class=c>&lt;!-- configuration --&gt;</span>
        <span class=nt>&lt;/policy_name_2&gt;</span>

        <span class=c>&lt;!-- more policies --&gt;</span>
    <span class=nt>&lt;/policies&gt;</span>
    ...
<span class=nt>&lt;/storage_configuration&gt;</span>
</code></pre></div> <p>Tags:</p> <ul> <li><code class=syntax>policy_name_N</code> — Policy name. Policy names must be unique.</li> <li><code class=syntax>volume_name_N</code> — Volume name. Volume names must be unique.</li> <li><code class=syntax>disk</code> — a disk within a volume.</li> <li><code class=syntax>max_data_part_size_bytes</code> — the maximum size of a part that can be stored on any of the volume's disks.</li> <li><code class=syntax>move_factor</code> — when the amount of available space gets lower than this factor, data automatically start to move on the next volume if any (by default, 0.1).</li> </ul> <p>Cofiguration ejemplos:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;storage_configuration&gt;</span>
    ...
    <span class=nt>&lt;policies&gt;</span>
        <span class=nt>&lt;hdd_in_order&gt;</span> <span class=c>&lt;!-- policy name --&gt;</span>
            <span class=nt>&lt;volumes&gt;</span>
                <span class=nt>&lt;single&gt;</span> <span class=c>&lt;!-- volume name --&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk1<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk2<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;/single&gt;</span>
            <span class=nt>&lt;/volumes&gt;</span>
        <span class=nt>&lt;/hdd_in_order&gt;</span>

        <span class=nt>&lt;moving_from_ssd_to_hdd&gt;</span>
            <span class=nt>&lt;volumes&gt;</span>
                <span class=nt>&lt;hot&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>fast_ssd<span class=nt>&lt;/disk&gt;</span>
                    <span class=nt>&lt;max_data_part_size_bytes&gt;</span>1073741824<span class=nt>&lt;/max_data_part_size_bytes&gt;</span>
                <span class=nt>&lt;/hot&gt;</span>
                <span class=nt>&lt;cold&gt;</span>
                    <span class=nt>&lt;disk&gt;</span>disk1<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;/cold&gt;</span>
            <span class=nt>&lt;/volumes&gt;</span>
            <span class=nt>&lt;move_factor&gt;</span>0.2<span class=nt>&lt;/move_factor&gt;</span>
        <span class=nt>&lt;/moving_from_ssd_to_hdd&gt;</span>
    <span class=nt>&lt;/policies&gt;</span>
    ...
<span class=nt>&lt;/storage_configuration&gt;</span>
</code></pre></div> <p>En un ejemplo dado, el <code class=syntax>hdd_in_order</code> la política implementa el <a href=https://en.wikipedia.org/wiki/Round-robin_scheduling rel="external nofollow noreferrer" target=_blank>Ronda-robin</a> enfoque. Por lo tanto, esta política define solo un volumen (<code class=syntax>single</code>), las partes de datos se almacenan en todos sus discos en orden circular. Dicha política puede ser bastante útil si hay varios discos similares montados en el sistema, pero RAID no está configurado. Tenga en cuenta que cada unidad de disco individual no es confiable y es posible que desee compensarlo con un factor de replicación de 3 o más.</p> <p>Si hay diferentes tipos de discos disponibles en el sistema, <code class=syntax>moving_from_ssd_to_hdd</code> política se puede utilizar en su lugar. Volumen <code class=syntax>hot</code> consta de un disco SSD (<code class=syntax>fast_ssd</code>), y el tamaño máximo de una pieza que se puede almacenar en este volumen es de 1 GB. Todas las piezas con el tamaño más grande que 1GB serán almacenadas directamente en <code class=syntax>cold</code> volumen, que contiene un disco duro <code class=syntax>disk1</code>.<br> Además, una vez que el disco <code class=syntax>fast_ssd</code> se llena en más del 80%, los datos se transferirán al <code class=syntax>disk1</code> por un proceso en segundo plano.</p> <p>El orden de enumeración de volúmenes dentro de una directiva de almacenamiento es importante. Una vez que un volumen está sobrellenado, los datos se mueven al siguiente. El orden de la enumeración del disco también es importante porque los datos se almacenan en ellos por turnos.</p> <p>Al crear una tabla, se puede aplicarle una de las directivas de almacenamiento configuradas:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>table_with_non_default_policy</span> <span class=p>(</span>
    <span class=n>EventDate</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=n>OrderID</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>BannerID</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>SearchPhrase</span> <span class=n>String</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>OrderID</span><span class=p>,</span> <span class=n>BannerID</span><span class=p>)</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span>
<span class=n>SETTINGS</span> <span class=n>storage_policy</span> <span class=o>=</span> <span class=s1>'moving_from_ssd_to_hdd'</span>
</code></pre></div> <p>El <code class=syntax>default</code> política de almacenamiento implica el uso de un solo volumen, que consiste en un solo disco dado en <code class=syntax>&lt;path&gt;</code>. Una vez que se crea una tabla, no se puede cambiar su política de almacenamiento.</p> <h3 id=details>Detalles<a class=headerlink href=#details title="Permanent link"> </a></h3> <p>En el caso de <code class=syntax>MergeTree</code> tablas, los datos están llegando al disco de diferentes maneras:</p> <ul> <li>Como resultado de un inserto (<code class=syntax>INSERT</code> consulta).</li> <li>Durante las fusiones de fondo y <a href=../../../../sql-reference/statements/alter/#alter-mutations>mutación</a>.</li> <li>Al descargar desde otra réplica.</li> <li>Como resultado de la congelación de particiones <a href=../../../../sql-reference/statements/alter/#alter_freeze-partition>ALTER TABLE … FREEZE PARTITION</a>.</li> </ul> <p>En todos estos casos, excepto las mutaciones y la congelación de particiones, una pieza se almacena en un volumen y un disco de acuerdo con la política de almacenamiento dada:</p> <ol> <li>El primer volumen (en el orden de definición) que tiene suficiente espacio en disco para almacenar una pieza (<code class=syntax>unreserved_space &gt; current_part_size</code>) y permite almacenar partes de un tamaño determinado (<code class=syntax>max_data_part_size_bytes &gt; current_part_size</code>) se elige.</li> <li>Dentro de este volumen, se elige ese disco que sigue al que se utilizó para almacenar el fragmento de datos anterior y que tiene espacio libre más que el tamaño de la pieza (<code class=syntax>unreserved_space - keep_free_space_bytes &gt; current_part_size</code>).</li> </ol> <p>Bajo el capó, las mutaciones y la congelación de particiones hacen uso de <a href=https://en.wikipedia.org/wiki/Hard_link rel="external nofollow noreferrer" target=_blank>enlaces duros</a>. Los enlaces duros entre diferentes discos no son compatibles, por lo tanto, en tales casos las partes resultantes se almacenan en los mismos discos que los iniciales.</p> <p>En el fondo, las partes se mueven entre volúmenes en función de la cantidad de espacio libre (<code class=syntax>move_factor</code> parámetro) según el orden en que se declaran los volúmenes en el archivo de configuración.<br> Los datos nunca se transfieren desde el último y al primero. Uno puede usar tablas del sistema <a href=../../../../operations/system-tables/#system_tables-part-log>sistema.part_log</a> (campo <code class=syntax>type = MOVE_PART</code>) y <a href=../../../../operations/system-tables/#system_tables-parts>sistema.parte</a> (campo <code class=syntax>path</code> y <code class=syntax>disk</code>) para monitorear movimientos de fondo. Además, la información detallada se puede encontrar en los registros del servidor.</p> <p>El usuario puede forzar el movimiento de una pieza o una partición de un volumen a otro mediante la consulta <a href=../../../../sql-reference/statements/alter/#alter_move-partition>ALTER TABLE … MOVE PART|PARTITION … TO VOLUME|DISK …</a>, todas las restricciones para las operaciones en segundo plano se tienen en cuenta. La consulta inicia un movimiento por sí misma y no espera a que se completen las operaciones en segundo plano. El usuario recibirá un mensaje de error si no hay suficiente espacio libre disponible o si no se cumple alguna de las condiciones requeridas.</p> <p>Mover datos no interfiere con la replicación de datos. Por lo tanto, se pueden especificar diferentes directivas de almacenamiento para la misma tabla en diferentes réplicas.</p> <p>Después de la finalización de las fusiones y mutaciones de fondo, las partes viejas se eliminan solo después de un cierto período de tiempo (<code class=syntax>old_parts_lifetime</code>).<br> Durante este tiempo, no se mueven a otros volúmenes o discos. Por lo tanto, hasta que las partes finalmente se eliminen, aún se tienen en cuenta para la evaluación del espacio en disco ocupado.</p> <p><a href=https://clickhouse.tech/docs/ru/operations/table_engines/mergetree/ target=_blank>Artículo Original</a> <!--hide--></p> </div> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Was this content helpful?</span> <div id=rating-stars class="display-6 mb-0" data-titles="['Unusable', 'Poor', 'OK', 'Good', 'Excellent']" data-documentation=documentation>RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>©2016–2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> <div id=toc class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5"> <nav class="nav flex-column text-wrap"> <label for=toc>Table of Contents</label> <a href=#table_engine-mergetree-creating-a-table title="Creación de una tabla" class="nav-link text-wrap d-inline-block w-100"> Creación de una tabla </a> <nav id=toc-toc-1 class="nav flex-column pl-2"> <a href=#mergetree-query-clauses title="Cláusulas de consulta" class="nav-link text-wrap d-inline-block w-100"> Cláusulas de consulta </a> </nav> <a href=#mergetree-data-storage title="Almacenamiento de datos" class="nav-link text-wrap d-inline-block w-100"> Almacenamiento de datos </a> <a href=#primary-keys-and-indexes-in-queries title="Claves e índices principales en consultas" class="nav-link text-wrap d-inline-block w-100"> Claves e índices principales en consultas </a> <nav id=toc-toc-3 class="nav flex-column pl-2"> <a href=#selecting-the-primary-key title="Selección de la clave principal" class="nav-link text-wrap d-inline-block w-100"> Selección de la clave principal </a> <a href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="Elegir una clave principal que difiere de la clave de ordenación" class="nav-link text-wrap d-inline-block w-100"> Elegir una clave principal que difiere de la clave de ordenación </a> <a href=#use-of-indexes-and-partitions-in-queries title="Uso de índices y particiones en consultas" class="nav-link text-wrap d-inline-block w-100"> Uso de índices y particiones en consultas </a> <a href=#use-of-index-for-partially-monotonic-primary-keys title="Uso del índice para claves primarias parcialmente monótonas" class="nav-link text-wrap d-inline-block w-100"> Uso del índice para claves primarias parcialmente monótonas </a> <a href=#table_engine-mergetree-data_skipping-indexes title="Índices de saltos de datos (experimental)" class="nav-link text-wrap d-inline-block w-100"> Índices de saltos de datos (experimental) </a> <nav id=toc-toc-3-5 class="nav flex-column pl-2"> <a href=#available-types-of-indices title="Tipos de índices disponibles" class="nav-link text-wrap d-inline-block w-100"> Tipos de índices disponibles </a> <a href=#functions-support title="Funciones de apoyo" class="nav-link text-wrap d-inline-block w-100"> Funciones de apoyo </a> </nav> </nav> <a href=#concurrent-data-access title="Acceso a datos simultáneos" class="nav-link text-wrap d-inline-block w-100"> Acceso a datos simultáneos </a> <a href=#table_engine-mergetree-ttl title="TTL para columnas y tablas" class="nav-link text-wrap d-inline-block w-100"> TTL para columnas y tablas </a> <nav id=toc-toc-5 class="nav flex-column pl-2"> <a href=#mergetree-column-ttl title="Columna TTL" class="nav-link text-wrap d-inline-block w-100"> Columna TTL </a> <a href=#mergetree-table-ttl title="Tabla TTL" class="nav-link text-wrap d-inline-block w-100"> Tabla TTL </a> </nav> <a href=#table_engine-mergetree-multiple-volumes title="Uso de varios dispositivos de bloque para el almacenamiento de datos" class="nav-link text-wrap d-inline-block w-100"> Uso de varios dispositivos de bloque para el almacenamiento de datos </a> <nav id=toc-toc-6 class="nav flex-column pl-2"> <a href=#introduction title=Implantación class="nav-link text-wrap d-inline-block w-100"> Implantación </a> <a href=#terms title=Plazo class="nav-link text-wrap d-inline-block w-100"> Plazo </a> <a href=#table_engine-mergetree-multiple-volumes_configure title=Configuración class="nav-link text-wrap d-inline-block w-100"> Configuración </a> <a href=#details title=Detalles class="nav-link text-wrap d-inline-block w-100"> Detalles </a> </nav> </nav> </div> </div> </div> <script async type=text/javascript src=/js/base.js?00223b07></script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 alt=Yandex></div> </noscript> </body> </html>