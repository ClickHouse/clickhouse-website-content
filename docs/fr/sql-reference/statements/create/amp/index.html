<!doctype html><html âš¡ lang=fr> <head><meta charset=utf-8><script async src=https://cdn.ampproject.org/v0.js></script><title>CREATE | Documentation ClickHouse</title><link href=https://clickhouse.tech/docs/fr/sql-reference/statements/create/ rel=canonical><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><script type=application/ld+json>[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "CREATE | Documentation ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/fr/sql-reference/statements/create/",




"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "CREATE | Documentation ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,footer,main,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}dt{font-weight:700}b{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}template{display:none}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2rem}.h2,h2{font-size:1.5rem}.h3,h3{font-size:1.25rem}.h4,h4{font-size:1rem}.h5,h5{font-size:1rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-info{background-color:#bee5eb}.table-warning{background-color:#ffeeba}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.form-group{margin-bottom:1rem}.form-text{display:block;margin-top:.25rem}.form-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-check{position:relative;display:block;padding-left:1.25rem}.form-check-inline{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;padding-left:0;margin-right:.75rem}.form-inline{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center}.form-inline .form-check{width:100%}@media(min-width:576px){.form-inline .form-group{display:-ms-flexbox;display:flex;-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center;margin-bottom:0}.form-inline .custom-select{width:auto}.form-inline .form-check{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-left:0}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info:focus{color:#fff;background-color:#138496;border-color:#117a8b;box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-info{color:#0c5460;background-color:#d1ecf1;border-color:#bee5eb}.alert-info .alert-link{color:#062c33}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.alert-warning .alert-link{color:#533f03}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-info{background-color:#17a2b8}a.bg-info:focus,a.bg-info:hover{background-color:#117a8b}.bg-warning{background-color:#ffc107}a.bg-warning:focus,a.bg-warning:hover{background-color:#d39e00}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pr-0{padding-right:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pr-1{padding-right:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pr-2{padding-right:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pr-3{padding-right:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pr-4{padding-right:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pr-5{padding-right:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pr-md-0{padding-right:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pr-md-1{padding-right:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pr-md-2{padding-right:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pr-md-3{padding-right:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pr-md-4{padding-right:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pr-md-5{padding-right:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pr-lg-0{padding-right:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pr-lg-1{padding-right:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pr-lg-2{padding-right:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pr-lg-3{padding-right:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pr-lg-4{padding-right:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pr-lg-5{padding-right:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-info{color:#17a2b8}a.text-info:focus,a.text-info:hover{color:#0f6674}.text-warning{color:#ffc107}a.text-warning:focus,a.text-warning:hover{color:#ba8b00}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.headerlink{text-decoration:none;margin-left:.5rem}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#000;background:#eee;padding:.125rem .25rem}#content code.syntax{padding:0}#content pre{background:#efefef;padding:1rem;line-height:1.25}@media(max-width:768px){#search-form{width:50%}}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body.blog,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee;padding:.125rem .25rem}#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .k{color:#000;font-weight:700}.syntax .l{color:#08f}.syntax .n{color:#2f1e2e}.syntax .o{color:#800}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .ge{font-style:italic}.syntax .ld{color:#48b685}.syntax .m{color:#08f}.syntax .s{color:#48b685}.syntax .nb{color:#2f1e2e}.syntax .no{color:#ef6155}.syntax .ne{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .mi{color:#08f}.syntax .sc{color:#2f1e2e}.syntax .s2{color:#48b685}.syntax .se{color:#08f}.syntax .si{color:#08f}.syntax .s1{color:#080}.syntax .il{color:#08f}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .nb{color:#f8f9fa}.syntax .py{color:#f8f9fa}.syntax .sc{color:#f8f9fa}}</style><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script></head> <body class=amp dir=ltr> <div class="container-fluid container-lg pb-5"> <div class="row pt-3 mb-3"> <div class=col> <a href=/ class=text-decoration-none> <amp-img class="d-inline-block mr-3" layout=fixed width=40 height=36 src=/images/logo.svg alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout=fixed width=238 height=36 src=/images/clickhouse-black.svg alt=ClickHouse title=ClickHouse></amp-img> </a> </div> </div> <div class=row> <div id=content class=col> <div class="alert alert-primary" role=alert> <p class="display-5 mb-2">Help wanted!</p> <p class=lead>The following content of this documentation page has been machine-translated. But unlike other websites, it is not done on the fly. This translated text lives on GitHub repository alongside main ClickHouse codebase and waits for fellow native speakers to make it more human-readable. <a href=/docs/en/sql-reference/statements/create/ class=alert-link>You can also use the original English version as a reference.</a></p> <p class=lead> <a class="btn btn-lg btn-primary text-white" href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fr/sql-reference/statements/create.md target=_blank rel="external nofollow noreferrer"> Help ClickHouse documentation by editing this page </a> </p> </div> <h1 id=create-queries>CrÃ©er des requÃªtes<a class=headerlink href=../amp/#create-queries title="Permanent link">Â </a></h1> <h2 id=query-language-create-database>CREATE DATABASE<a class=headerlink href=../amp/#query-language-create-database title="Permanent link">Â </a></h2> <p>CrÃ©e la base de donnÃ©es.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>db_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span> <span class=p>[</span><span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span><span class=p>(...)]</span>
</code></pre></div> <h3 id=clauses>Clause<a class=headerlink href=../amp/#clauses title="Permanent link">Â </a></h3> <ul> <li> <p><code class=syntax>IF NOT EXISTS</code><br> Si l' <code class=syntax>db_name</code> la base de donnÃ©es existe dÃ©jÃ , alors ClickHouse ne crÃ©e pas de nouvelle base de donnÃ©es et:</p> <ul> <li>Ne lance pas d'exception si la clause est spÃ©cifiÃ©e.</li> <li>LÃ¨ve une exception si la clause n'est pas spÃ©cifiÃ©e.</li> </ul> </li> <li> <p><code class=syntax>ON CLUSTER</code><br> Clickhouse crÃ©e le <code class=syntax>db_name</code> base de donnÃ©es sur tous les serveurs d'un cluster spÃ©cifiÃ©.</p> </li> <li> <p><code class=syntax>ENGINE</code></p> <ul> <li><a href=../../../../engines/database-engines/mysql/amp/ >MySQL</a><br> Vous permet de rÃ©cupÃ©rer des donnÃ©es Ã  partir du serveur MySQL distant.<br> Par dÃ©faut, ClickHouse utilise son propre <a href=../../../../engines/database-engines/amp/ >moteur de base de donnÃ©es</a>.</li> </ul> </li> </ul> <h2 id=create-table-query>CREATE TABLE<a class=headerlink href=../amp/#create-table-query title="Permanent link">Â </a></h2> <p>Le <code class=syntax>CREATE TABLE</code> la requÃªte peut avoir plusieurs formes.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>]</span> <span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>]</span> <span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span>
</code></pre></div> <p>CrÃ©e une table nommÃ©e â€˜nameâ€™ dans le â€˜dbâ€™ base de donnÃ©es ou la base de donnÃ©es actuelle si â€˜dbâ€™ n'est pas dÃ©finie, avec la structure spÃ©cifiÃ©e entre parenthÃ¨ses et l' â€˜engineâ€™ moteur.<br> La structure de la table est une liste de descriptions de colonnes. Si les index sont pris en charge par le moteur, ils sont indiquÃ©s comme paramÃ¨tres pour le moteur de table.</p> <p>Une description de colonne est <code class=syntax>name type</code> dans le cas le plus simple. Exemple: <code class=syntax>RegionID UInt32</code>.<br> Des Expressions peuvent Ã©galement Ãªtre dÃ©finies pour les valeurs par dÃ©faut (voir ci-dessous).</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=k>AS</span> <span class=p>[</span><span class=n>db2</span><span class=p>.]</span><span class=n>name2</span> <span class=p>[</span><span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span><span class=p>]</span>
</code></pre></div> <p>CrÃ©e une table avec la mÃªme structure qu'une autre table. Vous pouvez spÃ©cifier un moteur diffÃ©rent pour la table. Si le moteur n'est pas spÃ©cifiÃ©, le mÃªme moteur sera utilisÃ© que pour la <code class=syntax>db2.name2</code> table.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=k>AS</span> <span class=n>table_function</span><span class=p>()</span>
</code></pre></div> <p>CrÃ©e une table avec la structure et les donnÃ©es renvoyÃ©es par <a href=../../../table-functions/amp/#table-functions>fonction de table</a>.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span> <span class=k>AS</span> <span class=k>SELECT</span> <span class=p>...</span>
</code></pre></div> <p>CrÃ©e une table avec une structure comme le rÃ©sultat de l' <code class=syntax>SELECT</code> une requÃªte avec les â€˜engineâ€™ moteur, et le remplit avec des donnÃ©es de SELECT.</p> <p>Dans tous les cas, si <code class=syntax>IF NOT EXISTS</code> est spÃ©cifiÃ©, la requÃªte ne renvoie pas une erreur si la table existe dÃ©jÃ . Dans ce cas, la requÃªte ne font rien.</p> <p>Il peut y avoir d'autres clauses aprÃ¨s le <code class=syntax>ENGINE</code> la clause dans la requÃªte. Voir la documentation dÃ©taillÃ©e sur la faÃ§on de crÃ©er des tables dans les descriptions de <a href=../../../../engines/table-engines/amp/#table_engines>moteurs de table</a>.</p> <h3 id=create-default-values>Les Valeurs Par DÃ©faut<a class=headerlink href=../amp/#create-default-values title="Permanent link">Â </a></h3> <p>La description de colonne peut spÃ©cifier une expression pour une valeur par dÃ©faut, de l'une des maniÃ¨res suivantes:<code class=syntax>DEFAULT expr</code>, <code class=syntax>MATERIALIZED expr</code>, <code class=syntax>ALIAS expr</code>.<br> Exemple: <code class=syntax>URLDomain String DEFAULT domain(URL)</code>.</p> <p>Si une expression pour la valeur par dÃ©faut n'est pas dÃ©finie, les valeurs par dÃ©faut seront dÃ©finies sur zÃ©ros pour les nombres, chaÃ®nes vides pour les chaÃ®nes, tableaux vides pour les tableaux et <code class=syntax>1970-01-01</code> pour les dates ou zero unix timestamp pour les dates avec le temps. Les valeurs NULL ne sont pas prises en charge.</p> <p>Si l'expression par dÃ©faut est dÃ©finie, le type de colonne est facultatif. S'il n'y a pas de type explicitement dÃ©fini, le type d'expression par dÃ©faut est utilisÃ©. Exemple: <code class=syntax>EventDate DEFAULT toDate(EventTime)</code> â€“ the â€˜Dateâ€™ type sera utilisÃ© pour la â€˜EventDateâ€™ colonne.</p> <p>Si le type de donnÃ©es et l'expression par dÃ©faut sont dÃ©finis explicitement, cette expression sera convertie au type spÃ©cifiÃ© Ã  l'aide des fonctions de conversion de type. Exemple: <code class=syntax>Hits UInt32 DEFAULT 0</code> signifie la mÃªme chose que <code class=syntax>Hits UInt32 DEFAULT toUInt32(0)</code>.</p> <p>Default expressions may be defined as an arbitrary expression from table constants and columns. When creating and changing the table structure, it checks that expressions don't contain loops. For INSERT, it checks that expressions are resolvable â€“ that all columns they can be calculated from have been passed.</p> <p><code class=syntax>DEFAULT expr</code></p> <p>Valeur par dÃ©faut normale. Si la requÃªte INSERT ne spÃ©cifie pas la colonne correspondante, elle sera remplie en calculant l'expression correspondante.</p> <p><code class=syntax>MATERIALIZED expr</code></p> <p>Expression matÃ©rialisÃ©e. Une telle colonne ne peut pas Ãªtre spÃ©cifiÃ©e pour INSERT, car elle est toujours calculÃ©e.<br> Pour un INSERT sans Liste de colonnes, ces colonnes ne sont pas prises en compte.<br> De plus, cette colonne n'est pas substituÃ©e lors de l'utilisation d'un astÃ©risque dans une requÃªte SELECT. C'est pour prÃ©server l'invariant que le dump obtenu en utilisant <code class=syntax>SELECT *</code> peut Ãªtre insÃ©rÃ© dans la table en utilisant INSERT sans spÃ©cifier la liste des colonnes.</p> <p><code class=syntax>ALIAS expr</code></p> <p>Synonyme. Une telle colonne n'est pas du tout stockÃ©e dans la table.<br> Ses valeurs ne peuvent pas Ãªtre insÃ©rÃ©es dans une table et elles ne sont pas substituÃ©es lors de l'utilisation d'un astÃ©risque dans une requÃªte SELECT.<br> Il peut Ãªtre utilisÃ© dans SELECTs si l'alias est dÃ©veloppÃ© pendant l'analyse des requÃªtes.</p> <p>Lorsque vous utilisez la requÃªte ALTER pour ajouter de nouvelles colonnes, les anciennes donnÃ©es de ces colonnes ne sont pas Ã©crites. Au lieu de cela, lors de la lecture d'anciennes donnÃ©es qui n'ont pas de valeurs pour les nouvelles colonnes, les expressions sont calculÃ©es Ã  la volÃ©e par dÃ©faut. Cependant, si l'exÃ©cution des expressions nÃ©cessite diffÃ©rentes colonnes qui ne sont pas indiquÃ©es dans la requÃªte, ces colonnes seront en outre lues, mais uniquement pour les blocs de donnÃ©es qui en ont besoin.</p> <p>Si vous ajoutez une nouvelle colonne Ã  une table mais modifiez ultÃ©rieurement son expression par dÃ©faut, les valeurs utilisÃ©es pour les anciennes donnÃ©es changeront (pour les donnÃ©es oÃ¹ les valeurs n'ont pas Ã©tÃ© stockÃ©es sur le disque). Notez que lors de l'exÃ©cution de fusions d'arriÃ¨re-plan, les donnÃ©es des colonnes manquantes dans l'une des parties de fusion sont Ã©crites dans la partie fusionnÃ©e.</p> <p>Il n'est pas possible de dÃ©finir des valeurs par dÃ©faut pour les Ã©lÃ©ments dans les structures de donnÃ©es.</p> <h3 id=constraints>Contraintes<a class=headerlink href=../amp/#constraints title="Permanent link">Â </a></h3> <p>Avec les descriptions de colonnes des contraintes peuvent Ãªtre dÃ©finies:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>]</span> <span class=p>[</span><span class=n>compression_codec</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=p>...</span>
    <span class=k>CONSTRAINT</span> <span class=n>constraint_name_1</span> <span class=k>CHECK</span> <span class=n>boolean_expr_1</span><span class=p>,</span>
    <span class=p>...</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span>
</code></pre></div> <p><code class=syntax>boolean_expr_1</code> pourrait par n'importe quelle expression boolÃ©enne. Si les contraintes sont dÃ©finies pour la table, chacun d'eux sera vÃ©rifiÃ©e pour chaque ligne <code class=syntax>INSERT</code> query. If any constraint is not satisfied â€” server will raise an exception with constraint name and checking expression.</p> <p>L'ajout d'une grande quantitÃ© de contraintes peut affecter nÃ©gativement les performances de big <code class=syntax>INSERT</code> requÃªte.</p> <h3 id=ttl-expression>Expression TTL<a class=headerlink href=../amp/#ttl-expression title="Permanent link">Â </a></h3> <p>DÃ©finit la durÃ©e de stockage des valeurs. Peut Ãªtre spÃ©cifiÃ© uniquement pour les tables mergetree-family. Pour la description dÃ©taillÃ©e, voir <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-ttl>TTL pour les colonnes et les tableaux</a>.</p> <h3 id=codecs>Codecs De Compression De Colonne<a class=headerlink href=../amp/#codecs title="Permanent link">Â </a></h3> <p>Par dÃ©faut, ClickHouse applique le <code class=syntax>lz4</code> mÃ©thode de compression. Pour <code class=syntax>MergeTree</code>- famille de moteurs Vous pouvez modifier la mÃ©thode de compression par dÃ©faut dans le <a href=../../../../operations/server-configuration-parameters/settings/amp/#server-settings-compression>compression</a> section d'une configuration de serveur. Vous pouvez Ã©galement dÃ©finir la mÃ©thode de compression pour chaque colonne <code class=syntax>CREATE TABLE</code> requÃªte.</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>codec_example</span>
<span class=p>(</span>
    <span class=n>dt</span> <span class=nb>Date</span> <span class=n>CODEC</span><span class=p>(</span><span class=n>ZSTD</span><span class=p>),</span>
    <span class=n>ts</span> <span class=n>DateTime</span> <span class=n>CODEC</span><span class=p>(</span><span class=n>LZ4HC</span><span class=p>),</span>
    <span class=n>float_value</span> <span class=n>Float32</span> <span class=n>CODEC</span><span class=p>(</span><span class=k>NONE</span><span class=p>),</span>
    <span class=n>double_value</span> <span class=n>Float64</span> <span class=n>CODEC</span><span class=p>(</span><span class=n>LZ4HC</span><span class=p>(</span><span class=mi>9</span><span class=p>))</span>
    <span class=n>value</span> <span class=n>Float32</span> <span class=n>CODEC</span><span class=p>(</span><span class=n>Delta</span><span class=p>,</span> <span class=n>ZSTD</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=o>&lt;</span><span class=n>Engine</span><span class=o>&gt;</span>
<span class=p>...</span>
</code></pre></div> <p>Si un codec est spÃ©cifiÃ©, le codec par dÃ©faut ne s'applique pas. Les Codecs peuvent Ãªtre combinÃ©s dans un pipeline, par exemple, <code class=syntax>CODEC(Delta, ZSTD)</code>. Pour sÃ©lectionner la meilleure combinaison de codecs pour votre projet, passez des benchmarks similaires Ã  ceux dÃ©crits dans Altinity <a href=https://www.altinity.com/blog/2019/7/new-encodings-to-improve-clickhouse rel="external nofollow noreferrer" target=_blank>Nouveaux encodages pour amÃ©liorer L'efficacitÃ© du ClickHouse</a> article.</p> <div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Avertissement</p> <p>Vous ne pouvez pas dÃ©compresser les fichiers de base de donnÃ©es ClickHouse avec des utilitaires externes tels que <code class=syntax>lz4</code>. Au lieu de cela, utilisez le spÃ©cial <a class=alert-link href=https://github.com/ClickHouse/ClickHouse/tree/master/programs/compressor rel="external nofollow noreferrer" target=_blank>clickhouse-compresseur</a> utilitaire.</p> </div> <p>La Compression est prise en charge pour les moteurs de tableau suivants:</p> <ul> <li><a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a> famille. Prend en charge les codecs de compression de colonne et la sÃ©lection de la mÃ©thode de compression par dÃ©faut par <a href=../../../../operations/server-configuration-parameters/settings/amp/#server-settings-compression>compression</a> paramÃ¨tre.</li> <li><a href=../../../../engines/table-engines/log-family/amp/ >Journal</a> famille. Utilise le <code class=syntax>lz4</code> mÃ©thode de compression par dÃ©faut et prend en charge les codecs de compression de colonne.</li> <li><a href=../../../../engines/table-engines/special/set/amp/ >DÃ©finir</a>. Uniquement pris en charge la compression par dÃ©faut.</li> <li><a href=../../../../engines/table-engines/special/join/amp/ >Rejoindre</a>. Uniquement pris en charge la compression par dÃ©faut.</li> </ul> <p>ClickHouse prend en charge les codecs Ã  usage commun et les codecs spÃ©cialisÃ©s.</p> <h4 id=create-query-specialized-codecs>Codecs SpÃ©cialisÃ©s<a class=headerlink href=../amp/#create-query-specialized-codecs title="Permanent link">Â </a></h4> <p>Ces codecs sont conÃ§us pour rendre la compression plus efficace en utilisant des fonctionnalitÃ©s spÃ©cifiques des donnÃ©es. Certains de ces codecs ne compressent pas les donnÃ©es eux-mÃªmes. Au lieu de cela, ils prÃ©parent les donnÃ©es pour un codec Ã  usage commun, qui les compresse mieux que sans cette prÃ©paration.</p> <p>SpÃ©cialisÃ© codecs:</p> <ul> <li><code class=syntax>Delta(delta_bytes)</code> â€” Compression approach in which raw values are replaced by the difference of two neighboring values, except for the first value that stays unchanged. Up to <code class=syntax>delta_bytes</code> sont utilisÃ©s pour stocker des valeurs delta, donc <code class=syntax>delta_bytes</code> est la taille maximale des valeurs brutes. Possible <code class=syntax>delta_bytes</code> valeurs: 1, 2, 4, 8. La valeur par dÃ©faut pour <code class=syntax>delta_bytes</code> Ãªtre <code class=syntax>sizeof(type)</code> si Ã©gale Ã  1, 2, 4 ou 8. Dans tous les autres cas, c'est 1.</li> <li><code class=syntax>DoubleDelta</code> â€” Calculates delta of deltas and writes it in compact binary form. Optimal compression rates are achieved for monotonic sequences with a constant stride, such as time series data. Can be used with any fixed-width type. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. Uses 1 extra bit for 32-byte deltas: 5-bit prefixes instead of 4-bit prefixes. For additional information, see Compressing Time Stamps in <a href=http://www.vldb.org/pvldb/vol8/p1816-teller.pdf rel="external nofollow noreferrer" target=_blank>Gorilla: Une Base De DonnÃ©es De SÃ©ries Chronologiques Rapide, Ã‰volutive Et En MÃ©moire</a>.</li> <li><code class=syntax>Gorilla</code> â€” Calculates XOR between current and previous value and writes it in compact binary form. Efficient when storing a series of floating point values that change slowly, because the best compression rate is achieved when neighboring values are binary equal. Implements the algorithm used in Gorilla TSDB, extending it to support 64-bit types. For additional information, see Compressing Values in <a href=http://www.vldb.org/pvldb/vol8/p1816-teller.pdf rel="external nofollow noreferrer" target=_blank>Gorilla: Une Base De DonnÃ©es De SÃ©ries Chronologiques Rapide, Ã‰volutive Et En MÃ©moire</a>.</li> <li><code class=syntax>T64</code> â€” Compression approach that crops unused high bits of values in integer data types (including <code class=syntax>Enum</code>, <code class=syntax>Date</code> et <code class=syntax>DateTime</code>). Ã€ chaque Ã©tape de son algorithme, le codec prend un bloc de 64 valeurs, les place dans une matrice de 64x64 bits, le transpose, recadre les bits de valeurs inutilisÃ©s et renvoie le reste sous forme de sÃ©quence. Les bits inutilisÃ©s sont les bits, qui ne diffÃ¨rent pas entre les valeurs maximum et minimum dans la partie de donnÃ©es entiÃ¨re pour laquelle la compression est utilisÃ©e.</li> </ul> <p><code class=syntax>DoubleDelta</code> et <code class=syntax>Gorilla</code> les codecs sont utilisÃ©s dans Gorilla TSDB comme composants de son algorithme de compression. L'approche Gorilla est efficace dans les scÃ©narios oÃ¹ il y a une sÃ©quence de valeurs qui changent lentement avec leurs horodatages. Les horodatages sont effectivement compressÃ©s par le <code class=syntax>DoubleDelta</code> codec, et les valeurs sont effectivement comprimÃ© par le <code class=syntax>Gorilla</code> codec. Par exemple, pour obtenir une table stockÃ©e efficacement, vous pouvez la crÃ©er dans la configuration suivante:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>codec_example</span>
<span class=p>(</span>
    <span class=k>timestamp</span> <span class=n>DateTime</span> <span class=n>CODEC</span><span class=p>(</span><span class=n>DoubleDelta</span><span class=p>),</span>
    <span class=n>slow_values</span> <span class=n>Float32</span> <span class=n>CODEC</span><span class=p>(</span><span class=n>Gorilla</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
</code></pre></div> <h4 id=create-query-general-purpose-codecs>Codecs Ã€ Usage GÃ©nÃ©ral<a class=headerlink href=../amp/#create-query-general-purpose-codecs title="Permanent link">Â </a></h4> <p>Codec:</p> <ul> <li><code class=syntax>NONE</code> â€” No compression.</li> <li><code class=syntax>LZ4</code> â€” Lossless <a href=https://github.com/lz4/lz4 rel="external nofollow noreferrer" target=_blank>algorithme de compression de donnÃ©es</a> utilisÃ© par dÃ©faut. Applique la compression rapide LZ4.</li> <li><code class=syntax>LZ4HC[(level)]</code> â€” LZ4 HC (high compression) algorithm with configurable level. Default level: 9. Setting <code class=syntax>level &lt;= 0</code> s'applique le niveau par dÃ©faut. Niveaux possibles: [1, 12]. Plage de niveau recommandÃ©e: [4, 9].</li> <li><code class=syntax>ZSTD[(level)]</code> â€” <a href=https://en.wikipedia.org/wiki/Zstandard rel="external nofollow noreferrer" target=_blank>Algorithme de compression ZSTD</a> avec configurables <code class=syntax>level</code>. Niveaux possibles: [1, 22]. Valeur par dÃ©faut: 1.</li> </ul> <p>Des niveaux de compression Ã©levÃ©s sont utiles pour les scÃ©narios asymÃ©triques, comme compresser une fois, dÃ©compresser Ã  plusieurs reprises. Des niveaux plus Ã©levÃ©s signifient une meilleure compression et une utilisation plus Ã©levÃ©e du processeur.</p> <h2 id=temporary-tables>Les Tables Temporaires<a class=headerlink href=../amp/#temporary-tables title="Permanent link">Â </a></h2> <p>Clickhouse prend en charge les tables temporaires qui ont les caractÃ©ristiques suivantes:</p> <ul> <li>Les tables temporaires disparaissent Ã  la fin de la session, y compris si la connexion est perdue.</li> <li>Une table temporaire utilise uniquement le moteur de mÃ©moire.</li> <li>La base de donnÃ©es ne peut pas Ãªtre spÃ©cifiÃ©e pour une table temporaire. Il est crÃ©Ã© en dehors des bases de donnÃ©es.</li> <li>Impossible de crÃ©er une table temporaire avec une requÃªte DDL distribuÃ©e sur tous les serveurs de cluster (en utilisant <code class=syntax>ON CLUSTER</code>): ce tableau n'existe que dans la session en cours.</li> <li>Si une table temporaire a le mÃªme nom qu'une autre et qu'une requÃªte spÃ©cifie le nom de la table sans spÃ©cifier la base de donnÃ©es, la table temporaire sera utilisÃ©e.</li> <li>Pour le traitement des requÃªtes distribuÃ©es, les tables temporaires utilisÃ©es dans une requÃªte sont transmises Ã  des serveurs distants.</li> </ul> <p>Pour crÃ©er une table temporaire, utilisez la syntaxe suivante:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TEMPORARY</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=k>table_name</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
<span class=p>)</span>
</code></pre></div> <p>Dans la plupart des cas, les tables temporaires ne sont pas crÃ©Ã©es manuellement, mais lors de l'utilisation de donnÃ©es externes pour une requÃªte ou pour <code class=syntax>(GLOBAL) IN</code>. Pour plus d'informations, consultez les sections appropriÃ©es</p> <p>Il est possible d'utiliser des tables avec <a href=../../../../engines/table-engines/special/memory/amp/ >Moteur = mÃ©moire</a> au lieu de tables temporaires.</p> <h2 id=distributed-ddl-queries-on-cluster-clause>RequÃªtes DDL distribuÃ©es (sur la clause CLUSTER)<a class=headerlink href=../amp/#distributed-ddl-queries-on-cluster-clause title="Permanent link">Â </a></h2> <p>Le <code class=syntax>CREATE</code>, <code class=syntax>DROP</code>, <code class=syntax>ALTER</code>, et <code class=syntax>RENAME</code> les requÃªtes prennent en charge l'exÃ©cution distribuÃ©e sur un cluster.<br> Par exemple, la requÃªte suivante crÃ©e la <code class=syntax>all_hits</code> <code class=syntax>Distributed</code> tableau sur chaque ordinateur hÃ´te <code class=syntax>cluster</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>all_hits</span> <span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span> <span class=p>(</span><span class=n>p</span> <span class=nb>Date</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Distributed</span><span class=p>(</span><span class=k>cluster</span><span class=p>,</span> <span class=k>default</span><span class=p>,</span> <span class=n>hits</span><span class=p>)</span>
</code></pre></div> <p>Pour exÃ©cuter ces requÃªtes correctement, chaque hÃ´te doit avoir la mÃªme dÃ©finition de cluster (pour simplifier la synchronisation des configs, vous pouvez utiliser des substitutions de ZooKeeper). Ils doivent Ã©galement se connecter aux serveurs ZooKeeper.<br> La version locale de la requÃªte sera finalement implÃ©mentÃ©e sur chaque hÃ´te du cluster, mÃªme si certains hÃ´tes ne sont actuellement pas disponibles. L'ordre d'exÃ©cution des requÃªtes au sein d'un seul hÃ´te est garanti.</p> <h2 id=create-view>CREATE VIEW<a class=headerlink href=../amp/#create-view title="Permanent link">Â </a></h2> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=p>[</span><span class=n>MATERIALIZED</span><span class=p>]</span> <span class=k>VIEW</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>TO</span><span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>name</span><span class=p>]</span> <span class=p>[</span><span class=n>ENGINE</span> <span class=o>=</span> <span class=n>engine</span><span class=p>]</span> <span class=p>[</span><span class=n>POPULATE</span><span class=p>]</span> <span class=k>AS</span> <span class=k>SELECT</span> <span class=p>...</span>
</code></pre></div> <p>CrÃ©e une vue. Il existe deux types de vues: normale et matÃ©rialisÃ©e.</p> <p>Les vues normales ne stockent aucune donnÃ©e, mais effectuent simplement une lecture Ã  partir d'une autre table. En d'autres termes, une vue normale n'est rien de plus qu'une requÃªte enregistrÃ©e. Lors de la lecture Ã  partir d'une vue, cette requÃªte enregistrÃ©e est utilisÃ©e comme sous-requÃªte dans la clause FROM.</p> <p>Par exemple, supposons que vous avez crÃ©Ã© une vue:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>VIEW</span> <span class=k>view</span> <span class=k>AS</span> <span class=k>SELECT</span> <span class=p>...</span>
</code></pre></div> <p>et Ã©crit une requÃªte:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=k>c</span> <span class=k>FROM</span> <span class=k>view</span>
</code></pre></div> <p>Cette requÃªte est entiÃ¨rement Ã©quivalente Ã  l'utilisation de la sous requÃªte:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=k>c</span> <span class=k>FROM</span> <span class=p>(</span><span class=k>SELECT</span> <span class=p>...)</span>
</code></pre></div> <p>Les vues matÃ©rialisÃ©es stockent les donnÃ©es transformÃ©es par la requÃªte SELECT correspondante.</p> <p>Lors de la crÃ©ation d'une vue matÃ©rialisÃ©e sans <code class=syntax>TO [db].[table]</code>, you must specify ENGINE â€“ the table engine for storing data.</p> <p>Lors de la crÃ©ation d'une vue matÃ©rialisÃ©e avec <code class=syntax>TO [db].[table]</code> vous ne devez pas utiliser <code class=syntax>POPULATE</code>.</p> <p>Une vue matÃ©rialisÃ©e est agencÃ©e comme suit: lors de l'insertion de donnÃ©es dans la table spÃ©cifiÃ©e dans SELECT, une partie des donnÃ©es insÃ©rÃ©es est convertie par cette requÃªte SELECT, et le rÃ©sultat est insÃ©rÃ© dans la vue.</p> <p>Si vous spÃ©cifiez POPULATE, les donnÃ©es de table existantes sont insÃ©rÃ©es dans la vue lors de sa crÃ©ation, comme si <code class=syntax>CREATE TABLE ... AS SELECT ...</code> . Sinon, la requÃªte ne contient que les donnÃ©es insÃ©rÃ©es dans la table aprÃ¨s la crÃ©ation de la vue. Nous ne recommandons pas D'utiliser POPULATE, car les donnÃ©es insÃ©rÃ©es dans la table lors de la crÃ©ation de la vue ne seront pas insÃ©rÃ©es dedans.</p> <p>A <code class=syntax>SELECT</code> la requÃªte peut contenir <code class=syntax>DISTINCT</code>, <code class=syntax>GROUP BY</code>, <code class=syntax>ORDER BY</code>, <code class=syntax>LIMIT</code>â€¦ Note that the corresponding conversions are performed independently on each block of inserted data. For example, if <code class=syntax>GROUP BY</code> est dÃ©finie, les donnÃ©es sont agrÃ©gÃ©es lors de l'insertion, mais uniquement dans un seul paquet de donnÃ©es insÃ©rÃ©es. Les donnÃ©es ne seront pas agrÃ©gÃ©es davantage. L'exception concerne l'utilisation d'un moteur qui effectue indÃ©pendamment l'agrÃ©gation de donnÃ©es, par exemple <code class=syntax>SummingMergeTree</code>.</p> <p>L'exÃ©cution de <code class=syntax>ALTER</code> les requÃªtes sur les vues matÃ©rialisÃ©es n'ont pas Ã©tÃ© complÃ¨tement dÃ©veloppÃ©es, elles pourraient donc Ãªtre gÃªnantes. Si la vue matÃ©rialisÃ©e utilise la construction <code class=syntax>TO [db.]name</code> vous pouvez <code class=syntax>DETACH</code> la vue, exÃ©cutez <code class=syntax>ALTER</code> pour la table cible, puis <code class=syntax>ATTACH</code> prÃ©cÃ©demment dÃ©tachÃ© (<code class=syntax>DETACH</code>) vue.</p> <p>Les vues ressemblent aux tables normales. Par exemple, ils sont rÃ©pertoriÃ©s dans le rÃ©sultat de la <code class=syntax>SHOW TABLES</code> requÃªte.</p> <p>Il n'y a pas de requÃªte sÃ©parÃ©e pour supprimer des vues. Pour supprimer une vue, utilisez <code class=syntax>DROP TABLE</code>.</p> <h2 id=create-dictionary-query>CREATE DICTIONARY<a class=headerlink href=../amp/#create-dictionary-query title="Permanent link">Â </a></h2> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>DICTIONARY</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=n>dictionary_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>key1</span> <span class=n>type1</span>  <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span> <span class=n>expr1</span><span class=p>]</span> <span class=p>[</span><span class=n>HIERARCHICAL</span><span class=o>|</span><span class=n>INJECTIVE</span><span class=o>|</span><span class=n>IS_OBJECT_ID</span><span class=p>],</span>
    <span class=n>key2</span> <span class=n>type2</span>  <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span> <span class=n>expr2</span><span class=p>]</span> <span class=p>[</span><span class=n>HIERARCHICAL</span><span class=o>|</span><span class=n>INJECTIVE</span><span class=o>|</span><span class=n>IS_OBJECT_ID</span><span class=p>],</span>
    <span class=n>attr1</span> <span class=n>type2</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span> <span class=n>expr3</span><span class=p>],</span>
    <span class=n>attr2</span> <span class=n>type2</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>EXPRESSION</span> <span class=n>expr4</span><span class=p>]</span>
<span class=p>)</span>
<span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=n>key1</span><span class=p>,</span> <span class=n>key2</span>
<span class=k>SOURCE</span><span class=p>(</span><span class=n>SOURCE_NAME</span><span class=p>([</span><span class=n>param1</span> <span class=n>value1</span> <span class=p>...</span> <span class=n>paramN</span> <span class=n>valueN</span><span class=p>]))</span>
<span class=n>LAYOUT</span><span class=p>(</span><span class=n>LAYOUT_NAME</span><span class=p>([</span><span class=n>param_name</span> <span class=n>param_value</span><span class=p>]))</span>
<span class=n>LIFETIME</span><span class=p>(</span><span class=err>{</span><span class=k>MIN</span> <span class=n>min_val</span> <span class=k>MAX</span> <span class=n>max_val</span> <span class=o>|</span> <span class=n>max_val</span><span class=err>}</span><span class=p>)</span>
</code></pre></div> <p>CrÃ©e <a href=../../../dictionaries/external-dictionaries/external-dicts/amp/ >externe dictionnaire</a> avec le <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-structure/amp/ >structure</a>, <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-sources/amp/ >source</a>, <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-layout/amp/ >disposition</a> et <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-lifetime/amp/ >vie</a>.</p> <p>Structure de dictionnaire externe se compose d'attributs. Les attributs du dictionnaire sont spÃ©cifiÃ©s de la mÃªme maniÃ¨re que les colonnes du tableau. La seule propriÃ©tÃ© d'attribut requise est son type, toutes les autres propriÃ©tÃ©s peuvent avoir des valeurs par dÃ©faut.</p> <p>Selon le dictionnaire <a href=../../../dictionaries/external-dictionaries/external-dicts-dict-layout/amp/ >disposition</a> un ou plusieurs attributs peuvent Ãªtre spÃ©cifiÃ©s comme les clÃ©s de dictionnaire.</p> <p>Pour plus d'informations, voir <a href=../../../dictionaries/external-dictionaries/external-dicts/amp/ >Dictionnaires Externes</a> section.</p> <h2 id=create-user-statement>CREATE USER<a class=headerlink href=../amp/#create-user-statement title="Permanent link">Â </a></h2> <p>CrÃ©e un <a href=../../../../operations/access-rights/amp/#user-account-management>compte d'utilisateur</a>.</p> <h3 id=create-user-syntax>Syntaxe<a class=headerlink href=../amp/#create-user-syntax title="Permanent link">Â </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>USER</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=o>|</span> <span class=k>OR</span> <span class=k>REPLACE</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span>
    <span class=p>[</span><span class=n>IDENTIFIED</span> <span class=p>[</span><span class=k>WITH</span> <span class=err>{</span><span class=n>NO_PASSWORD</span><span class=o>|</span><span class=n>PLAINTEXT_PASSWORD</span><span class=o>|</span><span class=n>SHA256_PASSWORD</span><span class=o>|</span><span class=n>SHA256_HASH</span><span class=o>|</span><span class=n>DOUBLE_SHA1_PASSWORD</span><span class=o>|</span><span class=n>DOUBLE_SHA1_HASH</span><span class=err>}</span><span class=p>]</span> <span class=k>BY</span> <span class=err>{</span><span class=s1>'password'</span><span class=o>|</span><span class=s1>'hash'</span><span class=err>}</span><span class=p>]</span>
    <span class=p>[</span><span class=k>HOST</span> <span class=err>{</span><span class=k>LOCAL</span> <span class=o>|</span> <span class=n>NAME</span> <span class=s1>'name'</span> <span class=o>|</span> <span class=n>REGEXP</span> <span class=s1>'name_regexp'</span> <span class=o>|</span> <span class=n>IP</span> <span class=s1>'address'</span> <span class=o>|</span> <span class=k>LIKE</span> <span class=s1>'pattern'</span><span class=err>}</span> <span class=p>[,...]</span> <span class=o>|</span> <span class=k>ANY</span> <span class=o>|</span> <span class=k>NONE</span><span class=p>]</span>
    <span class=p>[</span><span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=k>role</span> <span class=p>[,...]]</span>
    <span class=p>[</span><span class=n>SETTINGS</span> <span class=k>variable</span> <span class=p>[</span><span class=o>=</span> <span class=n>value</span><span class=p>]</span> <span class=p>[</span><span class=k>MIN</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>min_value</span><span class=p>]</span> <span class=p>[</span><span class=k>MAX</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>max_value</span><span class=p>]</span> <span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span> <span class=o>|</span> <span class=n>PROFILE</span> <span class=s1>'profile_name'</span><span class=p>]</span> <span class=p>[,...]</span>
</code></pre></div> <h4 id=identification>Identification<a class=headerlink href=../amp/#identification title="Permanent link">Â </a></h4> <p>Il existe de multiples faÃ§ons d'identification d'un utilisateur:</p> <ul> <li><code class=syntax>IDENTIFIED WITH no_password</code></li> <li><code class=syntax>IDENTIFIED WITH plaintext_password BY 'qwerty'</code></li> <li><code class=syntax>IDENTIFIED WITH sha256_password BY 'qwerty'</code> ou <code class=syntax>IDENTIFIED BY 'password'</code></li> <li><code class=syntax>IDENTIFIED WITH sha256_hash BY 'hash'</code></li> <li><code class=syntax>IDENTIFIED WITH double_sha1_password BY 'qwerty'</code></li> <li><code class=syntax>IDENTIFIED WITH double_sha1_hash BY 'hash'</code></li> </ul> <h4 id=user-host>L'Utilisateur De L'HÃ´te<a class=headerlink href=../amp/#user-host title="Permanent link">Â </a></h4> <p>L'hÃ´te utilisateur est un hÃ´te Ã  partir duquel une connexion au serveur ClickHouse peut Ãªtre Ã©tablie. HÃ´te peut Ãªtre spÃ©cifiÃ© dans le <code class=syntax>HOST</code> section de requÃªte par les moyens suivants:</p> <ul> <li><code class=syntax>HOST IP 'ip_address_or_subnetwork'</code> â€” User can connect to ClickHouse server only from the specified IP address or a <a href=https://en.wikipedia.org/wiki/Subnetwork rel="external nofollow noreferrer" target=_blank>sous-rÃ©seau</a>. Exemple: <code class=syntax>HOST IP '192.168.0.0/16'</code>, <code class=syntax>HOST IP '2001:DB8::/32'</code>. Pour une utilisation en production, spÃ©cifiez uniquement <code class=syntax>HOST IP</code> (adresses IP et leurs masques), depuis l'utilisation <code class=syntax>host</code> et <code class=syntax>host_regexp</code> peut causer une latence supplÃ©mentaire.</li> <li><code class=syntax>HOST ANY</code> â€” User can connect from any location. This is default option.</li> <li><code class=syntax>HOST LOCAL</code> â€” User can connect only locally.</li> <li><code class=syntax>HOST NAME 'fqdn'</code> â€” User host can be specified as FQDN. For example, <code class=syntax>HOST NAME 'mysite.com'</code>.</li> <li><code class=syntax>HOST NAME REGEXP 'regexp'</code> â€” You can use <a href=http://www.pcre.org/ rel="external nofollow noreferrer" target=_blank>pcre</a> expressions rÃ©guliÃ¨res lors de la spÃ©cification des hÃ´tes utilisateur. Exemple, <code class=syntax>HOST NAME REGEXP '.*\.mysite\.com'</code>.</li> <li><code class=syntax>HOST LIKE 'template'</code> â€” Allows you use the <a href=../../../functions/string-search-functions/amp/#function-like>LIKE</a> opÃ©rateur de filtre de l'utilisateur hÃ´tes. Exemple, <code class=syntax>HOST LIKE '%'</code> est Ã©quivalent Ã  <code class=syntax>HOST ANY</code>, <code class=syntax>HOST LIKE '%.mysite.com'</code> filtre tous les hÃ´tes dans le <code class=syntax>mysite.com</code> domaine.</li> </ul> <p>Une autre faÃ§on de spÃ©cifier l'hÃ´te est d'utiliser <code class=syntax>@</code> syntaxe avec le nom d'utilisateur. Exemple:</p> <ul> <li><code class=syntax>CREATE USER mira@'127.0.0.1'</code> â€” Equivalent to the <code class=syntax>HOST IP</code> syntaxe.</li> <li><code class=syntax>CREATE USER mira@'localhost'</code> â€” Equivalent to the <code class=syntax>HOST LOCAL</code> syntaxe.</li> <li><code class=syntax>CREATE USER mira@'192.168.%.%'</code> â€” Equivalent to the <code class=syntax>HOST LIKE</code> syntaxe.</li> </ul> <div class="admonition info alert pb-0 mb-4 alert-primary" role=alert> <p class="admonition-title alert-heading display-6 mb-2">Avertissement</p> <p>Clickhouse traite <code class=syntax>user_name@'address'</code> comme un nom d'utilisateur dans son ensemble. Donc, techniquement, vous pouvez crÃ©er plusieurs utilisateurs avec <code class=syntax>user_name</code> et diffÃ©rentes constructions aprÃ¨s <code class=syntax>@</code>. Nous ne recommandons pas de le faire.</p> </div> <h3 id=create-user-examples>Exemple<a class=headerlink href=../amp/#create-user-examples title="Permanent link">Â </a></h3> <p>CrÃ©er le compte d'utilisateur <code class=syntax>mira</code> protÃ©gÃ© par le mot de passe <code class=syntax>qwerty</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>USER</span> <span class=n>mira</span> <span class=k>HOST</span> <span class=n>IP</span> <span class=s1>'127.0.0.1'</span> <span class=n>IDENTIFIED</span> <span class=k>WITH</span> <span class=n>sha256_password</span> <span class=k>BY</span> <span class=s1>'qwerty'</span>
</code></pre></div> <p><code class=syntax>mira</code> devrait dÃ©marrer l'application client sur l'hÃ´te oÃ¹ le serveur ClickHouse s'exÃ©cute.</p> <p>CrÃ©er le compte d'utilisateur <code class=syntax>john</code>, attribuez-lui des rÃ´les et dÃ©finissez ces rÃ´les par dÃ©faut:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>USER</span> <span class=n>john</span> <span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=n>role1</span><span class=p>,</span> <span class=n>role2</span>
</code></pre></div> <p>CrÃ©er le compte d'utilisateur <code class=syntax>john</code> et faire tous ses futurs rÃ´les par dÃ©faut:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>USER</span> <span class=k>user</span> <span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=k>ALL</span>
</code></pre></div> <p>Quand un rÃ´le sera attribuÃ© Ã  <code class=syntax>john</code> dans l'avenir, il deviendra automatiquement par dÃ©faut.</p> <p>CrÃ©er le compte d'utilisateur <code class=syntax>john</code> et faire tous ses futurs rÃ´les par dÃ©faut sauf <code class=syntax>role1</code> et <code class=syntax>role2</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>USER</span> <span class=n>john</span> <span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=k>ALL</span> <span class=k>EXCEPT</span> <span class=n>role1</span><span class=p>,</span> <span class=n>role2</span>
</code></pre></div> <h2 id=create-role-statement>CREATE ROLE<a class=headerlink href=../amp/#create-role-statement title="Permanent link">Â </a></h2> <p>CrÃ©e un <a href=../../../../operations/access-rights/amp/#role-management>rÃ´le</a>.</p> <h3 id=create-role-syntax>Syntaxe<a class=headerlink href=../amp/#create-role-syntax title="Permanent link">Â </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>ROLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=o>|</span> <span class=k>OR</span> <span class=k>REPLACE</span><span class=p>]</span> <span class=n>name</span>
    <span class=p>[</span><span class=n>SETTINGS</span> <span class=k>variable</span> <span class=p>[</span><span class=o>=</span> <span class=n>value</span><span class=p>]</span> <span class=p>[</span><span class=k>MIN</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>min_value</span><span class=p>]</span> <span class=p>[</span><span class=k>MAX</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>max_value</span><span class=p>]</span> <span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span> <span class=o>|</span> <span class=n>PROFILE</span> <span class=s1>'profile_name'</span><span class=p>]</span> <span class=p>[,...]</span>
</code></pre></div> <h3 id=create-role-description>Description<a class=headerlink href=../amp/#create-role-description title="Permanent link">Â </a></h3> <p>RÃ´le est un ensemble de <a href=../../grant/amp/#grant-privileges>privilÃ¨ge</a>. Un utilisateur reÃ§oit un rÃ´le obtient tous les privilÃ¨ges de ce rÃ´le.</p> <p>Un utilisateur peut Ãªtre affectÃ© Ã  plusieurs rÃ´les. Les utilisateurs peuvent appliquer leurs rÃ´les accordÃ©s dans des combinaisons arbitraires par le <a href=../../misc/amp/#set-role-statement>SET ROLE</a> dÃ©claration. La finale de la portÃ©e des privilÃ¨ges est un ensemble combinÃ© de tous les privilÃ¨ges de tous les rÃ´les. Si un utilisateur a des privilÃ¨ges accordÃ©s directement Ã  son compte d'utilisateur, ils sont Ã©galement combinÃ©s avec les privilÃ¨ges accordÃ©s par les rÃ´les.</p> <p>L'utilisateur peut avoir des rÃ´les par dÃ©faut qui s'appliquent Ã  la connexion de l'utilisateur. Pour dÃ©finir les rÃ´les par dÃ©faut, utilisez <a href=../../misc/amp/#set-default-role-statement>SET DEFAULT ROLE</a> - dÃ©claration ou de la <a href=../../alter/amp/#alter-user-statement>ALTER USER</a> dÃ©claration.</p> <p>Pour rÃ©voquer un rÃ´le, utilisez <a href=../../revoke/amp/ >REVOKE</a> dÃ©claration.</p> <p>Pour supprimer le rÃ´le, utilisez <a href=../../misc/amp/#drop-role-statement>DROP ROLE</a> dÃ©claration. Le rÃ´le supprimÃ© est automatiquement rÃ©voquÃ© de tous les utilisateurs et rÃ´les auxquels il a Ã©tÃ© accordÃ©.</p> <h3 id=create-role-examples>Exemple<a class=headerlink href=../amp/#create-role-examples title="Permanent link">Â </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>ROLE</span> <span class=n>accountant</span><span class=p>;</span>
<span class=k>GRANT</span> <span class=k>SELECT</span> <span class=k>ON</span> <span class=n>db</span><span class=p>.</span><span class=o>*</span> <span class=k>TO</span> <span class=n>accountant</span><span class=p>;</span>
</code></pre></div> <p>Cette sÃ©quence de requÃªtes crÃ©e le rÃ´le <code class=syntax>accountant</code> cela a le privilÃ¨ge de lire les donnÃ©es du <code class=syntax>accounting</code> la base de donnÃ©es.</p> <p>Octroi du rÃ´le Ã  l'utilisateur <code class=syntax>mira</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>GRANT</span> <span class=n>accountant</span> <span class=k>TO</span> <span class=n>mira</span><span class=p>;</span>
</code></pre></div> <p>Une fois le rÃ´le accordÃ©, l'utilisateur peut l'utiliser et effectuer les requÃªtes autorisÃ©es. Exemple:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=k>ROLE</span> <span class=n>accountant</span><span class=p>;</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>db</span><span class=p>.</span><span class=o>*</span><span class=p>;</span>
</code></pre></div> <h2 id=create-row-policy-statement>CREATE ROW POLICY<a class=headerlink href=../amp/#create-row-policy-statement title="Permanent link">Â </a></h2> <p>CrÃ©e un <a href=../../../../operations/access-rights/amp/#row-policy-management>filtre pour les lignes</a> qu'un utilisateur peut lire Ã  partir d'une table.</p> <h3 id=create-row-policy-syntax>Syntaxe<a class=headerlink href=../amp/#create-row-policy-syntax title="Permanent link">Â </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=p>[</span><span class=k>ROW</span><span class=p>]</span> <span class=n>POLICY</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=o>|</span> <span class=k>OR</span> <span class=k>REPLACE</span><span class=p>]</span> <span class=n>policy_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span> <span class=k>ON</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span>
    <span class=p>[</span><span class=k>AS</span> <span class=err>{</span><span class=n>PERMISSIVE</span> <span class=o>|</span> <span class=n>RESTRICTIVE</span><span class=err>}</span><span class=p>]</span>
    <span class=p>[</span><span class=k>FOR</span> <span class=k>SELECT</span><span class=p>]</span>
    <span class=p>[</span><span class=k>USING</span> <span class=n>condition</span><span class=p>]</span>
    <span class=p>[</span><span class=k>TO</span> <span class=err>{</span><span class=k>role</span> <span class=p>[,...]</span> <span class=o>|</span> <span class=k>ALL</span> <span class=o>|</span> <span class=k>ALL</span> <span class=k>EXCEPT</span> <span class=k>role</span> <span class=p>[,...]</span><span class=err>}</span><span class=p>]</span>
</code></pre></div> <h4 id=create-row-policy-as>Section AS<a class=headerlink href=../amp/#create-row-policy-as title="Permanent link">Â </a></h4> <p>Ã€ l'aide de cette section, vous pouvez crÃ©er des stratÃ©gies permissives ou restrictives.</p> <p>La stratÃ©gie Permissive accorde l'accÃ¨s aux lignes. Les stratÃ©gies permissives qui s'appliquent Ã  la mÃªme table sont combinÃ©es ensemble en utilisant le boolÃ©en <code class=syntax>OR</code> opÃ©rateur. Les stratÃ©gies sont permissives par dÃ©faut.</p> <p>La politique Restrictive limite l'accÃ¨s Ã  la ligne. Les politiques restrictives qui s'appliquent Ã  la mÃªme table sont combinÃ©es en utilisant le boolÃ©en <code class=syntax>AND</code> opÃ©rateur.</p> <p>Les stratÃ©gies restrictives s'appliquent aux lignes qui ont passÃ© les filtres permissifs. Si vous dÃ©finissez des stratÃ©gies restrictives mais aucune politique permissive, l'utilisateur ne peut obtenir aucune ligne de la table.</p> <h4 id=create-row-policy-to>La Section DE<a class=headerlink href=../amp/#create-row-policy-to title="Permanent link">Â </a></h4> <p>Dans la section <code class=syntax>TO</code> vous pouvez donner une liste mixte de rÃ´les et d'utilisateurs, par exemple, <code class=syntax>CREATE ROW POLICY ... TO accountant, john@localhost</code>.</p> <p>Mot <code class=syntax>ALL</code> signifie Tous les utilisateurs de ClickHouse, y compris l'utilisateur actuel. Mot <code class=syntax>ALL EXCEPT</code> autoriser Ã  exclure certains utilisateurs de la liste tous les utilisateurs, par exemple <code class=syntax>CREATE ROW POLICY ... TO ALL EXCEPT accountant, john@localhost</code></p> <h3 id=examples>Exemple<a class=headerlink href=../amp/#examples title="Permanent link">Â </a></h3> <ul> <li><code class=syntax>CREATE ROW POLICY filter ON mydb.mytable FOR SELECT USING a&lt;1000 TO accountant, john@localhost</code></li> <li><code class=syntax>CREATE ROW POLICY filter ON mydb.mytable FOR SELECT USING a&lt;1000 TO ALL EXCEPT mira</code></li> </ul> <h2 id=create-quota-statement>CREATE QUOTA<a class=headerlink href=../amp/#create-quota-statement title="Permanent link">Â </a></h2> <p>CrÃ©e un <a href=../../../../operations/access-rights/amp/#quotas-management>quota</a> qui peut Ãªtre attribuÃ© Ã  un utilisateur ou un rÃ´le.</p> <h3 id=create-quota-syntax>Syntaxe<a class=headerlink href=../amp/#create-quota-syntax title="Permanent link">Â </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=n>QUOTA</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=o>|</span> <span class=k>OR</span> <span class=k>REPLACE</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span>
    <span class=p>[</span><span class=n>KEYED</span> <span class=k>BY</span> <span class=err>{</span><span class=s1>'none'</span> <span class=o>|</span> <span class=s1>'user name'</span> <span class=o>|</span> <span class=s1>'ip address'</span> <span class=o>|</span> <span class=s1>'client key'</span> <span class=o>|</span> <span class=s1>'client key or user name'</span> <span class=o>|</span> <span class=s1>'client key or ip address'</span><span class=err>}</span><span class=p>]</span>
    <span class=p>[</span><span class=k>FOR</span> <span class=p>[</span><span class=n>RANDOMIZED</span><span class=p>]</span> <span class=nb>INTERVAL</span> <span class=nb>number</span> <span class=err>{</span><span class=k>SECOND</span> <span class=o>|</span> <span class=k>MINUTE</span> <span class=o>|</span> <span class=n>HOUR</span> <span class=o>|</span> <span class=k>DAY</span> <span class=o>|</span> <span class=n>WEEK</span> <span class=o>|</span> <span class=k>MONTH</span> <span class=o>|</span> <span class=n>QUARTER</span> <span class=o>|</span> <span class=k>YEAR</span><span class=err>}</span>
        <span class=err>{</span><span class=k>MAX</span> <span class=err>{</span> <span class=err>{</span><span class=n>QUERIES</span> <span class=o>|</span> <span class=n>ERRORS</span> <span class=o>|</span> <span class=k>RESULT</span> <span class=k>ROWS</span> <span class=o>|</span> <span class=k>RESULT</span> <span class=n>BYTES</span> <span class=o>|</span> <span class=k>READ</span> <span class=k>ROWS</span> <span class=o>|</span> <span class=k>READ</span> <span class=n>BYTES</span> <span class=o>|</span> <span class=n>EXECUTION</span> <span class=n>TIME</span><span class=err>}</span> <span class=o>=</span> <span class=nb>number</span> <span class=err>}</span> <span class=p>[,...]</span> <span class=o>|</span>
         <span class=k>NO</span> <span class=n>LIMITS</span> <span class=o>|</span> <span class=n>TRACKING</span> <span class=k>ONLY</span><span class=err>}</span> <span class=p>[,...]]</span>
    <span class=p>[</span><span class=k>TO</span> <span class=err>{</span><span class=k>role</span> <span class=p>[,...]</span> <span class=o>|</span> <span class=k>ALL</span> <span class=o>|</span> <span class=k>ALL</span> <span class=k>EXCEPT</span> <span class=k>role</span> <span class=p>[,...]</span><span class=err>}</span><span class=p>]</span>
</code></pre></div> <h3 id=create-quota-example>Exemple<a class=headerlink href=../amp/#create-quota-example title="Permanent link">Â </a></h3> <p>Limiter le nombre maximum de requÃªtes pour l'utilisateur actuel avec 123 requÃªtes en 15 mois contrainte:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=n>QUOTA</span> <span class=n>qA</span> <span class=k>FOR</span> <span class=nb>INTERVAL</span> <span class=mi>15</span> <span class=k>MONTH</span> <span class=k>MAX</span> <span class=n>QUERIES</span> <span class=mi>123</span> <span class=k>TO</span> <span class=k>CURRENT_USER</span>
</code></pre></div> <h2 id=create-settings-profile-statement>CREATE SETTINGS PROFILE<a class=headerlink href=../amp/#create-settings-profile-statement title="Permanent link">Â </a></h2> <p>CrÃ©e un <a href=../../../../operations/access-rights/amp/#settings-profiles-management>les paramÃ¨tres de profil</a> qui peut Ãªtre attribuÃ© Ã  un utilisateur ou un rÃ´le.</p> <h3 id=create-settings-profile-syntax>Syntaxe<a class=headerlink href=../amp/#create-settings-profile-syntax title="Permanent link">Â </a></h3> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=n>SETTINGS</span> <span class=n>PROFILE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=o>|</span> <span class=k>OR</span> <span class=k>REPLACE</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span>
    <span class=p>[</span><span class=n>SETTINGS</span> <span class=k>variable</span> <span class=p>[</span><span class=o>=</span> <span class=n>value</span><span class=p>]</span> <span class=p>[</span><span class=k>MIN</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>min_value</span><span class=p>]</span> <span class=p>[</span><span class=k>MAX</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>max_value</span><span class=p>]</span> <span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span> <span class=o>|</span> <span class=n>INHERIT</span> <span class=s1>'profile_name'</span><span class=p>]</span> <span class=p>[,...]</span>
</code></pre></div> <h1 id=create-settings-profile-syntax>Exemple<a class=headerlink href=../amp/#create-settings-profile-syntax title="Permanent link">Â </a></h1> <p>CrÃ©er l' <code class=syntax>max_memory_usage_profile</code> paramÃ¨tres du profil avec valeur et contraintes pour <code class=syntax>max_memory_usage</code> paramÃ¨tre. L'affecter Ã  <code class=syntax>robin</code>:</p> <div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=n>SETTINGS</span> <span class=n>PROFILE</span> <span class=n>max_memory_usage_profile</span> <span class=n>SETTINGS</span> <span class=n>max_memory_usage</span> <span class=o>=</span> <span class=mi>100000001</span> <span class=k>MIN</span> <span class=mi>90000000</span> <span class=k>MAX</span> <span class=mi>110000000</span> <span class=k>TO</span> <span class=n>robin</span>
</code></pre></div> <p><a href=https://clickhouse.tech/docs/en/query_language/create/ target=_blank>Article Original</a> <!--hide--></p> </div> </div> <div class=row> <div class=col> <div class="alert alert-light my-3"> <p class="float-right mb-0">Rating: RATING_VALUE - RATING_COUNT votes</p> <span class="alert-heading display-6">Article Rating</span> <div id=rating-stars class="display-6 mb-0">RATING_STARS</div> </div> <div id=content-footer class="text-muted pt-3 mb-5"> <div class=float-md-right>Â©2016â€“2020 Yandex LLC</div> <div>Built from <a href=https://github.com/ClickHouse/ClickHouse/commit/b030bfedd7db4603034643fd183cf7784a820193 rel="external nofollow noreferrer" target=_blank class=text-reset>b030bfedd7</a> </div> </div> </div> </div> <div id=to-full-website class="row fixed-bottom text-center bg-white py-3"> <div class=col> <a href=https://clickhouse.tech/docs/fr/sql-reference/statements/create/ class="btn btn-lg btn-outline-orange">To full website</a> </div> </div> </div> <amp-analytics type=metrika> <script type=application/json>{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script> </amp-analytics> </body> </html> 